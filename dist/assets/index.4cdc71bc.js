const zT=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}};zT();function Iv(t,e){const n=Object.create(null),i=t.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return e?r=>!!n[r.toLowerCase()]:r=>!!n[r]}function Be(t){if(vt(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],r=hn(i)?WT(i):Be(i);if(r)for(const s in r)e[s]=r[s]}return e}else{if(hn(t))return t;if(nn(t))return t}}const VT=/;(?![^(]*\))/g,HT=/:([^]+)/,GT=/\/\*.*?\*\//gs;function WT(t){const e={};return t.replace(GT,"").split(VT).forEach(n=>{if(n){const i=n.split(HT);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function $(t){let e="";if(hn(t))e=t;else if(vt(t))for(let n=0;n<t.length;n++){const i=$(t[n]);i&&(e+=i+" ")}else if(nn(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Pw(t){if(!t)return null;let{class:e,style:n}=t;return e&&!hn(e)&&(t.class=$(e)),n&&(t.style=Be(n)),t}const $T="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",XT=Iv($T);function Lw(t){return!!t||t===""}const je=t=>hn(t)?t:t==null?"":vt(t)||nn(t)&&(t.toString===Nw||!St(t.toString))?JSON.stringify(t,Iw,2):String(t),Iw=(t,e)=>e&&e.__v_isRef?Iw(t,e.value):nl(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,r])=>(n[`${i} =>`]=r,n),{})}:Ow(e)?{[`Set(${e.size})`]:[...e.values()]}:nn(e)&&!vt(e)&&!kw(e)?String(e):e,en={},tl=[],ir=()=>{},YT=()=>!1,qT=/^on[^a-z]/,$h=t=>qT.test(t),Ov=t=>t.startsWith("onUpdate:"),Nn=Object.assign,Dv=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},ZT=Object.prototype.hasOwnProperty,Dt=(t,e)=>ZT.call(t,e),vt=Array.isArray,nl=t=>Xh(t)==="[object Map]",Ow=t=>Xh(t)==="[object Set]",St=t=>typeof t=="function",hn=t=>typeof t=="string",Nv=t=>typeof t=="symbol",nn=t=>t!==null&&typeof t=="object",Dw=t=>nn(t)&&St(t.then)&&St(t.catch),Nw=Object.prototype.toString,Xh=t=>Nw.call(t),jT=t=>Xh(t).slice(8,-1),kw=t=>Xh(t)==="[object Object]",kv=t=>hn(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ch=Iv(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Yh=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},KT=/-(\w)/g,_r=Yh(t=>t.replace(KT,(e,n)=>n?n.toUpperCase():"")),JT=/\B([A-Z])/g,uo=Yh(t=>t.replace(JT,"-$1").toLowerCase()),qh=Yh(t=>t.charAt(0).toUpperCase()+t.slice(1)),Zf=Yh(t=>t?`on${qh(t)}`:""),nc=(t,e)=>!Object.is(t,e),dh=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Eh=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},ic=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let l0;const QT=()=>l0||(l0=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let pr;class eE{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=pr,!e&&pr&&(this.index=(pr.scopes||(pr.scopes=[])).push(this)-1)}run(e){if(this.active){const n=pr;try{return pr=this,e()}finally{pr=n}}}on(){pr=this}off(){pr=this.parent}stop(e){if(this.active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this.active=!1}}}function tE(t,e=pr){e&&e.active&&e.effects.push(t)}const Fv=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Fw=t=>(t.w&Vs)>0,Uw=t=>(t.n&Vs)>0,nE=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Vs},iE=t=>{const{deps:e}=t;if(e.length){let n=0;for(let i=0;i<e.length;i++){const r=e[i];Fw(r)&&!Uw(r)?r.delete(t):e[n++]=r,r.w&=~Vs,r.n&=~Vs}e.length=n}},qp=new WeakMap;let Vu=0,Vs=1;const Zp=30;let er;const Oa=Symbol(""),jp=Symbol("");class Uv{constructor(e,n=null,i){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,tE(this,i)}run(){if(!this.active)return this.fn();let e=er,n=Ls;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=er,er=this,Ls=!0,Vs=1<<++Vu,Vu<=Zp?nE(this):u0(this),this.fn()}finally{Vu<=Zp&&iE(this),Vs=1<<--Vu,er=this.parent,Ls=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){er===this?this.deferStop=!0:this.active&&(u0(this),this.onStop&&this.onStop(),this.active=!1)}}function u0(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Ls=!0;const Bw=[];function lu(){Bw.push(Ls),Ls=!1}function uu(){const t=Bw.pop();Ls=t===void 0?!0:t}function Ci(t,e,n){if(Ls&&er){let i=qp.get(t);i||qp.set(t,i=new Map);let r=i.get(n);r||i.set(n,r=Fv()),zw(r)}}function zw(t,e){let n=!1;Vu<=Zp?Uw(t)||(t.n|=Vs,n=!Fw(t)):n=!t.has(er),n&&(t.add(er),er.deps.push(t))}function Yr(t,e,n,i,r,s){const a=qp.get(t);if(!a)return;let o=[];if(e==="clear")o=[...a.values()];else if(n==="length"&&vt(t)){const l=ic(i);a.forEach((u,c)=>{(c==="length"||c>=l)&&o.push(u)})}else switch(n!==void 0&&o.push(a.get(n)),e){case"add":vt(t)?kv(n)&&o.push(a.get("length")):(o.push(a.get(Oa)),nl(t)&&o.push(a.get(jp)));break;case"delete":vt(t)||(o.push(a.get(Oa)),nl(t)&&o.push(a.get(jp)));break;case"set":nl(t)&&o.push(a.get(Oa));break}if(o.length===1)o[0]&&Kp(o[0]);else{const l=[];for(const u of o)u&&l.push(...u);Kp(Fv(l))}}function Kp(t,e){const n=vt(t)?t:[...t];for(const i of n)i.computed&&c0(i);for(const i of n)i.computed||c0(i)}function c0(t,e){(t!==er||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const rE=Iv("__proto__,__v_isRef,__isVue"),Vw=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Nv)),sE=Bv(),aE=Bv(!1,!0),oE=Bv(!0),d0=lE();function lE(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const i=Ot(this);for(let s=0,a=this.length;s<a;s++)Ci(i,"get",s+"");const r=i[e](...n);return r===-1||r===!1?i[e](...n.map(Ot)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){lu();const i=Ot(this)[e].apply(this,n);return uu(),i}}),t}function Bv(t=!1,e=!1){return function(i,r,s){if(r==="__v_isReactive")return!t;if(r==="__v_isReadonly")return t;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&s===(t?e?TE:Xw:e?$w:Ww).get(i))return i;const a=vt(i);if(!t&&a&&Dt(d0,r))return Reflect.get(d0,r,s);const o=Reflect.get(i,r,s);return(Nv(r)?Vw.has(r):rE(r))||(t||Ci(i,"get",r),e)?o:zn(o)?a&&kv(r)?o:o.value:nn(o)?t?Yw(o):tn(o):o}}const uE=Hw(),cE=Hw(!0);function Hw(t=!1){return function(n,i,r,s){let a=n[i];if(Zl(a)&&zn(a)&&!zn(r))return!1;if(!t&&(!xh(r)&&!Zl(r)&&(a=Ot(a),r=Ot(r)),!vt(n)&&zn(a)&&!zn(r)))return a.value=r,!0;const o=vt(n)&&kv(i)?Number(i)<n.length:Dt(n,i),l=Reflect.set(n,i,r,s);return n===Ot(s)&&(o?nc(r,a)&&Yr(n,"set",i,r):Yr(n,"add",i,r)),l}}function dE(t,e){const n=Dt(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&n&&Yr(t,"delete",e,void 0),i}function hE(t,e){const n=Reflect.has(t,e);return(!Nv(e)||!Vw.has(e))&&Ci(t,"has",e),n}function fE(t){return Ci(t,"iterate",vt(t)?"length":Oa),Reflect.ownKeys(t)}const Gw={get:sE,set:uE,deleteProperty:dE,has:hE,ownKeys:fE},pE={get:oE,set(t,e){return!0},deleteProperty(t,e){return!0}},mE=Nn({},Gw,{get:aE,set:cE}),zv=t=>t,Zh=t=>Reflect.getPrototypeOf(t);function ud(t,e,n=!1,i=!1){t=t.__v_raw;const r=Ot(t),s=Ot(e);n||(e!==s&&Ci(r,"get",e),Ci(r,"get",s));const{has:a}=Zh(r),o=i?zv:n?Gv:rc;if(a.call(r,e))return o(t.get(e));if(a.call(r,s))return o(t.get(s));t!==r&&t.get(e)}function cd(t,e=!1){const n=this.__v_raw,i=Ot(n),r=Ot(t);return e||(t!==r&&Ci(i,"has",t),Ci(i,"has",r)),t===r?n.has(t):n.has(t)||n.has(r)}function dd(t,e=!1){return t=t.__v_raw,!e&&Ci(Ot(t),"iterate",Oa),Reflect.get(t,"size",t)}function h0(t){t=Ot(t);const e=Ot(this);return Zh(e).has.call(e,t)||(e.add(t),Yr(e,"add",t,t)),this}function f0(t,e){e=Ot(e);const n=Ot(this),{has:i,get:r}=Zh(n);let s=i.call(n,t);s||(t=Ot(t),s=i.call(n,t));const a=r.call(n,t);return n.set(t,e),s?nc(e,a)&&Yr(n,"set",t,e):Yr(n,"add",t,e),this}function p0(t){const e=Ot(this),{has:n,get:i}=Zh(e);let r=n.call(e,t);r||(t=Ot(t),r=n.call(e,t)),i&&i.call(e,t);const s=e.delete(t);return r&&Yr(e,"delete",t,void 0),s}function m0(){const t=Ot(this),e=t.size!==0,n=t.clear();return e&&Yr(t,"clear",void 0,void 0),n}function hd(t,e){return function(i,r){const s=this,a=s.__v_raw,o=Ot(a),l=e?zv:t?Gv:rc;return!t&&Ci(o,"iterate",Oa),a.forEach((u,c)=>i.call(r,l(u),l(c),s))}}function fd(t,e,n){return function(...i){const r=this.__v_raw,s=Ot(r),a=nl(s),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,u=r[t](...i),c=n?zv:e?Gv:rc;return!e&&Ci(s,"iterate",l?jp:Oa),{next(){const{value:d,done:h}=u.next();return h?{value:d,done:h}:{value:o?[c(d[0]),c(d[1])]:c(d),done:h}},[Symbol.iterator](){return this}}}}function is(t){return function(...e){return t==="delete"?!1:this}}function vE(){const t={get(s){return ud(this,s)},get size(){return dd(this)},has:cd,add:h0,set:f0,delete:p0,clear:m0,forEach:hd(!1,!1)},e={get(s){return ud(this,s,!1,!0)},get size(){return dd(this)},has:cd,add:h0,set:f0,delete:p0,clear:m0,forEach:hd(!1,!0)},n={get(s){return ud(this,s,!0)},get size(){return dd(this,!0)},has(s){return cd.call(this,s,!0)},add:is("add"),set:is("set"),delete:is("delete"),clear:is("clear"),forEach:hd(!0,!1)},i={get(s){return ud(this,s,!0,!0)},get size(){return dd(this,!0)},has(s){return cd.call(this,s,!0)},add:is("add"),set:is("set"),delete:is("delete"),clear:is("clear"),forEach:hd(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=fd(s,!1,!1),n[s]=fd(s,!0,!1),e[s]=fd(s,!1,!0),i[s]=fd(s,!0,!0)}),[t,n,e,i]}const[gE,yE,bE,wE]=vE();function Vv(t,e){const n=e?t?wE:bE:t?yE:gE;return(i,r,s)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?i:Reflect.get(Dt(n,r)&&r in i?n:i,r,s)}const _E={get:Vv(!1,!1)},SE={get:Vv(!1,!0)},ME={get:Vv(!0,!1)},Ww=new WeakMap,$w=new WeakMap,Xw=new WeakMap,TE=new WeakMap;function EE(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xE(t){return t.__v_skip||!Object.isExtensible(t)?0:EE(jT(t))}function tn(t){return Zl(t)?t:Hv(t,!1,Gw,_E,Ww)}function CE(t){return Hv(t,!1,mE,SE,$w)}function Yw(t){return Hv(t,!0,pE,ME,Xw)}function Hv(t,e,n,i,r){if(!nn(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=r.get(t);if(s)return s;const a=xE(t);if(a===0)return t;const o=new Proxy(t,a===2?i:n);return r.set(t,o),o}function il(t){return Zl(t)?il(t.__v_raw):!!(t&&t.__v_isReactive)}function Zl(t){return!!(t&&t.__v_isReadonly)}function xh(t){return!!(t&&t.__v_isShallow)}function qw(t){return il(t)||Zl(t)}function Ot(t){const e=t&&t.__v_raw;return e?Ot(e):t}function Zw(t){return Eh(t,"__v_skip",!0),t}const rc=t=>nn(t)?tn(t):t,Gv=t=>nn(t)?Yw(t):t;function jw(t){Ls&&er&&(t=Ot(t),zw(t.dep||(t.dep=Fv())))}function Kw(t,e){t=Ot(t),t.dep&&Kp(t.dep)}function zn(t){return!!(t&&t.__v_isRef===!0)}function de(t){return Jw(t,!1)}function AE(t){return Jw(t,!0)}function Jw(t,e){return zn(t)?t:new RE(t,e)}class RE{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ot(e),this._value=n?e:rc(e)}get value(){return jw(this),this._value}set value(e){const n=this.__v_isShallow||xh(e)||Zl(e);e=n?e:Ot(e),nc(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:rc(e),Kw(this))}}function rl(t){return zn(t)?t.value:t}const PE={get:(t,e,n)=>rl(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const r=t[e];return zn(r)&&!zn(n)?(r.value=n,!0):Reflect.set(t,e,n,i)}};function Qw(t){return il(t)?t:new Proxy(t,PE)}function LE(t){const e=vt(t)?new Array(t.length):{};for(const n in t)e[n]=OE(t,n);return e}class IE{constructor(e,n,i){this._object=e,this._key=n,this._defaultValue=i,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}}function OE(t,e,n){const i=t[e];return zn(i)?i:new IE(t,e,n)}var e_;class DE{constructor(e,n,i,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[e_]=!1,this._dirty=!0,this.effect=new Uv(e,()=>{this._dirty||(this._dirty=!0,Kw(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const e=Ot(this);return jw(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}e_="__v_isReadonly";function NE(t,e,n=!1){let i,r;const s=St(t);return s?(i=t,r=ir):(i=t.get,r=t.set),new DE(i,r,s||!r,n)}function Is(t,e,n,i){let r;try{r=i?t(...i):t()}catch(s){jh(s,e,n)}return r}function Fi(t,e,n,i){if(St(t)){const s=Is(t,e,n,i);return s&&Dw(s)&&s.catch(a=>{jh(a,e,n)}),s}const r=[];for(let s=0;s<t.length;s++)r.push(Fi(t[s],e,n,i));return r}function jh(t,e,n,i=!0){const r=e?e.vnode:null;if(e){let s=e.parent;const a=e.proxy,o=n;for(;s;){const u=s.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](t,a,o)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){Is(l,null,10,[t,a,o]);return}}kE(t,n,r,i)}function kE(t,e,n,i=!0){console.error(t)}let sc=!1,Jp=!1;const Yn=[];let gr=0;const sl=[];let Br=null,Ma=0;const t_=Promise.resolve();let Wv=null;function rn(t){const e=Wv||t_;return t?e.then(this?t.bind(this):t):e}function FE(t){let e=gr+1,n=Yn.length;for(;e<n;){const i=e+n>>>1;ac(Yn[i])<t?e=i+1:n=i}return e}function $v(t){(!Yn.length||!Yn.includes(t,sc&&t.allowRecurse?gr+1:gr))&&(t.id==null?Yn.push(t):Yn.splice(FE(t.id),0,t),n_())}function n_(){!sc&&!Jp&&(Jp=!0,Wv=t_.then(r_))}function UE(t){const e=Yn.indexOf(t);e>gr&&Yn.splice(e,1)}function BE(t){vt(t)?sl.push(...t):(!Br||!Br.includes(t,t.allowRecurse?Ma+1:Ma))&&sl.push(t),n_()}function v0(t,e=sc?gr+1:0){for(;e<Yn.length;e++){const n=Yn[e];n&&n.pre&&(Yn.splice(e,1),e--,n())}}function i_(t){if(sl.length){const e=[...new Set(sl)];if(sl.length=0,Br){Br.push(...e);return}for(Br=e,Br.sort((n,i)=>ac(n)-ac(i)),Ma=0;Ma<Br.length;Ma++)Br[Ma]();Br=null,Ma=0}}const ac=t=>t.id==null?1/0:t.id,zE=(t,e)=>{const n=ac(t)-ac(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function r_(t){Jp=!1,sc=!0,Yn.sort(zE);const e=ir;try{for(gr=0;gr<Yn.length;gr++){const n=Yn[gr];n&&n.active!==!1&&Is(n,null,14)}}finally{gr=0,Yn.length=0,i_(),sc=!1,Wv=null,(Yn.length||sl.length)&&r_()}}function VE(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||en;let r=n;const s=e.startsWith("update:"),a=s&&e.slice(7);if(a&&a in i){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:d,trim:h}=i[c]||en;h&&(r=n.map(f=>hn(f)?f.trim():f)),d&&(r=n.map(ic))}let o,l=i[o=Zf(e)]||i[o=Zf(_r(e))];!l&&s&&(l=i[o=Zf(uo(e))]),l&&Fi(l,t,6,r);const u=i[o+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,Fi(u,t,6,r)}}function s_(t,e,n=!1){const i=e.emitsCache,r=i.get(t);if(r!==void 0)return r;const s=t.emits;let a={},o=!1;if(!St(t)){const l=u=>{const c=s_(u,e,!0);c&&(o=!0,Nn(a,c))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!o?(nn(t)&&i.set(t,null),null):(vt(s)?s.forEach(l=>a[l]=null):Nn(a,s),nn(t)&&i.set(t,a),a)}function Kh(t,e){return!t||!$h(e)?!1:(e=e.slice(2).replace(/Once$/,""),Dt(t,e[0].toLowerCase()+e.slice(1))||Dt(t,uo(e))||Dt(t,e))}let Vn=null,Jh=null;function Ch(t){const e=Vn;return Vn=t,Jh=t&&t.type.__scopeId||null,e}function Xv(t){Jh=t}function Yv(){Jh=null}function pt(t,e=Vn,n){if(!e||t._n)return t;const i=(...r)=>{i._d&&C0(-1);const s=Ch(e);let a;try{a=t(...r)}finally{Ch(s),i._d&&C0(1)}return a};return i._n=!0,i._c=!0,i._d=!0,i}function jf(t){const{type:e,vnode:n,proxy:i,withProxy:r,props:s,propsOptions:[a],slots:o,attrs:l,emit:u,render:c,renderCache:d,data:h,setupState:f,ctx:m,inheritAttrs:v}=t;let g,y;const S=Ch(t);try{if(n.shapeFlag&4){const w=r||i;g=vr(c.call(w,w,d,s,f,h,m)),y=l}else{const w=e;g=vr(w.length>1?w(s,{attrs:l,slots:o,emit:u}):w(s,null)),y=e.props?l:HE(l)}}catch(w){Yu.length=0,jh(w,t,1),g=We(Ti)}let b=g;if(y&&v!==!1){const w=Object.keys(y),{shapeFlag:E}=b;w.length&&E&7&&(a&&w.some(Ov)&&(y=GE(y,a)),b=Hs(b,y))}return n.dirs&&(b=Hs(b),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&(b.transition=n.transition),g=b,Ch(S),g}const HE=t=>{let e;for(const n in t)(n==="class"||n==="style"||$h(n))&&((e||(e={}))[n]=t[n]);return e},GE=(t,e)=>{const n={};for(const i in t)(!Ov(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function WE(t,e,n){const{props:i,children:r,component:s}=t,{props:a,children:o,patchFlag:l}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?g0(i,a,u):!!a;if(l&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const h=c[d];if(a[h]!==i[h]&&!Kh(u,h))return!0}}}else return(r||o)&&(!o||!o.$stable)?!0:i===a?!1:i?a?g0(i,a,u):!0:!!a;return!1}function g0(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(e[s]!==t[s]&&!Kh(n,s))return!0}return!1}function $E({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const XE=t=>t.__isSuspense;function YE(t,e){e&&e.pendingBranch?vt(t)?e.effects.push(...t):e.effects.push(t):BE(t)}function al(t,e){if(On){let n=On.provides;const i=On.parent&&On.parent.provides;i===n&&(n=On.provides=Object.create(i)),n[t]=e}}function Mi(t,e,n=!1){const i=On||Vn;if(i){const r=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(r&&t in r)return r[t];if(arguments.length>1)return n&&St(e)?e.call(i.proxy):e}}const pd={};function Ke(t,e,n){return a_(t,e,n)}function a_(t,e,{immediate:n,deep:i,flush:r,onTrack:s,onTrigger:a}=en){const o=On;let l,u=!1,c=!1;if(zn(t)?(l=()=>t.value,u=xh(t)):il(t)?(l=()=>t,i=!0):vt(t)?(c=!0,u=t.some(b=>il(b)||xh(b)),l=()=>t.map(b=>{if(zn(b))return b.value;if(il(b))return Aa(b);if(St(b))return Is(b,o,2)})):St(t)?e?l=()=>Is(t,o,2):l=()=>{if(!(o&&o.isUnmounted))return d&&d(),Fi(t,o,3,[h])}:l=ir,e&&i){const b=l;l=()=>Aa(b())}let d,h=b=>{d=y.onStop=()=>{Is(b,o,4)}},f;if(cc)if(h=ir,e?n&&Fi(e,o,3,[l(),c?[]:void 0,h]):l(),r==="sync"){const b=Dx();f=b.__watcherHandles||(b.__watcherHandles=[])}else return ir;let m=c?new Array(t.length).fill(pd):pd;const v=()=>{if(!!y.active)if(e){const b=y.run();(i||u||(c?b.some((w,E)=>nc(w,m[E])):nc(b,m)))&&(d&&d(),Fi(e,o,3,[b,m===pd?void 0:c&&m[0]===pd?[]:m,h]),m=b)}else y.run()};v.allowRecurse=!!e;let g;r==="sync"?g=v:r==="post"?g=()=>oi(v,o&&o.suspense):(v.pre=!0,o&&(v.id=o.uid),g=()=>$v(v));const y=new Uv(l,g);e?n?v():m=y.run():r==="post"?oi(y.run.bind(y),o&&o.suspense):y.run();const S=()=>{y.stop(),o&&o.scope&&Dv(o.scope.effects,y)};return f&&f.push(S),S}function qE(t,e,n){const i=this.proxy,r=hn(t)?t.includes(".")?o_(i,t):()=>i[t]:t.bind(i,i);let s;St(e)?s=e:(s=e.handler,n=e);const a=On;jl(this);const o=a_(r,s.bind(i),n);return a?jl(a):Da(),o}function o_(t,e){const n=e.split(".");return()=>{let i=t;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}function Aa(t,e){if(!nn(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),zn(t))Aa(t.value,e);else if(vt(t))for(let n=0;n<t.length;n++)Aa(t[n],e);else if(Ow(t)||nl(t))t.forEach(n=>{Aa(n,e)});else if(kw(t))for(const n in t)Aa(t[n],e);return t}function l_(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return fn(()=>{t.isMounted=!0}),kc(()=>{t.isUnmounting=!0}),t}const Li=[Function,Array],ZE={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Li,onEnter:Li,onAfterEnter:Li,onEnterCancelled:Li,onBeforeLeave:Li,onLeave:Li,onAfterLeave:Li,onLeaveCancelled:Li,onBeforeAppear:Li,onAppear:Li,onAfterAppear:Li,onAppearCancelled:Li},setup(t,{slots:e}){const n=co(),i=l_();let r;return()=>{const s=e.default&&qv(e.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){for(const v of s)if(v.type!==Ti){a=v;break}}const o=Ot(t),{mode:l}=o;if(i.isLeaving)return Kf(a);const u=y0(a);if(!u)return Kf(a);const c=oc(u,o,i,n);lc(u,c);const d=n.subTree,h=d&&y0(d);let f=!1;const{getTransitionKey:m}=u.type;if(m){const v=m();r===void 0?r=v:v!==r&&(r=v,f=!0)}if(h&&h.type!==Ti&&(!Ta(u,h)||f)){const v=oc(h,o,i,n);if(lc(h,v),l==="out-in")return i.isLeaving=!0,v.afterLeave=()=>{i.isLeaving=!1,n.update.active!==!1&&n.update()},Kf(a);l==="in-out"&&u.type!==Ti&&(v.delayLeave=(g,y,S)=>{const b=c_(i,h);b[String(h.key)]=h,g._leaveCb=()=>{y(),g._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=S})}return a}}},u_=ZE;function c_(t,e){const{leavingVNodes:n}=t;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function oc(t,e,n,i){const{appear:r,mode:s,persisted:a=!1,onBeforeEnter:o,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:d,onLeave:h,onAfterLeave:f,onLeaveCancelled:m,onBeforeAppear:v,onAppear:g,onAfterAppear:y,onAppearCancelled:S}=e,b=String(t.key),w=c_(n,t),E=(_,R)=>{_&&Fi(_,i,9,R)},T=(_,R)=>{const L=R[1];E(_,R),vt(_)?_.every(k=>k.length<=1)&&L():_.length<=1&&L()},I={mode:s,persisted:a,beforeEnter(_){let R=o;if(!n.isMounted)if(r)R=v||o;else return;_._leaveCb&&_._leaveCb(!0);const L=w[b];L&&Ta(t,L)&&L.el._leaveCb&&L.el._leaveCb(),E(R,[_])},enter(_){let R=l,L=u,k=c;if(!n.isMounted)if(r)R=g||l,L=y||u,k=S||c;else return;let F=!1;const G=_._enterCb=H=>{F||(F=!0,H?E(k,[_]):E(L,[_]),I.delayedLeave&&I.delayedLeave(),_._enterCb=void 0)};R?T(R,[_,G]):G()},leave(_,R){const L=String(t.key);if(_._enterCb&&_._enterCb(!0),n.isUnmounting)return R();E(d,[_]);let k=!1;const F=_._leaveCb=G=>{k||(k=!0,R(),G?E(m,[_]):E(f,[_]),_._leaveCb=void 0,w[L]===t&&delete w[L])};w[L]=t,h?T(h,[_,F]):F()},clone(_){return oc(_,e,n,i)}};return I}function Kf(t){if(Qh(t))return t=Hs(t),t.children=null,t}function y0(t){return Qh(t)?t.children?t.children[0]:void 0:t}function lc(t,e){t.shapeFlag&6&&t.component?lc(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function qv(t,e=!1,n){let i=[],r=0;for(let s=0;s<t.length;s++){let a=t[s];const o=n==null?a.key:String(n)+String(a.key!=null?a.key:s);a.type===At?(a.patchFlag&128&&r++,i=i.concat(qv(a.children,e,o))):(e||a.type!==Ti)&&i.push(o!=null?Hs(a,{key:o}):a)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function tt(t){return St(t)?{setup:t,name:t.name}:t}const Wu=t=>!!t.type.__asyncLoader,Qh=t=>t.type.__isKeepAlive;function ef(t,e){d_(t,"a",e)}function tf(t,e){d_(t,"da",e)}function d_(t,e,n=On){const i=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(nf(e,i,n),n){let r=n.parent;for(;r&&r.parent;)Qh(r.parent.vnode)&&jE(i,e,n,r),r=r.parent}}function jE(t,e,n,i){const r=nf(e,t,i,!0);Cr(()=>{Dv(i[e],r)},n)}function nf(t,e,n=On,i=!1){if(n){const r=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...a)=>{if(n.isUnmounted)return;lu(),jl(n);const o=Fi(e,n,t,a);return Da(),uu(),o});return i?r.unshift(s):r.push(s),s}}const Kr=t=>(e,n=On)=>(!cc||t==="sp")&&nf(t,(...i)=>e(...i),n),h_=Kr("bm"),fn=Kr("m"),KE=Kr("bu"),Nc=Kr("u"),kc=Kr("bum"),Cr=Kr("um"),JE=Kr("sp"),QE=Kr("rtg"),ex=Kr("rtc");function tx(t,e=On){nf("ec",t,e)}function Zt(t,e){const n=Vn;if(n===null)return t;const i=lf(n)||n.proxy,r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[a,o,l,u=en]=e[s];a&&(St(a)&&(a={mounted:a,updated:a}),a.deep&&Aa(o),r.push({dir:a,instance:i,value:o,oldValue:void 0,arg:l,modifiers:u}))}return t}function ua(t,e,n,i){const r=t.dirs,s=e&&e.dirs;for(let a=0;a<r.length;a++){const o=r[a];s&&(o.oldValue=s[a].value);let l=o.dir[i];l&&(lu(),Fi(l,n,8,[t.el,o,t,e]),uu())}}const Zv="components",nx="directives";function Je(t,e){return jv(Zv,t,!0,e)||t}const f_=Symbol();function rf(t){return hn(t)?jv(Zv,t,!1)||t:t||f_}function jn(t){return jv(nx,t)}function jv(t,e,n=!0,i=!1){const r=Vn||On;if(r){const s=r.type;if(t===Zv){const o=Lx(s,!1);if(o&&(o===e||o===_r(e)||o===qh(_r(e))))return s}const a=b0(r[t]||s[t],e)||b0(r.appContext[t],e);return!a&&i?s:a}}function b0(t,e){return t&&(t[e]||t[_r(e)]||t[qh(_r(e))])}function bn(t,e,n,i){let r;const s=n&&n[i];if(vt(t)||hn(t)){r=new Array(t.length);for(let a=0,o=t.length;a<o;a++)r[a]=e(t[a],a,void 0,s&&s[a])}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,s&&s[a])}else if(nn(t))if(t[Symbol.iterator])r=Array.from(t,(a,o)=>e(a,o,void 0,s&&s[o]));else{const a=Object.keys(t);r=new Array(a.length);for(let o=0,l=a.length;o<l;o++){const u=a[o];r[o]=e(t[u],u,o,s&&s[o])}}else r=[];return n&&(n[i]=r),r}function Ue(t,e,n={},i,r){if(Vn.isCE||Vn.parent&&Wu(Vn.parent)&&Vn.parent.isCE)return e!=="default"&&(n.name=e),We("slot",n,i&&i());let s=t[e];s&&s._c&&(s._d=!1),ie();const a=s&&p_(s(n)),o=Mt(At,{key:n.key||a&&a.key||`_${e}`},a||(i?i():[]),a&&t._===1?64:-2);return!r&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),s&&s._c&&(s._d=!0),o}function p_(t){return t.some(e=>ja(e)?!(e.type===Ti||e.type===At&&!p_(e.children)):!0)?t:null}const Qp=t=>t?x_(t)?lf(t)||t.proxy:Qp(t.parent):null,$u=Nn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Qp(t.parent),$root:t=>Qp(t.root),$emit:t=>t.emit,$options:t=>Kv(t),$forceUpdate:t=>t.f||(t.f=()=>$v(t.update)),$nextTick:t=>t.n||(t.n=rn.bind(t.proxy)),$watch:t=>qE.bind(t)}),Jf=(t,e)=>t!==en&&!t.__isScriptSetup&&Dt(t,e),ix={get({_:t},e){const{ctx:n,setupState:i,data:r,props:s,accessCache:a,type:o,appContext:l}=t;let u;if(e[0]!=="$"){const f=a[e];if(f!==void 0)switch(f){case 1:return i[e];case 2:return r[e];case 4:return n[e];case 3:return s[e]}else{if(Jf(i,e))return a[e]=1,i[e];if(r!==en&&Dt(r,e))return a[e]=2,r[e];if((u=t.propsOptions[0])&&Dt(u,e))return a[e]=3,s[e];if(n!==en&&Dt(n,e))return a[e]=4,n[e];em&&(a[e]=0)}}const c=$u[e];let d,h;if(c)return e==="$attrs"&&Ci(t,"get",e),c(t);if((d=o.__cssModules)&&(d=d[e]))return d;if(n!==en&&Dt(n,e))return a[e]=4,n[e];if(h=l.config.globalProperties,Dt(h,e))return h[e]},set({_:t},e,n){const{data:i,setupState:r,ctx:s}=t;return Jf(r,e)?(r[e]=n,!0):i!==en&&Dt(i,e)?(i[e]=n,!0):Dt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:r,propsOptions:s}},a){let o;return!!n[a]||t!==en&&Dt(t,a)||Jf(e,a)||(o=s[0])&&Dt(o,a)||Dt(i,a)||Dt($u,a)||Dt(r.config.globalProperties,a)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Dt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let em=!0;function rx(t){const e=Kv(t),n=t.proxy,i=t.ctx;em=!1,e.beforeCreate&&w0(e.beforeCreate,t,"bc");const{data:r,computed:s,methods:a,watch:o,provide:l,inject:u,created:c,beforeMount:d,mounted:h,beforeUpdate:f,updated:m,activated:v,deactivated:g,beforeDestroy:y,beforeUnmount:S,destroyed:b,unmounted:w,render:E,renderTracked:T,renderTriggered:I,errorCaptured:_,serverPrefetch:R,expose:L,inheritAttrs:k,components:F,directives:G,filters:H}=e;if(u&&sx(u,i,null,t.appContext.config.unwrapInjectedRef),a)for(const re in a){const j=a[re];St(j)&&(i[re]=j.bind(n))}if(r){const re=r.call(n,n);nn(re)&&(t.data=tn(re))}if(em=!0,s)for(const re in s){const j=s[re],Z=St(j)?j.bind(n,n):St(j.get)?j.get.bind(n,n):ir,z=!St(j)&&St(j.set)?j.set.bind(n):ir,ee=Le({get:Z,set:z});Object.defineProperty(i,re,{enumerable:!0,configurable:!0,get:()=>ee.value,set:Q=>ee.value=Q})}if(o)for(const re in o)m_(o[re],i,n,re);if(l){const re=St(l)?l.call(n):l;Reflect.ownKeys(re).forEach(j=>{al(j,re[j])})}c&&w0(c,t,"c");function V(re,j){vt(j)?j.forEach(Z=>re(Z.bind(n))):j&&re(j.bind(n))}if(V(h_,d),V(fn,h),V(KE,f),V(Nc,m),V(ef,v),V(tf,g),V(tx,_),V(ex,T),V(QE,I),V(kc,S),V(Cr,w),V(JE,R),vt(L))if(L.length){const re=t.exposed||(t.exposed={});L.forEach(j=>{Object.defineProperty(re,j,{get:()=>n[j],set:Z=>n[j]=Z})})}else t.exposed||(t.exposed={});E&&t.render===ir&&(t.render=E),k!=null&&(t.inheritAttrs=k),F&&(t.components=F),G&&(t.directives=G)}function sx(t,e,n=ir,i=!1){vt(t)&&(t=tm(t));for(const r in t){const s=t[r];let a;nn(s)?"default"in s?a=Mi(s.from||r,s.default,!0):a=Mi(s.from||r):a=Mi(s),zn(a)&&i?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):e[r]=a}}function w0(t,e,n){Fi(vt(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function m_(t,e,n,i){const r=i.includes(".")?o_(n,i):()=>n[i];if(hn(t)){const s=e[t];St(s)&&Ke(r,s)}else if(St(t))Ke(r,t.bind(n));else if(nn(t))if(vt(t))t.forEach(s=>m_(s,e,n,i));else{const s=St(t.handler)?t.handler.bind(n):e[t.handler];St(s)&&Ke(r,s,t)}}function Kv(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,o=s.get(e);let l;return o?l=o:!r.length&&!n&&!i?l=e:(l={},r.length&&r.forEach(u=>Ah(l,u,a,!0)),Ah(l,e,a)),nn(e)&&s.set(e,l),l}function Ah(t,e,n,i=!1){const{mixins:r,extends:s}=e;s&&Ah(t,s,n,!0),r&&r.forEach(a=>Ah(t,a,n,!0));for(const a in e)if(!(i&&a==="expose")){const o=ax[a]||n&&n[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const ax={data:_0,props:_a,emits:_a,methods:_a,computed:_a,beforeCreate:ti,created:ti,beforeMount:ti,mounted:ti,beforeUpdate:ti,updated:ti,beforeDestroy:ti,beforeUnmount:ti,destroyed:ti,unmounted:ti,activated:ti,deactivated:ti,errorCaptured:ti,serverPrefetch:ti,components:_a,directives:_a,watch:lx,provide:_0,inject:ox};function _0(t,e){return e?t?function(){return Nn(St(t)?t.call(this,this):t,St(e)?e.call(this,this):e)}:e:t}function ox(t,e){return _a(tm(t),tm(e))}function tm(t){if(vt(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function ti(t,e){return t?[...new Set([].concat(t,e))]:e}function _a(t,e){return t?Nn(Nn(Object.create(null),t),e):e}function lx(t,e){if(!t)return e;if(!e)return t;const n=Nn(Object.create(null),t);for(const i in e)n[i]=ti(t[i],e[i]);return n}function ux(t,e,n,i=!1){const r={},s={};Eh(s,of,1),t.propsDefaults=Object.create(null),v_(t,e,r,s);for(const a in t.propsOptions[0])a in r||(r[a]=void 0);n?t.props=i?r:CE(r):t.type.props?t.props=r:t.props=s,t.attrs=s}function cx(t,e,n,i){const{props:r,attrs:s,vnode:{patchFlag:a}}=t,o=Ot(r),[l]=t.propsOptions;let u=!1;if((i||a>0)&&!(a&16)){if(a&8){const c=t.vnode.dynamicProps;for(let d=0;d<c.length;d++){let h=c[d];if(Kh(t.emitsOptions,h))continue;const f=e[h];if(l)if(Dt(s,h))f!==s[h]&&(s[h]=f,u=!0);else{const m=_r(h);r[m]=nm(l,o,m,f,t,!1)}else f!==s[h]&&(s[h]=f,u=!0)}}}else{v_(t,e,r,s)&&(u=!0);let c;for(const d in o)(!e||!Dt(e,d)&&((c=uo(d))===d||!Dt(e,c)))&&(l?n&&(n[d]!==void 0||n[c]!==void 0)&&(r[d]=nm(l,o,d,void 0,t,!0)):delete r[d]);if(s!==o)for(const d in s)(!e||!Dt(e,d)&&!0)&&(delete s[d],u=!0)}u&&Yr(t,"set","$attrs")}function v_(t,e,n,i){const[r,s]=t.propsOptions;let a=!1,o;if(e)for(let l in e){if(ch(l))continue;const u=e[l];let c;r&&Dt(r,c=_r(l))?!s||!s.includes(c)?n[c]=u:(o||(o={}))[c]=u:Kh(t.emitsOptions,l)||(!(l in i)||u!==i[l])&&(i[l]=u,a=!0)}if(s){const l=Ot(n),u=o||en;for(let c=0;c<s.length;c++){const d=s[c];n[d]=nm(r,l,d,u[d],t,!Dt(u,d))}}return a}function nm(t,e,n,i,r,s){const a=t[n];if(a!=null){const o=Dt(a,"default");if(o&&i===void 0){const l=a.default;if(a.type!==Function&&St(l)){const{propsDefaults:u}=r;n in u?i=u[n]:(jl(r),i=u[n]=l.call(null,e),Da())}else i=l}a[0]&&(s&&!o?i=!1:a[1]&&(i===""||i===uo(n))&&(i=!0))}return i}function g_(t,e,n=!1){const i=e.propsCache,r=i.get(t);if(r)return r;const s=t.props,a={},o=[];let l=!1;if(!St(t)){const c=d=>{l=!0;const[h,f]=g_(d,e,!0);Nn(a,h),f&&o.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!s&&!l)return nn(t)&&i.set(t,tl),tl;if(vt(s))for(let c=0;c<s.length;c++){const d=_r(s[c]);S0(d)&&(a[d]=en)}else if(s)for(const c in s){const d=_r(c);if(S0(d)){const h=s[c],f=a[d]=vt(h)||St(h)?{type:h}:Object.assign({},h);if(f){const m=E0(Boolean,f.type),v=E0(String,f.type);f[0]=m>-1,f[1]=v<0||m<v,(m>-1||Dt(f,"default"))&&o.push(d)}}}const u=[a,o];return nn(t)&&i.set(t,u),u}function S0(t){return t[0]!=="$"}function M0(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function T0(t,e){return M0(t)===M0(e)}function E0(t,e){return vt(e)?e.findIndex(n=>T0(n,t)):St(e)&&T0(e,t)?0:-1}const y_=t=>t[0]==="_"||t==="$stable",Jv=t=>vt(t)?t.map(vr):[vr(t)],dx=(t,e,n)=>{if(e._n)return e;const i=pt((...r)=>Jv(e(...r)),n);return i._c=!1,i},b_=(t,e,n)=>{const i=t._ctx;for(const r in t){if(y_(r))continue;const s=t[r];if(St(s))e[r]=dx(r,s,i);else if(s!=null){const a=Jv(s);e[r]=()=>a}}},w_=(t,e)=>{const n=Jv(e);t.slots.default=()=>n},hx=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Ot(e),Eh(e,"_",n)):b_(e,t.slots={})}else t.slots={},e&&w_(t,e);Eh(t.slots,of,1)},fx=(t,e,n)=>{const{vnode:i,slots:r}=t;let s=!0,a=en;if(i.shapeFlag&32){const o=e._;o?n&&o===1?s=!1:(Nn(r,e),!n&&o===1&&delete r._):(s=!e.$stable,b_(e,r)),a=e}else e&&(w_(t,e),a={default:1});if(s)for(const o in r)!y_(o)&&!(o in a)&&delete r[o]};function __(){return{app:null,config:{isNativeTag:YT,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let px=0;function mx(t,e){return function(i,r=null){St(i)||(i=Object.assign({},i)),r!=null&&!nn(r)&&(r=null);const s=__(),a=new Set;let o=!1;const l=s.app={_uid:px++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:Nx,get config(){return s.config},set config(u){},use(u,...c){return a.has(u)||(u&&St(u.install)?(a.add(u),u.install(l,...c)):St(u)&&(a.add(u),u(l,...c))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,c){return c?(s.components[u]=c,l):s.components[u]},directive(u,c){return c?(s.directives[u]=c,l):s.directives[u]},mount(u,c,d){if(!o){const h=We(i,r);return h.appContext=s,c&&e?e(h,u):t(h,u,d),o=!0,l._container=u,u.__vue_app__=l,lf(h.component)||h.component.proxy}},unmount(){o&&(t(null,l._container),delete l._container.__vue_app__)},provide(u,c){return s.provides[u]=c,l}};return l}}function im(t,e,n,i,r=!1){if(vt(t)){t.forEach((h,f)=>im(h,e&&(vt(e)?e[f]:e),n,i,r));return}if(Wu(i)&&!r)return;const s=i.shapeFlag&4?lf(i.component)||i.component.proxy:i.el,a=r?null:s,{i:o,r:l}=t,u=e&&e.r,c=o.refs===en?o.refs={}:o.refs,d=o.setupState;if(u!=null&&u!==l&&(hn(u)?(c[u]=null,Dt(d,u)&&(d[u]=null)):zn(u)&&(u.value=null)),St(l))Is(l,o,12,[a,c]);else{const h=hn(l),f=zn(l);if(h||f){const m=()=>{if(t.f){const v=h?Dt(d,l)?d[l]:c[l]:l.value;r?vt(v)&&Dv(v,s):vt(v)?v.includes(s)||v.push(s):h?(c[l]=[s],Dt(d,l)&&(d[l]=c[l])):(l.value=[s],t.k&&(c[t.k]=l.value))}else h?(c[l]=a,Dt(d,l)&&(d[l]=a)):f&&(l.value=a,t.k&&(c[t.k]=a))};a?(m.id=-1,oi(m,n)):m()}}}const oi=YE;function vx(t){return gx(t)}function gx(t,e){const n=QT();n.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:a,createText:o,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:h,setScopeId:f=ir,insertStaticContent:m}=t,v=(N,B,te,ue=null,ce=null,ae=null,me=!1,le=null,Se=!!B.dynamicChildren)=>{if(N===B)return;N&&!Ta(N,B)&&(ue=_e(N),Q(N,ce,ae,!0),N=null),B.patchFlag===-2&&(Se=!1,B.dynamicChildren=null);const{type:ve,ref:U,shapeFlag:D}=B;switch(ve){case af:g(N,B,te,ue);break;case Ti:y(N,B,te,ue);break;case Qf:N==null&&S(B,te,ue,me);break;case At:F(N,B,te,ue,ce,ae,me,le,Se);break;default:D&1?E(N,B,te,ue,ce,ae,me,le,Se):D&6?G(N,B,te,ue,ce,ae,me,le,Se):(D&64||D&128)&&ve.process(N,B,te,ue,ce,ae,me,le,Se,ze)}U!=null&&ce&&im(U,N&&N.ref,ae,B||N,!B)},g=(N,B,te,ue)=>{if(N==null)i(B.el=o(B.children),te,ue);else{const ce=B.el=N.el;B.children!==N.children&&u(ce,B.children)}},y=(N,B,te,ue)=>{N==null?i(B.el=l(B.children||""),te,ue):B.el=N.el},S=(N,B,te,ue)=>{[N.el,N.anchor]=m(N.children,B,te,ue,N.el,N.anchor)},b=({el:N,anchor:B},te,ue)=>{let ce;for(;N&&N!==B;)ce=h(N),i(N,te,ue),N=ce;i(B,te,ue)},w=({el:N,anchor:B})=>{let te;for(;N&&N!==B;)te=h(N),r(N),N=te;r(B)},E=(N,B,te,ue,ce,ae,me,le,Se)=>{me=me||B.type==="svg",N==null?T(B,te,ue,ce,ae,me,le,Se):R(N,B,ce,ae,me,le,Se)},T=(N,B,te,ue,ce,ae,me,le)=>{let Se,ve;const{type:U,props:D,shapeFlag:se,transition:be,dirs:Re}=N;if(Se=N.el=a(N.type,ae,D&&D.is,D),se&8?c(Se,N.children):se&16&&_(N.children,Se,null,ue,ce,ae&&U!=="foreignObject",me,le),Re&&ua(N,null,ue,"created"),D){for(const Xe in D)Xe!=="value"&&!ch(Xe)&&s(Se,Xe,null,D[Xe],ae,N.children,ue,ce,X);"value"in D&&s(Se,"value",null,D.value),(ve=D.onVnodeBeforeMount)&&fr(ve,ue,N)}I(Se,N,N.scopeId,me,ue),Re&&ua(N,null,ue,"beforeMount");const Fe=(!ce||ce&&!ce.pendingBranch)&&be&&!be.persisted;Fe&&be.beforeEnter(Se),i(Se,B,te),((ve=D&&D.onVnodeMounted)||Fe||Re)&&oi(()=>{ve&&fr(ve,ue,N),Fe&&be.enter(Se),Re&&ua(N,null,ue,"mounted")},ce)},I=(N,B,te,ue,ce)=>{if(te&&f(N,te),ue)for(let ae=0;ae<ue.length;ae++)f(N,ue[ae]);if(ce){let ae=ce.subTree;if(B===ae){const me=ce.vnode;I(N,me,me.scopeId,me.slotScopeIds,ce.parent)}}},_=(N,B,te,ue,ce,ae,me,le,Se=0)=>{for(let ve=Se;ve<N.length;ve++){const U=N[ve]=le?vs(N[ve]):vr(N[ve]);v(null,U,B,te,ue,ce,ae,me,le)}},R=(N,B,te,ue,ce,ae,me)=>{const le=B.el=N.el;let{patchFlag:Se,dynamicChildren:ve,dirs:U}=B;Se|=N.patchFlag&16;const D=N.props||en,se=B.props||en;let be;te&&ca(te,!1),(be=se.onVnodeBeforeUpdate)&&fr(be,te,B,N),U&&ua(B,N,te,"beforeUpdate"),te&&ca(te,!0);const Re=ce&&B.type!=="foreignObject";if(ve?L(N.dynamicChildren,ve,le,te,ue,Re,ae):me||j(N,B,le,null,te,ue,Re,ae,!1),Se>0){if(Se&16)k(le,B,D,se,te,ue,ce);else if(Se&2&&D.class!==se.class&&s(le,"class",null,se.class,ce),Se&4&&s(le,"style",D.style,se.style,ce),Se&8){const Fe=B.dynamicProps;for(let Xe=0;Xe<Fe.length;Xe++){const Ve=Fe[Xe],we=D[Ve],rt=se[Ve];(rt!==we||Ve==="value")&&s(le,Ve,we,rt,ce,N.children,te,ue,X)}}Se&1&&N.children!==B.children&&c(le,B.children)}else!me&&ve==null&&k(le,B,D,se,te,ue,ce);((be=se.onVnodeUpdated)||U)&&oi(()=>{be&&fr(be,te,B,N),U&&ua(B,N,te,"updated")},ue)},L=(N,B,te,ue,ce,ae,me)=>{for(let le=0;le<B.length;le++){const Se=N[le],ve=B[le],U=Se.el&&(Se.type===At||!Ta(Se,ve)||Se.shapeFlag&70)?d(Se.el):te;v(Se,ve,U,null,ue,ce,ae,me,!0)}},k=(N,B,te,ue,ce,ae,me)=>{if(te!==ue){if(te!==en)for(const le in te)!ch(le)&&!(le in ue)&&s(N,le,te[le],null,me,B.children,ce,ae,X);for(const le in ue){if(ch(le))continue;const Se=ue[le],ve=te[le];Se!==ve&&le!=="value"&&s(N,le,ve,Se,me,B.children,ce,ae,X)}"value"in ue&&s(N,"value",te.value,ue.value)}},F=(N,B,te,ue,ce,ae,me,le,Se)=>{const ve=B.el=N?N.el:o(""),U=B.anchor=N?N.anchor:o("");let{patchFlag:D,dynamicChildren:se,slotScopeIds:be}=B;be&&(le=le?le.concat(be):be),N==null?(i(ve,te,ue),i(U,te,ue),_(B.children,te,U,ce,ae,me,le,Se)):D>0&&D&64&&se&&N.dynamicChildren?(L(N.dynamicChildren,se,te,ce,ae,me,le),(B.key!=null||ce&&B===ce.subTree)&&Qv(N,B,!0)):j(N,B,te,U,ce,ae,me,le,Se)},G=(N,B,te,ue,ce,ae,me,le,Se)=>{B.slotScopeIds=le,N==null?B.shapeFlag&512?ce.ctx.activate(B,te,ue,me,Se):H(B,te,ue,ce,ae,me,Se):J(N,B,Se)},H=(N,B,te,ue,ce,ae,me)=>{const le=N.component=xx(N,ue,ce);if(Qh(N)&&(le.ctx.renderer=ze),Cx(le),le.asyncDep){if(ce&&ce.registerDep(le,V),!N.el){const Se=le.subTree=We(Ti);y(null,Se,B,te)}return}V(le,N,B,te,ce,ae,me)},J=(N,B,te)=>{const ue=B.component=N.component;if(WE(N,B,te))if(ue.asyncDep&&!ue.asyncResolved){re(ue,B,te);return}else ue.next=B,UE(ue.update),ue.update();else B.el=N.el,ue.vnode=B},V=(N,B,te,ue,ce,ae,me)=>{const le=()=>{if(N.isMounted){let{next:U,bu:D,u:se,parent:be,vnode:Re}=N,Fe=U,Xe;ca(N,!1),U?(U.el=Re.el,re(N,U,me)):U=Re,D&&dh(D),(Xe=U.props&&U.props.onVnodeBeforeUpdate)&&fr(Xe,be,U,Re),ca(N,!0);const Ve=jf(N),we=N.subTree;N.subTree=Ve,v(we,Ve,d(we.el),_e(we),N,ce,ae),U.el=Ve.el,Fe===null&&$E(N,Ve.el),se&&oi(se,ce),(Xe=U.props&&U.props.onVnodeUpdated)&&oi(()=>fr(Xe,be,U,Re),ce)}else{let U;const{el:D,props:se}=B,{bm:be,m:Re,parent:Fe}=N,Xe=Wu(B);if(ca(N,!1),be&&dh(be),!Xe&&(U=se&&se.onVnodeBeforeMount)&&fr(U,Fe,B),ca(N,!0),D&&Ge){const Ve=()=>{N.subTree=jf(N),Ge(D,N.subTree,N,ce,null)};Xe?B.type.__asyncLoader().then(()=>!N.isUnmounted&&Ve()):Ve()}else{const Ve=N.subTree=jf(N);v(null,Ve,te,ue,N,ce,ae),B.el=Ve.el}if(Re&&oi(Re,ce),!Xe&&(U=se&&se.onVnodeMounted)){const Ve=B;oi(()=>fr(U,Fe,Ve),ce)}(B.shapeFlag&256||Fe&&Wu(Fe.vnode)&&Fe.vnode.shapeFlag&256)&&N.a&&oi(N.a,ce),N.isMounted=!0,B=te=ue=null}},Se=N.effect=new Uv(le,()=>$v(ve),N.scope),ve=N.update=()=>Se.run();ve.id=N.uid,ca(N,!0),ve()},re=(N,B,te)=>{B.component=N;const ue=N.vnode.props;N.vnode=B,N.next=null,cx(N,B.props,ue,te),fx(N,B.children,te),lu(),v0(),uu()},j=(N,B,te,ue,ce,ae,me,le,Se=!1)=>{const ve=N&&N.children,U=N?N.shapeFlag:0,D=B.children,{patchFlag:se,shapeFlag:be}=B;if(se>0){if(se&128){z(ve,D,te,ue,ce,ae,me,le,Se);return}else if(se&256){Z(ve,D,te,ue,ce,ae,me,le,Se);return}}be&8?(U&16&&X(ve,ce,ae),D!==ve&&c(te,D)):U&16?be&16?z(ve,D,te,ue,ce,ae,me,le,Se):X(ve,ce,ae,!0):(U&8&&c(te,""),be&16&&_(D,te,ue,ce,ae,me,le,Se))},Z=(N,B,te,ue,ce,ae,me,le,Se)=>{N=N||tl,B=B||tl;const ve=N.length,U=B.length,D=Math.min(ve,U);let se;for(se=0;se<D;se++){const be=B[se]=Se?vs(B[se]):vr(B[se]);v(N[se],be,te,null,ce,ae,me,le,Se)}ve>U?X(N,ce,ae,!0,!1,D):_(B,te,ue,ce,ae,me,le,Se,D)},z=(N,B,te,ue,ce,ae,me,le,Se)=>{let ve=0;const U=B.length;let D=N.length-1,se=U-1;for(;ve<=D&&ve<=se;){const be=N[ve],Re=B[ve]=Se?vs(B[ve]):vr(B[ve]);if(Ta(be,Re))v(be,Re,te,null,ce,ae,me,le,Se);else break;ve++}for(;ve<=D&&ve<=se;){const be=N[D],Re=B[se]=Se?vs(B[se]):vr(B[se]);if(Ta(be,Re))v(be,Re,te,null,ce,ae,me,le,Se);else break;D--,se--}if(ve>D){if(ve<=se){const be=se+1,Re=be<U?B[be].el:ue;for(;ve<=se;)v(null,B[ve]=Se?vs(B[ve]):vr(B[ve]),te,Re,ce,ae,me,le,Se),ve++}}else if(ve>se)for(;ve<=D;)Q(N[ve],ce,ae,!0),ve++;else{const be=ve,Re=ve,Fe=new Map;for(ve=Re;ve<=se;ve++){const Ze=B[ve]=Se?vs(B[ve]):vr(B[ve]);Ze.key!=null&&Fe.set(Ze.key,ve)}let Xe,Ve=0;const we=se-Re+1;let rt=!1,st=0;const nt=new Array(we);for(ve=0;ve<we;ve++)nt[ve]=0;for(ve=be;ve<=D;ve++){const Ze=N[ve];if(Ve>=we){Q(Ze,ce,ae,!0);continue}let mt;if(Ze.key!=null)mt=Fe.get(Ze.key);else for(Xe=Re;Xe<=se;Xe++)if(nt[Xe-Re]===0&&Ta(Ze,B[Xe])){mt=Xe;break}mt===void 0?Q(Ze,ce,ae,!0):(nt[mt-Re]=ve+1,mt>=st?st=mt:rt=!0,v(Ze,B[mt],te,null,ce,ae,me,le,Se),Ve++)}const dt=rt?yx(nt):tl;for(Xe=dt.length-1,ve=we-1;ve>=0;ve--){const Ze=Re+ve,mt=B[Ze],zt=Ze+1<U?B[Ze+1].el:ue;nt[ve]===0?v(null,mt,te,zt,ce,ae,me,le,Se):rt&&(Xe<0||ve!==dt[Xe]?ee(mt,te,zt,2):Xe--)}}},ee=(N,B,te,ue,ce=null)=>{const{el:ae,type:me,transition:le,children:Se,shapeFlag:ve}=N;if(ve&6){ee(N.component.subTree,B,te,ue);return}if(ve&128){N.suspense.move(B,te,ue);return}if(ve&64){me.move(N,B,te,ze);return}if(me===At){i(ae,B,te);for(let D=0;D<Se.length;D++)ee(Se[D],B,te,ue);i(N.anchor,B,te);return}if(me===Qf){b(N,B,te);return}if(ue!==2&&ve&1&&le)if(ue===0)le.beforeEnter(ae),i(ae,B,te),oi(()=>le.enter(ae),ce);else{const{leave:D,delayLeave:se,afterLeave:be}=le,Re=()=>i(ae,B,te),Fe=()=>{D(ae,()=>{Re(),be&&be()})};se?se(ae,Re,Fe):Fe()}else i(ae,B,te)},Q=(N,B,te,ue=!1,ce=!1)=>{const{type:ae,props:me,ref:le,children:Se,dynamicChildren:ve,shapeFlag:U,patchFlag:D,dirs:se}=N;if(le!=null&&im(le,null,te,N,!0),U&256){B.ctx.deactivate(N);return}const be=U&1&&se,Re=!Wu(N);let Fe;if(Re&&(Fe=me&&me.onVnodeBeforeUnmount)&&fr(Fe,B,N),U&6)ne(N.component,te,ue);else{if(U&128){N.suspense.unmount(te,ue);return}be&&ua(N,null,B,"beforeUnmount"),U&64?N.type.remove(N,B,te,ce,ze,ue):ve&&(ae!==At||D>0&&D&64)?X(ve,B,te,!1,!0):(ae===At&&D&384||!ce&&U&16)&&X(Se,B,te),ue&&fe(N)}(Re&&(Fe=me&&me.onVnodeUnmounted)||be)&&oi(()=>{Fe&&fr(Fe,B,N),be&&ua(N,null,B,"unmounted")},te)},fe=N=>{const{type:B,el:te,anchor:ue,transition:ce}=N;if(B===At){Ee(te,ue);return}if(B===Qf){w(N);return}const ae=()=>{r(te),ce&&!ce.persisted&&ce.afterLeave&&ce.afterLeave()};if(N.shapeFlag&1&&ce&&!ce.persisted){const{leave:me,delayLeave:le}=ce,Se=()=>me(te,ae);le?le(N.el,ae,Se):Se()}else ae()},Ee=(N,B)=>{let te;for(;N!==B;)te=h(N),r(N),N=te;r(B)},ne=(N,B,te)=>{const{bum:ue,scope:ce,update:ae,subTree:me,um:le}=N;ue&&dh(ue),ce.stop(),ae&&(ae.active=!1,Q(me,N,B,te)),le&&oi(le,B),oi(()=>{N.isUnmounted=!0},B),B&&B.pendingBranch&&!B.isUnmounted&&N.asyncDep&&!N.asyncResolved&&N.suspenseId===B.pendingId&&(B.deps--,B.deps===0&&B.resolve())},X=(N,B,te,ue=!1,ce=!1,ae=0)=>{for(let me=ae;me<N.length;me++)Q(N[me],B,te,ue,ce)},_e=N=>N.shapeFlag&6?_e(N.component.subTree):N.shapeFlag&128?N.suspense.next():h(N.anchor||N.el),Ae=(N,B,te)=>{N==null?B._vnode&&Q(B._vnode,null,null,!0):v(B._vnode||null,N,B,null,null,null,te),v0(),i_(),B._vnode=N},ze={p:v,um:Q,m:ee,r:fe,mt:H,mc:_,pc:j,pbc:L,n:_e,o:t};let Ie,Ge;return e&&([Ie,Ge]=e(ze)),{render:Ae,hydrate:Ie,createApp:mx(Ae,Ie)}}function ca({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Qv(t,e,n=!1){const i=t.children,r=e.children;if(vt(i)&&vt(r))for(let s=0;s<i.length;s++){const a=i[s];let o=r[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=r[s]=vs(r[s]),o.el=a.el),n||Qv(a,o)),o.type===af&&(o.el=a.el)}}function yx(t){const e=t.slice(),n=[0];let i,r,s,a,o;const l=t.length;for(i=0;i<l;i++){const u=t[i];if(u!==0){if(r=n[n.length-1],t[r]<u){e[i]=r,n.push(i);continue}for(s=0,a=n.length-1;s<a;)o=s+a>>1,t[n[o]]<u?s=o+1:a=o;u<t[n[s]]&&(s>0&&(e[i]=n[s-1]),n[s]=i)}}for(s=n.length,a=n[s-1];s-- >0;)n[s]=a,a=e[a];return n}const bx=t=>t.__isTeleport,Xu=t=>t&&(t.disabled||t.disabled===""),x0=t=>typeof SVGElement!="undefined"&&t instanceof SVGElement,rm=(t,e)=>{const n=t&&t.to;return hn(n)?e?e(n):null:n},wx={__isTeleport:!0,process(t,e,n,i,r,s,a,o,l,u){const{mc:c,pc:d,pbc:h,o:{insert:f,querySelector:m,createText:v,createComment:g}}=u,y=Xu(e.props);let{shapeFlag:S,children:b,dynamicChildren:w}=e;if(t==null){const E=e.el=v(""),T=e.anchor=v("");f(E,n,i),f(T,n,i);const I=e.target=rm(e.props,m),_=e.targetAnchor=v("");I&&(f(_,I),a=a||x0(I));const R=(L,k)=>{S&16&&c(b,L,k,r,s,a,o,l)};y?R(n,T):I&&R(I,_)}else{e.el=t.el;const E=e.anchor=t.anchor,T=e.target=t.target,I=e.targetAnchor=t.targetAnchor,_=Xu(t.props),R=_?n:T,L=_?E:I;if(a=a||x0(T),w?(h(t.dynamicChildren,w,R,r,s,a,o),Qv(t,e,!0)):l||d(t,e,R,L,r,s,a,o,!1),y)_||md(e,n,E,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const k=e.target=rm(e.props,m);k&&md(e,k,null,u,0)}else _&&md(e,T,I,u,1)}S_(e)},remove(t,e,n,i,{um:r,o:{remove:s}},a){const{shapeFlag:o,children:l,anchor:u,targetAnchor:c,target:d,props:h}=t;if(d&&s(c),(a||!Xu(h))&&(s(u),o&16))for(let f=0;f<l.length;f++){const m=l[f];r(m,e,n,!0,!!m.dynamicChildren)}},move:md,hydrate:_x};function md(t,e,n,{o:{insert:i},m:r},s=2){s===0&&i(t.targetAnchor,e,n);const{el:a,anchor:o,shapeFlag:l,children:u,props:c}=t,d=s===2;if(d&&i(a,e,n),(!d||Xu(c))&&l&16)for(let h=0;h<u.length;h++)r(u[h],e,n,2);d&&i(o,e,n)}function _x(t,e,n,i,r,s,{o:{nextSibling:a,parentNode:o,querySelector:l}},u){const c=e.target=rm(e.props,l);if(c){const d=c._lpa||c.firstChild;if(e.shapeFlag&16)if(Xu(e.props))e.anchor=u(a(t),e,o(t),n,i,r,s),e.targetAnchor=d;else{e.anchor=a(t);let h=d;for(;h;)if(h=a(h),h&&h.nodeType===8&&h.data==="teleport anchor"){e.targetAnchor=h,c._lpa=e.targetAnchor&&a(e.targetAnchor);break}u(d,e,c,n,i,r,s)}S_(e)}return e.anchor&&a(e.anchor)}const sf=wx;function S_(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const At=Symbol(void 0),af=Symbol(void 0),Ti=Symbol(void 0),Qf=Symbol(void 0),Yu=[];let tr=null;function ie(t=!1){Yu.push(tr=t?null:[])}function Sx(){Yu.pop(),tr=Yu[Yu.length-1]||null}let uc=1;function C0(t){uc+=t}function M_(t){return t.dynamicChildren=uc>0?tr||tl:null,Sx(),uc>0&&tr&&tr.push(t),t}function he(t,e,n,i,r,s){return M_(Me(t,e,n,i,r,s,!0))}function Mt(t,e,n,i,r){return M_(We(t,e,n,i,r,!0))}function ja(t){return t?t.__v_isVNode===!0:!1}function Ta(t,e){return t.type===e.type&&t.key===e.key}const of="__vInternal",T_=({key:t})=>t!=null?t:null,hh=({ref:t,ref_key:e,ref_for:n})=>t!=null?hn(t)||zn(t)||St(t)?{i:Vn,r:t,k:e,f:!!n}:t:null;function Me(t,e=null,n=null,i=0,r=null,s=t===At?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&T_(e),ref:e&&hh(e),scopeId:Jh,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Vn};return o?(eg(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=hn(n)?8:16),uc>0&&!a&&tr&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&tr.push(l),l}const We=Mx;function Mx(t,e=null,n=null,i=0,r=null,s=!1){if((!t||t===f_)&&(t=Ti),ja(t)){const o=Hs(t,e,!0);return n&&eg(o,n),uc>0&&!s&&tr&&(o.shapeFlag&6?tr[tr.indexOf(t)]=o:tr.push(o)),o.patchFlag|=-2,o}if(Ix(t)&&(t=t.__vccOpts),e){e=E_(e);let{class:o,style:l}=e;o&&!hn(o)&&(e.class=$(o)),nn(l)&&(qw(l)&&!vt(l)&&(l=Nn({},l)),e.style=Be(l))}const a=hn(t)?1:XE(t)?128:bx(t)?64:nn(t)?4:St(t)?2:0;return Me(t,e,n,i,r,a,s,!0)}function E_(t){return t?qw(t)||of in t?Nn({},t):t:null}function Hs(t,e,n=!1){const{props:i,ref:r,patchFlag:s,children:a}=t,o=e?ln(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:o,key:o&&T_(o),ref:e&&e.ref?n&&r?vt(r)?r.concat(hh(e)):[r,hh(e)]:hh(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==At?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Hs(t.ssContent),ssFallback:t.ssFallback&&Hs(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx}}function Rt(t=" ",e=0){return We(af,null,t,e)}function qe(t="",e=!1){return e?(ie(),Mt(Ti,null,t)):We(Ti,null,t)}function vr(t){return t==null||typeof t=="boolean"?We(Ti):vt(t)?We(At,null,t.slice()):typeof t=="object"?vs(t):We(af,null,String(t))}function vs(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Hs(t)}function eg(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(vt(e))n=16;else if(typeof e=="object")if(i&65){const r=e.default;r&&(r._c&&(r._d=!1),eg(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!(of in e)?e._ctx=Vn:r===3&&Vn&&(Vn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else St(e)?(e={default:e,_ctx:Vn},n=32):(e=String(e),i&64?(n=16,e=[Rt(e)]):n=8);t.children=e,t.shapeFlag|=n}function ln(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const r in i)if(r==="class")e.class!==i.class&&(e.class=$([e.class,i.class]));else if(r==="style")e.style=Be([e.style,i.style]);else if($h(r)){const s=e[r],a=i[r];a&&s!==a&&!(vt(s)&&s.includes(a))&&(e[r]=s?[].concat(s,a):a)}else r!==""&&(e[r]=i[r])}return e}function fr(t,e,n,i=null){Fi(t,e,7,[n,i])}const Tx=__();let Ex=0;function xx(t,e,n){const i=t.type,r=(e?e.appContext:t.appContext)||Tx,s={uid:Ex++,vnode:t,type:i,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new eE(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:g_(i,r),emitsOptions:s_(i,r),emit:null,emitted:null,propsDefaults:en,inheritAttrs:i.inheritAttrs,ctx:en,data:en,props:en,attrs:en,slots:en,refs:en,setupState:en,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=VE.bind(null,s),t.ce&&t.ce(s),s}let On=null;const co=()=>On||Vn,jl=t=>{On=t,t.scope.on()},Da=()=>{On&&On.scope.off(),On=null};function x_(t){return t.vnode.shapeFlag&4}let cc=!1;function Cx(t,e=!1){cc=e;const{props:n,children:i}=t.vnode,r=x_(t);ux(t,n,r,e),hx(t,i);const s=r?Ax(t,e):void 0;return cc=!1,s}function Ax(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Zw(new Proxy(t.ctx,ix));const{setup:i}=n;if(i){const r=t.setupContext=i.length>1?Px(t):null;jl(t),lu();const s=Is(i,t,0,[t.props,r]);if(uu(),Da(),Dw(s)){if(s.then(Da,Da),e)return s.then(a=>{A0(t,a,e)}).catch(a=>{jh(a,t,0)});t.asyncDep=s}else A0(t,s,e)}else C_(t,e)}function A0(t,e,n){St(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:nn(e)&&(t.setupState=Qw(e)),C_(t,n)}let R0;function C_(t,e,n){const i=t.type;if(!t.render){if(!e&&R0&&!i.render){const r=i.template||Kv(t).template;if(r){const{isCustomElement:s,compilerOptions:a}=t.appContext.config,{delimiters:o,compilerOptions:l}=i,u=Nn(Nn({isCustomElement:s,delimiters:o},a),l);i.render=R0(r,u)}}t.render=i.render||ir}jl(t),lu(),rx(t),uu(),Da()}function Rx(t){return new Proxy(t.attrs,{get(e,n){return Ci(t,"get","$attrs"),e[n]}})}function Px(t){const e=i=>{t.exposed=i||{}};let n;return{get attrs(){return n||(n=Rx(t))},slots:t.slots,emit:t.emit,expose:e}}function lf(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Qw(Zw(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in $u)return $u[n](t)},has(e,n){return n in e||n in $u}}))}function Lx(t,e=!0){return St(t)?t.displayName||t.name:t.name||e&&t.__name}function Ix(t){return St(t)&&"__vccOpts"in t}const Le=(t,e)=>NE(t,e,cc);function Fc(t,e,n){const i=arguments.length;return i===2?nn(e)&&!vt(e)?ja(e)?We(t,null,[e]):We(t,e):We(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&ja(n)&&(n=[n]),We(t,e,n))}const Ox=Symbol(""),Dx=()=>Mi(Ox),Nx="3.2.45",kx="http://www.w3.org/2000/svg",Ea=typeof document!="undefined"?document:null,P0=Ea&&Ea.createElement("template"),Fx={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const r=e?Ea.createElementNS(kx,t):Ea.createElement(t,n?{is:n}:void 0);return t==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:t=>Ea.createTextNode(t),createComment:t=>Ea.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ea.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,r,s){const a=n?n.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===s||!(r=r.nextSibling)););else{P0.innerHTML=i?`<svg>${t}</svg>`:t;const o=P0.content;if(i){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function Ux(t,e,n){const i=t._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function Bx(t,e,n){const i=t.style,r=hn(n);if(n&&!r){for(const s in n)sm(i,s,n[s]);if(e&&!hn(e))for(const s in e)n[s]==null&&sm(i,s,"")}else{const s=i.display;r?e!==n&&(i.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(i.display=s)}}const L0=/\s*!important$/;function sm(t,e,n){if(vt(n))n.forEach(i=>sm(t,e,i));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=zx(t,e);L0.test(n)?t.setProperty(uo(i),n.replace(L0,""),"important"):t[i]=n}}const I0=["Webkit","Moz","ms"],ep={};function zx(t,e){const n=ep[e];if(n)return n;let i=_r(e);if(i!=="filter"&&i in t)return ep[e]=i;i=qh(i);for(let r=0;r<I0.length;r++){const s=I0[r]+i;if(s in t)return ep[e]=s}return e}const O0="http://www.w3.org/1999/xlink";function Vx(t,e,n,i,r){if(i&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(O0,e.slice(6,e.length)):t.setAttributeNS(O0,e,n);else{const s=XT(e);n==null||s&&!Lw(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function Hx(t,e,n,i,r,s,a){if(e==="innerHTML"||e==="textContent"){i&&a(i,r,s),t[e]=n==null?"":n;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const l=n==null?"":n;(t.value!==l||t.tagName==="OPTION")&&(t.value=l),n==null&&t.removeAttribute(e);return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=Lw(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(e)}function Ho(t,e,n,i){t.addEventListener(e,n,i)}function Gx(t,e,n,i){t.removeEventListener(e,n,i)}function Wx(t,e,n,i,r=null){const s=t._vei||(t._vei={}),a=s[e];if(i&&a)a.value=i;else{const[o,l]=$x(e);if(i){const u=s[e]=qx(i,r);Ho(t,o,u,l)}else a&&(Gx(t,o,a,l),s[e]=void 0)}}const D0=/(?:Once|Passive|Capture)$/;function $x(t){let e;if(D0.test(t)){e={};let i;for(;i=t.match(D0);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):uo(t.slice(2)),e]}let tp=0;const Xx=Promise.resolve(),Yx=()=>tp||(Xx.then(()=>tp=0),tp=Date.now());function qx(t,e){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Fi(Zx(i,n.value),e,5,[i])};return n.value=t,n.attached=Yx(),n}function Zx(t,e){if(vt(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>r=>!r._stopped&&i&&i(r))}else return e}const N0=/^on[a-z]/,jx=(t,e,n,i,r=!1,s,a,o,l)=>{e==="class"?Ux(t,i,r):e==="style"?Bx(t,n,i):$h(e)?Ov(e)||Wx(t,e,n,i,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Kx(t,e,i,r))?Hx(t,e,i,s,a,o,l):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),Vx(t,e,i,r))};function Kx(t,e,n,i){return i?!!(e==="innerHTML"||e==="textContent"||e in t&&N0.test(e)&&St(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||N0.test(e)&&hn(n)?!1:e in t}const rs="transition",Eu="animation",Mn=(t,{slots:e})=>Fc(u_,R_(t),e);Mn.displayName="Transition";const A_={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Jx=Mn.props=Nn({},u_.props,A_),da=(t,e=[])=>{vt(t)?t.forEach(n=>n(...e)):t&&t(...e)},k0=t=>t?vt(t)?t.some(e=>e.length>1):t.length>1:!1;function R_(t){const e={};for(const F in t)F in A_||(e[F]=t[F]);if(t.css===!1)return e;const{name:n="v",type:i,duration:r,enterFromClass:s=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:o=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:u=a,appearToClass:c=o,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,m=Qx(r),v=m&&m[0],g=m&&m[1],{onBeforeEnter:y,onEnter:S,onEnterCancelled:b,onLeave:w,onLeaveCancelled:E,onBeforeAppear:T=y,onAppear:I=S,onAppearCancelled:_=b}=e,R=(F,G,H)=>{ms(F,G?c:o),ms(F,G?u:a),H&&H()},L=(F,G)=>{F._isLeaving=!1,ms(F,d),ms(F,f),ms(F,h),G&&G()},k=F=>(G,H)=>{const J=F?I:S,V=()=>R(G,F,H);da(J,[G,V]),F0(()=>{ms(G,F?l:s),Ur(G,F?c:o),k0(J)||U0(G,i,v,V)})};return Nn(e,{onBeforeEnter(F){da(y,[F]),Ur(F,s),Ur(F,a)},onBeforeAppear(F){da(T,[F]),Ur(F,l),Ur(F,u)},onEnter:k(!1),onAppear:k(!0),onLeave(F,G){F._isLeaving=!0;const H=()=>L(F,G);Ur(F,d),L_(),Ur(F,h),F0(()=>{!F._isLeaving||(ms(F,d),Ur(F,f),k0(w)||U0(F,i,g,H))}),da(w,[F,H])},onEnterCancelled(F){R(F,!1),da(b,[F])},onAppearCancelled(F){R(F,!0),da(_,[F])},onLeaveCancelled(F){L(F),da(E,[F])}})}function Qx(t){if(t==null)return null;if(nn(t))return[np(t.enter),np(t.leave)];{const e=np(t);return[e,e]}}function np(t){return ic(t)}function Ur(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function ms(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function F0(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let eC=0;function U0(t,e,n,i){const r=t._endId=++eC,s=()=>{r===t._endId&&i()};if(n)return setTimeout(s,n);const{type:a,timeout:o,propCount:l}=P_(t,e);if(!a)return i();const u=a+"end";let c=0;const d=()=>{t.removeEventListener(u,h),s()},h=f=>{f.target===t&&++c>=l&&d()};setTimeout(()=>{c<l&&d()},o+1),t.addEventListener(u,h)}function P_(t,e){const n=window.getComputedStyle(t),i=m=>(n[m]||"").split(", "),r=i(`${rs}Delay`),s=i(`${rs}Duration`),a=B0(r,s),o=i(`${Eu}Delay`),l=i(`${Eu}Duration`),u=B0(o,l);let c=null,d=0,h=0;e===rs?a>0&&(c=rs,d=a,h=s.length):e===Eu?u>0&&(c=Eu,d=u,h=l.length):(d=Math.max(a,u),c=d>0?a>u?rs:Eu:null,h=c?c===rs?s.length:l.length:0);const f=c===rs&&/\b(transform|all)(,|$)/.test(i(`${rs}Property`).toString());return{type:c,timeout:d,propCount:h,hasTransform:f}}function B0(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,i)=>z0(n)+z0(t[i])))}function z0(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function L_(){return document.body.offsetHeight}const I_=new WeakMap,O_=new WeakMap,tC={name:"TransitionGroup",props:Nn({},Jx,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=co(),i=l_();let r,s;return Nc(()=>{if(!r.length)return;const a=t.moveClass||`${t.name||"v"}-move`;if(!aC(r[0].el,n.vnode.el,a))return;r.forEach(iC),r.forEach(rC);const o=r.filter(sC);L_(),o.forEach(l=>{const u=l.el,c=u.style;Ur(u,a),c.transform=c.webkitTransform=c.transitionDuration="";const d=u._moveCb=h=>{h&&h.target!==u||(!h||/transform$/.test(h.propertyName))&&(u.removeEventListener("transitionend",d),u._moveCb=null,ms(u,a))};u.addEventListener("transitionend",d)})}),()=>{const a=Ot(t),o=R_(a);let l=a.tag||At;r=s,s=e.default?qv(e.default()):[];for(let u=0;u<s.length;u++){const c=s[u];c.key!=null&&lc(c,oc(c,o,i,n))}if(r)for(let u=0;u<r.length;u++){const c=r[u];lc(c,oc(c,o,i,n)),I_.set(c,c.el.getBoundingClientRect())}return We(l,null,s)}}},nC=tC;function iC(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function rC(t){O_.set(t,t.el.getBoundingClientRect())}function sC(t){const e=I_.get(t),n=O_.get(t),i=e.left-n.left,r=e.top-n.top;if(i||r){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${i}px,${r}px)`,s.transitionDuration="0s",t}}function aC(t,e,n){const i=t.cloneNode();t._vtc&&t._vtc.forEach(a=>{a.split(/\s+/).forEach(o=>o&&i.classList.remove(o))}),n.split(/\s+/).forEach(a=>a&&i.classList.add(a)),i.style.display="none";const r=e.nodeType===1?e:e.parentNode;r.appendChild(i);const{hasTransform:s}=P_(i);return r.removeChild(i),s}const V0=t=>{const e=t.props["onUpdate:modelValue"]||!1;return vt(e)?n=>dh(e,n):e};function oC(t){t.target.composing=!0}function H0(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const lC={created(t,{modifiers:{lazy:e,trim:n,number:i}},r){t._assign=V0(r);const s=i||r.props&&r.props.type==="number";Ho(t,e?"change":"input",a=>{if(a.target.composing)return;let o=t.value;n&&(o=o.trim()),s&&(o=ic(o)),t._assign(o)}),n&&Ho(t,"change",()=>{t.value=t.value.trim()}),e||(Ho(t,"compositionstart",oC),Ho(t,"compositionend",H0),Ho(t,"change",H0))},mounted(t,{value:e}){t.value=e==null?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:i,number:r}},s){if(t._assign=V0(s),t.composing||document.activeElement===t&&t.type!=="range"&&(n||i&&t.value.trim()===e||(r||t.type==="number")&&ic(t.value)===e))return;const a=e==null?"":e;t.value!==a&&(t.value=a)}},uC=["ctrl","shift","alt","meta"],cC={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>uC.some(n=>t[`${n}Key`]&&!e.includes(n))},qr=(t,e)=>(n,...i)=>{for(let r=0;r<e.length;r++){const s=cC[e[r]];if(s&&s(n,e))return}return t(n,...i)},dC={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},G0=(t,e)=>n=>{if(!("key"in n))return;const i=uo(n.key);if(e.some(r=>r===i||dC[r]===i))return t(n)},Uc={beforeMount(t,{value:e},{transition:n}){t._vod=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):xu(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:i}){!e!=!n&&(i?e?(i.beforeEnter(t),xu(t,!0),i.enter(t)):i.leave(t,()=>{xu(t,!1)}):xu(t,e))},beforeUnmount(t,{value:e}){xu(t,e)}};function xu(t,e){t.style.display=e?t._vod:"none"}const hC=Nn({patchProp:jx},Fx);let W0;function fC(){return W0||(W0=vx(hC))}const D_=(...t)=>{const e=fC().createApp(...t),{mount:n}=e;return e.mount=i=>{const r=pC(i);if(!r)return;const s=e._component;!St(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const a=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},e};function pC(t){return hn(t)?document.querySelector(t):t}var mC=(t,e)=>{const n=t.__vccOpts||t;for(const[i,r]of e)n[i]=r;return n};const vC=t=>(Xv("data-v-c27523d4"),t=t(),Yv(),t),gC=vC(()=>Me("div",{class:"nav__bar--title"},"YOUNING DESIGN",-1)),yC={style:{"margin-top":"54px"}},bC={__name:"App",setup(t){const e=de(!1);return(n,i)=>{const r=Je("var-icon"),s=Je("var-button"),a=Je("var-app-bar"),o=Je("router-view");return ie(),he(At,null,[We(a,{"title-position":"center",color:"rgba(0, 0, 0, 0.92)"},{default:pt(()=>[gC]),right:pt(()=>[We(s,{round:"",text:"",color:"transparent","text-color":"#ffffff",onClick:i[0]||(i[0]=l=>e.value=!0)},{default:pt(()=>[We(r,{name:"menu",size:24})]),_:1})]),_:1}),Me("div",yC,[We(o)])],64)}}};var wC=mC(bC,[["__scopeId","data-v-c27523d4"]]),N_={locks:{},zIndex:2e3,touchmoveForbid:!0};tn(N_);var Ui=tn(N_);const pi=t=>typeof t=="string",am=t=>typeof t=="boolean",Zn=t=>typeof t=="number",tg=t=>Object.prototype.toString.call(t)==="[object Object]",_C=t=>typeof t=="object"&&t!==null,qt=t=>Array.isArray(t),SC=t=>t?/^(http)|(\.*\/)/.test(t):!1,Es=t=>t==null||t===""||Array.isArray(t)&&!t.length,Te=t=>t==null?0:pi(t)?(t=parseFloat(t),t=Number.isNaN(t)?0:t,t):am(t)?Number(t):t,uf=(t,e)=>{if(t.length){const n=t.indexOf(e);if(n>-1)return t.splice(n,1)}},ng=(t,e=200)=>{let n,i=0;return function r(...s){const a=Date.now(),o=a-i;i||(i=a),n&&window.clearTimeout(n),o>=e?(t.apply(this,s),i=a):n=window.setTimeout(()=>{r.apply(this,s)},e-o)}},ig=()=>typeof window!="undefined",$0=t=>[...new Set(t)],MC=t=>t.replace(/([A-Z])/g," $1").trim().split(" ").join("-").toLowerCase();var X0=t=>t==null?!1:t.startsWith("data:image")||/\.(png|jpg|gif|jpeg|svg|webp)$/.test(t),Y0=t=>t==null?!1:t.startsWith("data:video")||/\.(mp4|webm|ogg)$/.test(t),TC=t=>{var e=[];return{cache:e,has(n){return this.cache.includes(n)},add(n){this.has(n)||(this.cache.length===t&&e.shift(),this.cache.push(n))},remove(n){this.has(n)&&uf(this.cache,n)},clear(){this.cache.length=0}}},q0=t=>t,Z0=t=>Math.pow(t,3),k_=t=>t<.5?Z0(t*2)/2:1-Z0((1-t)*2)/2,cf=(t,e)=>t==null?e:t,F_=()=>typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:self,Ka=function(t,e,n){if(t===void 0&&(t=""),n===void 0&&(n=""),t.length>=e)return t;var i=e-t.length,r=Math.floor(i/n.length);return n.repeat(r)+n.slice(0,i%n.length)+t};function j0(t,e,n,i,r,s,a){try{var o=t[s](a),l=o.value}catch(u){n(u);return}o.done?e(l):Promise.resolve(l).then(i,r)}function EC(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function a(l){j0(s,i,r,a,o,"next",l)}function o(l){j0(s,i,r,a,o,"throw",l)}a(void 0)})}}function xC(t){var{left:e}=t.getBoundingClientRect();return e+(document.body.scrollLeft||document.documentElement.scrollLeft)}function df(t){var e="scrollTop"in t?t.scrollTop:t.pageYOffset;return Math.max(e,0)}function rg(t){var e="scrollLeft"in t?t.scrollLeft:t.pageXOffset;return Math.max(e,0)}function CC(t){return om.apply(this,arguments)}function om(){return om=EC(function*(t){yield Mr();var{top:e,bottom:n,left:i,right:r}=t.getBoundingClientRect(),{innerWidth:s,innerHeight:a}=window,o=i<=s&&r>=0,l=e<=a&&n>=0;return o&&l}),om.apply(this,arguments)}function ip(t){var{transform:e}=window.getComputedStyle(t);return+e.slice(e.lastIndexOf(",")+2,e.length-1)}function cu(t){for(var e=t;e&&!(!e.parentNode||(e=e.parentNode,e===document.body||e===document.documentElement));){var n=/(scroll|auto)/,{overflowY:i,overflow:r}=window.getComputedStyle(e);if(n.test(i)||n.test(r))return e}return window}function AC(t){for(var e=[],n=t;n!==window;)n=cu(n),e.push(n);return e}var U_=t=>pi(t)&&t.endsWith("rem"),RC=t=>pi(t)&&t.endsWith("px")||Zn(t),PC=t=>pi(t)&&t.endsWith("%"),B_=t=>pi(t)&&t.endsWith("vw"),z_=t=>pi(t)&&t.endsWith("vh"),yn=t=>{if(Zn(t))return t;if(RC(t))return+t.replace("px","");if(B_(t))return+t.replace("vw","")*window.innerWidth/100;if(z_(t))return+t.replace("vh","")*window.innerHeight/100;if(U_(t)){var e=+t.replace("rem",""),n=window.getComputedStyle(document.documentElement).fontSize;return e*parseFloat(n)}return pi(t)?Te(t):0},dn=t=>{if(t!=null)return PC(t)||B_(t)||z_(t)||U_(t)?t:yn(t)+"px"},ii=function(t,e){if(e===void 0&&(e=1),t!=null){var n=dn(t),i=n.match(/(vh|%|rem|px|vw)$/)[0];return""+parseFloat(n)*e+i}};function Sr(t){var e=F_();return e.requestAnimationFrame?e.requestAnimationFrame(t):e.setTimeout(t,16)}function LC(t){var e=F_();e.cancelAnimationFrame?e.cancelAnimationFrame(t):e.clearTimeout(t)}function hf(t){Sr(()=>{Sr(t)})}function Mr(){return new Promise(t=>{Sr(()=>{Sr(t)})})}function Rh(t,e){var{top:n=0,left:i=0,duration:r=300,animation:s}=e,a=Date.now(),o=df(t),l=rg(t);return new Promise(u=>{var c=()=>{var d=(Date.now()-a)/r;if(d<1){var h=o+(n-o)*s(d),f=l+(i-l)*s(d);t.scrollTo(f,h),Sr(c)}else t.scrollTo(i,n),u()};Sr(c)})}function V_(t){return Object.entries(t!=null?t:{}).reduce((e,n)=>{var[i,r]=n,s=i.startsWith("--")?i:"--"+MC(i);return e[s]=r,e},{})}function IC(){var t=typeof window!="undefined";return t&&"ontouchstart"in window}var OC=["collect","clear"];function K0(t,e,n,i,r,s,a){try{var o=t[s](a),l=o.value}catch(u){n(u);return}o.done?e(l):Promise.resolve(l).then(i,r)}function J0(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function a(l){K0(s,i,r,a,o,"next",l)}function o(l){K0(s,i,r,a,o,"throw",l)}a(void 0)})}}function DC(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function Ph(){return Ph=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ph.apply(this,arguments)}function ui(t,e){return Array.isArray(e)?e.reduce((n,i)=>(n[i]=t[i],n),{}):t[e]}function NC(t){var e=D_(t),n=document.createElement("div");return document.body.appendChild(n),{instance:e.mount(n),unmount(){e.unmount(),document.body.removeChild(n)}}}function Bc(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var i={setup(){return()=>Fc(t,Ph({},e,n))}},{unmount:r}=NC(i);return{unmountInstance:r}}function kC(t){var e=[],n=i=>{if(i!=null&&i.component){n(i==null?void 0:i.component.subTree);return}Array.isArray(i==null?void 0:i.children)&&i.children.forEach(r=>{ja(r)&&(e.push(r),n(r))})};return n(t),e}function or(t){var e=tn([]),n=co(),i=()=>{var o=kC(n.subTree);e.sort((l,u)=>o.indexOf(l.vnode)-o.indexOf(u.vnode))},r=o=>{e.push(o),i()},s=o=>{uf(e,o)};al(t,{collect:r,clear:s,instances:e});var a=Le(()=>e.length);return{length:a}}function lr(t){if(!H_(t))return{index:null};var e=Mi(t),{collect:n,clear:i,instances:r}=e,s=co();fn(()=>{rn().then(()=>n(s))}),Cr(()=>{rn().then(()=>i(s))});var a=Le(()=>r.indexOf(s));return{index:a}}function Hi(t){var e=[],n=s=>{e.push(s)},i=s=>{uf(e,s)},r=s=>{al(t,Ph({collect:n,clear:i},s))};return{childProviders:e,bindChildren:r}}function Gi(t){if(!H_(t))return{parentProvider:null,bindParent:null};var e=Mi(t),{collect:n,clear:i}=e,r=DC(e,OC),s=a=>{fn(()=>n(a)),kc(()=>i(a))};return{parentProvider:r,bindParent:s}}function H_(t){var e=co();return t in e.provides}function Wi(){var t=de(""),e=function(){var r=J0(function*(s,a,o){if(!qt(s)||!s.length)return!0;var l=yield Promise.all(s.map(u=>u(a,o)));return!l.some(u=>u!==!0?(t.value=String(u),!0):!1)});return function(a,o,l){return r.apply(this,arguments)}}(),n=()=>{t.value=""},i=function(){var r=J0(function*(s,a,o,l,u){s.includes(a)&&(yield e(o,l,u))&&(t.value="")});return function(a,o,l,u,c){return r.apply(this,arguments)}}();return{errorMessage:t,validate:e,resetValidation:n,validateWithTrigger:i}}function FC(t){fn(()=>{window.addEventListener("hashchange",t),window.addEventListener("popstate",t)}),Cr(()=>{window.removeEventListener("hashchange",t),window.removeEventListener("popstate",t)})}function G_(){var t=de(!1);return ef(()=>{t.value=!1}),tf(()=>{t.value=!0}),{disabled:t}}function Qe(t){var e="var-"+t,n=r=>r?r.startsWith("--")?""+e+r:e+"__"+r:e,i=function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return s.map(o=>{if(qt(o)){var[l,u,c=null]=o;return l?u:c}return o})};return{n,classes:i}}function ye(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(t)return t(...n)}function Lh(){return Lh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Lh.apply(this,arguments)}var{n:W_}=Qe("ripple"),Q0=250;function UC(t){var{zIndex:e,position:n}=window.getComputedStyle(t);t.style.overflow="hidden",t.style.overflowX="hidden",t.style.overflowY="hidden",n==="static"&&(t.style.position="relative"),e==="auto"&&(t.style.zIndex="1")}function BC(t,e){var{top:n,left:i}=t.getBoundingClientRect(),{clientWidth:r,clientHeight:s}=t,a=Math.sqrt(Math.pow(r,2)+Math.pow(s,2))/2,o=a*2,l=e.touches[0].clientX-i,u=e.touches[0].clientY-n,c=(r-a*2)/2,d=(s-a*2)/2,h=l-a,f=u-a;return{x:h,y:f,centerX:c,centerY:d,size:o}}function $_(t){var e=this._ripple;if(e.removeRipple(),!(e.disabled||e.tasker)){var n=()=>{e.tasker=null;var{x:i,y:r,centerX:s,centerY:a,size:o}=BC(this,t),l=document.createElement("div");l.classList.add(W_()),l.style.opacity="0",l.style.transform="translate("+i+"px, "+r+"px) scale3d(.3, .3, .3)",l.style.width=o+"px",l.style.height=o+"px",e.color&&(l.style.backgroundColor=e.color),l.dataset.createdAt=String(performance.now()),UC(this),this.appendChild(l),window.setTimeout(()=>{l.style.transform="translate("+s+"px, "+a+"px) scale3d(1, 1, 1)",l.style.opacity=".25"},20)};e.tasker=window.setTimeout(n,60)}}function lm(){var t=this._ripple,e=()=>{var n=this.querySelectorAll("."+W_());if(!!n.length){var i=n[n.length-1],r=Q0-performance.now()+Number(i.dataset.createdAt);setTimeout(()=>{i.style.opacity="0",setTimeout(()=>{var s;return(s=i.parentNode)==null?void 0:s.removeChild(i)},Q0)},r)}};t.tasker?setTimeout(e,60):e()}function X_(){var t=this._ripple;!IC()||!t.touchmoveForbid||(t.tasker&&window.clearTimeout(t.tasker),t.tasker=null)}function zC(t,e){var n,i,r;t._ripple=Lh({tasker:null},(n=e.value)!=null?n:{},{touchmoveForbid:(i=(r=e.value)==null?void 0:r.touchmoveForbid)!=null?i:Ui.touchmoveForbid,removeRipple:lm.bind(t)}),t.addEventListener("touchstart",$_,{passive:!0}),t.addEventListener("touchmove",X_,{passive:!0}),t.addEventListener("dragstart",lm,{passive:!0}),document.addEventListener("touchend",t._ripple.removeRipple,{passive:!0}),document.addEventListener("touchcancel",t._ripple.removeRipple,{passive:!0})}function VC(t){t.removeEventListener("touchstart",$_),t.removeEventListener("touchmove",X_),t.removeEventListener("dragstart",lm),document.removeEventListener("touchend",t._ripple.removeRipple),document.removeEventListener("touchcancel",t._ripple.removeRipple)}function HC(t,e){var n,i,r,s,a,o,l,u={touchmoveForbid:(n=(i=e.value)==null?void 0:i.touchmoveForbid)!=null?n:Ui.touchmoveForbid,color:(r=e.value)==null?void 0:r.color,disabled:(s=e.value)==null?void 0:s.disabled},c=u.touchmoveForbid!==((a=t._ripple)==null?void 0:a.touchmoveForbid)||u.color!==((o=t._ripple)==null?void 0:o.color)||u.disabled!==((l=t._ripple)==null?void 0:l.disabled);if(c){var d,h;t._ripple=Lh({tasker:u.disabled?null:(d=t._ripple)==null?void 0:d.tasker,removeRipple:(h=t._ripple)==null?void 0:h.removeRipple},u)}}var GC={mounted:zC,unmounted:VC,updated:HC,install(t){t.directive("ripple",this)}},kn=GC;function WC(t){return["top","bottom","right","left","center"].includes(t)}var zc={show:{type:Boolean,default:!1},position:{type:String,default:"center",validator:WC},transition:{type:String},overlay:{type:Boolean,default:!0},overlayClass:{type:String},overlayStyle:{type:Object},lockScroll:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0},teleport:{type:String},onOpen:{type:Function},onOpened:{type:Function},onClose:{type:Function},onClosed:{type:Function},onClickOverlay:{type:Function},onRouteChange:{type:Function},"onUpdate:show":{type:Function}};function Y_(){var t=Object.keys(Ui.locks).length;t<=0?document.body.classList.remove("var--lock"):document.body.classList.add("var--lock")}function vd(t){Ui.locks[t]=1,Y_()}function gd(t){delete Ui.locks[t],Y_()}function sg(t,e){var{uid:n}=co();e&&Ke(e,i=>{i===!1?gd(n):i===!0&&t()===!0&&vd(n)}),Ke(t,i=>{e&&e()===!1||(i===!0?vd(n):gd(n))}),h_(()=>{e&&e()===!1||t()===!0&&vd(n)}),Cr(()=>{e&&e()===!1||t()===!0&&gd(n)}),ef(()=>{e&&e()===!1||t()===!0&&vd(n)}),tf(()=>{e&&e()===!1||t()===!0&&gd(n)})}function ff(t,e){var n=de(Ui.zIndex);return Ke(t,i=>{i&&(Ui.zIndex+=e,n.value=Ui.zIndex)},{immediate:!0}),{zIndex:n}}function um(){return um=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},um.apply(this,arguments)}function $C(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!ja(t)}var{n:yd,classes:rp}=Qe("popup"),rr=tt({name:"VarPopup",inheritAttrs:!1,props:zc,setup(t,e){var{slots:n,attrs:i}=e,{zIndex:r}=ff(()=>t.show,3),{disabled:s}=G_(),a=()=>{var c,{closeOnClickOverlay:d,onClickOverlay:h}=t;h==null||h(),d&&((c=t["onUpdate:show"])==null||c.call(t,!1))};sg(()=>t.show,()=>t.lockScroll),Ke(()=>t.show,c=>{var{onOpen:d,onClose:h}=t;c?d==null||d():h==null||h()}),FC(()=>t.onRouteChange==null?void 0:t.onRouteChange());var o=()=>{var{overlayClass:c="",overlayStyle:d}=t;return We("div",{class:rp(yd("overlay"),c),style:um({zIndex:r.value-1},d),onClick:a},null)},l=()=>We("div",ln({class:rp(yd("content"),"var-elevation--3",yd("--"+t.position)),style:{zIndex:r.value}},i),[n.default==null?void 0:n.default()]),u=()=>{var{onOpened:c,onClosed:d,show:h,overlay:f,transition:m,position:v}=t;return We(Mn,{name:"var-fade",onAfterEnter:c,onAfterLeave:d},{default:()=>[Zt(We("div",{class:rp("var--box",yd()),style:{zIndex:r.value-2}},[f&&o(),We(Mn,{name:m||"var-pop-"+v},{default:()=>[h&&l()]})]),[[Uc,h]])]})};return()=>{var{teleport:c}=t;if(c){var d;return We(sf,{to:c,disabled:s.value},$C(d=u())?d:{default:()=>[d]})}return u()}}});rr.install=function(t){t.component(rr.name,rr)};var q_={name:{type:String},size:{type:[Number,String]},color:{type:String},namespace:{type:String,default:"var-icon"},transition:{type:[Number,String],default:0},onClick:{type:Function}};function ey(t,e,n,i,r,s,a){try{var o=t[s](a),l=o.value}catch(u){n(u);return}o.done?e(l):Promise.resolve(l).then(i,r)}function XC(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function a(l){ey(s,i,r,a,o,"next",l)}function o(l){ey(s,i,r,a,o,"throw",l)}a(void 0)})}}var{n:YC,classes:qC}=Qe("icon");function ZC(t,e){return ie(),Mt(rf(t.isURL(t.name)?"img":"i"),{class:$(t.classes(t.n(),t.namespace+"--set",[t.isURL(t.name),t.n("image"),t.namespace+"-"+t.nextName],[t.shrinking,t.n("--shrinking")])),style:Be({color:t.color,transition:"transform "+t.toNumber(t.transition)+"ms",width:t.isURL(t.name)?t.toSizeUnit(t.size):null,height:t.isURL(t.name)?t.toSizeUnit(t.size):null,fontSize:t.toSizeUnit(t.size)}),src:t.isURL(t.name)?t.nextName:null,onClick:t.onClick},null,8,["class","style","src","onClick"])}var Kt=tt({render:ZC,name:"VarIcon",props:q_,setup(t){var e=de(""),n=de(!1),i=function(){var r=XC(function*(s,a){var{transition:o}=t;if(a==null||Te(o)===0){e.value=s;return}n.value=!0,yield rn(),setTimeout(()=>{a!=null&&(e.value=s),n.value=!1},Te(o))});return function(a,o){return r.apply(this,arguments)}}();return Ke(()=>t.name,i,{immediate:!0}),{n:YC,classes:qC,nextName:e,shrinking:n,isURL:SC,toNumber:Te,toSizeUnit:dn}}});Kt.install=function(t){t.component(Kt.name,Kt)};function cm(){return cm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},cm.apply(this,arguments)}var jC=cm({show:{type:Boolean,default:!1},actions:{type:Array,default:()=>[]},title:{type:String},closeOnClickAction:{type:Boolean,default:!0},onSelect:{type:Function},"onUpdate:show":{type:Function}},ui(zc,["overlay","overlayClass","overlayStyle","lockScroll","closeOnClickOverlay","teleport","onOpen","onClose","onOpened","onClosed","onClickOverlay","onRouteChange"])),Z_={dialogTitle:"\u63D0\u793A",dialogConfirmButtonText:"\u786E\u8BA4",dialogCancelButtonText:"\u53D6\u6D88",actionSheetTitle:"\u8BF7\u9009\u62E9",listLoadingText:"\u52A0\u8F7D\u4E2D",listFinishedText:"\u6CA1\u6709\u66F4\u591A\u4E86",listErrorText:"\u52A0\u8F7D\u5931\u8D25",pickerTitle:"\u8BF7\u9009\u62E9",pickerConfirmButtonText:"\u786E\u8BA4",pickerCancelButtonText:"\u53D6\u6D88",datePickerMonthDict:{"01":{name:"\u4E00\u6708",abbr:"\u4E00\u6708"},"02":{name:"\u4E8C\u6708",abbr:"\u4E8C\u6708"},"03":{name:"\u4E09\u6708",abbr:"\u4E09\u6708"},"04":{name:"\u56DB\u6708",abbr:"\u56DB\u6708"},"05":{name:"\u4E94\u6708",abbr:"\u4E94\u6708"},"06":{name:"\u516D\u6708",abbr:"\u516D\u6708"},"07":{name:"\u4E03\u6708",abbr:"\u4E03\u6708"},"08":{name:"\u516B\u6708",abbr:"\u516B\u6708"},"09":{name:"\u4E5D\u6708",abbr:"\u4E5D\u6708"},10:{name:"\u5341\u6708",abbr:"\u5341\u6708"},11:{name:"\u5341\u4E00\u6708",abbr:"\u5341\u4E00\u6708"},12:{name:"\u5341\u4E8C\u6708",abbr:"\u5341\u4E8C\u6708"}},datePickerWeekDict:{0:{name:"\u661F\u671F\u65E5",abbr:"\u65E5"},1:{name:"\u661F\u671F\u4E00",abbr:"\u4E00"},2:{name:"\u661F\u671F\u4E8C",abbr:"\u4E8C"},3:{name:"\u661F\u671F\u4E09",abbr:"\u4E09"},4:{name:"\u661F\u671F\u56DB",abbr:"\u56DB"},5:{name:"\u661F\u671F\u4E94",abbr:"\u4E94"},6:{name:"\u661F\u671F\u516D",abbr:"\u516D"}},datePickerSelected:"\u4E2A\u88AB\u9009\u62E9",paginationItem:"\u6761",paginationPage:"\u9875",paginationJump:"\u524D\u5F80"},KC={dialogTitle:"Hint",dialogConfirmButtonText:"Confirm",dialogCancelButtonText:"Cancel",actionSheetTitle:"Select One",listLoadingText:"Loading",listFinishedText:"No more",listErrorText:"Load fail",pickerTitle:"Pick it",pickerConfirmButtonText:"Confirm",pickerCancelButtonText:"Cancel",datePickerMonthDict:{"01":{name:"January",abbr:"JAN"},"02":{name:"February",abbr:"FEB"},"03":{name:"March",abbr:"MAR"},"04":{name:"April",abbr:"APR"},"05":{name:"May",abbr:"MAY"},"06":{name:"June",abbr:"JUN"},"07":{name:"July",abbr:"JUL"},"08":{name:"August",abbr:"AUG"},"09":{name:"September",abbr:"SEP"},10:{name:"October",abbr:"OCT"},11:{name:"November",abbr:"NOV"},12:{name:"December",abbr:"DEC"}},datePickerWeekDict:{0:{name:"Sunday",abbr:"S"},1:{name:"Monday",abbr:"M"},2:{name:"Tuesday",abbr:"T"},3:{name:"Wednesday",abbr:"W"},4:{name:"Thursday",abbr:"T"},5:{name:"Friday",abbr:"F"},6:{name:"Saturday",abbr:"S"}},datePickerSelected:" selected",paginationItem:"",paginationPage:"page",paginationJump:"Go to"};function dm(){return dm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},dm.apply(this,arguments)}function j_(){var t={},e=de({}),n=(s,a)=>{a.lang=s,t[s]=a},i=s=>{if(!t[s])return console.warn("The "+s+" does not exist. You can mount a language package using the add method"),{};e.value=t[s]},r=(s,a)=>{if(!t[s]){console.warn("The "+s+" does not exist. You can mount a language package using the add method");return}t[s]=dm({},t[s],a),i(s)};return{packs:t,pack:e,add:n,use:i,merge:r}}var{packs:JC,pack:Un,add:K_,use:J_,merge:QC}=j_();K_("zh-CN",Z_);J_("zh-CN");var hm={zhCN:Z_,enUS:KC,packs:JC,pack:Un,add:K_,use:J_,merge:QC,useLocale:j_},{n:eA,classes:tA}=Qe("action-sheet"),nA=["onClick"];function iA(t,e){var n=Je("var-icon"),i=Je("var-popup"),r=jn("ripple");return ie(),Mt(i,ln({class:t.n("popup-radius"),position:"bottom",overlay:t.overlay,"overlay-class":t.overlayClass,"overlay-style":t.overlayStyle,"lock-scroll":t.lockScroll,"close-on-click-overlay":t.closeOnClickOverlay,teleport:t.teleport,show:t.popupShow},{"onUpdate:show":t.handlePopupUpdateShow},{onOpen:t.onOpen,onClose:t.onClose,onClosed:t.onClosed,onOpened:t.onOpened,onRouteChange:t.onRouteChange}),{default:pt(()=>[Me("div",ln({class:t.classes(t.n(),"var--box")},t.$attrs),[Ue(t.$slots,"title",{},()=>[Me("div",{class:$(t.n("title"))},je(t.dt(t.title,t.pack.actionSheetTitle)),3)]),Ue(t.$slots,"actions",{},()=>[(ie(!0),he(At,null,bn(t.actions,s=>Zt((ie(),he("div",{class:$(t.classes(t.n("action-item"),s.className,[s.disabled,t.n("--disabled")])),key:s.name,style:Be({color:s.color}),onClick:a=>t.handleSelect(s)},[s.icon?(ie(),Mt(n,{key:0,class:$(t.n("action-icon")),"var-action-sheet-cover":"",name:s.icon,size:s.iconSize},null,8,["class","name","size"])):qe("v-if",!0),Me("div",{class:$(t.n("action-name"))},je(s.name),3)],14,nA)),[[r,{disabled:s.disabled}]])),128))])],16)]),_:3},16,["class","overlay","overlay-class","overlay-style","lock-scroll","close-on-click-overlay","teleport","show","onOpen","onClose","onClosed","onOpened","onRouteChange"])}var Na=tt({render:iA,name:"VarActionSheet",directives:{Ripple:kn},components:{VarPopup:rr,VarIcon:Kt},inheritAttrs:!1,props:jC,setup(t){var e=de(!1),n=r=>{if(!r.disabled){var{closeOnClickAction:s,onSelect:a}=t;ye(a,r),s&&ye(t["onUpdate:show"],!1)}},i=r=>ye(t["onUpdate:show"],r);return Ke(()=>t.show,r=>{e.value=r},{immediate:!0}),{n:eA,classes:tA,handlePopupUpdateShow:i,popupShow:e,pack:Un,dt:cf,handleSelect:n}}}),Ss;function Ja(t){return ig()?new Promise(e=>{Ja.close();var n=tn(t);n.teleport="body",Ss=n;var{unmountInstance:i}=Bc(Na,n,{onSelect:r=>{n.onSelect==null||n.onSelect(r),e(r)},onClose:()=>{n.onClose==null||n.onClose(),e("close")},onClosed:()=>{n.onClosed==null||n.onClosed(),i(),Ss===n&&(Ss=null)},onRouteChange:()=>{i(),Ss===n&&(Ss=null)},"onUpdate:show":r=>{n.show=r}});n.show=!0}):Promise.resolve()}Ja.Component=Na;Na.install=function(t){t.component(Na.name,Na)};Ja.close=()=>{if(Ss!=null){var t=Ss;Ss=null,rn().then(()=>{t.show=!1})}};Ja.install=function(t){t.component(Na.name,Na)};function rA(t){var e=["left","center","right"];return e.includes(t)}var sA={color:{type:String},textColor:{type:String},title:{type:String},titlePosition:{type:String,default:"left",validator:rA},elevation:{type:Boolean,default:!0}},{n:aA,classes:oA}=Qe("app-bar");function lA(t,e){return ie(),he("div",{class:$(t.classes(t.n(),[t.elevation,"var-elevation--3"])),style:Be({background:t.color,color:t.textColor})},[Me("div",{class:$(t.n("left"))},[Ue(t.$slots,"left"),t.titlePosition==="left"?(ie(),he("div",{key:0,class:$(t.n("title")),style:Be({paddingLeft:t.paddingLeft})},[Ue(t.$slots,"default",{},()=>[Rt(je(t.title),1)])],6)):qe("v-if",!0)],2),t.titlePosition==="center"?(ie(),he("div",{key:0,class:$(t.n("title"))},[Ue(t.$slots,"default",{},()=>[Rt(je(t.title),1)])],2)):qe("v-if",!0),Me("div",{class:$(t.n("right"))},[t.titlePosition==="right"?(ie(),he("div",{key:0,class:$(t.n("title")),style:Be({paddingRight:t.paddingRight})},[Ue(t.$slots,"default",{},()=>[Rt(je(t.title),1)])],6)):qe("v-if",!0),Ue(t.$slots,"right")],2)],6)}var ol=tt({render:lA,name:"VarAppBar",props:sA,setup(t,e){var{slots:n}=e,i=de(),r=de(),s=()=>{i.value=n.left?0:void 0,r.value=n.right?0:void 0};return fn(s),Nc(s),{n:aA,classes:oA,paddingLeft:i,paddingRight:r}}});ol.install=function(t){t.component(ol.name,ol)};function uA(t){return["circle","wave","cube","rect","disappear"].includes(t)}function cA(t){return["normal","mini","small","large"].includes(t)}var xs={type:{type:String,default:"circle",validator:uA},radius:{type:[String,Number]},size:{type:String,default:"normal",validator:cA},color:{type:String},description:{type:String},loading:{type:Boolean,default:!1}},{n:dA,classes:hA}=Qe("loading"),fA=t=>(Xv(""),t=t(),Yv(),t),pA=fA(()=>Me("svg",{viewBox:"25 25 50 50"},[Me("circle",{cx:"50",cy:"50",r:"20",fill:"none"})],-1)),mA=[pA];function vA(t,e){return ie(),he("div",{class:$(t.n())},[t.$slots.default?(ie(),he("div",{key:0,class:$(t.classes(t.n("content"),[t.loading,t.n("content--active")]))},[Ue(t.$slots,"default"),t.loading?(ie(),he("div",{key:0,class:$(t.n("content-mask"))},null,2)):qe("v-if",!0)],2)):qe("v-if",!0),t.isShow?(ie(),he("div",{key:1,class:$(t.classes("var--box",t.n("body"),[t.$slots.default,t.n("inside")]))},[t.type==="circle"?(ie(),he("div",{key:0,class:$(t.n("circle"))},[Me("span",{class:$(t.classes(t.n("circle-block"),t.n("circle-block--"+t.size))),style:Be({width:t.multiplySizeUnit(t.radius,2),height:t.multiplySizeUnit(t.radius,2),color:t.color})},mA,6)],2)):qe("v-if",!0),(ie(!0),he(At,null,bn(t.loadingTypeDict,(n,i)=>(ie(),he(At,{key:i},[t.type===i?(ie(),he("div",{key:0,class:$(t.classes(t.n(i),t.n(i+"--"+t.size)))},[(ie(!0),he(At,null,bn(n,r=>(ie(),he("div",{key:r+i,style:Be({backgroundColor:t.color}),class:$(t.classes(t.n(i+"-item"),t.n(i+"-item--"+t.size)))},null,6))),128))],2)):qe("v-if",!0)],64))),128)),t.$slots.description||t.description?(ie(),he("div",{key:1,class:$(t.classes(t.n("description"),t.n("description--"+t.size))),style:Be({color:t.color})},[Ue(t.$slots,"description",{},()=>[Rt(je(t.description),1)])],6)):qe("v-if",!0)],2)):qe("v-if",!0)],2)}var yr=tt({render:vA,name:"VarLoading",props:xs,setup(t,e){var{slots:n}=e,i={wave:5,cube:4,rect:8,disappear:3},r=Le(()=>ye(n.default)?t.loading:!0);return{n:dA,classes:hA,multiplySizeUnit:ii,loadingTypeDict:i,isShow:r}}});yr.install=function(t){t.component(yr.name,yr)};function fm(){return fm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},fm.apply(this,arguments)}function gA(t){return["default","primary","info","success","warning","danger"].includes(t)}function yA(t){return["normal","mini","small","large"].includes(t)}var bA={type:{type:String,default:"default",validator:gA},size:{type:String,default:"normal",validator:yA},loading:{type:Boolean,default:!1},round:{type:Boolean,default:!1},block:{type:Boolean,default:!1},text:{type:Boolean,default:!1},outline:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},ripple:{type:Boolean,default:!0},color:{type:String},textColor:{type:String},autoLoading:{type:Boolean,default:!1},loadingRadius:{type:[Number,String],default:12},loadingType:ui(xs,"type"),loadingSize:ui(xs,"size"),loadingColor:fm({},ui(xs,"color"),{default:"currentColor"}),onClick:{type:Function},onTouchstart:{type:Function}},{n:wA,classes:_A}=Qe("button"),SA=["disabled"];function MA(t,e){var n=Je("var-loading"),i=jn("ripple");return Zt((ie(),he("button",{class:$(t.classes(t.n(),"var--box",t.n("--"+t.size),[t.block,"var--flex "+t.n("--block"),"var--inline-flex"],[t.disabled,t.n("--disabled")],[t.text,t.n("--text-"+t.type)+" "+t.n("--text"),t.n("--"+t.type)+" var-elevation--2"],[t.text&&t.disabled,t.n("--text-disabled")],[t.round,t.n("--round")],[t.outline,t.n("--outline")])),style:Be({color:t.textColor,background:t.color}),disabled:t.disabled,onClick:e[0]||(e[0]=function(){return t.handleClick&&t.handleClick(...arguments)}),onTouchstart:e[1]||(e[1]=function(){return t.handleTouchstart&&t.handleTouchstart(...arguments)})},[t.loading||t.pending?(ie(),Mt(n,{key:0,class:$(t.n("loading")),"var-button-cover":"",color:t.loadingColor,type:t.loadingType,size:t.loadingSize,radius:t.loadingRadius},null,8,["class","color","type","size","radius"])):qe("v-if",!0),Me("div",{class:$(t.classes(t.n("content"),[t.loading||t.pending,t.n("--hidden")]))},[Ue(t.$slots,"default")],2)],46,SA)),[[i,{disabled:t.disabled||!t.ripple}]])}var hi=tt({render:MA,name:"VarButton",components:{VarLoading:yr},directives:{Ripple:kn},props:bA,setup(t){var e=de(!1),n=s=>{t.autoLoading&&(e.value=!0,Promise.resolve(s).then(()=>{e.value=!1}).catch(()=>{e.value=!1}))},i=s=>{var{loading:a,disabled:o,onClick:l}=t;!l||a||o||e.value||n(l(s))},r=s=>{var{loading:a,disabled:o,onTouchstart:l}=t;!l||a||o||e.value||n(l(s))};return{n:wA,classes:_A,pending:e,handleClick:i,handleTouchstart:r}}});hi.install=function(t){t.component(hi.name,hi)};var TA={visibilityHeight:{type:[Number,String],default:200},duration:{type:Number,default:300},right:{type:[Number,String]},bottom:{type:[Number,String]},target:{type:[String,Object]},onClick:{type:Function}},{n:EA,classes:xA}=Qe("back-top");function CA(t,e){var n=Je("var-icon"),i=Je("var-button");return ie(),Mt(sf,{to:"body",disabled:t.disabled},[Me("div",ln({class:t.classes(t.n(),[t.show,t.n("--active")]),ref:"backTopEl",style:{right:t.toSizeUnit(t.right),bottom:t.toSizeUnit(t.bottom)}},t.$attrs,{onClick:e[0]||(e[0]=qr(function(){return t.click&&t.click(...arguments)},["stop"]))}),[Ue(t.$slots,"default",{},()=>[We(i,{type:"primary",round:"","var-back-top-cover":""},{default:pt(()=>[We(n,{name:"chevron-up"})]),_:1})])],16)],8,["disabled"])}var ll=tt({render:CA,name:"VarBackTop",components:{VarButton:hi,VarIcon:Kt},inheritAttrs:!1,props:TA,setup(t){var e=de(!1),n=de(null),i=de(!0),r,s=u=>{ye(t.onClick,u);var c=rg(r);Rh(r,{left:c,duration:t.duration,animation:k_})},a=()=>{e.value=df(r)>=yn(t.visibilityHeight)},o=ng(a,200),l=()=>{var{target:u}=t;if(pi(u)){var c=document.querySelector(t.target);if(!c)throw Error("[Varlet] BackTop: target element cannot found");return c}if(_C(u))return u;throw Error('[Varlet] BackTop: type of prop "target" should be a selector or an element object')};return fn(()=>{r=t.target?l():cu(n.value),r.addEventListener("scroll",o),i.value=!1}),kc(()=>{r.removeEventListener("scroll",o)}),{disabled:i,show:e,backTopEl:n,toSizeUnit:dn,n:EA,classes:xA,click:s}}});ll.install=function(t){t.component(ll.name,ll)};function AA(t){return["default","primary","info","success","warning","danger"].includes(t)}function RA(t){return["right-top","right-bottom","left-top","left-bottom"].includes(t)}var PA={type:{type:String,default:"default",validator:AA},hidden:{type:Boolean,default:!1},dot:{type:Boolean,default:!1},value:{type:[String,Number],default:0},maxValue:{type:[String,Number]},color:{type:String},position:{type:String,default:"right-top",validator:RA},icon:{type:String}},{n:ss,classes:LA}=Qe("badge"),IA={key:1};function OA(t,e){var n=Je("var-icon");return ie(),he("div",{class:$(t.classes(t.n(),"var--box"))},[We(Mn,{name:"var-badge-fade"},{default:pt(()=>[Zt(Me("span",ln(t.$attrs,{class:t.classes(t.n("content"),...t.contentClass),style:{background:t.color}}),[t.icon&&!t.dot?(ie(),Mt(n,{key:0,name:t.icon,size:"10px"},null,8,["name"])):(ie(),he("span",IA,je(t.values),1))],16),[[Uc,!t.hidden]])]),_:1}),Ue(t.$slots,"default")],2)}var ka=tt({render:OA,name:"VarBadge",components:{VarIcon:Kt},inheritAttrs:!1,props:PA,setup(t,e){var{slots:n}=e,i=Le(()=>{var{type:a,position:o,dot:l,icon:u}=t,c=n.default&&ss("position")+" "+ss("--"+o),d=l?ss("dot"):null,h=s(),f=u?ss("icon"):null;return[ss("--"+a),c,d,h,f]}),r=Le(()=>{var{dot:a,value:o,maxValue:l}=t;return a?"":o!==void 0&&l!==void 0&&Te(o)>l?l+"+":o}),s=()=>{var{position:a,dot:o}=t;if(o&&a.includes("right"))return ss("dot--right");if(o&&a.includes("left"))return ss("dot--left")};return{n:ss,classes:LA,values:r,contentClass:i}}});ka.install=function(t){t.component(ka.name,ka)};var DA={active:{type:[Number,String],default:0},fixed:{type:Boolean,default:!1},border:{type:Boolean,default:!1},safeArea:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:1},activeColor:{type:String},inactiveColor:{type:String},onChange:{type:Function},"onUpdate:active":{type:Function},onBeforeChange:{type:Function},onFabClick:{type:Function},fabProps:{type:Object}},Q_=Symbol("BOTTOM_NAVIGATION_BIND_BOTTOM_NAVIGATION_ITEM_KEY"),e1=Symbol("BOTTOM_NAVIGATION_COUNT_BOTTOM_NAVIGATION_ITEM_KEY");function NA(){var{childProviders:t,bindChildren:e}=Hi(Q_),{length:n}=or(e1);return{length:n,bottomNavigationItems:t,bindBottomNavigationItem:e}}function pm(){return pm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},pm.apply(this,arguments)}var{n:kA,classes:FA}=Qe("bottom-navigation"),{n:pf}=Qe("bottom-navigation-item"),ty=pf("--right-half-space"),ny=pf("--left-half-space"),iy=pf("--right-space"),UA={type:"primary"};function BA(t,e){var n=Je("var-button");return ie(),he("div",{class:$(t.classes(t.n(),[t.fixed,t.n("--fixed")],[t.border,t.n("--border")],[t.safeArea,t.n("--safe-area")])),ref:"bottomNavigationDom",style:Be("z-index:"+t.zIndex)},[Ue(t.$slots,"default"),t.$slots.fab?(ie(),Mt(n,ln({key:0,class:t.classes(t.n("fab"),[t.length%2,t.n("--fab-right"),t.n("--fab-center")]),"var-bottom-navigation__fab":"",onClick:t.handleFabClick},t.fabProps,{round:""}),{default:pt(()=>[Ue(t.$slots,"fab")]),_:3},16,["class","onClick"])):qe("v-if",!0)],6)}var ul=tt({render:BA,name:"VarBottomNavigation",components:{VarButton:hi},props:DA,setup(t,e){var{slots:n}=e,i=de(null),r=Le(()=>t.active),s=Le(()=>t.activeColor),a=Le(()=>t.inactiveColor),o=de({}),{length:l,bottomNavigationItems:u,bindBottomNavigationItem:c}=NA(),d=()=>{l.value===0||h()||f()||m()},h=()=>u.find(_=>{var{name:R}=_;return r.value===R.value}),f=()=>u.find(_=>{var{index:R}=_;return r.value===R.value}),m=()=>{!Zn(r.value)||(r.value<0?ye(t["onUpdate:active"],0):r.value>l.value-1&&ye(t["onUpdate:active"],l.value-1))},v=_=>{r.value!==_&&(t.onBeforeChange?g(_):y(_))},g=_=>{Promise.resolve(ye(t.onBeforeChange,_)).then(R=>R&&y(_))},y=_=>{ye(t["onUpdate:active"],_),ye(t.onChange,_)},S=()=>{var _=E();_.forEach(R=>{R.classList.remove(ty,ny,iy)})},b=_=>{var R=E(),L=R.length,k=_%2===0;R.forEach((F,G)=>{w(k,F,G,L)})},w=(_,R,L,k)=>{var F=L===k-1;if(!_&&F){R.classList.add(iy);return}var G=L===k/2-1,H=L===k/2;G?R.classList.add(ty):H&&R.classList.add(ny)},E=()=>Array.from(i.value.querySelectorAll("."+pf())),T=()=>{ye(t.onFabClick)},I={active:r,activeColor:s,inactiveColor:a,onToggle:v};return c(I),Ke(()=>l.value,d),Ke(()=>t.fabProps,_=>{o.value=pm({},UA,_)},{immediate:!0,deep:!0}),fn(()=>{!n.fab||b(l.value)}),Nc(()=>{S(),n.fab&&b(l.value)}),{n:kA,classes:FA,length:l,bottomNavigationDom:i,handleFabClick:T,fabProps:o}}});ul.install=function(t){t.component(ul.name,ul)};var zA={name:{type:String},icon:{type:String},label:{type:String},namespace:{type:String,default:"var-icon"},badge:{type:[Boolean,Object],default:!1},onClick:{type:Function}};function VA(){var{parentProvider:t,bindParent:e}=Gi(Q_),{index:n}=lr(e1);if(!t||!e||!n)throw Error("<var-bottom-navigation-item/> must in <var-bottom-navigation/>");return{index:n,bottomNavigation:t,bindBottomNavigation:e}}var{n:HA,classes:GA}=Qe("bottom-navigation-item"),WA={type:"danger",dot:!0};function $A(t,e){var n=Je("var-icon"),i=Je("var-badge"),r=jn("ripple");return Zt((ie(),he("button",{class:$(t.classes(t.n(),[t.active===t.index||t.active===t.name,t.n("--active")])),style:Be({color:t.computeColorStyle()}),onClick:e[0]||(e[0]=function(){return t.handleClick&&t.handleClick(...arguments)})},[t.icon&&!t.$slots.icon?(ie(),Mt(n,{key:0,name:t.icon,namespace:t.namespace,class:$(t.n("icon")),"var-bottom-navigation-item-cover":""},null,8,["name","namespace","class"])):qe("v-if",!0),Ue(t.$slots,"icon",{active:t.active===t.index||t.active===t.name}),t.badge?(ie(),Mt(i,ln({key:1},t.badgeProps,{class:t.n("badge"),"var-bottom-navigation-item-cover":""}),null,16,["class"])):qe("v-if",!0),Me("span",{class:$(t.n("label"))},[t.$slots.default?qe("v-if",!0):(ie(),he(At,{key:0},[Rt(je(t.label),1)],2112)),Ue(t.$slots,"default")],2)],6)),[[r]])}var cl=tt({render:$A,name:"VarBottomNavigationItem",components:{VarBadge:ka,VarIcon:Kt},directives:{Ripple:kn},props:zA,setup(t){var e=Le(()=>t.name),n=Le(()=>t.badge),i=de({}),{index:r,bottomNavigation:s,bindBottomNavigation:a}=VA(),{active:o,activeColor:l,inactiveColor:u}=s,c={name:e,index:r},d=()=>o.value===e.value||o.value===r.value?l.value:u.value,h=()=>{var f,m=(f=e.value)!=null?f:r.value;ye(t.onClick,m),ye(s.onToggle,m)};return a(c),Ke(()=>n.value,f=>{i.value=f===!0?WA:n.value},{immediate:!0}),{n:HA,classes:GA,index:r,active:o,badge:n,badgeProps:i,computeColorStyle:d,handleClick:h}}});cl.install=function(t){t.component(cl.name,cl)};function XA(t){return["fill","contain","cover","none","scale-down"].includes(t)}var YA={src:{type:String},fit:{type:String,validator:XA,default:"cover"},imageHeight:{type:[String,Number]},imageWidth:{type:[String,Number]},layout:{type:String,default:"column"},floating:{type:Boolean,default:!1},"onUpdate:floating":{type:Function},floatingDuration:{type:Number,default:250},alt:{type:String},title:{type:String},subtitle:{type:String},description:{type:String},elevation:{type:[Number,String]},ripple:{type:Boolean,default:!1},onClick:{type:Function}};function ry(t,e,n,i,r,s,a){try{var o=t[s](a),l=o.value}catch(u){n(u);return}o.done?e(l):Promise.resolve(l).then(i,r)}function sy(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function a(l){ry(s,i,r,a,o,"next",l)}function o(l){ry(s,i,r,a,o,"throw",l)}a(void 0)})}}var{n:qA,classes:ZA}=Qe("card"),jA=500,KA=["src","alt"];function JA(t,e){var n=Je("var-icon"),i=Je("var-button"),r=jn("ripple");return Zt((ie(),he("div",{ref:"card",class:$(t.classes(t.n(),[t.isRow,t.n("--layout-row")],[t.elevation,"var-elevation--"+t.elevation,"var-elevation--1"])),style:Be({zIndex:t.floated?t.zIndex:void 0}),onClick:e[0]||(e[0]=function(){return t.onClick&&t.onClick(...arguments)})},[Me("div",{ref:"cardFloater",class:$(t.classes(t.n("floater"))),style:Be({width:t.floaterWidth,height:t.floaterHeight,top:t.floaterTop,left:t.floaterLeft,overflow:t.floaterOverflow,position:t.floaterPosition,transition:t.floated?"background-color "+t.floatingDuration+"ms, color "+t.floatingDuration+"ms, width "+t.floatingDuration+"ms, height "+t.floatingDuration+"ms, top "+t.floatingDuration+"ms, left "+t.floatingDuration+"ms":void 0})},[Ue(t.$slots,"image",{},()=>[t.src?(ie(),he("img",{key:0,class:$(t.n("image")),style:Be({objectFit:t.fit,height:t.toSizeUnit(t.imageHeight),width:t.toSizeUnit(t.imageWidth)}),src:t.src,alt:t.alt},null,14,KA)):qe("v-if",!0)]),Me("div",{class:$(t.n("container"))},[Ue(t.$slots,"title",{},()=>[t.title?(ie(),he("div",{key:0,class:$(t.n("title"))},je(t.title),3)):qe("v-if",!0)]),Ue(t.$slots,"subtitle",{},()=>[t.subtitle?(ie(),he("div",{key:0,class:$(t.n("subtitle"))},je(t.subtitle),3)):qe("v-if",!0)]),Ue(t.$slots,"description",{},()=>[t.description?(ie(),he("div",{key:0,class:$(t.n("description"))},je(t.description),3)):qe("v-if",!0)]),t.$slots.extra?(ie(),he("div",{key:0,class:$(t.n("footer"))},[Ue(t.$slots,"extra")],2)):qe("v-if",!0),t.$slots["floating-content"]&&!t.isRow?(ie(),he("div",{key:1,class:$(t.n("floating-content")),style:Be({height:t.contentHeight,opacity:t.opacity,transition:"opacity "+t.floatingDuration*2+"ms"})},[Ue(t.$slots,"floating-content")],6)):qe("v-if",!0)],2),t.showFloatingButtons?(ie(),he("div",{key:0,class:$(t.classes(t.n("floating-buttons"),"var--box")),style:Be({zIndex:t.zIndex,opacity:t.opacity,transition:"opacity "+t.floatingDuration*2+"ms"})},[Ue(t.$slots,"close-button",{},()=>[We(i,{"var-card-cover":"",round:"",class:$(t.classes(t.n("close-button"),"var-elevation--6")),onClick:qr(t.close,["stop"])},{default:pt(()=>[We(n,{"var-card-cover":"",name:"window-close",class:$(t.n("close-button-icon"))},null,8,["class"])]),_:1},8,["class","onClick"])])],6)):qe("v-if",!0)],6),Me("div",{class:$(t.n("holder")),style:Be({width:t.holderWidth,height:t.holderHeight})},null,6)],6)),[[r,{disabled:!t.ripple||t.floater}]])}var dl=tt({render:JA,name:"VarCard",directives:{Ripple:kn},components:{VarIcon:Kt,VarButton:hi},props:YA,setup(t){var e=de(null),n=de(null),i=de("auto"),r=de("auto"),s=de("100%"),a=de("100%"),o=de("auto"),l=de("auto"),u=de(void 0),c=de("hidden"),d=de("0px"),h=de("0"),f=Le(()=>t.layout==="row"),m=de(!1),v=de(!1),{zIndex:g}=ff(()=>t.floating,1);sg(()=>t.floating,()=>!f.value);var y="auto",S="auto",b=null,w=de(null),E=function(){var _=sy(function*(){clearTimeout(w.value),clearTimeout(b),w.value=null,w.value=setTimeout(sy(function*(){var{width:R,height:L,left:k,top:F}=e.value.getBoundingClientRect();i.value=dn(R),r.value=dn(L),s.value=i.value,a.value=r.value,o.value=dn(F),l.value=dn(k),u.value="fixed",y=o.value,S=l.value,m.value=!0,yield Mr(),o.value="0",l.value="0",s.value="100vw",a.value="100vh",d.value="auto",h.value="1",c.value="auto",v.value=!0}),t.ripple?jA:0)});return function(){return _.apply(this,arguments)}}(),T=()=>{clearTimeout(b),clearTimeout(w.value),w.value=null,s.value=i.value,a.value=r.value,o.value=y,l.value=S,d.value="0px",h.value="0",m.value=!1,b=setTimeout(()=>{i.value="auto",r.value="auto",s.value="100%",a.value="100%",o.value="auto",l.value="auto",y="auto",S="auto",c.value="hidden",u.value=void 0,v.value=!1},t.floatingDuration)},I=()=>{ye(t["onUpdate:floating"],!1)};return Ke(()=>t.floating,_=>{f.value||rn(()=>{_?E():T()})},{immediate:!0}),{n:qA,classes:ZA,toSizeUnit:dn,card:e,cardFloater:n,holderWidth:i,holderHeight:r,floater:w,floaterWidth:s,floaterHeight:a,floaterTop:o,floaterLeft:l,floaterPosition:u,floaterOverflow:c,contentHeight:d,opacity:h,zIndex:g,isRow:f,close:I,showFloatingButtons:m,floated:v}}});dl.install=function(t){t.component(dl.name,dl)};var QA={title:{type:[Number,String]},icon:{type:String},description:{type:String},border:{type:Boolean,default:!1},iconClass:{type:String},titleClass:{type:String},descriptionClass:{type:String},extraClass:{type:String}},{n:e2,classes:t2}=Qe("cell");function n2(t,e){var n=Je("var-icon");return ie(),he("div",{class:$(t.classes(t.n(),[t.border,t.n("--border")]))},[t.$slots.icon||t.icon?(ie(),he("div",{key:0,class:$(t.classes(t.n("icon"),[t.iconClass,t.iconClass]))},[Ue(t.$slots,"icon",{},()=>[We(n,{class:"var--flex",name:t.icon},null,8,["name"])])],2)):qe("v-if",!0),Me("div",{class:$(t.n("content"))},[Me("div",{class:$(t.classes(t.n("title"),[t.titleClass,t.titleClass]))},[Ue(t.$slots,"default",{},()=>[Rt(je(t.title),1)])],2),t.$slots.description||t.description?(ie(),he("div",{key:0,class:$(t.classes(t.n("description"),[t.descriptionClass,t.descriptionClass]))},[Ue(t.$slots,"description",{},()=>[Rt(je(t.description),1)])],2)):qe("v-if",!0)],2),t.$slots.extra?(ie(),he("div",{key:1,class:$(t.classes(t.n("extra"),[t.extraClass,t.extraClass]))},[Ue(t.$slots,"extra")],2)):qe("v-if",!0)],2)}var Fa=tt({render:n2,name:"VarCell",components:{VarIcon:Kt},props:QA,setup(){return{n:e2,classes:t2}}});Fa.install=function(t){t.component(Fa.name,Fa)};var i2={errorMessage:{type:String,default:""},extraMessage:{type:String,default:""}},{n:r2}=Qe("form-details"),s2={key:0},a2={key:0};function o2(t,e){return ie(),Mt(Mn,{name:t.n()},{default:pt(()=>[t.errorMessage||t.extraMessage?(ie(),he("div",{key:0,class:$(t.n())},[Me("div",{class:$(t.n("error-message"))},[We(Mn,{name:t.n("message")},{default:pt(()=>[t.errorMessage?(ie(),he("div",s2,je(t.errorMessage),1)):qe("v-if",!0)]),_:1},8,["name"])],2),Me("div",{class:$(t.n("extra-message"))},[We(Mn,{name:t.n("message")},{default:pt(()=>[t.extraMessage?(ie(),he("div",a2,je(t.extraMessage),1)):qe("v-if",!0)]),_:1},8,["name"])],2)],2)):qe("v-if",!0)]),_:1},8,["name"])}var Wn=tt({render:o2,name:"VarFormDetails",props:i2,setup:()=>({n:r2})});Wn.install=function(t){t.component(Wn.name,Wn)};var l2={modelValue:{type:[String,Number,Boolean,Object,Array],default:!1},checkedValue:{type:[String,Number,Boolean,Object,Array],default:!0},uncheckedValue:{type:[String,Number,Boolean,Object,Array],default:!1},checkedColor:{type:String},uncheckedColor:{type:String},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},iconSize:{type:[String,Number]},ripple:{type:Boolean,default:!0},validateTrigger:{type:Array,default:["onChange"]},rules:{type:Array},onClick:{type:Function},onChange:{type:Function},"onUpdate:modelValue":{type:Function}},t1=Symbol("CHECKBOX_GROUP_BIND_CHECKBOX_KEY"),n1=Symbol("CHECKBOX_GROUP_COUNT_CHECKBOX_KEY");function u2(){var{bindChildren:t,childProviders:e}=Hi(t1),{length:n}=or(n1);return{length:n,checkboxes:e,bindCheckboxes:t}}function c2(){var{bindParent:t,parentProvider:e}=Gi(t1),{index:n}=lr(n1);return{index:n,checkboxGroup:e,bindCheckboxGroup:t}}var i1=Symbol("FORM_BIND_FORM_ITEM_KEY");function $i(){var{bindParent:t,parentProvider:e}=Gi(i1);return{bindForm:t,form:e}}function d2(){var{bindChildren:t,childProviders:e}=Hi(i1);return{formItems:e,bindFormItems:t}}var{n:h2,classes:f2}=Qe("checkbox");function p2(t,e){var n=Je("var-icon"),i=Je("var-form-details"),r=jn("ripple");return ie(),he("div",{class:$(t.n("wrap")),onClick:e[0]||(e[0]=function(){return t.handleClick&&t.handleClick(...arguments)})},[Me("div",{class:$(t.n())},[Zt((ie(),he("div",{class:$(t.classes(t.n("action"),[t.checked,t.n("--checked"),t.n("--unchecked")],[t.errorMessage||t.checkboxGroupErrorMessage,t.n("--error")],[t.formDisabled||t.disabled,t.n("--disabled")])),style:Be({color:t.checked?t.checkedColor:t.uncheckedColor})},[t.checked?Ue(t.$slots,"checked-icon",{key:0},()=>[We(n,{class:$(t.classes(t.n("icon"),[t.withAnimation,t.n("--with-animation")])),name:"checkbox-marked",size:t.iconSize,"var-checkbox-cover":""},null,8,["class","size"])]):Ue(t.$slots,"unchecked-icon",{key:1},()=>[We(n,{class:$(t.classes(t.n("icon"),[t.withAnimation,t.n("--with-animation")])),name:"checkbox-blank-outline",size:t.iconSize,"var-checkbox-cover":""},null,8,["class","size"])])],6)),[[r,{disabled:t.formReadonly||t.readonly||t.formDisabled||t.disabled||!t.ripple}]]),Me("div",{class:$(t.classes(t.n("text"),[t.errorMessage||t.checkboxGroupErrorMessage,t.n("--error")],[t.formDisabled||t.disabled,t.n("--disabled")]))},[Ue(t.$slots,"default")],2)],2),We(i,{"error-message":t.errorMessage},null,8,["error-message"])],2)}var Ua=tt({render:p2,name:"VarCheckbox",directives:{Ripple:kn},components:{VarIcon:Kt,VarFormDetails:Wn},props:l2,setup(t){var e=de(!1),n=Le(()=>e.value===t.checkedValue),i=Le(()=>t.checkedValue),r=de(!1),{checkboxGroup:s,bindCheckboxGroup:a}=c2(),{form:o,bindForm:l}=$i(),{errorMessage:u,validateWithTrigger:c,validate:d,resetValidation:h}=Wi(),f=T=>{rn(()=>{var{validateTrigger:I,rules:_,modelValue:R}=t;c(I,T,_,R)})},m=T=>{e.value=T;var{checkedValue:I,onChange:_}=t;ye(t["onUpdate:modelValue"],e.value),ye(_,e.value),f("onChange"),T===I?s==null||s.onChecked(I):s==null||s.onUnchecked(I)},v=T=>{var{disabled:I,readonly:_,checkedValue:R,uncheckedValue:L,onClick:k}=t;if(!(o!=null&&o.disabled.value||I)&&(ye(k,T),!(o!=null&&o.readonly.value||_))){r.value=!0;var F=s?s.checkedCount.value>=Number(s.max.value):!1;!n.value&&F||m(n.value?L:R)}},g=T=>{var{checkedValue:I,uncheckedValue:_}=t;e.value=T.includes(I)?I:_},y=()=>{r.value=!1},S=()=>{ye(t["onUpdate:modelValue"],t.uncheckedValue),h()},b=T=>{var{checkedValue:I,uncheckedValue:_}=t,R=![I,_].includes(T);R&&(T=n.value?_:I),m(T)},w=()=>d(t.rules,t.modelValue);Ke(()=>t.modelValue,T=>{e.value=T},{immediate:!0});var E={checkedValue:i,checked:n,sync:g,validate:w,resetValidation:h,reset:S,resetWithAnimation:y};return ye(a,E),ye(l,E),{withAnimation:r,checked:n,errorMessage:u,checkboxGroupErrorMessage:s==null?void 0:s.errorMessage,formDisabled:o==null?void 0:o.disabled,formReadonly:o==null?void 0:o.readonly,n:h2,classes:f2,handleClick:v,toggle:b,reset:S,validate:w,resetValidation:h}}});Ua.install=function(t){t.component(Ua.name,Ua)};function m2(t){return["horizontal","vertical"].includes(t)}var v2={modelValue:{type:Array,default:()=>[]},max:{type:[String,Number]},direction:{type:String,default:"horizontal",validator:m2},validateTrigger:{type:Array,default:["onChange"]},rules:{type:Array},onChange:{type:Function},"onUpdate:modelValue":{type:Function}},{n:g2,classes:y2}=Qe("checkbox-group");function b2(t,e){var n=Je("var-form-details");return ie(),he("div",{class:$(t.n("wrap"))},[Me("div",{class:$(t.classes(t.n(),t.n("--"+t.direction)))},[Ue(t.$slots,"default")],2),We(n,{"error-message":t.errorMessage},null,8,["error-message"])],2)}var hl=tt({render:b2,name:"VarCheckboxGroup",components:{VarFormDetails:Wn},props:v2,setup(t){var e=Le(()=>t.max),n=Le(()=>t.modelValue.length),{length:i,checkboxes:r,bindCheckboxes:s}=u2(),{bindForm:a}=$i(),{errorMessage:o,validateWithTrigger:l,validate:u,resetValidation:c}=Wi(),d=Le(()=>o.value),h=I=>{rn(()=>{var{validateTrigger:_,rules:R,modelValue:L}=t;l(_,I,R,L)})},f=I=>{ye(t["onUpdate:modelValue"],I),ye(t.onChange,I),h("onChange")},m=I=>{var{modelValue:_}=t;_.includes(I)||f([..._,I])},v=I=>{var{modelValue:_}=t;!_.includes(I)||f(_.filter(R=>R!==I))},g=()=>r.forEach(I=>{var{sync:_}=I;return _(t.modelValue)}),y=()=>{r.forEach(I=>I.resetWithAnimation())},S=()=>{var I=r.map(R=>{var{checkedValue:L}=R;return L.value}),_=$0(I);return y(),ye(t["onUpdate:modelValue"],_),_},b=()=>{var I=r.filter(R=>{var{checked:L}=R;return!L.value}).map(R=>{var{checkedValue:L}=R;return L.value}),_=$0(I);return y(),ye(t["onUpdate:modelValue"],_),_},w=()=>{ye(t["onUpdate:modelValue"],[]),c()},E=()=>u(t.rules,t.modelValue);Ke(()=>t.modelValue,g,{deep:!0}),Ke(()=>i.value,g);var T={max:e,checkedCount:n,onChecked:m,onUnchecked:v,validate:E,resetValidation:c,reset:w,errorMessage:d};return s(T),ye(a,T),{errorMessage:o,n:g2,classes:y2,checkAll:S,inverseAll:b,reset:w,validate:E,resetValidation:c}}});hl.install=function(t){t.component(hl.name,hl)};function w2(t){return["default","primary","info","success","warning","danger"].includes(t)}function _2(t){return["normal","mini","small","large"].includes(t)}var S2={type:{type:String,default:"default",validator:w2},size:{type:String,default:"normal",validator:_2},color:{type:String},textColor:{type:String},iconName:ui(q_,"name"),plain:{type:Boolean,default:!1},round:{type:Boolean,default:!0},block:{type:Boolean,default:!1},closable:{type:Boolean,default:!1},onClose:{type:Function}},{n:_o,classes:M2}=Qe("chip");function T2(t,e){var n=Je("var-icon");return ie(),Mt(Mn,{name:"var-fade"},{default:pt(()=>[Me("span",ln({class:t.classes(t.n(),"var--box",...t.contentClass),style:t.chipStyles},t.$attrs),[Ue(t.$slots,"left"),Me("span",{class:$(t.n("text-"+t.size))},[Ue(t.$slots,"default")],2),Ue(t.$slots,"right"),t.closable?(ie(),he("span",{key:0,class:$(t.n("--close")),onClick:e[0]||(e[0]=function(){return t.onClose&&t.onClose(...arguments)})},[We(n,{name:""+(t.iconName?t.iconName:"close-circle")},null,8,["name"])],2)):qe("v-if",!0)],16)]),_:3})}var Ba=tt({render:T2,name:"VarChip",components:{VarIcon:Kt},inheritAttrs:!1,props:S2,setup(t){var e=Le(()=>{var{plain:i,textColor:r,color:s}=t;return i?{color:r||s,borderColor:s}:{color:r,background:s}}),n=Le(()=>{var{size:i,block:r,type:s,plain:a,round:o}=t,l=r?"var--flex":"var--inline-flex",u=a?_o("plain")+" "+_o("plain-"+s):_o("--"+s),c=o?_o("--round"):null;return[_o("--"+i),l,u,c]});return{n:_o,classes:M2,chipStyles:e,contentClass:n}}});Ba.install=function(t){t.component(Ba.name,Ba)};function E2(t){return["row","column"].includes(t)}var x2={span:{type:[String,Number],default:24},offset:{type:[String,Number],default:0},direction:{type:String,default:"row",validator:E2},onClick:{type:Function},xs:{type:[Object,Number,String]},sm:{type:[Object,Number,String]},md:{type:[Object,Number,String]},lg:{type:[Object,Number,String]},xl:{type:[Object,Number,String]}},r1=Symbol("ROW_BIND_COL_KEY"),s1=Symbol("ROW_COUNT_COL_KEY");function C2(){var{bindChildren:t,childProviders:e}=Hi(r1),{length:n}=or(s1);return{length:n,cols:e,bindCols:t}}function A2(){var{parentProvider:t,bindParent:e}=Gi(r1),{index:n}=lr(s1);return(!t||!e||!n)&&console.warn("col must in row"),{index:n,row:t,bindRow:e}}var{n:bd,classes:R2}=Qe("col");function P2(t,e){return ie(),he("div",{class:$(t.classes(t.n(),"var--box",[t.span>=0,t.n("--span-"+t.span)],[t.offset,t.n("--offset-"+t.offset)],...t.getSize("xs",t.xs),...t.getSize("sm",t.sm),...t.getSize("md",t.md),...t.getSize("lg",t.lg),...t.getSize("xl",t.xl))),style:Be({flexDirection:t.direction,paddingLeft:t.toSizeUnit(t.padding.left),paddingRight:t.toSizeUnit(t.padding.right)}),onClick:e[0]||(e[0]=function(){return t.onClick&&t.onClick(...arguments)})},[Ue(t.$slots,"default")],6)}var fl=tt({render:P2,name:"VarCol",props:x2,setup(t){var e=de({left:0,right:0}),n=Le(()=>Te(t.span)),i=Le(()=>Te(t.offset)),{row:r,bindRow:s}=A2(),a={setPadding(l){e.value=l}},o=(l,u)=>{var c=[];if(u==null)return c;if(tg(u)){var{offset:d,span:h}=u;Number(h)>=0&&c.push(bd("--span-"+l+"-"+h)),d&&c.push(bd("--offset-"+l+"-"+d))}else Number(u)>=0&&c.push(bd("--span-"+l+"-"+u));return c};return Ke([()=>t.span,()=>t.offset],()=>{r==null||r.computePadding()}),ye(s,a),{n:bd,classes:R2,padding:e,toNumber:Te,toSizeUnit:dn,getSize:o,span:n,offset:i}}});fl.install=function(t){t.component(fl.name,fl)};var a1=Symbol("COLLAPSE_BIND_COLLAPSE_ITEM_KEY"),o1=Symbol("COLLAPSE_COUNT_COLLAPSE_ITEM_KEY");function L2(){var{bindChildren:t,childProviders:e}=Hi(a1),{length:n}=or(o1);return{length:n,collapseItem:e,bindCollapseItem:t}}var I2={modelValue:{type:[Array,String,Number]},accordion:{type:Boolean,default:!1},offset:{type:Boolean,default:!0},onChange:{type:Function},"onUpdate:modelValue":{type:Function}},{n:O2}=Qe("collapse");function D2(t,e){return ie(),he("div",{class:$(t.n())},[Ue(t.$slots,"default")],2)}var pl=tt({render:D2,name:"VarCollapse",props:I2,setup(t){var{length:e,collapseItem:n,bindCollapseItem:i}=L2(),r=Le(()=>t.modelValue),s=Le(()=>t.offset),a=()=>!t.accordion&&!qt(t.modelValue)?(console.error('[Varlet] Collapse: type of prop "modelValue" should be an Array'),!1):t.accordion&&qt(t.modelValue)?(console.error('[Varlet] Collapse: type of prop "modelValue" should be a String or Number'),!1):!0,o=(f,m)=>a()?m?t.accordion?f:[...t.modelValue,f]:t.accordion?null:t.modelValue.filter(v=>v!==f):null,l=(f,m)=>{var v=o(f,m);ye(t["onUpdate:modelValue"],v),ye(t.onChange,v)},u=()=>{if(t.accordion)return n.find(m=>{var{name:v}=m;return t.modelValue===v.value});var f=n.filter(m=>{var{name:v}=m;return v.value===void 0?!1:t.modelValue.includes(v.value)});return f.length?f:void 0},c=()=>t.accordion?n.find(f=>{var{index:m,name:v}=f;return v.value===void 0?t.modelValue===m.value:!1}):n.filter(f=>{var{index:m,name:v}=f;return v.value===void 0?t.modelValue.includes(m.value):!1}),d=()=>{if(!!a()){var f=u()||c();if(t.accordion&&!f||!t.accordion&&!f.length){n.forEach(m=>{m.init(t.accordion,!1)});return}n.forEach(m=>{var v=t.accordion?f===m:f.includes(m);m.init(t.accordion,v)})}},h={active:r,offset:s,updateItem:l};return i(h),Ke(()=>e.value,()=>rn().then(d)),Ke(()=>t.modelValue,()=>rn().then(d)),{n:O2}}});pl.install=function(t){t.component(pl.name,pl)};function N2(){var{parentProvider:t,bindParent:e}=Gi(a1),{index:n}=lr(o1);if(!t||!e||!n)throw Error("[Varlet] Collapse: <var-collapse-item/> must in <var-collapse>");return{index:n,collapse:t,bindCollapse:e}}var k2={name:{type:[String,Number]},title:{type:String},icon:{type:String,default:"chevron-down"},disabled:{type:Boolean,default:!1}},{n:F2,classes:U2}=Qe("collapse-item");function B2(t,e){var n=Je("var-icon");return ie(),he("div",{class:$(t.classes(t.n(),[t.offset&&t.isShow,t.n("--active")],[t.disabled,t.n("--disable")]))},[Me("div",{class:$(t.n("header")),onClick:e[0]||(e[0]=i=>t.toggle())},[Me("div",{class:$(t.n("header-title"))},[Ue(t.$slots,"title",{},()=>[Rt(je(t.title),1)])],2),Me("div",{class:$(t.n("header-icon"))},[Ue(t.$slots,"icon",{},()=>[We(n,{name:t.icon,transition:250,class:$(t.classes(t.n("header-icon"),[t.isShow&&t.icon==="chevron-down",t.n("header-open")],[t.disabled,t.n("header--disable")]))},null,8,["name","class"])])],2)],2),Zt(Me("div",{class:$(t.n("content")),ref:"contentEl",onTransitionend:e[1]||(e[1]=function(){return t.transitionend&&t.transitionend(...arguments)}),onTransitionstart:e[2]||(e[2]=function(){return t.start&&t.start(...arguments)})},[Me("div",{class:$(t.n("content-wrap"))},[Ue(t.$slots,"default")],2)],34),[[Uc,t.show]])],2)}var ml=tt({render:B2,name:"VarCollapseItem",components:{VarIcon:Kt},props:k2,setup(t){var{index:e,collapse:n,bindCollapse:i}=N2(),r=!0,s=de(null),a=de(!1),o=de(!1),{active:l,offset:u,updateItem:c}=n,d=Le(()=>t.name),h=(b,w)=>{l.value===void 0||b&&qt(l.value)||w===o.value||(o.value=w,f(!0))},f=b=>{t.disabled||b||c(t.name||e.value,!o.value)},m=()=>{!s.value||(s.value.style.height="",a.value=!0,rn(()=>{var{offsetHeight:b}=s.value;s.value.style.height=0+"px",Sr(()=>{s.value.style.height=b+"px",r&&hf(()=>{r&&y()})})}))},v=()=>{r=!1},g=()=>{if(!!s.value){var{offsetHeight:b}=s.value;s.value.style.height=b+"px",Sr(()=>{s.value.style.height=0+"px"})}},y=()=>{o.value||(a.value=!1),s.value.style.height=""},S={index:e,name:d,init:h};return i(S),Ke(o,b=>{b?m():g()}),{n:F2,start:v,classes:U2,show:a,isShow:o,offset:u,toggle:f,contentEl:s,transitionend:y}}});ml.install=function(t){t.component(ml.name,ml)};var z2={time:{type:[String,Number],default:0},format:{type:String,default:"HH : mm : ss"},autoStart:{type:Boolean,default:!0},onEnd:{type:Function},onChange:{type:Function}},{n:V2}=Qe("countdown"),mm=1e3,vm=60*mm,gm=60*vm,ay=24*gm;function H2(t,e){return ie(),he("div",{class:$(t.n())},[Ue(t.$slots,"default",Pw(E_(t.timeData)),()=>[Rt(je(t.showTime),1)])],2)}var vl=tt({render:H2,name:"VarCountdown",props:z2,setup(t){var e=de(0),n=de(!1),i=de(""),r=de(0),s=de(0),a=de({days:0,hours:0,minutes:0,seconds:0,milliseconds:0}),o=(f,m)=>{var v=Object.values(m),g=["DD","HH","mm","ss"],y=[24,60,60,1e3];if(g.forEach((b,w)=>{f.includes(b)?f=f.replace(b,Ka(""+v[w],2,"0")):v[w+1]+=v[w]*y[w]}),f.includes("S")){var S=Ka(""+v[v.length-1],3,"0");f.includes("SSS")?f=f.replace("SSS",S):f.includes("SS")?f=f.replace("SS",S.slice(0,2)):f=f.replace("S",S.slice(0,1))}return f},l=f=>{var m=Math.floor(f/ay),v=Math.floor(f%ay/gm),g=Math.floor(f%gm/vm),y=Math.floor(f%vm/mm),S=Math.floor(f%mm),b={days:m,hours:v,minutes:g,seconds:y,milliseconds:S};a.value=b,ye(t.onChange,a.value),i.value=o(t.format,b)},u=()=>{var{time:f,onEnd:m,autoStart:v}=t,g=Date.now();e.value||(e.value=g+Te(f));var y=e.value-g;if(y<0&&(y=0),s.value=y,l(y),y===0){ye(m);return}(v||n.value)&&(r.value=Sr(u))},c=()=>{n.value||(n.value=!0,e.value=Date.now()+(s.value||Te(t.time)),u())},d=()=>{n.value=!1},h=()=>{e.value=0,n.value=!1,LC(r.value),u()};return Ke(()=>t.time,()=>h(),{immediate:!0}),{showTime:i,timeData:a,n:V2,start:c,pause:d,reset:h}}});vl.install=function(t){t.component(vl.name,vl)};/*!
 *  decimal.js v10.4.2
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Wo=9e15,Ks=1e9,ym="0123456789abcdef",Ih="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Oh="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",bm={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Wo,maxE:Wo,crypto:!1},l1,Vr,yt=!0,mf="[DecimalError] ",Gs=mf+"Invalid argument: ",u1=mf+"Precision limit exceeded",c1=mf+"crypto unavailable",d1="[object Decimal]",Kn=Math.floor,An=Math.pow,G2=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,W2=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,$2=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,h1=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,sr=1e7,ft=7,X2=9007199254740991,Y2=Ih.length-1,wm=Oh.length-1,Ne={toStringTag:d1};Ne.absoluteValue=Ne.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),ct(t)};Ne.ceil=function(){return ct(new this.constructor(this),this.e+1,2)};Ne.clampedTo=Ne.clamp=function(t,e){var n,i=this,r=i.constructor;if(t=new r(t),e=new r(e),!t.s||!e.s)return new r(NaN);if(t.gt(e))throw Error(Gs+e);return n=i.cmp(t),n<0?t:i.cmp(e)>0?e:new r(i)};Ne.comparedTo=Ne.cmp=function(t){var e,n,i,r,s=this,a=s.d,o=(t=new s.constructor(t)).d,l=s.s,u=t.s;if(!a||!o)return!l||!u?NaN:l!==u?l:a===o?0:!a^l<0?1:-1;if(!a[0]||!o[0])return a[0]?l:o[0]?-u:0;if(l!==u)return l;if(s.e!==t.e)return s.e>t.e^l<0?1:-1;for(i=a.length,r=o.length,e=0,n=i<r?i:r;e<n;++e)if(a[e]!==o[e])return a[e]>o[e]^l<0?1:-1;return i===r?0:i>r^l<0?1:-1};Ne.cosine=Ne.cos=function(){var t,e,n=this,i=n.constructor;return n.d?n.d[0]?(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+ft,i.rounding=1,n=q2(i,g1(i,n)),i.precision=t,i.rounding=e,ct(Vr==2||Vr==3?n.neg():n,t,e,!0)):new i(1):new i(NaN)};Ne.cubeRoot=Ne.cbrt=function(){var t,e,n,i,r,s,a,o,l,u,c=this,d=c.constructor;if(!c.isFinite()||c.isZero())return new d(c);for(yt=!1,s=c.s*An(c.s*c,1/3),!s||Math.abs(s)==1/0?(n=Hn(c.d),t=c.e,(s=(t-n.length+1)%3)&&(n+=s==1||s==-2?"0":"00"),s=An(n,1/3),t=Kn((t+1)/3)-(t%3==(t<0?-1:2)),s==1/0?n="5e"+t:(n=s.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),i=new d(n),i.s=c.s):i=new d(s.toString()),a=(t=d.precision)+3;;)if(o=i,l=o.times(o).times(o),u=l.plus(c),i=jt(u.plus(c).times(o),u.plus(l),a+2,1),Hn(o.d).slice(0,a)===(n=Hn(i.d)).slice(0,a))if(n=n.slice(a-3,a+1),n=="9999"||!r&&n=="4999"){if(!r&&(ct(o,t+1,0),o.times(o).times(o).eq(c))){i=o;break}a+=4,r=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(ct(i,t+1,1),e=!i.times(i).times(i).eq(c));break}return yt=!0,ct(i,t,d.rounding,e)};Ne.decimalPlaces=Ne.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-Kn(this.e/ft))*ft,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};Ne.dividedBy=Ne.div=function(t){return jt(this,new this.constructor(t))};Ne.dividedToIntegerBy=Ne.divToInt=function(t){var e=this,n=e.constructor;return ct(jt(e,new n(t),0,1,1),n.precision,n.rounding)};Ne.equals=Ne.eq=function(t){return this.cmp(t)===0};Ne.floor=function(){return ct(new this.constructor(this),this.e+1,3)};Ne.greaterThan=Ne.gt=function(t){return this.cmp(t)>0};Ne.greaterThanOrEqualTo=Ne.gte=function(t){var e=this.cmp(t);return e==1||e===0};Ne.hyperbolicCosine=Ne.cosh=function(){var t,e,n,i,r,s=this,a=s.constructor,o=new a(1);if(!s.isFinite())return new a(s.s?1/0:NaN);if(s.isZero())return o;n=a.precision,i=a.rounding,a.precision=n+Math.max(s.e,s.sd())+4,a.rounding=1,r=s.d.length,r<32?(t=Math.ceil(r/3),e=(1/gf(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),s=Kl(a,1,s.times(e),new a(1),!0);for(var l,u=t,c=new a(8);u--;)l=s.times(s),s=o.minus(l.times(c.minus(l.times(c))));return ct(s,a.precision=n,a.rounding=i,!0)};Ne.hyperbolicSine=Ne.sinh=function(){var t,e,n,i,r=this,s=r.constructor;if(!r.isFinite()||r.isZero())return new s(r);if(e=s.precision,n=s.rounding,s.precision=e+Math.max(r.e,r.sd())+4,s.rounding=1,i=r.d.length,i<3)r=Kl(s,2,r,r,!0);else{t=1.4*Math.sqrt(i),t=t>16?16:t|0,r=r.times(1/gf(5,t)),r=Kl(s,2,r,r,!0);for(var a,o=new s(5),l=new s(16),u=new s(20);t--;)a=r.times(r),r=r.times(o.plus(a.times(l.times(a).plus(u))))}return s.precision=e,s.rounding=n,ct(r,e,n,!0)};Ne.hyperbolicTangent=Ne.tanh=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+7,i.rounding=1,jt(n.sinh(),n.cosh(),i.precision=t,i.rounding=e)):new i(n.s)};Ne.inverseCosine=Ne.acos=function(){var t,e=this,n=e.constructor,i=e.abs().cmp(1),r=n.precision,s=n.rounding;return i!==-1?i===0?e.isNeg()?nr(n,r,s):new n(0):new n(NaN):e.isZero()?nr(n,r+4,s).times(.5):(n.precision=r+6,n.rounding=1,e=e.asin(),t=nr(n,r+4,s).times(.5),n.precision=r,n.rounding=s,t.minus(e))};Ne.inverseHyperbolicCosine=Ne.acosh=function(){var t,e,n=this,i=n.constructor;return n.lte(1)?new i(n.eq(1)?0:NaN):n.isFinite()?(t=i.precision,e=i.rounding,i.precision=t+Math.max(Math.abs(n.e),n.sd())+4,i.rounding=1,yt=!1,n=n.times(n).minus(1).sqrt().plus(n),yt=!0,i.precision=t,i.rounding=e,n.ln()):new i(n)};Ne.inverseHyperbolicSine=Ne.asinh=function(){var t,e,n=this,i=n.constructor;return!n.isFinite()||n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,i.rounding=1,yt=!1,n=n.times(n).plus(1).sqrt().plus(n),yt=!0,i.precision=t,i.rounding=e,n.ln())};Ne.inverseHyperbolicTangent=Ne.atanh=function(){var t,e,n,i,r=this,s=r.constructor;return r.isFinite()?r.e>=0?new s(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(t=s.precision,e=s.rounding,i=r.sd(),Math.max(i,t)<2*-r.e-1?ct(new s(r),t,e,!0):(s.precision=n=i-r.e,r=jt(r.plus(1),new s(1).minus(r),n+t,1),s.precision=t+4,s.rounding=1,r=r.ln(),s.precision=t,s.rounding=e,r.times(.5))):new s(NaN)};Ne.inverseSine=Ne.asin=function(){var t,e,n,i,r=this,s=r.constructor;return r.isZero()?new s(r):(e=r.abs().cmp(1),n=s.precision,i=s.rounding,e!==-1?e===0?(t=nr(s,n+4,i).times(.5),t.s=r.s,t):new s(NaN):(s.precision=n+6,s.rounding=1,r=r.div(new s(1).minus(r.times(r)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=i,r.times(2)))};Ne.inverseTangent=Ne.atan=function(){var t,e,n,i,r,s,a,o,l,u=this,c=u.constructor,d=c.precision,h=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&d+4<=wm)return a=nr(c,d+4,h).times(.25),a.s=u.s,a}else{if(!u.s)return new c(NaN);if(d+4<=wm)return a=nr(c,d+4,h).times(.5),a.s=u.s,a}for(c.precision=o=d+10,c.rounding=1,n=Math.min(28,o/ft+2|0),t=n;t;--t)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(yt=!1,e=Math.ceil(o/ft),i=1,l=u.times(u),a=new c(u),r=u;t!==-1;)if(r=r.times(l),s=a.minus(r.div(i+=2)),r=r.times(l),a=s.plus(r.div(i+=2)),a.d[e]!==void 0)for(t=e;a.d[t]===s.d[t]&&t--;);return n&&(a=a.times(2<<n-1)),yt=!0,ct(a,c.precision=d,c.rounding=h,!0)};Ne.isFinite=function(){return!!this.d};Ne.isInteger=Ne.isInt=function(){return!!this.d&&Kn(this.e/ft)>this.d.length-2};Ne.isNaN=function(){return!this.s};Ne.isNegative=Ne.isNeg=function(){return this.s<0};Ne.isPositive=Ne.isPos=function(){return this.s>0};Ne.isZero=function(){return!!this.d&&this.d[0]===0};Ne.lessThan=Ne.lt=function(t){return this.cmp(t)<0};Ne.lessThanOrEqualTo=Ne.lte=function(t){return this.cmp(t)<1};Ne.logarithm=Ne.log=function(t){var e,n,i,r,s,a,o,l,u=this,c=u.constructor,d=c.precision,h=c.rounding,f=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(n=u.d,u.s<0||!n||!n[0]||u.eq(1))return new c(n&&!n[0]?-1/0:u.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)s=!0;else{for(r=n[0];r%10===0;)r/=10;s=r!==1}if(yt=!1,o=d+f,a=Cs(u,o),i=e?Dh(c,o+10):Cs(t,o),l=jt(a,i,o,1),dc(l.d,r=d,h))do if(o+=10,a=Cs(u,o),i=e?Dh(c,o+10):Cs(t,o),l=jt(a,i,o,1),!s){+Hn(l.d).slice(r+1,r+15)+1==1e14&&(l=ct(l,d+1,0));break}while(dc(l.d,r+=10,h));return yt=!0,ct(l,d,h)};Ne.minus=Ne.sub=function(t){var e,n,i,r,s,a,o,l,u,c,d,h,f=this,m=f.constructor;if(t=new m(t),!f.d||!t.d)return!f.s||!t.s?t=new m(NaN):f.d?t.s=-t.s:t=new m(t.d||f.s!==t.s?f:NaN),t;if(f.s!=t.s)return t.s=-t.s,f.plus(t);if(u=f.d,h=t.d,o=m.precision,l=m.rounding,!u[0]||!h[0]){if(h[0])t.s=-t.s;else if(u[0])t=new m(f);else return new m(l===3?-0:0);return yt?ct(t,o,l):t}if(n=Kn(t.e/ft),c=Kn(f.e/ft),u=u.slice(),s=c-n,s){for(d=s<0,d?(e=u,s=-s,a=h.length):(e=h,n=c,a=u.length),i=Math.max(Math.ceil(o/ft),a)+2,s>i&&(s=i,e.length=1),e.reverse(),i=s;i--;)e.push(0);e.reverse()}else{for(i=u.length,a=h.length,d=i<a,d&&(a=i),i=0;i<a;i++)if(u[i]!=h[i]){d=u[i]<h[i];break}s=0}for(d&&(e=u,u=h,h=e,t.s=-t.s),a=u.length,i=h.length-a;i>0;--i)u[a++]=0;for(i=h.length;i>s;){if(u[--i]<h[i]){for(r=i;r&&u[--r]===0;)u[r]=sr-1;--u[r],u[i]+=sr}u[i]-=h[i]}for(;u[--a]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(t.d=u,t.e=vf(u,n),yt?ct(t,o,l):t):new m(l===3?-0:0)};Ne.modulo=Ne.mod=function(t){var e,n=this,i=n.constructor;return t=new i(t),!n.d||!t.s||t.d&&!t.d[0]?new i(NaN):!t.d||n.d&&!n.d[0]?ct(new i(n),i.precision,i.rounding):(yt=!1,i.modulo==9?(e=jt(n,t.abs(),0,3,1),e.s*=t.s):e=jt(n,t,0,i.modulo,1),e=e.times(t),yt=!0,n.minus(e))};Ne.naturalExponential=Ne.exp=function(){return _m(this)};Ne.naturalLogarithm=Ne.ln=function(){return Cs(this)};Ne.negated=Ne.neg=function(){var t=new this.constructor(this);return t.s=-t.s,ct(t)};Ne.plus=Ne.add=function(t){var e,n,i,r,s,a,o,l,u,c,d=this,h=d.constructor;if(t=new h(t),!d.d||!t.d)return!d.s||!t.s?t=new h(NaN):d.d||(t=new h(t.d||d.s===t.s?d:NaN)),t;if(d.s!=t.s)return t.s=-t.s,d.minus(t);if(u=d.d,c=t.d,o=h.precision,l=h.rounding,!u[0]||!c[0])return c[0]||(t=new h(d)),yt?ct(t,o,l):t;if(s=Kn(d.e/ft),i=Kn(t.e/ft),u=u.slice(),r=s-i,r){for(r<0?(n=u,r=-r,a=c.length):(n=c,i=s,a=u.length),s=Math.ceil(o/ft),a=s>a?s+1:a+1,r>a&&(r=a,n.length=1),n.reverse();r--;)n.push(0);n.reverse()}for(a=u.length,r=c.length,a-r<0&&(r=a,n=c,c=u,u=n),e=0;r;)e=(u[--r]=u[r]+c[r]+e)/sr|0,u[r]%=sr;for(e&&(u.unshift(e),++i),a=u.length;u[--a]==0;)u.pop();return t.d=u,t.e=vf(u,i),yt?ct(t,o,l):t};Ne.precision=Ne.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Gs+t);return n.d?(e=f1(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};Ne.round=function(){var t=this,e=t.constructor;return ct(new e(t),t.e+1,e.rounding)};Ne.sine=Ne.sin=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+ft,i.rounding=1,n=j2(i,g1(i,n)),i.precision=t,i.rounding=e,ct(Vr>2?n.neg():n,t,e,!0)):new i(NaN)};Ne.squareRoot=Ne.sqrt=function(){var t,e,n,i,r,s,a=this,o=a.d,l=a.e,u=a.s,c=a.constructor;if(u!==1||!o||!o[0])return new c(!u||u<0&&(!o||o[0])?NaN:o?a:1/0);for(yt=!1,u=Math.sqrt(+a),u==0||u==1/0?(e=Hn(o),(e.length+l)%2==0&&(e+="0"),u=Math.sqrt(e),l=Kn((l+1)/2)-(l<0||l%2),u==1/0?e="5e"+l:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),i=new c(e)):i=new c(u.toString()),n=(l=c.precision)+3;;)if(s=i,i=s.plus(jt(a,s,n+2,1)).times(.5),Hn(s.d).slice(0,n)===(e=Hn(i.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!r&&e=="4999"){if(!r&&(ct(s,l+1,0),s.times(s).eq(a))){i=s;break}n+=4,r=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(ct(i,l+1,1),t=!i.times(i).eq(a));break}return yt=!0,ct(i,l,c.rounding,t)};Ne.tangent=Ne.tan=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+10,i.rounding=1,n=n.sin(),n.s=1,n=jt(n,new i(1).minus(n.times(n)).sqrt(),t+10,0),i.precision=t,i.rounding=e,ct(Vr==2||Vr==4?n.neg():n,t,e,!0)):new i(NaN)};Ne.times=Ne.mul=function(t){var e,n,i,r,s,a,o,l,u,c=this,d=c.constructor,h=c.d,f=(t=new d(t)).d;if(t.s*=c.s,!h||!h[0]||!f||!f[0])return new d(!t.s||h&&!h[0]&&!f||f&&!f[0]&&!h?NaN:!h||!f?t.s/0:t.s*0);for(n=Kn(c.e/ft)+Kn(t.e/ft),l=h.length,u=f.length,l<u&&(s=h,h=f,f=s,a=l,l=u,u=a),s=[],a=l+u,i=a;i--;)s.push(0);for(i=u;--i>=0;){for(e=0,r=l+i;r>i;)o=s[r]+f[i]*h[r-i-1]+e,s[r--]=o%sr|0,e=o/sr|0;s[r]=(s[r]+e)%sr|0}for(;!s[--a];)s.pop();return e?++n:s.shift(),t.d=s,t.e=vf(s,n),yt?ct(t,d.precision,d.rounding):t};Ne.toBinary=function(t,e){return ag(this,2,t,e)};Ne.toDecimalPlaces=Ne.toDP=function(t,e){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:(mi(t,0,Ks),e===void 0?e=i.rounding:mi(e,0,8),ct(n,t+n.e+1,e))};Ne.toExponential=function(t,e){var n,i=this,r=i.constructor;return t===void 0?n=Tr(i,!0):(mi(t,0,Ks),e===void 0?e=r.rounding:mi(e,0,8),i=ct(new r(i),t+1,e),n=Tr(i,!0,t+1)),i.isNeg()&&!i.isZero()?"-"+n:n};Ne.toFixed=function(t,e){var n,i,r=this,s=r.constructor;return t===void 0?n=Tr(r):(mi(t,0,Ks),e===void 0?e=s.rounding:mi(e,0,8),i=ct(new s(r),t+r.e+1,e),n=Tr(i,!1,t+i.e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};Ne.toFraction=function(t){var e,n,i,r,s,a,o,l,u,c,d,h,f=this,m=f.d,v=f.constructor;if(!m)return new v(f);if(u=n=new v(1),i=l=new v(0),e=new v(i),s=e.e=f1(m)-f.e-1,a=s%ft,e.d[0]=An(10,a<0?ft+a:a),t==null)t=s>0?e:u;else{if(o=new v(t),!o.isInt()||o.lt(u))throw Error(Gs+o);t=o.gt(e)?s>0?e:u:o}for(yt=!1,o=new v(Hn(m)),c=v.precision,v.precision=s=m.length*ft*2;d=jt(o,e,0,1,1),r=n.plus(d.times(i)),r.cmp(t)!=1;)n=i,i=r,r=u,u=l.plus(d.times(r)),l=r,r=e,e=o.minus(d.times(r)),o=r;return r=jt(t.minus(n),i,0,1,1),l=l.plus(r.times(u)),n=n.plus(r.times(i)),l.s=u.s=f.s,h=jt(u,i,s,1).minus(f).abs().cmp(jt(l,n,s,1).minus(f).abs())<1?[u,i]:[l,n],v.precision=c,yt=!0,h};Ne.toHexadecimal=Ne.toHex=function(t,e){return ag(this,16,t,e)};Ne.toNearest=function(t,e){var n=this,i=n.constructor;if(n=new i(n),t==null){if(!n.d)return n;t=new i(1),e=i.rounding}else{if(t=new i(t),e===void 0?e=i.rounding:mi(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(yt=!1,n=jt(n,t,0,e,1).times(t),yt=!0,ct(n)):(t.s=n.s,n=t),n};Ne.toNumber=function(){return+this};Ne.toOctal=function(t,e){return ag(this,8,t,e)};Ne.toPower=Ne.pow=function(t){var e,n,i,r,s,a,o=this,l=o.constructor,u=+(t=new l(t));if(!o.d||!t.d||!o.d[0]||!t.d[0])return new l(An(+o,u));if(o=new l(o),o.eq(1))return o;if(i=l.precision,s=l.rounding,t.eq(1))return ct(o,i,s);if(e=Kn(t.e/ft),e>=t.d.length-1&&(n=u<0?-u:u)<=X2)return r=p1(l,o,n,i),t.s<0?new l(1).div(r):ct(r,i,s);if(a=o.s,a<0){if(e<t.d.length-1)return new l(NaN);if((t.d[e]&1)==0&&(a=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=a,o}return n=An(+o,u),e=n==0||!isFinite(n)?Kn(u*(Math.log("0."+Hn(o.d))/Math.LN10+o.e+1)):new l(n+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?a/0:0):(yt=!1,l.rounding=o.s=1,n=Math.min(12,(e+"").length),r=_m(t.times(Cs(o,i+n)),i),r.d&&(r=ct(r,i+5,1),dc(r.d,i,s)&&(e=i+10,r=ct(_m(t.times(Cs(o,e+n)),e),e+5,1),+Hn(r.d).slice(i+1,i+15)+1==1e14&&(r=ct(r,i+1,0)))),r.s=a,yt=!0,l.rounding=s,ct(r,i,s))};Ne.toPrecision=function(t,e){var n,i=this,r=i.constructor;return t===void 0?n=Tr(i,i.e<=r.toExpNeg||i.e>=r.toExpPos):(mi(t,1,Ks),e===void 0?e=r.rounding:mi(e,0,8),i=ct(new r(i),t,e),n=Tr(i,t<=i.e||i.e<=r.toExpNeg,t)),i.isNeg()&&!i.isZero()?"-"+n:n};Ne.toSignificantDigits=Ne.toSD=function(t,e){var n=this,i=n.constructor;return t===void 0?(t=i.precision,e=i.rounding):(mi(t,1,Ks),e===void 0?e=i.rounding:mi(e,0,8)),ct(new i(n),t,e)};Ne.toString=function(){var t=this,e=t.constructor,n=Tr(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};Ne.truncated=Ne.trunc=function(){return ct(new this.constructor(this),this.e+1,1)};Ne.valueOf=Ne.toJSON=function(){var t=this,e=t.constructor,n=Tr(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function Hn(t){var e,n,i,r=t.length-1,s="",a=t[0];if(r>0){for(s+=a,e=1;e<r;e++)i=t[e]+"",n=ft-i.length,n&&(s+=gs(n)),s+=i;a=t[e],i=a+"",n=ft-i.length,n&&(s+=gs(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}function mi(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Gs+t)}function dc(t,e,n,i){var r,s,a,o;for(s=t[0];s>=10;s/=10)--e;return--e<0?(e+=ft,r=0):(r=Math.ceil((e+1)/ft),e%=ft),s=An(10,ft-e),o=t[r]%s|0,i==null?e<3?(e==0?o=o/100|0:e==1&&(o=o/10|0),a=n<4&&o==99999||n>3&&o==49999||o==5e4||o==0):a=(n<4&&o+1==s||n>3&&o+1==s/2)&&(t[r+1]/s/100|0)==An(10,e-2)-1||(o==s/2||o==0)&&(t[r+1]/s/100|0)==0:e<4?(e==0?o=o/1e3|0:e==1?o=o/100|0:e==2&&(o=o/10|0),a=(i||n<4)&&o==9999||!i&&n>3&&o==4999):a=((i||n<4)&&o+1==s||!i&&n>3&&o+1==s/2)&&(t[r+1]/s/1e3|0)==An(10,e-3)-1,a}function fh(t,e,n){for(var i,r=[0],s,a=0,o=t.length;a<o;){for(s=r.length;s--;)r[s]*=e;for(r[0]+=ym.indexOf(t.charAt(a++)),i=0;i<r.length;i++)r[i]>n-1&&(r[i+1]===void 0&&(r[i+1]=0),r[i+1]+=r[i]/n|0,r[i]%=n)}return r.reverse()}function q2(t,e){var n,i,r;if(e.isZero())return e;i=e.d.length,i<32?(n=Math.ceil(i/3),r=(1/gf(4,n)).toString()):(n=16,r="2.3283064365386962890625e-10"),t.precision+=n,e=Kl(t,1,e.times(r),new t(1));for(var s=n;s--;){var a=e.times(e);e=a.times(a).minus(a).times(8).plus(1)}return t.precision-=n,e}var jt=function(){function t(i,r,s){var a,o=0,l=i.length;for(i=i.slice();l--;)a=i[l]*r+o,i[l]=a%s|0,o=a/s|0;return o&&i.unshift(o),i}function e(i,r,s,a){var o,l;if(s!=a)l=s>a?1:-1;else for(o=l=0;o<s;o++)if(i[o]!=r[o]){l=i[o]>r[o]?1:-1;break}return l}function n(i,r,s,a){for(var o=0;s--;)i[s]-=o,o=i[s]<r[s]?1:0,i[s]=o*a+i[s]-r[s];for(;!i[0]&&i.length>1;)i.shift()}return function(i,r,s,a,o,l){var u,c,d,h,f,m,v,g,y,S,b,w,E,T,I,_,R,L,k,F,G=i.constructor,H=i.s==r.s?1:-1,J=i.d,V=r.d;if(!J||!J[0]||!V||!V[0])return new G(!i.s||!r.s||(J?V&&J[0]==V[0]:!V)?NaN:J&&J[0]==0||!V?H*0:H/0);for(l?(f=1,c=i.e-r.e):(l=sr,f=ft,c=Kn(i.e/f)-Kn(r.e/f)),k=V.length,R=J.length,y=new G(H),S=y.d=[],d=0;V[d]==(J[d]||0);d++);if(V[d]>(J[d]||0)&&c--,s==null?(T=s=G.precision,a=G.rounding):o?T=s+(i.e-r.e)+1:T=s,T<0)S.push(1),m=!0;else{if(T=T/f+2|0,d=0,k==1){for(h=0,V=V[0],T++;(d<R||h)&&T--;d++)I=h*l+(J[d]||0),S[d]=I/V|0,h=I%V|0;m=h||d<R}else{for(h=l/(V[0]+1)|0,h>1&&(V=t(V,h,l),J=t(J,h,l),k=V.length,R=J.length),_=k,b=J.slice(0,k),w=b.length;w<k;)b[w++]=0;F=V.slice(),F.unshift(0),L=V[0],V[1]>=l/2&&++L;do h=0,u=e(V,b,k,w),u<0?(E=b[0],k!=w&&(E=E*l+(b[1]||0)),h=E/L|0,h>1?(h>=l&&(h=l-1),v=t(V,h,l),g=v.length,w=b.length,u=e(v,b,g,w),u==1&&(h--,n(v,k<g?F:V,g,l))):(h==0&&(u=h=1),v=V.slice()),g=v.length,g<w&&v.unshift(0),n(b,v,w,l),u==-1&&(w=b.length,u=e(V,b,k,w),u<1&&(h++,n(b,k<w?F:V,w,l))),w=b.length):u===0&&(h++,b=[0]),S[d++]=h,u&&b[0]?b[w++]=J[_]||0:(b=[J[_]],w=1);while((_++<R||b[0]!==void 0)&&T--);m=b[0]!==void 0}S[0]||S.shift()}if(f==1)y.e=c,l1=m;else{for(d=1,h=S[0];h>=10;h/=10)d++;y.e=d+c*f-1,ct(y,o?s+y.e+1:s,a,m)}return y}}();function ct(t,e,n,i){var r,s,a,o,l,u,c,d,h,f=t.constructor;e:if(e!=null){if(d=t.d,!d)return t;for(r=1,o=d[0];o>=10;o/=10)r++;if(s=e-r,s<0)s+=ft,a=e,c=d[h=0],l=c/An(10,r-a-1)%10|0;else if(h=Math.ceil((s+1)/ft),o=d.length,h>=o)if(i){for(;o++<=h;)d.push(0);c=l=0,r=1,s%=ft,a=s-ft+1}else break e;else{for(c=o=d[h],r=1;o>=10;o/=10)r++;s%=ft,a=s-ft+r,l=a<0?0:c/An(10,r-a-1)%10|0}if(i=i||e<0||d[h+1]!==void 0||(a<0?c:c%An(10,r-a-1)),u=n<4?(l||i)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||i||n==6&&(s>0?a>0?c/An(10,r-a):0:d[h-1])%10&1||n==(t.s<0?8:7)),e<1||!d[0])return d.length=0,u?(e-=t.e+1,d[0]=An(10,(ft-e%ft)%ft),t.e=-e||0):d[0]=t.e=0,t;if(s==0?(d.length=h,o=1,h--):(d.length=h+1,o=An(10,ft-s),d[h]=a>0?(c/An(10,r-a)%An(10,a)|0)*o:0),u)for(;;)if(h==0){for(s=1,a=d[0];a>=10;a/=10)s++;for(a=d[0]+=o,o=1;a>=10;a/=10)o++;s!=o&&(t.e++,d[0]==sr&&(d[0]=1));break}else{if(d[h]+=o,d[h]!=sr)break;d[h--]=0,o=1}for(s=d.length;d[--s]===0;)d.pop()}return yt&&(t.e>f.maxE?(t.d=null,t.e=NaN):t.e<f.minE&&(t.e=0,t.d=[0])),t}function Tr(t,e,n){if(!t.isFinite())return v1(t);var i,r=t.e,s=Hn(t.d),a=s.length;return e?(n&&(i=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+gs(i):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(t.e<0?"e":"e+")+t.e):r<0?(s="0."+gs(-r-1)+s,n&&(i=n-a)>0&&(s+=gs(i))):r>=a?(s+=gs(r+1-a),n&&(i=n-r-1)>0&&(s=s+"."+gs(i))):((i=r+1)<a&&(s=s.slice(0,i)+"."+s.slice(i)),n&&(i=n-a)>0&&(r+1===a&&(s+="."),s+=gs(i))),s}function vf(t,e){var n=t[0];for(e*=ft;n>=10;n/=10)e++;return e}function Dh(t,e,n){if(e>Y2)throw yt=!0,n&&(t.precision=n),Error(u1);return ct(new t(Ih),e,1,!0)}function nr(t,e,n){if(e>wm)throw Error(u1);return ct(new t(Oh),e,n,!0)}function f1(t){var e=t.length-1,n=e*ft+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function gs(t){for(var e="";t--;)e+="0";return e}function p1(t,e,n,i){var r,s=new t(1),a=Math.ceil(i/ft+4);for(yt=!1;;){if(n%2&&(s=s.times(e),ly(s.d,a)&&(r=!0)),n=Kn(n/2),n===0){n=s.d.length-1,r&&s.d[n]===0&&++s.d[n];break}e=e.times(e),ly(e.d,a)}return yt=!0,s}function oy(t){return t.d[t.d.length-1]&1}function m1(t,e,n){for(var i,r=new t(e[0]),s=0;++s<e.length;)if(i=new t(e[s]),i.s)r[n](i)&&(r=i);else{r=i;break}return r}function _m(t,e){var n,i,r,s,a,o,l,u=0,c=0,d=0,h=t.constructor,f=h.rounding,m=h.precision;if(!t.d||!t.d[0]||t.e>17)return new h(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(e==null?(yt=!1,l=m):l=e,o=new h(.03125);t.e>-2;)t=t.times(o),d+=5;for(i=Math.log(An(2,d))/Math.LN10*2+5|0,l+=i,n=s=a=new h(1),h.precision=l;;){if(s=ct(s.times(t),l,1),n=n.times(++c),o=a.plus(jt(s,n,l,1)),Hn(o.d).slice(0,l)===Hn(a.d).slice(0,l)){for(r=d;r--;)a=ct(a.times(a),l,1);if(e==null)if(u<3&&dc(a.d,l-i,f,u))h.precision=l+=10,n=s=o=new h(1),c=0,u++;else return ct(a,h.precision=m,f,yt=!0);else return h.precision=m,a}a=o}}function Cs(t,e){var n,i,r,s,a,o,l,u,c,d,h,f=1,m=10,v=t,g=v.d,y=v.constructor,S=y.rounding,b=y.precision;if(v.s<0||!g||!g[0]||!v.e&&g[0]==1&&g.length==1)return new y(g&&!g[0]?-1/0:v.s!=1?NaN:g?0:v);if(e==null?(yt=!1,c=b):c=e,y.precision=c+=m,n=Hn(g),i=n.charAt(0),Math.abs(s=v.e)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)v=v.times(t),n=Hn(v.d),i=n.charAt(0),f++;s=v.e,i>1?(v=new y("0."+n),s++):v=new y(i+"."+n.slice(1))}else return u=Dh(y,c+2,b).times(s+""),v=Cs(new y(i+"."+n.slice(1)),c-m).plus(u),y.precision=b,e==null?ct(v,b,S,yt=!0):v;for(d=v,l=a=v=jt(v.minus(1),v.plus(1),c,1),h=ct(v.times(v),c,1),r=3;;){if(a=ct(a.times(h),c,1),u=l.plus(jt(a,new y(r),c,1)),Hn(u.d).slice(0,c)===Hn(l.d).slice(0,c))if(l=l.times(2),s!==0&&(l=l.plus(Dh(y,c+2,b).times(s+""))),l=jt(l,new y(f),c,1),e==null)if(dc(l.d,c-m,S,o))y.precision=c+=m,u=a=v=jt(d.minus(1),d.plus(1),c,1),h=ct(v.times(v),c,1),r=o=1;else return ct(l,y.precision=b,S,yt=!0);else return y.precision=b,l;l=u,r+=2}}function v1(t){return String(t.s*t.s/0)}function Sm(t,e){var n,i,r;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;i++);for(r=e.length;e.charCodeAt(r-1)===48;--r);if(e=e.slice(i,r),e){if(r-=i,t.e=n=n-i-1,t.d=[],i=(n+1)%ft,n<0&&(i+=ft),i<r){for(i&&t.d.push(+e.slice(0,i)),r-=ft;i<r;)t.d.push(+e.slice(i,i+=ft));e=e.slice(i),i=ft-e.length}else i-=r;for(;i--;)e+="0";t.d.push(+e),yt&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function Z2(t,e){var n,i,r,s,a,o,l,u,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),h1.test(e))return Sm(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(W2.test(e))n=16,e=e.toLowerCase();else if(G2.test(e))n=2;else if($2.test(e))n=8;else throw Error(Gs+e);for(s=e.search(/p/i),s>0?(l=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),s=e.indexOf("."),a=s>=0,i=t.constructor,a&&(e=e.replace(".",""),o=e.length,s=o-s,r=p1(i,new i(n),s,s*2)),u=fh(e,n,sr),c=u.length-1,s=c;u[s]===0;--s)u.pop();return s<0?new i(t.s*0):(t.e=vf(u,c),t.d=u,yt=!1,a&&(t=jt(t,r,o*4)),l&&(t=t.times(Math.abs(l)<54?An(2,l):As.pow(2,l))),yt=!0,t)}function j2(t,e){var n,i=e.d.length;if(i<3)return e.isZero()?e:Kl(t,2,e,e);n=1.4*Math.sqrt(i),n=n>16?16:n|0,e=e.times(1/gf(5,n)),e=Kl(t,2,e,e);for(var r,s=new t(5),a=new t(16),o=new t(20);n--;)r=e.times(e),e=e.times(s.plus(r.times(a.times(r).minus(o))));return e}function Kl(t,e,n,i,r){var s,a,o,l,u=t.precision,c=Math.ceil(u/ft);for(yt=!1,l=n.times(n),o=new t(i);;){if(a=jt(o.times(l),new t(e++*e++),u,1),o=r?i.plus(a):i.minus(a),i=jt(a.times(l),new t(e++*e++),u,1),a=o.plus(i),a.d[c]!==void 0){for(s=c;a.d[s]===o.d[s]&&s--;);if(s==-1)break}s=o,o=i,i=a,a=s}return yt=!0,a.d.length=c+1,a}function gf(t,e){for(var n=t;--e;)n*=t;return n}function g1(t,e){var n,i=e.s<0,r=nr(t,t.precision,1),s=r.times(.5);if(e=e.abs(),e.lte(s))return Vr=i?4:1,e;if(n=e.divToInt(r),n.isZero())Vr=i?3:2;else{if(e=e.minus(n.times(r)),e.lte(s))return Vr=oy(n)?i?2:3:i?4:1,e;Vr=oy(n)?i?1:4:i?3:2}return e.minus(r).abs()}function ag(t,e,n,i){var r,s,a,o,l,u,c,d,h,f=t.constructor,m=n!==void 0;if(m?(mi(n,1,Ks),i===void 0?i=f.rounding:mi(i,0,8)):(n=f.precision,i=f.rounding),!t.isFinite())c=v1(t);else{for(c=Tr(t),a=c.indexOf("."),m?(r=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):r=e,a>=0&&(c=c.replace(".",""),h=new f(1),h.e=c.length-a,h.d=fh(Tr(h),10,r),h.e=h.d.length),d=fh(c,10,r),s=l=d.length;d[--l]==0;)d.pop();if(!d[0])c=m?"0p+0":"0";else{if(a<0?s--:(t=new f(t),t.d=d,t.e=s,t=jt(t,h,n,i,0,r),d=t.d,s=t.e,u=l1),a=d[n],o=r/2,u=u||d[n+1]!==void 0,u=i<4?(a!==void 0||u)&&(i===0||i===(t.s<0?3:2)):a>o||a===o&&(i===4||u||i===6&&d[n-1]&1||i===(t.s<0?8:7)),d.length=n,u)for(;++d[--n]>r-1;)d[n]=0,n||(++s,d.unshift(1));for(l=d.length;!d[l-1];--l);for(a=0,c="";a<l;a++)c+=ym.charAt(d[a]);if(m){if(l>1)if(e==16||e==8){for(a=e==16?4:3,--l;l%a;l++)c+="0";for(d=fh(c,r,e),l=d.length;!d[l-1];--l);for(a=1,c="1.";a<l;a++)c+=ym.charAt(d[a])}else c=c.charAt(0)+"."+c.slice(1);c=c+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)c="0"+c;c="0."+c}else if(++s>l)for(s-=l;s--;)c+="0";else s<l&&(c=c.slice(0,s)+"."+c.slice(s))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function ly(t,e){if(t.length>e)return t.length=e,!0}function K2(t){return new this(t).abs()}function J2(t){return new this(t).acos()}function Q2(t){return new this(t).acosh()}function eR(t,e){return new this(t).plus(e)}function tR(t){return new this(t).asin()}function nR(t){return new this(t).asinh()}function iR(t){return new this(t).atan()}function rR(t){return new this(t).atanh()}function sR(t,e){t=new this(t),e=new this(e);var n,i=this.precision,r=this.rounding,s=i+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=nr(this,s,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?nr(this,i,r):new this(0),n.s=t.s):!t.d||e.isZero()?(n=nr(this,s,1).times(.5),n.s=t.s):e.s<0?(this.precision=s,this.rounding=1,n=this.atan(jt(t,e,s,1)),e=nr(this,s,1),this.precision=i,this.rounding=r,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(jt(t,e,s,1)),n}function aR(t){return new this(t).cbrt()}function oR(t){return ct(t=new this(t),t.e+1,2)}function lR(t,e,n){return new this(t).clamp(e,n)}function uR(t){if(!t||typeof t!="object")throw Error(mf+"Object expected");var e,n,i,r=t.defaults===!0,s=["precision",1,Ks,"rounding",0,8,"toExpNeg",-Wo,0,"toExpPos",0,Wo,"maxE",0,Wo,"minE",-Wo,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(n=s[e],r&&(this[n]=bm[n]),(i=t[n])!==void 0)if(Kn(i)===i&&i>=s[e+1]&&i<=s[e+2])this[n]=i;else throw Error(Gs+n+": "+i);if(n="crypto",r&&(this[n]=bm[n]),(i=t[n])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(c1);else this[n]=!1;else throw Error(Gs+n+": "+i);return this}function cR(t){return new this(t).cos()}function dR(t){return new this(t).cosh()}function y1(t){var e,n,i;function r(s){var a,o,l,u=this;if(!(u instanceof r))return new r(s);if(u.constructor=r,uy(s)){u.s=s.s,yt?!s.d||s.e>r.maxE?(u.e=NaN,u.d=null):s.e<r.minE?(u.e=0,u.d=[0]):(u.e=s.e,u.d=s.d.slice()):(u.e=s.e,u.d=s.d?s.d.slice():s.d);return}if(l=typeof s,l==="number"){if(s===0){u.s=1/s<0?-1:1,u.e=0,u.d=[0];return}if(s<0?(s=-s,u.s=-1):u.s=1,s===~~s&&s<1e7){for(a=0,o=s;o>=10;o/=10)a++;yt?a>r.maxE?(u.e=NaN,u.d=null):a<r.minE?(u.e=0,u.d=[0]):(u.e=a,u.d=[s]):(u.e=a,u.d=[s]);return}else if(s*0!==0){s||(u.s=NaN),u.e=NaN,u.d=null;return}return Sm(u,s.toString())}else if(l!=="string")throw Error(Gs+s);return(o=s.charCodeAt(0))===45?(s=s.slice(1),u.s=-1):(o===43&&(s=s.slice(1)),u.s=1),h1.test(s)?Sm(u,s):Z2(u,s)}if(r.prototype=Ne,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.EUCLID=9,r.config=r.set=uR,r.clone=y1,r.isDecimal=uy,r.abs=K2,r.acos=J2,r.acosh=Q2,r.add=eR,r.asin=tR,r.asinh=nR,r.atan=iR,r.atanh=rR,r.atan2=sR,r.cbrt=aR,r.ceil=oR,r.clamp=lR,r.cos=cR,r.cosh=dR,r.div=hR,r.exp=fR,r.floor=pR,r.hypot=mR,r.ln=vR,r.log=gR,r.log10=bR,r.log2=yR,r.max=wR,r.min=_R,r.mod=SR,r.mul=MR,r.pow=TR,r.random=ER,r.round=xR,r.sign=CR,r.sin=AR,r.sinh=RR,r.sqrt=PR,r.sub=LR,r.sum=IR,r.tan=OR,r.tanh=DR,r.trunc=NR,t===void 0&&(t={}),t&&t.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)t.hasOwnProperty(n=i[e++])||(t[n]=this[n]);return r.config(t),r}function hR(t,e){return new this(t).div(e)}function fR(t){return new this(t).exp()}function pR(t){return ct(t=new this(t),t.e+1,3)}function mR(){var t,e,n=new this(0);for(yt=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return yt=!0,new this(1/0);n=e}return yt=!0,n.sqrt()}function uy(t){return t instanceof As||t&&t.toStringTag===d1||!1}function vR(t){return new this(t).ln()}function gR(t,e){return new this(t).log(e)}function yR(t){return new this(t).log(2)}function bR(t){return new this(t).log(10)}function wR(){return m1(this,arguments,"lt")}function _R(){return m1(this,arguments,"gt")}function SR(t,e){return new this(t).mod(e)}function MR(t,e){return new this(t).mul(e)}function TR(t,e){return new this(t).pow(e)}function ER(t){var e,n,i,r,s=0,a=new this(1),o=[];if(t===void 0?t=this.precision:mi(t,1,Ks),i=Math.ceil(t/ft),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));s<i;)r=e[s],r>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:o[s++]=r%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);s<i;)r=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((e[s+3]&127)<<24),r>=214e7?crypto.randomBytes(4).copy(e,s):(o.push(r%1e7),s+=4);s=i/4}else throw Error(c1);else for(;s<i;)o[s++]=Math.random()*1e7|0;for(i=o[--s],t%=ft,i&&t&&(r=An(10,ft-t),o[s]=(i/r|0)*r);o[s]===0;s--)o.pop();if(s<0)n=0,o=[0];else{for(n=-1;o[0]===0;n-=ft)o.shift();for(i=1,r=o[0];r>=10;r/=10)i++;i<ft&&(n-=ft-i)}return a.e=n,a.d=o,a}function xR(t){return ct(t=new this(t),t.e+1,this.rounding)}function CR(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function AR(t){return new this(t).sin()}function RR(t){return new this(t).sinh()}function PR(t){return new this(t).sqrt()}function LR(t,e){return new this(t).sub(e)}function IR(){var t=0,e=arguments,n=new this(e[t]);for(yt=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return yt=!0,ct(n,this.precision,this.rounding)}function OR(t){return new this(t).tan()}function DR(t){return new this(t).tanh()}function NR(t){return ct(t=new this(t),t.e+1,1)}Ne[Symbol.for("nodejs.util.inspect.custom")]=Ne.toString;Ne[Symbol.toStringTag]="Decimal";var As=Ne.constructor=y1(bm);Ih=new As(Ih);Oh=new As(Oh);var kR={modelValue:{type:[String,Number],default:0},min:{type:[String,Number]},max:{type:[String,Number]},step:{type:[String,Number],default:1},color:{type:String},inputWidth:{type:[String,Number]},inputTextSize:{type:[String,Number]},buttonSize:{type:[String,Number]},decimalLength:{type:[String,Number]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},disableIncrement:{type:Boolean,default:!1},disableDecrement:{type:Boolean,default:!1},disableInput:{type:Boolean,default:!1},lazyChange:{type:Boolean,default:!1},incrementButton:{type:Boolean,default:!0},decrementButton:{type:Boolean,default:!0},press:{type:Boolean,default:!0},ripple:{type:Boolean,default:!0},validateTrigger:{type:Array,default:()=>["onInputChange","onLazyChange","onIncrement","onDecrement"]},rules:{type:Array},onBeforeChange:{type:Function},onChange:{type:Function},onIncrement:{type:Function},onDecrement:{type:Function},"onUpdate:modelValue":{type:Function}},{n:FR,classes:UR}=Qe("counter"),cy=100,dy=600,BR=["inputmode","readonly","disabled"];function zR(t,e){var n=Je("var-icon"),i=Je("var-form-details"),r=jn("ripple");return ie(),he("div",{class:$(t.classes(t.n(),"var--box"))},[Me("div",ln({class:t.classes(t.n("controller"),"var-elevation--2",[t.disabled||t.formDisabled,t.n("--disabled")],[t.errorMessage,t.n("--error")]),style:{background:t.color?t.color:void 0}},t.$attrs),[Zt(We(n,{"var-counter-cover":"",name:"minus",class:$(t.classes(t.n("decrement-button"),[!t.decrementButton,t.n("--hidden")],[t.disabled||t.formDisabled,t.n("--not-allowed")])),style:Be({width:t.toSizeUnit(t.buttonSize),height:t.toSizeUnit(t.buttonSize)}),onClick:t.decrement,onTouchstart:t.pressDecrement,onTouchend:t.releaseDecrement,onTouchcancel:t.releaseDecrement},null,8,["class","style","onClick","onTouchstart","onTouchend","onTouchcancel"]),[[r,{disabled:!t.ripple||t.disabled||t.formDisabled||t.readonly||t.formReadonly||t.disableDecrement||!t.decrementButton||t.isMin}]]),Zt(Me("input",{class:$(t.classes(t.n("input"),[t.disabled||t.formDisabled,t.n("--not-allowed")])),style:Be({width:t.toSizeUnit(t.inputWidth),fontSize:t.toSizeUnit(t.inputTextSize)}),inputmode:t.toNumber(t.decimalLength)===0?"numeric":"decimal",readonly:t.readonly||t.formReadonly,disabled:t.disabled||t.formDisabled||t.disableInput,"onUpdate:modelValue":e[0]||(e[0]=s=>t.inputValue=s),onChange:e[1]||(e[1]=function(){return t.handleChange&&t.handleChange(...arguments)})},null,46,BR),[[lC,t.inputValue]]),Zt(We(n,{"var-counter-cover":"",name:"plus",class:$(t.classes(t.n("increment-button"),[!t.incrementButton,t.n("--hidden")],[t.disabled||t.formDisabled,t.n("--not-allowed")])),style:Be({width:t.toSizeUnit(t.buttonSize),height:t.toSizeUnit(t.buttonSize)}),onClick:t.increment,onTouchstart:t.pressIncrement,onTouchend:t.releaseIncrement,onTouchcancel:t.releaseIncrement},null,8,["class","style","onClick","onTouchstart","onTouchend","onTouchcancel"]),[[r,{disabled:!t.ripple||t.disabled||t.readonly||t.formDisabled||t.formReadonly||t.disableIncrement||!t.incrementButton||t.isMax}]])],16),We(i,{"error-message":t.errorMessage},null,8,["error-message"])],2)}var gl=tt({render:zR,name:"VarCounter",components:{VarIcon:Kt,VarFormDetails:Wn},directives:{Ripple:kn},inheritAttrs:!1,props:kR,setup(t){var e=de(""),n,i,r,s,{bindForm:a,form:o}=$i(),{errorMessage:l,validateWithTrigger:u,validate:c,resetValidation:d}=Wi(),{readonly:h,disabled:f}=o!=null?o:{},m=()=>c(t.rules,t.modelValue),v=V=>{rn(()=>{var{validateTrigger:re,rules:j,modelValue:Z}=t;u(re,V,j,Z)})},g=()=>{var{min:V}=t;ye(t["onUpdate:modelValue"],V!=null?Te(V):0),d()},y={reset:g,validate:m,resetValidation:d},S=Le(()=>{var{max:V,modelValue:re}=t;return V!=null&&Te(re)>=Te(V)}),b=Le(()=>{var{min:V,modelValue:re}=t;return V!=null&&Te(re)<=Te(V)}),w=V=>{var{decimalLength:re,max:j,min:Z}=t,z=Te(V);return j!=null&&z>Te(j)&&(z=Te(j)),Z!=null&&z<Te(Z)&&(z=Te(Z)),V=String(z),re!=null&&(V=z.toFixed(Te(re))),V},E=V=>{var{lazyChange:re,onBeforeChange:j}=t,{value:Z}=V.target,z=w(Z);re?ye(j,Te(z),J):H(z),v("onInputChange")},T=()=>{var{disabled:V,readonly:re,disableDecrement:j,decrementButton:Z,lazyChange:z,step:ee,modelValue:Q,onDecrement:fe,onBeforeChange:Ee}=t;if(!(f!=null&&f.value||h!=null&&h.value||V||re||j||!Z)&&!b.value){var ne=new As(Te(Q)).minus(new As(Te(ee))).toString(),X=w(ne),_e=Te(X);ye(fe,_e),z?ye(Ee,_e,J):(H(X),v("onDecrement"))}},I=()=>{var{disabled:V,readonly:re,disableIncrement:j,incrementButton:Z,lazyChange:z,step:ee,modelValue:Q,onIncrement:fe,onBeforeChange:Ee}=t;if(!(f!=null&&f.value||h!=null&&h.value||V||re||j||!Z)&&!S.value){var ne=new As(Te(Q)).plus(new As(Te(ee))).toString(),X=w(ne),_e=Te(X);ye(fe,_e),z?ye(Ee,_e,J):(H(X),v("onIncrement"))}},_=()=>{var{press:V,lazyChange:re}=t;!V||re||(s=window.setTimeout(()=>{G()},dy))},R=()=>{var{press:V,lazyChange:re}=t;!V||re||(r=window.setTimeout(()=>{F()},dy))},L=()=>{i&&clearTimeout(i),s&&clearTimeout(s)},k=()=>{n&&clearTimeout(n),r&&clearTimeout(r)},F=()=>{n=window.setTimeout(()=>{I(),F()},cy)},G=()=>{i=window.setTimeout(()=>{T(),G()},cy)},H=V=>{e.value=V;var re=Te(V);ye(t["onUpdate:modelValue"],re)},J=V=>{H(w(String(V))),v("onLazyChange")};return ye(a,y),Ke(()=>t.modelValue,V=>{H(w(String(V))),ye(t.onChange,Te(V))}),H(w(String(t.modelValue))),{n:FR,classes:UR,inputValue:e,errorMessage:l,formDisabled:f,formReadonly:h,isMax:S,isMin:b,validate:m,reset:g,resetValidation:d,handleChange:E,decrement:T,increment:I,pressDecrement:_,pressIncrement:R,releaseDecrement:L,releaseIncrement:k,toSizeUnit:dn,toNumber:Te}}});gl.install=function(t){t.component(gl.name,gl)};var b1=60,w1=b1*60,_1=w1*24,VR=_1*7,Jl=1e3,sp=b1*Jl,hy=w1*Jl,HR=_1*Jl,GR=VR*Jl,og="millisecond",$o="second",Xo="minute",Yo="hour",ys="day",ph="week",Ji="month",S1="quarter",bs="year",qo="date",WR="YYYY-MM-DDTHH:mm:ssZ",fy="Invalid Date",$R=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,XR=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,YR={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var n=["th","st","nd","rd"],i=e%100;return"["+e+(n[(i-20)%10]||n[i]||n[0])+"]"}},Mm=function(e,n,i){var r=String(e);return!r||r.length>=n?e:""+Array(n+1-r.length).join(i)+e},qR=function(e){var n=-e.utcOffset(),i=Math.abs(n),r=Math.floor(i/60),s=i%60;return(n<=0?"+":"-")+Mm(r,2,"0")+":"+Mm(s,2,"0")},ZR=function t(e,n){if(e.date()<n.date())return-t(n,e);var i=(n.year()-e.year())*12+(n.month()-e.month()),r=e.clone().add(i,Ji),s=n-r<0,a=e.clone().add(i+(s?-1:1),Ji);return+(-(i+(n-r)/(s?r-a:a-r))||0)},jR=function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},KR=function(e){var n={M:Ji,y:bs,w:ph,d:ys,D:qo,h:Yo,m:Xo,s:$o,ms:og,Q:S1};return n[e]||String(e||"").toLowerCase().replace(/s$/,"")},JR=function(e){return e===void 0},QR={s:Mm,z:qR,m:ZR,a:jR,p:KR,u:JR},qu="en",za={};za[qu]=YR;var lg=function(e){return e instanceof yf},Nh=function t(e,n,i){var r;if(!e)return qu;if(typeof e=="string"){var s=e.toLowerCase();za[s]&&(r=s),n&&(za[s]=n,r=s);var a=e.split("-");if(!r&&a.length>1)return t(a[0])}else{var o=e.name;za[o]=e,r=o}return!i&&r&&(qu=r),r||!i&&qu},Dn=function(e,n){if(lg(e))return e.clone();var i=typeof n=="object"?n:{};return i.date=e,i.args=arguments,new yf(i)},eP=function(e,n){return Dn(e,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})},Xt=QR;Xt.l=Nh;Xt.i=lg;Xt.w=eP;var tP=function(e){var n=e.date,i=e.utc;if(n===null)return new Date(NaN);if(Xt.u(n))return new Date;if(n instanceof Date)return new Date(n);if(typeof n=="string"&&!/Z$/i.test(n)){var r=n.match($R);if(r){var s=r[2]-1||0,a=(r[7]||"0").substring(0,3);return i?new Date(Date.UTC(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(n)},yf=function(){function t(n){this.$L=Nh(n.locale,null,!0),this.parse(n)}var e=t.prototype;return e.parse=function(i){this.$d=tP(i),this.$x=i.x||{},this.init()},e.init=function(){var i=this.$d;this.$y=i.getFullYear(),this.$M=i.getMonth(),this.$D=i.getDate(),this.$W=i.getDay(),this.$H=i.getHours(),this.$m=i.getMinutes(),this.$s=i.getSeconds(),this.$ms=i.getMilliseconds()},e.$utils=function(){return Xt},e.isValid=function(){return this.$d.toString()!==fy},e.isSame=function(i,r){var s=Dn(i);return this.startOf(r)<=s&&s<=this.endOf(r)},e.isAfter=function(i,r){return Dn(i)<this.startOf(r)},e.isBefore=function(i,r){return this.endOf(r)<Dn(i)},e.$g=function(i,r,s){return Xt.u(i)?this[r]:this.set(s,i)},e.unix=function(){return Math.floor(this.valueOf()/1e3)},e.valueOf=function(){return this.$d.getTime()},e.startOf=function(i,r){var s=this,a=Xt.u(r)?!0:r,o=Xt.p(i),l=function(y,S){var b=Xt.w(s.$u?Date.UTC(s.$y,S,y):new Date(s.$y,S,y),s);return a?b:b.endOf(ys)},u=function(y,S){var b=[0,0,0,0],w=[23,59,59,999];return Xt.w(s.toDate()[y].apply(s.toDate("s"),(a?b:w).slice(S)),s)},c=this.$W,d=this.$M,h=this.$D,f="set"+(this.$u?"UTC":"");switch(o){case bs:return a?l(1,0):l(31,11);case Ji:return a?l(1,d):l(0,d+1);case ph:{var m=this.$locale().weekStart||0,v=(c<m?c+7:c)-m;return l(a?h-v:h+(6-v),d)}case ys:case qo:return u(f+"Hours",0);case Yo:return u(f+"Minutes",1);case Xo:return u(f+"Seconds",2);case $o:return u(f+"Milliseconds",3);default:return this.clone()}},e.endOf=function(i){return this.startOf(i,!1)},e.$set=function(i,r){var s,a=Xt.p(i),o="set"+(this.$u?"UTC":""),l=(s={},s[ys]=o+"Date",s[qo]=o+"Date",s[Ji]=o+"Month",s[bs]=o+"FullYear",s[Yo]=o+"Hours",s[Xo]=o+"Minutes",s[$o]=o+"Seconds",s[og]=o+"Milliseconds",s)[a],u=a===ys?this.$D+(r-this.$W):r;if(a===Ji||a===bs){var c=this.clone().set(qo,1);c.$d[l](u),c.init(),this.$d=c.set(qo,Math.min(this.$D,c.daysInMonth())).$d}else l&&this.$d[l](u);return this.init(),this},e.set=function(i,r){return this.clone().$set(i,r)},e.get=function(i){return this[Xt.p(i)]()},e.add=function(i,r){var s=this,a;i=Number(i);var o=Xt.p(r),l=function(h){var f=Dn(s);return Xt.w(f.date(f.date()+Math.round(h*i)),s)};if(o===Ji)return this.set(Ji,this.$M+i);if(o===bs)return this.set(bs,this.$y+i);if(o===ys)return l(1);if(o===ph)return l(7);var u=(a={},a[Xo]=sp,a[Yo]=hy,a[$o]=Jl,a)[o]||1,c=this.$d.getTime()+i*u;return Xt.w(c,this)},e.subtract=function(i,r){return this.add(i*-1,r)},e.format=function(i){var r=this,s=this.$locale();if(!this.isValid())return s.invalidDate||fy;var a=i||WR,o=Xt.z(this),l=this.$H,u=this.$m,c=this.$M,d=s.weekdays,h=s.months,f=s.meridiem,m=function(b,w,E,T){return b&&(b[w]||b(r,a))||E[w].slice(0,T)},v=function(b){return Xt.s(l%12||12,b,"0")},g=f||function(S,b,w){var E=S<12?"AM":"PM";return w?E.toLowerCase():E},y={YY:String(this.$y).slice(-2),YYYY:this.$y,M:c+1,MM:Xt.s(c+1,2,"0"),MMM:m(s.monthsShort,c,h,3),MMMM:m(h,c),D:this.$D,DD:Xt.s(this.$D,2,"0"),d:String(this.$W),dd:m(s.weekdaysMin,this.$W,d,2),ddd:m(s.weekdaysShort,this.$W,d,3),dddd:d[this.$W],H:String(l),HH:Xt.s(l,2,"0"),h:v(1),hh:v(2),a:g(l,u,!0),A:g(l,u,!1),m:String(u),mm:Xt.s(u,2,"0"),s:String(this.$s),ss:Xt.s(this.$s,2,"0"),SSS:Xt.s(this.$ms,3,"0"),Z:o};return a.replace(XR,function(S,b){return b||y[S]||o.replace(":","")})},e.utcOffset=function(){return-Math.round(this.$d.getTimezoneOffset()/15)*15},e.diff=function(i,r,s){var a,o=Xt.p(r),l=Dn(i),u=(l.utcOffset()-this.utcOffset())*sp,c=this-l,d=Xt.m(this,l);return d=(a={},a[bs]=d/12,a[Ji]=d,a[S1]=d/3,a[ph]=(c-u)/GR,a[ys]=(c-u)/HR,a[Yo]=c/hy,a[Xo]=c/sp,a[$o]=c/Jl,a)[o]||c,s?d:Xt.a(d)},e.daysInMonth=function(){return this.endOf(Ji).$D},e.$locale=function(){return za[this.$L]},e.locale=function(i,r){if(!i)return this.$L;var s=this.clone(),a=Nh(i,r,!0);return a&&(s.$L=a),s},e.clone=function(){return Xt.w(this.$d,this)},e.toDate=function(){return new Date(this.valueOf())},e.toJSON=function(){return this.isValid()?this.toISOString():null},e.toISOString=function(){return this.$d.toISOString()},e.toString=function(){return this.$d.toUTCString()},t}(),M1=yf.prototype;Dn.prototype=M1;[["$ms",og],["$s",$o],["$m",Xo],["$H",Yo],["$W",ys],["$M",Ji],["$y",bs],["$D",qo]].forEach(function(t){M1[t[1]]=function(e){return this.$g(e,t[0],t[1])}});Dn.extend=function(t,e){return t.$i||(t(e,yf,Dn),t.$i=!0),Dn};Dn.locale=Nh;Dn.isDayjs=lg;Dn.unix=function(t){return Dn(t*1e3)};Dn.en=za[qu];Dn.Ls=za;Dn.p={};var ht=Dn,T1=function(t,e){e.prototype.isSameOrBefore=function(n,i){return this.isSame(n,i)||this.isBefore(n,i)}},E1=function(t,e){e.prototype.isSameOrAfter=function(n,i){return this.isSame(n,i)||this.isAfter(n,i)}};function nP(t){return["date","month"].includes(t)}var mh=[{index:"01"},{index:"02"},{index:"03"},{index:"04"},{index:"05"},{index:"06"},{index:"07"},{index:"08"},{index:"09"},{index:"10"},{index:"11"},{index:"12"}],Hu=[{index:"0"},{index:"1"},{index:"2"},{index:"3"},{index:"4"},{index:"5"},{index:"6"}],iP={modelValue:{type:[String,Array]},type:{type:String,default:"date",validator:nP},allowedDates:{type:Function},color:{type:String},headerColor:{type:String},elevation:{type:Boolean,default:!1},firstDayOfWeek:{type:[String,Number],default:0},min:{type:String},max:{type:String},showCurrent:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},range:{type:Boolean,default:!1},touchable:{type:Boolean,default:!0},onPreview:{type:Function},onChange:{type:Function},"onUpdate:modelValue":{type:Function}},{n:rP}=Qe("picker-header");function sP(t,e){var n=Je("var-icon"),i=Je("var-button");return ie(),he("div",{class:$(t.n())},[We(i,{round:"",text:"",style:{filter:"opacity(0.54)"},disabled:t.disabled.left,onClick:e[0]||(e[0]=r=>t.checkDate("prev"))},{default:pt(()=>[We(n,{name:"chevron-left"})]),_:1},8,["disabled"]),Me("div",{class:$(t.n("value")),onClick:e[1]||(e[1]=r=>t.$emit("check-panel"))},[We(Mn,{name:"var-date-picker"+(t.reverse?"-reverse":"")+"-translatex"},{default:pt(()=>[(ie(),he("div",{key:t.showDate},je(t.showDate),1))]),_:1},8,["name"])],2),We(i,{round:"",text:"",style:{filter:"opacity(0.54)"},disabled:t.disabled.right,onClick:e[2]||(e[2]=r=>t.checkDate("next"))},{default:pt(()=>[We(n,{name:"chevron-right"})]),_:1},8,["disabled"])],2)}var x1=tt({render:sP,name:"PanelHeader",components:{VarButton:hi,VarIcon:Kt},props:{date:{type:Object,required:!0},type:{type:String,default:"date"},disabled:{type:Object,required:!0}},emits:["check-panel","check-date"],setup(t,e){var{emit:n}=e,i=de(!1),r=de(0),s=Le(()=>{var o,{date:l,type:u}=t,{previewMonth:c,previewYear:d}=l;if(u==="month")return Te(d)+r.value;var h=(o=Un.value.datePickerMonthDict)==null?void 0:o[c.index].name;return Un.value.lang==="zh-CN"?d+" "+h:h+" "+d}),a=o=>{o==="prev"&&t.disabled.left||o==="next"&&t.disabled.right||(n("check-date",o),i.value=o==="prev",r.value+=o==="prev"?-1:1)};return Ke(()=>t.date,()=>{r.value=0}),{n:rP,reverse:i,showDate:s,checkDate:a}}});function Tm(){return Tm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Tm.apply(this,arguments)}ht.extend(T1);ht.extend(E1);var{n:wd,classes:aP}=Qe("month-picker"),{n:_d}=Qe("date-picker");function oP(t,e){var n=Je("panel-header"),i=Je("var-button");return ie(),he("div",{class:$(t.n())},[Me("div",{class:$(t.n("content"))},[We(n,{ref:"headerEl",type:"month",date:t.preview,disabled:t.panelBtnDisabled,onCheckPanel:t.clickYear,onCheckDate:t.checkDate},null,8,["date","disabled","onCheckPanel","onCheckDate"]),We(Mn,{name:""+t.nDate()+(t.reverse?"-reverse":"")+"-translatex"},{default:pt(()=>[(ie(),he("ul",{key:t.panelKey},[(ie(!0),he(At,null,bn(t.MONTH_LIST,r=>(ie(),he("li",{key:r.index},[We(i,ln({type:"primary","var-month-picker-cover":"",ripple:!1},Tm({},t.buttonProps(r.index)),{onClick:s=>t.chooseMonth(r,s)}),{default:pt(()=>[Rt(je(t.getMonthAbbr(r.index)),1)]),_:2},1040,["onClick"])]))),128))]))]),_:1},8,["name"])],2)],2)}var lP=tt({render:oP,name:"MonthPickerPanel",components:{VarButton:hi,PanelHeader:x1},props:{choose:{type:Object,required:!0},preview:{type:Object,required:!0},current:{type:String,required:!0},clickYear:{type:Function,required:!0},componentProps:{type:Object,required:!0}},emits:["check-preview","choose-month"],setup(t,e){var{emit:n}=e,[i,r]=t.current.split("-"),s=de(!1),a=de(0),o=de(null),l=tn({left:!1,right:!1}),u=Le(()=>t.choose.chooseYear===t.preview.previewYear),c=Le(()=>t.preview.previewYear===i),d=S=>{var b,w;return(b=(w=Un.value.datePickerMonthDict)==null?void 0:w[S].abbr)!=null?b:""},h=S=>{var{preview:{previewYear:b},componentProps:{min:w,max:E}}=t,T=!0,I=!0,_=b+"-"+S;return E&&(T=ht(_).isSameOrBefore(ht(E),"month")),w&&(I=ht(_).isSameOrAfter(ht(w),"month")),T&&I},f=S=>{var{choose:{chooseMonths:b,chooseDays:w,chooseRangeMonth:E},componentProps:{type:T,range:I}}=t;if(I){if(!E.length)return!1;var _=ht(S).isSameOrBefore(ht(E[1]),"month"),R=ht(S).isSameOrAfter(ht(E[0]),"month");return _&&R}return T==="month"?b.includes(S):w.some(L=>L.includes(S))},m=S=>{var{choose:{chooseMonth:b},preview:{previewYear:w},componentProps:{allowedDates:E,color:T,multiple:I,range:_}}=t,R=w+"-"+S,L=()=>_||I?f(R):(b==null?void 0:b.index)===S&&u.value,k=()=>h(S)?E?!E(R):!1:!0,F=k(),G=()=>F?!0:_||I?!f(R):!u.value||(b==null?void 0:b.index)!==S,H=()=>c.value&&r===S&&t.componentProps.showCurrent?(_||I||u.value)&&F?!0:_||I?!f(R):u.value?(b==null?void 0:b.index)!==r:!0:!1,J=()=>F?"":H()?T!=null?T:"":L()?"":_d()+"-color-cover",V=J().startsWith(_d());return{outline:H(),text:G(),color:G()?"":T,textColor:V?"":J(),[_d()+"-color-cover"]:V,class:aP(wd("button"),[F,wd("button--disabled")])}},v=(S,b)=>{var w=b.currentTarget;w.classList.contains(wd("button--disabled"))||n("choose-month",S)},g=S=>{s.value=S==="prev",a.value+=S==="prev"?-1:1,n("check-preview","year",S)},y=S=>{o.value.checkDate(S)};return Ke(()=>t.preview.previewYear,S=>{var{componentProps:{min:b,max:w}}=t;w&&(l.right=!ht(""+(Te(S)+1)).isSameOrBefore(ht(w),"year")),b&&(l.left=!ht(""+(Te(S)-1)).isSameOrAfter(ht(b),"year"))},{immediate:!0}),{n:wd,nDate:_d,pack:Un,MONTH_LIST:mh,headerEl:o,reverse:s,panelKey:a,panelBtnDisabled:l,forwardRef:y,buttonProps:m,getMonthAbbr:d,chooseMonth:v,checkDate:g}}}),{n:py,classes:uP}=Qe("year-picker"),cP=["onClick"];function dP(t,e){return ie(),he("ul",{class:$(t.n())},[(ie(!0),he(At,null,bn(t.yearList,n=>(ie(),he("li",{key:n,class:$(t.classes(t.n("item"),[n===t.toNumber(t.preview),t.n("item--active")])),style:Be({color:n===t.toNumber(t.preview)?t.componentProps.color:""}),onClick:i=>t.chooseYear(n)},je(n),15,cP))),128))],2)}var hP=tt({render:dP,name:"YearPickerPanel",props:{preview:{type:String},componentProps:{type:Object,required:!0}},emits:["choose-year"],setup(t,e){var{emit:n}=e,i=Le(()=>{var s=[],{preview:a,componentProps:{max:o,min:l}}=t;if(!a)return s;var u=[Te(a)+100,Te(a)-100];if(o){var c=ht(o).format("YYYY-MM-D"),d=Te(c.split("-")[0]);if(d<u[0]&&d>u[1]&&(u=[d,u[1]]),d<=u[1])return[d]}if(l){var h=ht(l).format("YYYY-MM-D"),f=Te(h.split("-")[0]);if(f<u[0]&&f>u[1]&&(u=[u[0],f]),f>=u[0])return[f]}for(var m=u[0];m>=u[1];m--)s.push(m);return s}),r=s=>{n("choose-year",s)};return fn(()=>{var s=document.querySelector("."+py("item--active"));s==null||s.scrollIntoView({block:"center"})}),{n:py,classes:uP,yearList:i,chooseYear:r,toNumber:Te}}});function Em(){return Em=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Em.apply(this,arguments)}ht.extend(T1);ht.extend(E1);var{n:So,classes:fP}=Qe("day-picker"),{n:Sd}=Qe("date-picker");function pP(t,e){var n=Je("panel-header"),i=Je("var-button");return ie(),he("div",{class:$(t.n())},[Me("div",{class:$(t.n("content"))},[We(n,{ref:"headerEl",type:"day",date:t.preview,disabled:t.panelBtnDisabled,onCheckPanel:t.clickMonth,onCheckDate:t.checkDate},null,8,["date","disabled","onCheckPanel","onCheckDate"]),We(Mn,{name:""+t.nDate()+(t.reverse?"-reverse":"")+"-translatex"},{default:pt(()=>[(ie(),he("div",{key:t.panelKey},[Me("ul",{class:$(t.n("head"))},[(ie(!0),he(At,null,bn(t.sortWeekList,r=>(ie(),he("li",{key:r.index},je(t.getDayAbbr(r.index)),1))),128))],2),Me("ul",{class:$(t.n("body"))},[(ie(!0),he(At,null,bn(t.days,(r,s)=>(ie(),he("li",{key:s},[We(i,ln({type:"primary","var-day-picker-cover":"",round:"",ripple:!1},Em({},t.buttonProps(r)),{onClick:a=>t.chooseDay(r,a)}),{default:pt(()=>[Rt(je(t.filterDay(r)),1)]),_:2},1040,["onClick"])]))),128))],2)]))]),_:1},8,["name"])],2)],2)}var mP=tt({render:pP,name:"DayPickerPanel",components:{VarButton:hi,PanelHeader:x1},props:{choose:{type:Object,required:!0},preview:{type:Object,required:!0},current:{type:String,required:!0},clickMonth:{type:Function,required:!0},componentProps:{type:Object,required:!0}},emits:["check-preview","choose-day"],setup(t,e){var{emit:n}=e,[i,r,s]=t.current.split("-"),a=de([]),o=de(!1),l=de(0),u=de(null),c=tn({left:!1,right:!1}),d=Le(()=>t.preview.previewYear===i&&t.preview.previewMonth.index===r),h=Le(()=>{var _;return t.choose.chooseYear===t.preview.previewYear&&((_=t.choose.chooseMonth)==null?void 0:_.index)===t.preview.previewMonth.index}),f=Le(()=>{var _=Hu.findIndex(R=>R.index===t.componentProps.firstDayOfWeek);return _===-1||_===0?Hu:Hu.slice(_).concat(Hu.slice(0,_))}),m=_=>{var R,L;return(R=(L=Un.value.datePickerWeekDict)==null?void 0:L[_].abbr)!=null?R:""},v=_=>_>0?_:"",g=()=>{var{preview:{previewMonth:_,previewYear:R}}=t,L=ht(R+"-"+_.index).daysInMonth(),k=ht(R+"-"+_.index+"-01").day(),F=f.value.findIndex(G=>G.index===""+k);a.value=[...Array(F).fill(-1),...Array.from(Array(L+1).keys())].filter(G=>G)},y=()=>{var{preview:{previewYear:_,previewMonth:R},componentProps:{max:L,min:k}}=t;if(L){var F=_+"-"+(Te(R.index)+1);c.right=!ht(F).isSameOrBefore(ht(L),"month")}if(k){var G=_+"-"+(Te(R.index)-1);c.left=!ht(G).isSameOrAfter(ht(k),"month")}},S=_=>{var{preview:{previewYear:R,previewMonth:L},componentProps:{min:k,max:F}}=t,G=!0,H=!0,J=R+"-"+L.index+"-"+_;return F&&(G=ht(J).isSameOrBefore(ht(F),"day")),k&&(H=ht(J).isSameOrAfter(ht(k),"day")),G&&H},b=_=>{var{choose:{chooseDays:R,chooseRangeDay:L},componentProps:{range:k}}=t;if(k){if(!L.length)return!1;var F=ht(_).isSameOrBefore(ht(L[1]),"day"),G=ht(_).isSameOrAfter(ht(L[0]),"day");return F&&G}return R.includes(_)},w=_=>{if(_<0)return{text:!0,outline:!1,textColor:"",class:So("button")};var{choose:{chooseDay:R},preview:{previewYear:L,previewMonth:k},componentProps:{allowedDates:F,color:G,multiple:H,range:J}}=t,V=L+"-"+k.index+"-"+_,re=()=>J||H?b(V):Te(R)===_&&h.value,j=()=>S(_)?F?!F(V):!1:!0,Z=j(),z=()=>Z?!0:J||H?!b(V):!h.value||Te(R)!==_,ee=()=>d.value&&Te(s)===_&&t.componentProps.showCurrent?(J||H||h.value)&&Z?!0:J||H?!b(V):h.value?R!==s:!0:!1,Q=()=>Z?"":ee()?G!=null?G:"":re()?"":Sd()+"-color-cover",fe=Q().startsWith(Sd());return{text:z(),outline:ee(),textColor:fe?"":Q(),[Sd()+"-color-cover"]:fe,class:fP(So("button"),So("button--usable"),[Z,So("button--disabled")])}},E=_=>{o.value=_==="prev",l.value+=_==="prev"?-1:1,n("check-preview","month",_)},T=(_,R)=>{var L=R.currentTarget;L.classList.contains(So("button--disabled"))||n("choose-day",_)},I=_=>{u.value.checkDate(_)};return fn(()=>{g(),y()}),Ke(()=>t.preview,()=>{g(),y()}),{n:So,nDate:Sd,days:a,reverse:o,headerEl:u,panelKey:l,sortWeekList:f,panelBtnDisabled:c,forwardRef:I,filterDay:v,getDayAbbr:m,checkDate:E,chooseDay:T,buttonProps:w}}}),{n:vP,classes:gP}=Qe("date-picker");function yP(t,e){var n=Je("year-picker-panel"),i=Je("month-picker-panel"),r=Je("day-picker-panel");return ie(),he("div",{class:$(t.classes(t.n(),[t.elevation,"var-elevation--2"]))},[Me("div",{class:$(t.n("title")),style:Be({background:t.headerColor||t.color})},[Me("div",{class:$(t.classes(t.n("title-year"),[t.isYearPanel,t.n("title-year--active")])),onClick:e[0]||(e[0]=s=>t.clickEl("year"))},[Ue(t.$slots,"year",{year:t.chooseYear},()=>[Rt(je(t.chooseYear),1)])],2),Me("div",{class:$(t.classes(t.n("title-date"),[!t.isYearPanel,t.n("title-date--active")],[t.range,t.n("title-date--range")])),onClick:e[1]||(e[1]=s=>t.clickEl("date"))},[We(Mn,{name:t.multiple?"":""+t.n()+(t.reverse?"-reverse":"")+"-translatey"},{default:pt(()=>{var s,a,o;return[t.type==="month"?(ie(),he("div",{key:""+t.chooseYear+((s=t.chooseMonth)==null?void 0:s.index)},[t.range?Ue(t.$slots,"range",{key:0,choose:t.getChoose.chooseRangeMonth},()=>[Rt(je(t.getMonthTitle),1)]):t.multiple?Ue(t.$slots,"multiple",{key:1,choose:t.getChoose.chooseMonths},()=>[Rt(je(t.getMonthTitle),1)]):Ue(t.$slots,"month",{key:2,month:(a=t.chooseMonth)==null?void 0:a.index,year:t.chooseYear},()=>[Rt(je(t.getMonthTitle),1)])])):(ie(),he("div",{key:""+t.chooseYear+((o=t.chooseMonth)==null?void 0:o.index)+t.chooseDay},[t.range?Ue(t.$slots,"range",{key:0,choose:t.formatRange},()=>[Rt(je(t.getDateTitle),1)]):t.multiple?Ue(t.$slots,"multiple",{key:1,choose:t.getChoose.chooseDays},()=>[Rt(je(t.getDateTitle),1)]):Ue(t.$slots,"date",Pw(ln({key:2},t.slotProps)),()=>[Rt(je(t.getDateTitle),1)])]))]}),_:3},8,["name"])],2)],6),Me("div",{class:$(t.n("body")),onTouchstart:e[2]||(e[2]=function(){return t.handleTouchstart&&t.handleTouchstart(...arguments)}),onTouchmove:e[3]||(e[3]=function(){return t.handleTouchmove&&t.handleTouchmove(...arguments)}),onTouchend:e[4]||(e[4]=function(){return t.handleTouchend&&t.handleTouchend(...arguments)})},[We(Mn,{name:t.n()+"-panel-fade"},{default:pt(()=>[t.getPanelType==="year"?(ie(),Mt(n,{key:0,"component-props":t.componentProps,preview:t.previewYear,onChooseYear:t.getChooseYear},null,8,["component-props","preview","onChooseYear"])):t.getPanelType==="month"?(ie(),Mt(i,{key:1,ref:"monthPanelEl",current:t.currentDate,choose:t.getChoose,preview:t.getPreview,"click-year":()=>t.clickEl("year"),"component-props":t.componentProps,onChooseMonth:t.getChooseMonth,onCheckPreview:t.checkPreview},null,8,["current","choose","preview","click-year","component-props","onChooseMonth","onCheckPreview"])):t.getPanelType==="date"?(ie(),Mt(r,{key:2,ref:"dayPanelEl",current:t.currentDate,choose:t.getChoose,preview:t.getPreview,"component-props":t.componentProps,"click-month":()=>t.clickEl("month"),onChooseDay:t.getChooseDay,onCheckPreview:t.checkPreview},null,8,["current","choose","preview","component-props","click-month","onChooseDay","onCheckPreview"])):qe("v-if",!0)]),_:1},8,["name"])],34)],2)}var yl=tt({render:yP,name:"VarDatePicker",components:{MonthPickerPanel:lP,YearPickerPanel:hP,DayPickerPanel:mP},props:iP,setup(t){var e=0,n=0,i="",r,s=ht().format("YYYY-MM-D"),[a,o]=s.split("-"),l=mh.find(ae=>ae.index===o),u=de(!1),c=de(!1),d=de(!0),h=de(),f=de(),m=de(),v=de(l),g=de(a),y=de(!1),S=de([]),b=de([]),w=de([]),E=de([]),T=de(null),I=de(null),_=tn({allowedDates:t.allowedDates,type:t.type,color:t.color,firstDayOfWeek:t.firstDayOfWeek,min:t.min,max:t.max,showCurrent:t.showCurrent,multiple:t.multiple,range:t.range}),R=Le(()=>({chooseMonth:h.value,chooseYear:f.value,chooseDay:m.value,chooseMonths:S.value,chooseDays:b.value,chooseRangeMonth:w.value,chooseRangeDay:E.value})),L=Le(()=>({previewMonth:v.value,previewYear:g.value})),k=Le(()=>{var{multiple:ae,range:me}=t;if(me)return w.value.length?w.value[0]+" ~ "+w.value[1]:"";var le="";if(h.value){var Se,ve;le=(Se=(ve=Un.value.datePickerMonthDict)==null?void 0:ve[h.value.index].name)!=null?Se:""}return ae?""+S.value.length+Un.value.datePickerSelected:le}),F=Le(()=>{var ae,me,le,Se,{multiple:ve,range:U}=t;if(U){var D=E.value.map(Ve=>ht(Ve).format("YYYY-MM-DD"));return D.length?D[0]+" ~ "+D[1]:""}if(ve)return""+b.value.length+Un.value.datePickerSelected;if(!f.value||!h.value||!m.value)return"";var se=ht(f.value+"-"+h.value.index+"-"+m.value).day(),be=Hu.find(Ve=>Ve.index===""+se),Re=(ae=(me=Un.value.datePickerWeekDict)==null?void 0:me[be.index].name)!=null?ae:"",Fe=(le=(Se=Un.value.datePickerMonthDict)==null?void 0:Se[h.value.index].name)!=null?le:"",Xe=Ka(m.value,2,"0");return Un.value.lang==="zh-CN"?h.value.index+"-"+Xe+" "+Re.slice(0,3):Re.slice(0,3)+", "+Fe.slice(0,3)+" "+m.value}),G=Le(()=>u.value?"year":t.type==="month"||c.value?"month":t.type==="date"?"date":""),H=Le(()=>!t.touchable||["","year"].includes(G.value)),J=Le(()=>{var ae,me,le,Se,ve=ht(f.value+"-"+((ae=h.value)==null?void 0:ae.index)+"-"+m.value).day(),U=m.value?Ka(m.value,2,"0"):"";return{week:""+ve,year:(me=f.value)!=null?me:"",month:(le=(Se=h.value)==null?void 0:Se.index)!=null?le:"",date:U}}),V=Le(()=>R.value.chooseRangeDay.map(ae=>ht(ae).format("YYYY-MM-DD"))),re=Le(()=>f.value===g.value),j=Le(()=>{var ae;return((ae=h.value)==null?void 0:ae.index)===v.value.index}),Z=ae=>{ae==="year"?u.value=!0:ae==="month"?c.value=!0:(u.value=!1,c.value=!1)},z=ae=>{if(!H.value){var{clientX:me,clientY:le}=ae.touches[0];e=me,n=le}},ee=(ae,me)=>ae>=me&&ae>20?"x":"y",Q=ae=>{if(!H.value){var{clientX:me,clientY:le}=ae.touches[0],Se=me-e,ve=le-n;r=ee(Math.abs(Se),Math.abs(ve)),i=Se>0?"prev":"next"}},fe=()=>{if(!(H.value||r!=="x")){var ae=G.value==="month"?T:I;hf(()=>{ae.value.forwardRef(i),ce()})}},Ee=(ae,me)=>{var le=me==="month"?w:E;if(le.value=d.value?[ae,ae]:[le.value[0],ae],d.value=!d.value,d.value){var Se=ht(le.value[0]).isAfter(le.value[1]),ve=Se?[le.value[1],le.value[0]]:[...le.value];ye(t["onUpdate:modelValue"],ve),ye(t.onChange,ve)}},ne=(ae,me)=>{var le=me==="month"?S:b,Se=me==="month"?"YYYY-MM":"YYYY-MM-DD",ve=le.value.map(D=>ht(D).format(Se)),U=ve.findIndex(D=>D===ae);U===-1?ve.push(ae):ve.splice(U,1),ye(t["onUpdate:modelValue"],ve),ye(t.onChange,ve)},X=(ae,me)=>!f.value||!h.value?!1:re.value?ae==="month"?me.index<h.value.index:j.value?me<Te(m.value):h.value.index>v.value.index:f.value>g.value,_e=ae=>{var{readonly:me,range:le,multiple:Se,onChange:ve,"onUpdate:modelValue":U}=t;if(!(ae<0||me)){y.value=X("day",ae);var D=g.value+"-"+v.value.index+"-"+ae,se=ht(D).format("YYYY-MM-DD");le?Ee(se,"day"):Se?ne(se,"day"):(ye(U,se),ye(ve,se))}},Ae=ae=>{var{type:me,readonly:le,range:Se,multiple:ve,onChange:U,onPreview:D,"onUpdate:modelValue":se}=t;if(y.value=X("month",ae),me==="month"&&!le){var be=g.value+"-"+ae.index;Se?Ee(be,"month"):ve?ne(be,"month"):(ye(se,be),ye(U,be))}else v.value=ae,ye(D,Te(g.value),Te(v.value.index));c.value=!1},ze=ae=>{g.value=""+ae,u.value=!1,c.value=!0,ye(t.onPreview,Te(g.value),Te(v.value.index))},Ie=(ae,me)=>{var le=me==="prev"?-1:1;if(ae==="year")g.value=""+(Te(g.value)+le);else{var Se=Te(v.value.index)+le;Se<1&&(g.value=""+(Te(g.value)-1),Se=12),Se>12&&(g.value=""+(Te(g.value)+1),Se=1),v.value=mh.find(ve=>Te(ve.index)===Se)}ye(t.onPreview,Te(g.value),Te(v.value.index))},Ge=()=>(t.multiple||t.range)&&!qt(t.modelValue)?(console.error('[Varlet] DatePicker: type of prop "modelValue" should be an Array'),!1):!t.multiple&&!t.range&&qt(t.modelValue)?(console.error('[Varlet] DatePicker: type of prop "modelValue" should be a String'),!1):!0,N=ae=>qt(ae)?!1:ae==="Invalid Date"?(console.error('[Varlet] DatePicker: "modelValue" is an Invalid Date'),!0):!1,B=(ae,me)=>{var le=me==="month"?w:E,Se=me==="month"?"YYYY-MM":"YYYY-MM-D",ve=ae.map(se=>ht(se).format(Se)).slice(0,2),U=le.value.some(se=>N(se));if(!U){le.value=ve;var D=ht(le.value[0]).isAfter(le.value[1]);le.value.length===2&&D&&(le.value=[le.value[1],le.value[0]])}},te=(ae,me)=>{var le=me==="month"?S:b,Se=me==="month"?"YYYY-MM":"YYYY-MM-D",ve=Array.from(new Set(ae.map(U=>ht(U).format(Se))));le.value=ve.filter(U=>U!=="Invalid Date")},ue=ae=>{var me=ht(ae).format("YYYY-MM-D");if(!N(me)){var[le,Se,ve]=me.split("-"),U=mh.find(D=>D.index===Se);h.value=U,f.value=le,m.value=ve,v.value=U,g.value=le}},ce=()=>{n=0,e=0,i="",r=void 0};return Ke(()=>t.modelValue,ae=>{if(!(!Ge()||N(ae)||!ae))if(t.range){if(!qt(ae))return;d.value=ae.length!==1,B(ae,t.type)}else if(t.multiple){if(!qt(ae))return;te(ae,t.type)}else ue(ae)},{immediate:!0}),Ke(G,ce),{n:vP,classes:gP,monthPanelEl:T,dayPanelEl:I,reverse:y,currentDate:s,chooseMonth:h,chooseYear:f,chooseDay:m,previewYear:g,isYearPanel:u,isMonthPanel:c,getMonthTitle:k,getDateTitle:F,getPanelType:G,getChoose:R,getPreview:L,componentProps:_,slotProps:J,formatRange:V,clickEl:Z,handleTouchstart:z,handleTouchmove:Q,handleTouchend:fe,getChooseDay:_e,getChooseMonth:Ae,getChooseYear:ze,checkPreview:Ie}}});yl.install=function(t){t.component(yl.name,yl)};function xm(){return xm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},xm.apply(this,arguments)}function bP(t){return["left","center","right"].includes(t)}var wP=xm({show:{type:Boolean,default:!1},width:{type:[Number,String]},title:{type:String},message:{type:String},messageAlign:{type:String,default:"left",validator:bP},confirmButton:{type:Boolean,default:!0},cancelButton:{type:Boolean,default:!0},confirmButtonText:{type:String},cancelButtonText:{type:String},confirmButtonTextColor:{type:String},cancelButtonTextColor:{type:String},confirmButtonColor:{type:String},cancelButtonColor:{type:String},onBeforeClose:{type:Function},onConfirm:{type:Function},onCancel:{type:Function},"onUpdate:show":{type:Function},dialogClass:{type:String},dialogStyle:{type:Object}},ui(zc,["overlay","overlayClass","overlayStyle","lockScroll","closeOnClickOverlay","teleport","onOpen","onClose","onOpened","onClosed","onClickOverlay","onRouteChange"]));function Cm(){return Cm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Cm.apply(this,arguments)}var{n:_P,classes:SP}=Qe("dialog");function MP(t,e){var n=Je("var-button"),i=Je("var-popup");return ie(),Mt(i,{class:$(t.n("popup")),"var-dialog-cover":"",show:t.popupShow,overlay:t.overlay,"overlay-class":t.overlayClass,"overlay-style":t.overlayStyle,"lock-scroll":t.lockScroll,"close-on-click-overlay":t.popupCloseOnClickOverlay,teleport:t.teleport,onOpen:t.onOpen,onClose:t.onClose,onClosed:t.onClosed,onOpened:t.onOpened,onRouteChange:t.onRouteChange,onClickOverlay:t.handleClickOverlay},{default:pt(()=>[Me("div",ln({class:t.classes("var--box",t.n(),t.dialogClass),style:Cm({width:t.toSizeUnit(t.width)},t.dialogStyle)},t.$attrs),[Me("div",{class:$(t.n("title"))},[Ue(t.$slots,"title",{},()=>[Rt(je(t.dt(t.title,t.pack.dialogTitle)),1)])],2),Me("div",{class:$(t.n("message")),style:Be({textAlign:t.messageAlign})},[Ue(t.$slots,"default",{},()=>[Rt(je(t.message),1)])],6),Me("div",{class:$(t.n("actions"))},[t.cancelButton?(ie(),Mt(n,{key:0,class:$(t.classes(t.n("button"),t.n("cancel-button"))),"var-dialog-cover":"",text:"","text-color":t.cancelButtonTextColor,color:t.cancelButtonColor,onClick:t.cancel},{default:pt(()=>[Rt(je(t.dt(t.cancelButtonText,t.pack.dialogCancelButtonText)),1)]),_:1},8,["class","text-color","color","onClick"])):qe("v-if",!0),t.confirmButton?(ie(),Mt(n,{key:1,class:$(t.classes(t.n("button"),t.n("confirm-button"))),"var-dialog-cover":"",text:"","text-color":t.confirmButtonTextColor,color:t.confirmButtonColor,onClick:t.confirm},{default:pt(()=>[Rt(je(t.dt(t.confirmButtonText,t.pack.dialogConfirmButtonText)),1)]),_:1},8,["class","text-color","color","onClick"])):qe("v-if",!0)],2)],16)]),_:3},8,["class","show","overlay","overlay-class","overlay-style","lock-scroll","close-on-click-overlay","teleport","onOpen","onClose","onClosed","onOpened","onRouteChange","onClickOverlay"])}var Va=tt({render:MP,name:"VarDialog",components:{VarPopup:rr,VarButton:hi},inheritAttrs:!1,props:wP,setup(t){var e=de(!1),n=de(!1),i=()=>ye(t["onUpdate:show"],!1),r=()=>{var{closeOnClickOverlay:o,onClickOverlay:l,onBeforeClose:u}=t;if(ye(l),!!o){if(u!=null){u("close",i);return}ye(t["onUpdate:show"],!1)}},s=()=>{var{onBeforeClose:o,onConfirm:l}=t;if(ye(l),o!=null){o("confirm",i);return}ye(t["onUpdate:show"],!1)},a=()=>{var{onBeforeClose:o,onCancel:l}=t;if(ye(l),o!=null){o("cancel",i);return}ye(t["onUpdate:show"],!1)};return Ke(()=>t.show,o=>{e.value=o},{immediate:!0}),Ke(()=>t.closeOnClickOverlay,o=>{if(t.onBeforeClose!=null){n.value=!1;return}n.value=o},{immediate:!0}),{n:_P,classes:SP,pack:Un,dt:cf,popupShow:e,popupCloseOnClickOverlay:n,handleClickOverlay:r,confirm:s,cancel:a,toSizeUnit:dn}}}),Ms;function Qa(t){return ig()?new Promise(e=>{Qa.close();var n=pi(t)||Zn(t)?{message:String(t)}:t,i=tn(n);i.teleport="body",Ms=i;var{unmountInstance:r}=Bc(Va,i,{onConfirm:()=>{i.onConfirm==null||i.onConfirm(),e("confirm")},onCancel:()=>{i.onCancel==null||i.onCancel(),e("cancel")},onClose:()=>{i.onClose==null||i.onClose(),e("close")},onClosed:()=>{i.onClosed==null||i.onClosed(),r(),Ms===i&&(Ms=null)},onRouteChange:()=>{r(),Ms===i&&(Ms=null)},"onUpdate:show":s=>{i.show=s}});i.show=!0}):Promise.resolve()}Va.install=function(t){t.component(Va.name,Va)};Qa.install=function(t){t.component(Va.name,Va)};Qa.close=()=>{if(Ms!=null){var t=Ms;Ms=null,rn().then(()=>{t.show=!1})}};Qa.Component=Va;var TP={inset:{type:[Boolean,Number,String],default:!1},vertical:{type:Boolean,default:!1},description:{type:String},margin:{type:String},dashed:{type:Boolean,default:!1},hairline:{type:Boolean,default:!1}};function Zo(){return Zo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Zo.apply(this,arguments)}var{n:EP,classes:xP}=Qe("divider");function CP(t,e){return ie(),he("div",{class:$(t.classes(t.n(),"var--box",[t.vertical,t.n("--vertical")],[t.withText,t.n("--with-text")],[t.isInset,t.n("--inset")],[t.dashed,t.n("--dashed")],[t.hairline,t.n("--hairline")])),style:Be(t.style)},[Ue(t.$slots,"default",{},()=>[t.description?(ie(),he("span",{key:0,class:$(t.n("text"))},je(t.description),3)):qe("v-if",!0)])],6)}var bl=tt({render:CP,name:"VarDivider",props:TP,setup(t,e){var{slots:n}=e,i=tn({withText:!1}),r=Le(()=>am(t.inset)?t.inset:!0),s=Le(()=>{var{inset:o,vertical:l,margin:u}=t,c={margin:u};if(am(o)||o===0)return Zo({},c);var d=Te(o),h=Math.abs(d)+(o+"").replace(d+"","");return l?Zo({},c,{height:"calc(80% - "+dn(h)+")"}):Zo({},c,{width:"calc(100% - "+dn(h)+")",left:d>0?dn(h):dn(0)})}),a=()=>{i.withText=Boolean(n.default)||Boolean(t.description)};return fn(()=>{a()}),Nc(()=>{a()}),Zo({n:EP,classes:xP},LE(i),{style:s,isInset:r})}});bl.install=function(t){t.component(bl.name,bl)};var AP={disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}};function my(t,e,n,i,r,s,a){try{var o=t[s](a),l=o.value}catch(u){n(u);return}o.done?e(l):Promise.resolve(l).then(i,r)}function RP(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function a(l){my(s,i,r,a,o,"next",l)}function o(l){my(s,i,r,a,o,"throw",l)}a(void 0)})}}var{n:PP}=Qe("form");function LP(t,e){return ie(),he("div",{class:$(t.n())},[Ue(t.$slots,"default")],2)}var Os=tt({render:LP,name:"VarForm",props:AP,setup(t){var e=Le(()=>t.disabled),n=Le(()=>t.readonly),{formItems:i,bindFormItems:r}=d2(),s=function(){var u=RP(function*(){var c=yield Promise.all(i.map(d=>{var{validate:h}=d;return h()}));return c.every(d=>d===!0)});return function(){return u.apply(this,arguments)}}(),a=()=>i.forEach(u=>{var{reset:c}=u;return c()}),o=()=>i.forEach(u=>{var{resetValidation:c}=u;return c()}),l={disabled:e,readonly:n};return r(l),{n:PP,validate:s,reset:a,resetValidation:o}}});Os.install=function(t){t.component(Os.name,Os)};Os.useValidation=Wi;Os.useForm=$i;function vy(t,e,n,i,r,s,a){try{var o=t[s](a),l=o.value}catch(u){n(u);return}o.done?e(l):Promise.resolve(l).then(i,r)}function bf(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function a(l){vy(s,i,r,a,o,"next",l)}function o(l){vy(s,i,r,a,o,"throw",l)}a(void 0)})}}function Am(){return Am=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Am.apply(this,arguments)}var IP="background-image",OP="lazy-loading",DP="lazy-error",gy="lazy-attempt",NP=["scroll","wheel","mousewheel","resize","animationend","transitionend","touchmove"],Rm="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",Ql=[],kh=[],C1=TC(100),Cn={loading:Rm,error:Rm,attempt:3,throttleWait:300,events:NP},ug=ng(Vc,Cn.throttleWait);function wf(t,e){t._lazy.arg===IP?t.style.backgroundImage="url("+e+")":t.setAttribute("src",e)}function kP(t){t._lazy.loading&&wf(t,t._lazy.loading),Vc()}function FP(t){t._lazy.error&&wf(t,t._lazy.error),t._lazy.state="error",dg(t),Vc()}function A1(t,e){wf(t,e),t._lazy.state="success",dg(t),Vc()}function UP(t){var e;kh.includes(t)||(kh.push(t),(e=Cn.events)==null||e.forEach(n=>{t.addEventListener(n,ug,{passive:!0})}))}function BP(){kh.forEach(t=>{var e;(e=Cn.events)==null||e.forEach(n=>{t.removeEventListener(n,ug)})}),kh.length=0}function zP(t,e){var n,i,r={loading:(n=t.getAttribute(OP))!=null?n:Cn.loading,error:(i=t.getAttribute(DP))!=null?i:Cn.error,attempt:t.getAttribute(gy)?Number(t.getAttribute(gy)):Cn.attempt};t._lazy=Am({src:e.value,arg:e.arg,currentAttempt:0,state:"pending",attemptLock:!1},r),wf(t,Rm),ye(Cn.filter,t._lazy)}function VP(t,e){var n=new Image;n.src=e,t._lazy.preloadImage=n,n.addEventListener("load",()=>{t._lazy.attemptLock=!1,C1.add(e),A1(t,e)}),n.addEventListener("error",()=>{t._lazy.attemptLock=!1,t._lazy.currentAttempt>=t._lazy.attempt?FP(t):R1(t)})}function R1(t){if(!t._lazy.attemptLock){t._lazy.attemptLock=!0,t._lazy.currentAttempt++;var{src:e}=t._lazy;if(C1.has(e)){A1(t,e),t._lazy.attemptLock=!1;return}kP(t),VP(t,e)}}function cg(t){return Pm.apply(this,arguments)}function Pm(){return Pm=bf(function*(t){(yield CC(t))&&R1(t)}),Pm.apply(this,arguments)}function Vc(){Ql.forEach(t=>cg(t))}function HP(t){return Lm.apply(this,arguments)}function Lm(){return Lm=bf(function*(t){!Ql.includes(t)&&Ql.push(t),AC(t).forEach(UP),yield cg(t)}),Lm.apply(this,arguments)}function dg(t){uf(Ql,t),Ql.length===0&&BP()}function GP(t,e){var{src:n,arg:i}=t._lazy;return n!==e.value||i!==e.arg}function P1(t,e){return Im.apply(this,arguments)}function Im(){return Im=bf(function*(t,e){zP(t,e),yield HP(t)}),Im.apply(this,arguments)}function WP(t,e){return Om.apply(this,arguments)}function Om(){return Om=bf(function*(t,e){if(!GP(t,e)){Ql.includes(t)&&(yield cg(t));return}yield P1(t,e)}),Om.apply(this,arguments)}function $P(t){t===void 0&&(t={});var{events:e,loading:n,error:i,attempt:r,throttleWait:s,filter:a}=t;Cn.events=e!=null?e:Cn.events,Cn.loading=n!=null?n:Cn.loading,Cn.error=i!=null?i:Cn.error,Cn.attempt=r!=null?r:Cn.attempt,Cn.throttleWait=s!=null?s:Cn.throttleWait,Cn.filter=a}var XP={mounted:P1,unmounted:dg,updated:WP,install(t,e){$P(e),ug=ng(Vc,Cn.throttleWait),t.directive("lazy",this)}},Fh=XP;function YP(t){return["fill","contain","cover","none","scale-down"].includes(t)}var qP={src:{type:String},fit:{type:String,validator:YP,default:"fill"},alt:{type:String},title:{type:String},width:{type:[String,Number]},height:{type:[String,Number]},radius:{type:[String,Number],default:0},loading:{type:String},error:{type:String},lazy:{type:Boolean,default:!1},ripple:{type:Boolean,default:!1},block:{type:Boolean,default:!0},onClick:{type:Function},onLoad:{type:Function},onError:{type:Function}},{n:ZP,classes:jP}=Qe("image"),KP=["alt","title","lazy-error","lazy-loading"],JP=["alt","title","src"];function QP(t,e){var n=jn("lazy"),i=jn("ripple");return Zt((ie(),he("div",{class:$(t.classes(t.n(),"var--box",[!t.block,"var--inline-block"])),style:Be({width:t.toSizeUnit(t.width),height:t.toSizeUnit(t.height),"border-radius":t.toSizeUnit(t.radius)})},[t.lazy?Zt((ie(),he("img",{key:0,class:$(t.n("image")),alt:t.alt,title:t.title,"lazy-error":t.error,"lazy-loading":t.loading,style:Be({objectFit:t.fit}),onLoad:e[0]||(e[0]=function(){return t.handleLoad&&t.handleLoad(...arguments)}),onError:e[1]||(e[1]=function(){return t.handleError&&t.handleError(...arguments)}),onClick:e[2]||(e[2]=function(){return t.onClick&&t.onClick(...arguments)})},null,46,KP)),[[n,t.src]]):(ie(),he("img",{key:1,class:$(t.n("image")),alt:t.alt,title:t.title,style:Be({objectFit:t.fit}),src:t.src,onLoad:e[3]||(e[3]=function(){return t.handleLoad&&t.handleLoad(...arguments)}),onError:e[4]||(e[4]=function(){return t.handleError&&t.handleError(...arguments)}),onClick:e[5]||(e[5]=function(){return t.onClick&&t.onClick(...arguments)})},null,46,JP))],6)),[[i,{disabled:!t.ripple}]])}var wl=tt({render:QP,name:"VarImage",directives:{Lazy:Fh,Ripple:kn},props:qP,setup(t){var e=i=>{var r=i.currentTarget,{lazy:s,onLoad:a,onError:o}=t;s?(r._lazy.state==="success"&&ye(a,i),r._lazy.state==="error"&&ye(o,i)):ye(a,i)},n=i=>{var{lazy:r,onError:s}=t;!r&&ye(s,i)};return{n:ZP,classes:jP,toSizeUnit:dn,handleLoad:e,handleError:n}}});wl.install=function(t){t.component(wl.name,wl)};var L1=Symbol("SWIPE_BIND_SWIPE_ITEM_KEY"),I1=Symbol("SWIPE_COUNT_SWIPE_ITEM_KEY");function eL(){var{childProviders:t,bindChildren:e}=Hi(L1),{length:n}=or(I1);return{length:n,swipeItems:t,bindSwipeItems:e}}var O1={loop:{type:Boolean,default:!0},autoplay:{type:[String,Number]},duration:{type:[String,Number],default:300},initialIndex:{type:[String,Number],default:0},indicator:{type:Boolean,default:!0},indicatorColor:{type:String},vertical:{type:Boolean,default:!1},touchable:{type:Boolean,default:!0},onChange:{type:Function}};function yy(t,e,n,i,r,s,a){try{var o=t[s](a),l=o.value}catch(u){n(u);return}o.done?e(l):Promise.resolve(l).then(i,r)}function tL(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function a(l){yy(s,i,r,a,o,"next",l)}function o(l){yy(s,i,r,a,o,"throw",l)}a(void 0)})}}var nL=250,iL=20,{n:rL,classes:sL}=Qe("swipe"),aL=["onClick"];function oL(t,e){return ie(),he("div",{class:$(t.n()),ref:"swipeEl"},[Me("div",{class:$(t.classes(t.n("track"),[t.vertical,t.n("--vertical")])),style:Be({width:t.vertical?void 0:t.trackSize+"px",height:t.vertical?t.trackSize+"px":void 0,transform:"translate"+(t.vertical?"Y":"X")+"("+t.translate+"px)",transitionDuration:t.lockDuration?"0ms":t.toNumber(t.duration)+"ms"}),onTouchstart:e[0]||(e[0]=function(){return t.handleTouchstart&&t.handleTouchstart(...arguments)}),onTouchmove:e[1]||(e[1]=function(){return t.handleTouchmove&&t.handleTouchmove(...arguments)}),onTouchend:e[2]||(e[2]=function(){return t.handleTouchend&&t.handleTouchend(...arguments)})},[Ue(t.$slots,"default")],38),Ue(t.$slots,"indicator",{index:t.index,length:t.length},()=>[t.indicator&&t.length?(ie(),he("div",{key:0,class:$(t.classes(t.n("indicators"),[t.vertical,t.n("--indicators-vertical")]))},[(ie(!0),he(At,null,bn(t.length,(n,i)=>(ie(),he("div",{class:$(t.classes(t.n("indicator"),[t.index===i,t.n("--indicator-active")],[t.vertical,t.n("--indicator-vertical")])),style:Be({background:t.indicatorColor}),key:n,onClick:r=>t.to(i)},null,14,aL))),128))],2)):qe("v-if",!0)])],2)}var Ds=tt({render:oL,name:"VarSwipe",props:O1,setup(t){var e=de(null),n=de(0),i=Le(()=>t.vertical),r=de(0),s=de(0),a=de(!1),o=de(0),{swipeItems:l,bindSwipeItems:u,length:c}=eL(),d=!1,h=-1,f,m,v,g,y,S=z=>l.find(ee=>{var{index:Q}=ee;return Q.value===z}),b=()=>{!t.loop||(s.value>=0&&S(c.value-1).setTranslate(-r.value),s.value<=-(r.value-n.value)&&S(0).setTranslate(r.value),s.value>-(r.value-n.value)&&s.value<0&&(S(c.value-1).setTranslate(0),S(0).setTranslate(0)))},w=z=>{var ee=Zn(z)?z:Math.floor((s.value-n.value/2)/-n.value),{loop:Q}=t;return ee<=-1?Q?-1:0:ee>=c.value?Q?c.value:c.value-1:ee},E=z=>{var{loop:ee}=t;return z===-1?ee?c.value-1:0:z===c.value?ee?0:c.value-1:z},T=z=>{var{loop:ee}=t;return z<0?ee?c.value-1:0:z>c.value-1?ee?0:c.value-1:z},I=z=>{var ee=s.value>=n.value,Q=s.value<=-r.value,fe=0,Ee=-(r.value-n.value);a.value=!0,(ee||Q)&&(a.value=!0,s.value=Q?fe:Ee,S(0).setTranslate(0),S(c.value-1).setTranslate(0)),hf(()=>{a.value=!1,ye(z)})},_=()=>{o.value=T(Te(t.initialIndex))},R=()=>{var{autoplay:z}=t;!z||c.value<=1||(L(),h=window.setTimeout(()=>{V(),R()},Te(z)))},L=()=>{h&&clearTimeout(h)},k=(z,ee)=>{if(z>ee&&z>10)return"horizontal";if(ee>z&&ee>10)return"vertical"},F=z=>{if(!(c.value<=1||!t.touchable)){var{clientX:ee,clientY:Q}=z.touches[0];f=ee,m=Q,v=performance.now(),d=!0,L(),I(()=>{a.value=!0})}},G=z=>{var{touchable:ee,vertical:Q}=t;if(!(!d||!ee)){var{clientX:fe,clientY:Ee}=z.touches[0],ne=Math.abs(fe-f),X=Math.abs(Ee-m),_e=k(ne,X),Ae=Q?"vertical":"horizontal";if(_e===Ae){z.preventDefault();var ze=g!==void 0?fe-g:0,Ie=y!==void 0?Ee-y:0;g=fe,y=Ee,s.value+=Q?Ie:ze,b()}}},H=()=>{if(!!d){var{vertical:z,onChange:ee}=t,Q=z?y<m:g<f,fe=Math.abs(z?m-y:f-g),Ee=performance.now()-v<=nL&&fe>=iL,ne=Ee?w(Q?o.value+1:o.value-1):w();d=!1,a.value=!1,g=void 0,y=void 0,s.value=ne*-n.value;var X=o.value;o.value=E(ne),R(),X!==o.value&&ye(ee,o.value)}},J=()=>{a.value=!0,n.value=t.vertical?e.value.offsetHeight:e.value.offsetWidth,r.value=n.value*c.value,s.value=o.value*-n.value,l.forEach(z=>{z.setTranslate(0)}),R(),setTimeout(()=>{a.value=!1})},V=()=>{if(!(c.value<=1)){var{loop:z,onChange:ee}=t,Q=o.value;o.value=T(Q+1),ye(ee,o.value),I(()=>{if(Q===c.value-1&&z){S(0).setTranslate(r.value),s.value=c.value*-n.value;return}Q!==c.value-1&&(s.value=o.value*-n.value)})}},re=()=>{if(!(c.value<=1)){var{loop:z,onChange:ee}=t,Q=o.value;o.value=T(Q-1),ye(ee,o.value),I(()=>{if(Q===0&&z){S(c.value-1).setTranslate(-r.value),s.value=n.value;return}Q!==0&&(s.value=o.value*-n.value)})}},j=z=>{if(!(c.value<=1||z===o.value)){z=z<0?0:z,z=z>=c.value?c.value:z;var ee=z>o.value?V:re;Array.from({length:Math.abs(z-o.value)}).forEach(ee)}},Z={size:n,vertical:i};return u(Z),Ke(()=>c.value,tL(function*(){yield Mr(),_(),J()})),fn(()=>{window.addEventListener("resize",J)}),Cr(()=>{window.removeEventListener("resize",J),L()}),{n:rL,classes:sL,length:c,index:o,swipeEl:e,trackSize:r,translate:s,lockDuration:a,handleTouchstart:F,handleTouchmove:G,handleTouchend:H,next:V,prev:re,to:j,resize:J,toNumber:Te}}});Ds.install=function(t){t.component(Ds.name,Ds)};function lL(){var{bindParent:t,parentProvider:e}=Gi(L1),{index:n}=lr(I1);if(!t||!e||!n)throw Error("<var-swipe-item/> must in <var-swipe/>");return{index:n,swipe:e,bindSwipe:t}}var{n:uL}=Qe("swipe-item");function cL(t,e){return ie(),he("div",{class:$(t.n()),style:Be({width:t.vertical?void 0:t.size+"px",height:t.vertical?t.size+"px":void 0,transform:"translate"+(t.vertical?"Y":"X")+"("+t.translate+"px)"})},[Ue(t.$slots,"default")],6)}var Ns=tt({render:cL,name:"VarSwipeItem",setup(){var t=de(0),{swipe:e,bindSwipe:n,index:i}=lL(),{size:r,vertical:s}=e,a=l=>{t.value=l},o={index:i,setTranslate:a};return n(o),{n:uL,size:r,vertical:s,translate:t}}});Ns.install=function(t){t.component(Ns.name,Ns)};function Dm(){return Dm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Dm.apply(this,arguments)}var dL=Dm({show:{type:Boolean,default:!1},images:{type:Array,default:()=>[]},current:{type:String},zoom:{type:[String,Number],default:2},closeable:{type:Boolean,default:!1},"onUpdate:show":{type:Function}},ui(O1,["loop","indicator","onChange"]),ui(zc,["lockScroll","teleport","onOpen","onClose","onOpened","onClosed","onRouteChange"])),{n:hL,classes:fL}=Qe("image-preview"),by=12,wy=200,pL=350,_y=200,mL=["src","alt"];function vL(t,e){var n=Je("var-swipe-item"),i=Je("var-swipe"),r=Je("var-icon"),s=Je("var-popup");return ie(),Mt(s,{class:$(t.n("popup")),"var-image-preview-cover":"",transition:"var-fade",show:t.popupShow,overlay:!1,"close-on-click-overlay":!1,"lock-scroll":t.lockScroll,teleport:t.teleport,onOpen:t.onOpen,onClose:t.onClose,onClosed:t.onClosed,onOpened:t.onOpened,onRouteChange:t.onRouteChange},{default:pt(()=>[We(i,ln({class:t.n("swipe"),"var-image-preview-cover":"",touchable:t.canSwipe,indicator:t.indicator&&t.images.length>1,"initial-index":t.initialIndex,loop:t.loop,onChange:t.onChange},t.$attrs),{default:pt(()=>[(ie(!0),he(At,null,bn(t.images,a=>(ie(),Mt(n,{class:$(t.n("swipe-item")),"var-image-preview-cover":"",key:a},{default:pt(()=>[Me("div",{class:$(t.n("zoom-container")),style:Be({transform:"scale("+t.scale+") translate("+t.translateX+"px, "+t.translateY+"px)",transitionTimingFunction:t.transitionTimingFunction,transitionDuration:t.transitionDuration}),onTouchstart:e[0]||(e[0]=function(){return t.handleTouchstart&&t.handleTouchstart(...arguments)}),onTouchmove:e[1]||(e[1]=function(){return t.handleTouchmove&&t.handleTouchmove(...arguments)}),onTouchend:e[2]||(e[2]=function(){return t.handleTouchend&&t.handleTouchend(...arguments)})},[Me("img",{class:$(t.n("image")),src:a,alt:a},null,10,mL)],38)]),_:2},1032,["class"]))),128))]),indicator:pt(a=>{var{index:o,length:l}=a;return[Ue(t.$slots,"indicator",{index:o,length:l},()=>[t.indicator&&t.images.length>1?(ie(),he("div",{key:0,class:$(t.n("indicators"))},je(o+1)+" / "+je(l),3)):qe("v-if",!0)])]}),_:3},16,["class","touchable","indicator","initial-index","loop","onChange"]),Ue(t.$slots,"close-icon",{},()=>[t.closeable?(ie(),Mt(r,{key:0,class:$(t.n("close-icon")),name:"close-circle","var-image-preview-cover":"",onClick:t.close},null,8,["class","onClick"])):qe("v-if",!0)]),Me("div",{class:$(t.n("extra"))},[Ue(t.$slots,"extra")],2)]),_:3},8,["class","show","lock-scroll","teleport","onOpen","onClose","onClosed","onOpened","onRouteChange"])}var Ha=tt({render:vL,name:"VarImagePreview",components:{VarSwipe:Ds,VarSwipeItem:Ns,VarPopup:rr,VarIcon:Kt},inheritAttrs:!1,props:dL,setup(t){var e=de(!1),n=Le(()=>{var{images:L,current:k}=t,F=L.findIndex(G=>G===k);return F>=0?F:0}),i=de(1),r=de(0),s=de(0),a=de(void 0),o=de(void 0),l=de(!0),u=null,c=null,d=null,h=(L,k)=>{var{clientX:F,clientY:G}=L,{clientX:H,clientY:J}=k;return Math.abs(Math.sqrt(Math.pow(H-F,2)+Math.pow(J-G,2)))},f=(L,k)=>({clientX:L.clientX,clientY:L.clientY,timestamp:Date.now(),target:k}),m=()=>{i.value=Te(t.zoom),l.value=!1,c=null,window.setTimeout(()=>{a.value="linear",o.value="0s"},_y)},v=()=>{i.value=1,r.value=0,s.value=0,l.value=!0,c=null,a.value=void 0,o.value=void 0},g=L=>c?h(c,L)<=by&&L.timestamp-c.timestamp<=wy&&c.target===L.target:!1,y=L=>!L||!u||!c?!1:h(u,c)<=by&&Date.now()-c.timestamp<pL&&(L===u.target||L.parentNode===u.target),S=L=>{d=window.setTimeout(()=>{y(L.target)&&R(),u=null},wy)},b=L=>{d&&window.clearTimeout(d);var{touches:k}=L,F=f(k[0],L.currentTarget);if(u=F,g(F)){i.value>1?v():m();return}c=F},w=L=>{var{offsetWidth:k,offsetHeight:F}=L,{naturalWidth:G,naturalHeight:H}=L.querySelector(".var-image-preview__image");return{width:k,height:F,imageRadio:H/G,rootRadio:F/k,zoom:Te(t.zoom)}},E=L=>{var{zoom:k,imageRadio:F,rootRadio:G,width:H,height:J}=w(L);if(!F)return 0;var V=F>G?J/F:H;return Math.max(0,(k*V-H)/2)/k},T=L=>{var{zoom:k,imageRadio:F,rootRadio:G,width:H,height:J}=w(L);if(!F)return 0;var V=F>G?J:H*F;return Math.max(0,(k*V-J)/2)/k},I=(L,k,F)=>L+k>=F?F:L+k<=-F?-F:L+k,_=L=>{if(!!c){var k=L.currentTarget,{touches:F}=L,G=f(F[0],k);if(i.value>1){var H=G.clientX-c.clientX,J=G.clientY-c.clientY,V=E(k),re=T(k);r.value=I(r.value,H,V),s.value=I(s.value,J,re)}c=G}},R=()=>{if(i.value>1){v(),setTimeout(()=>ye(t["onUpdate:show"],!1),_y);return}ye(t["onUpdate:show"],!1)};return Ke(()=>t.show,L=>{e.value=L},{immediate:!0}),{n:hL,classes:fL,initialIndex:n,popupShow:e,scale:i,translateX:r,translateY:s,canSwipe:l,transitionTimingFunction:a,transitionDuration:o,handleTouchstart:b,handleTouchmove:_,handleTouchend:S,close:R}}}),Ts;function Ws(t){if(!!ig()){Ws.close();var e=pi(t)?{images:[t]}:qt(t)?{images:t}:t,n=tn(e);n.teleport="body",Ts=n;var{unmountInstance:i}=Bc(Ha,n,{onClose:()=>n.onClose==null?void 0:n.onClose(),onClosed:()=>{n.onClosed==null||n.onClosed(),i(),Ts===n&&(Ts=null)},onRouteChange:()=>{i(),Ts===n&&(Ts=null)},"onUpdate:show":r=>{n.show=r}});n.show=!0}}Ws.close=()=>{if(Ts!=null){var t=Ts;Ts=null,rn().then(()=>{t.show=!1})}};Ha.install=function(t){t.component(Ha.name,Ha)};Ws.install=function(t){t.component(Ha.name,Ha)};Ws.Component=Ha;var D1={offsetTop:{type:[String,Number],default:0},zIndex:{type:[String,Number],default:10},cssMode:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},onScroll:{type:Function}};function Sy(t,e,n,i,r,s,a){try{var o=t[s](a),l=o.value}catch(u){n(u);return}o.done?e(l):Promise.resolve(l).then(i,r)}function gL(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function a(l){Sy(s,i,r,a,o,"next",l)}function o(l){Sy(s,i,r,a,o,"throw",l)}a(void 0)})}}var{n:yL,classes:bL}=Qe("sticky");function wL(t,e){return ie(),he("div",{class:$(t.classes(t.n(),[t.enableCSSMode,t.n("--css-mode")])),ref:"stickyEl",style:Be({zIndex:t.toNumber(t.zIndex),top:t.enableCSSMode?t.offsetTop+"px":void 0,width:t.enableFixedMode?t.fixedWidth:void 0,height:t.enableFixedMode?t.fixedHeight:void 0})},[Me("div",{class:$(t.n("wrapper")),ref:"wrapperEl",style:Be({zIndex:t.toNumber(t.zIndex),position:t.enableFixedMode?"fixed":void 0,width:t.enableFixedMode?t.fixedWrapperWidth:void 0,height:t.enableFixedMode?t.fixedWrapperHeight:void 0,left:t.enableFixedMode?t.fixedLeft:void 0,top:t.enableFixedMode?t.fixedTop:void 0})},[Ue(t.$slots,"default")],6)],6)}var ks=tt({render:wL,name:"VarSticky",props:D1,setup(t){var e=de(null),n=de(null),i=de(!1),r=de("0px"),s=de("0px"),a=de("auto"),o=de("auto"),l=de("auto"),u=de("auto"),c=Le(()=>!t.disabled&&t.cssMode),d=Le(()=>!t.disabled&&i.value),h=Le(()=>yn(t.offsetTop)),f,m=()=>{var{onScroll:y,cssMode:S,disabled:b}=t;if(!b){var w=0;if(f!==window){var{top:E}=f.getBoundingClientRect();w=E}var T=n.value,I=e.value,{top:_,left:R}=I.getBoundingClientRect(),L=_-w;L<=h.value?(S||(a.value=I.offsetWidth+"px",o.value=I.offsetHeight+"px",r.value=w+h.value+"px",s.value=R+"px",l.value=T.offsetWidth+"px",u.value=T.offsetHeight+"px",i.value=!0),ye(y,h.value,!0)):(i.value=!1,ye(y,L,!1))}},v=function(){var y=gL(function*(){yield Mr(),f=cu(e.value),f!==window&&f.addEventListener("scroll",m),window.addEventListener("scroll",m),m()});return function(){return y.apply(this,arguments)}}(),g=()=>{f!==window&&f.removeEventListener("scroll",m),window.removeEventListener("scroll",m)};return Ke(()=>t.disabled,m),ef(v),tf(g),fn(v),Cr(g),{n:yL,classes:bL,stickyEl:e,wrapperEl:n,isFixed:i,offsetTop:h,fixedTop:r,fixedLeft:s,fixedWidth:a,fixedHeight:o,fixedWrapperWidth:l,fixedWrapperHeight:u,enableCSSMode:c,enableFixedMode:d,toNumber:Te}}});ks.install=function(t){t.component(ks.name,ks)};var N1=Symbol("INDEX_BAR_BIND_INDEX_ANCHOR_KEY"),k1=Symbol("INDEX_BAR_COUNT_INDEX_ANCHOR_KEY");function _L(){var{bindChildren:t,childProviders:e}=Hi(N1),{length:n}=or(k1);return{length:n,indexAnchors:e,bindIndexAnchors:t}}function SL(){var{parentProvider:t,bindParent:e}=Gi(N1),{index:n}=lr(k1);if(!t||!e)throw Error('[Varlet] IndexAnchor: You should use this component in "IndexBar"');return{index:n,indexBar:t,bindIndexBar:e}}var ML={index:{type:[Number,String]}},{n:TL,classes:EL}=Qe("index-anchor");function xL(t,e){return ie(),Mt(rf(t.sticky?"var-sticky":t.Transition),{"offset-top":t.sticky?t.stickyOffsetTop:null,"z-index":t.sticky?t.zIndex:null,disabled:t.disabled&&!t.cssMode,"css-mode":t.cssMode,ref:"anchorEl"},{default:pt(()=>[Me("div",ln({class:t.n()},t.$attrs),[Ue(t.$slots,"default",{},()=>[Rt(je(t.name),1)])],16)]),_:3},8,["offset-top","z-index","disabled","css-mode"])}var _l=tt({render:xL,name:"VarIndexAnchor",components:{VarSticky:ks},inheritAttrs:!1,props:ML,setup(t){var{index:e,indexBar:n,bindIndexBar:i}=SL(),r=de(0),s=de(!1),a=Le(()=>t.index),o=de(null),{active:l,sticky:u,cssMode:c,stickyOffsetTop:d,zIndex:h}=n,f=()=>{!o.value||(r.value=o.value.$el?o.value.$el.offsetTop:o.value.offsetTop)},m=g=>{s.value=g},v={index:e,name:a,ownTop:r,setOwnTop:f,setDisabled:m};return i(v),{n:TL,classes:EL,name:a,anchorEl:o,active:l,sticky:u,zIndex:h,disabled:s,cssMode:c,stickyOffsetTop:d,Transition:Mn}}});_l.install=function(t){t.component(_l.name,_l)};var CL={sticky:{type:Boolean,default:!0},stickyOffsetTop:{type:[String,Number],default:0},cssMode:{type:Boolean,default:!1},hideList:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:1},highlightColor:{type:String},duration:{type:[Number,String],default:0},onClick:{type:Function},onChange:{type:Function}};function My(t,e,n,i,r,s,a){try{var o=t[s](a),l=o.value}catch(u){n(u);return}o.done?e(l):Promise.resolve(l).then(i,r)}function ap(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function a(l){My(s,i,r,a,o,"next",l)}function o(l){My(s,i,r,a,o,"throw",l)}a(void 0)})}}var{n:AL,classes:RL}=Qe("index-bar"),PL=["onClick"];function LL(t,e){return ie(),he("div",{class:$(t.n()),ref:"barEl"},[Ue(t.$slots,"default"),Me("ul",{class:$(t.n("anchor-list")),style:Be({zIndex:t.toNumber(t.zIndex)+2,display:t.hideList?"none":"block"})},[(ie(!0),he(At,null,bn(t.anchorNameList,n=>(ie(),he("li",{key:n,class:$(t.classes(t.n("anchor-item"),[t.active===n,t.n("anchor-item--active")])),style:Be({color:t.active===n&&t.highlightColor?t.highlightColor:""}),onClick:i=>t.anchorClick(n,!0)},je(n),15,PL))),128))],6)],2)}var Sl=tt({render:LL,name:"VarIndexBar",props:CL,setup(t){var{length:e,indexAnchors:n,bindIndexAnchors:i}=_L(),r=de(""),s=de(null),a=de(null),o=de([]),l=de(),u=Le(()=>t.sticky),c=Le(()=>t.cssMode),d=Le(()=>yn(t.stickyOffsetTop)),h=Le(()=>t.zIndex),f={active:l,sticky:u,cssMode:c,stickyOffsetTop:d,zIndex:h};i(f);var m=S=>{var b=tg(S)?S.name.value:S;b===l.value||b===void 0||(l.value=b,ye(t.onChange,b))},v=()=>{var S=df(s.value),b=s.value===window?document.body.scrollHeight:s.value.scrollHeight,{offsetTop:w}=a.value;n.forEach((E,T)=>{var I=E.ownTop.value,_=S-I+d.value-w,R=T===n.length-1?b:n[T+1].ownTop.value-E.ownTop.value;_>=0&&_<R&&!r.value&&(T&&!t.cssMode&&n[T-1].setDisabled(!0),E.setDisabled(!1),m(E))})},g=function(){var S=ap(function*(b,w){var{offsetTop:E}=a.value;if(w&&ye(t.onClick,b),b!==l.value){var T=n.find(R=>{var{name:L}=R;return b===L.value});if(!!T){var I=T.ownTop.value-d.value+E,_=rg(s.value);r.value=b,m(b),yield Rh(s.value,{left:_,top:I,animation:k_,duration:Te(t.duration)}),hf(()=>{r.value=""})}}});return function(w,E){return S.apply(this,arguments)}}(),y=S=>{Sr(()=>g(S))};return Ke(()=>e.value,ap(function*(){yield Mr(),n.forEach(S=>{var{name:b,setOwnTop:w}=S;b.value&&o.value.push(b.value),w()})})),fn(ap(function*(){yield Mr(),s.value=cu(a.value),s.value.addEventListener("scroll",v)})),kc(()=>{ye(s.value.removeEventListener,"scroll",v)}),{n:AL,classes:RL,barEl:a,active:l,zIndex:h,anchorNameList:o,toNumber:Te,scrollTo:y,anchorClick:g}}});Sl.install=function(t){t.component(Sl.name,Sl)};function IL(t){return["text","password","number"].includes(t)}var OL={modelValue:{type:String},modelModifiers:{type:Object,default:()=>({})},type:{type:String,default:"text",validator:IL},textarea:{type:Boolean,default:!1},rows:{type:[String,Number],default:8},placeholder:{type:String},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},maxlength:{type:[String,Number]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},validateTrigger:{type:Array,default:()=>["onInput","onClear"]},rules:{type:Array},onFocus:{type:Function},onBlur:{type:Function},onClick:{type:Function},onClear:{type:Function},onInput:{type:Function},onChange:{type:Function},"onUpdate:modelValue":{type:Function}},{n:op,classes:DL}=Qe("input"),NL=["id","disabled","type","value","maxlength","rows"],kL=["id","disabled","type","value","maxlength"],FL=["for"];function UL(t,e){var n=Je("var-icon"),i=Je("var-form-details");return ie(),he("div",{class:$(t.classes(t.n(),"var--box",[t.disabled,t.n("--disabled")])),onClick:e[10]||(e[10]=function(){return t.handleClick&&t.handleClick(...arguments)})},[Me("div",{class:$(t.classes(t.n("controller"),[t.isFocus,t.n("--focus")],[t.errorMessage,t.n("--error")],[t.formDisabled||t.disabled,t.n("--disabled")])),style:Be({color:t.errorMessage?void 0:t.isFocus?t.focusColor:t.blurColor})},[Me("div",{class:$(t.classes(t.n("icon"),[!t.hint,t.n("--non-hint")]))},[Ue(t.$slots,"prepend-icon")],2),Me("div",{class:$(t.classes(t.n("wrap"),[!t.hint,t.n("--non-hint")]))},[t.type==="password"?(ie(),he("input",{key:0,class:$(t.n("autocomplete"))},null,2)):qe("v-if",!0),t.textarea?(ie(),he("textarea",{key:1,class:$(t.classes(t.n("input"),t.n("--textarea"),[t.formDisabled||t.disabled,t.n("--disabled")],[t.errorMessage,t.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:t.id,disabled:t.formDisabled||t.disabled||t.formReadonly||t.readonly,type:t.type,value:t.modelValue,maxlength:t.maxlength,rows:t.rows,style:Be({color:t.textColor,caretColor:t.errorMessage?void 0:t.focusColor,resize:t.resize?"vertical":"none"}),onFocus:e[0]||(e[0]=function(){return t.handleFocus&&t.handleFocus(...arguments)}),onBlur:e[1]||(e[1]=function(){return t.handleBlur&&t.handleBlur(...arguments)}),onInput:e[2]||(e[2]=function(){return t.handleInput&&t.handleInput(...arguments)}),onChange:e[3]||(e[3]=function(){return t.handleChange&&t.handleChange(...arguments)}),onTouchstart:e[4]||(e[4]=function(){return t.handleTouchstart&&t.handleTouchstart(...arguments)})},`
        `,46,NL)):(ie(),he("input",{key:2,class:$(t.classes(t.n("input"),[t.formDisabled||t.disabled,t.n("--disabled")],[t.errorMessage,t.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:t.id,disabled:t.formDisabled||t.disabled||t.formReadonly||t.readonly,type:t.type,value:t.modelValue,maxlength:t.maxlength,style:Be({color:t.textColor,caretColor:t.errorMessage?void 0:t.focusColor}),onFocus:e[5]||(e[5]=function(){return t.handleFocus&&t.handleFocus(...arguments)}),onBlur:e[6]||(e[6]=function(){return t.handleBlur&&t.handleBlur(...arguments)}),onInput:e[7]||(e[7]=function(){return t.handleInput&&t.handleInput(...arguments)}),onChange:e[8]||(e[8]=function(){return t.handleChange&&t.handleChange(...arguments)}),onTouchstart:e[9]||(e[9]=function(){return t.handleTouchstart&&t.handleTouchstart(...arguments)})},null,46,kL)),Me("label",{class:$(t.classes("var--ellipsis",[t.isFocus,t.n("--focus")],[t.formDisabled||t.disabled,t.n("--disabled")],[t.errorMessage,t.n("--error")],[t.textarea,t.n("textarea-placeholder"),t.n("placeholder")],t.computePlaceholderState(),[!t.hint,t.n("--placeholder-non-hint")])),style:Be({color:t.errorMessage?void 0:t.isFocus?t.focusColor:t.blurColor}),for:t.id},je(t.placeholder),15,FL)],2),Me("div",{class:$(t.classes(t.n("icon"),[!t.hint,t.n("--non-hint")]))},[Ue(t.$slots,"append-icon",{},()=>[t.clearable&&!t.isEmpty(t.modelValue)?(ie(),Mt(n,{key:0,class:$(t.n("clear-icon")),"var-input-cover":"",name:"close-circle",size:"14px",onClick:t.handleClear},null,8,["class","onClick"])):qe("v-if",!0)])],2)],6),t.line?(ie(),he("div",{key:0,class:$(t.classes(t.n("line"),[t.formDisabled||t.disabled,t.n("--line-disabled")],[t.errorMessage,t.n("--line-error")])),style:Be({background:t.errorMessage?void 0:t.blurColor})},[Me("div",{class:$(t.classes(t.n("dot"),[t.isFocus,t.n("--spread")],[t.formDisabled||t.disabled,t.n("--line-disabled")],[t.errorMessage,t.n("--line-error")])),style:Be({background:t.errorMessage?void 0:t.focusColor})},null,6)],6)):qe("v-if",!0),We(i,{"error-message":t.errorMessage,"extra-message":t.maxlengthText},null,8,["error-message","extra-message"])],2)}var Ga=tt({render:UL,name:"VarInput",components:{VarIcon:Kt,VarFormDetails:Wn},props:OL,setup(t){var e=de("var-input-"+co().uid),n=de(null),i=de(!1),r=Le(()=>{var{maxlength:L,modelValue:k}=t;return L?Es(k)?"0 / "+L:String(k).length+"/"+L:""}),{bindForm:s,form:a}=$i(),{errorMessage:o,validateWithTrigger:l,validate:u,resetValidation:c}=Wi(),d=L=>{rn(()=>{var{validateTrigger:k,rules:F,modelValue:G}=t;l(k,L,F,G)})},h=()=>{var{hint:L,modelValue:k}=t;if(!L&&!Es(k))return op("--placeholder-hidden");if(L&&(!Es(k)||i.value))return op("--placeholder-hint")},f=L=>{i.value=!0,ye(t.onFocus,L),d("onFocus")},m=L=>{i.value=!1,ye(t.onBlur,L),d("onBlur")},v=L=>{var{value:k}=L.target;k=b(k),ye(t["onUpdate:modelValue"],k),ye(t.onInput,k,L),d("onInput")},g=L=>{var{value:k}=L.target;ye(t.onChange,b(k),L),d("onChange")},y=()=>{var{disabled:L,readonly:k,clearable:F,onClear:G}=t;a!=null&&a.disabled.value||a!=null&&a.readonly.value||L||k||!F||(ye(t["onUpdate:modelValue"],""),ye(G,""),d("onClear"))},S=L=>{var{disabled:k,onClick:F}=t;a!=null&&a.disabled.value||k||(ye(F,L),d("onClick"))},b=L=>t.modelModifiers.trim?L.trim():L,w=L=>{var{disabled:k,readonly:F}=t;a!=null&&a.disabled.value||a!=null&&a.readonly.value||k||F||L.stopPropagation()},E=()=>{ye(t["onUpdate:modelValue"],""),c()},T=()=>u(t.rules,t.modelValue),I=()=>{var L;(L=n.value)==null||L.focus()},_=()=>{n.value.blur()},R={reset:E,validate:T,resetValidation:c};return ye(s,R),fn(()=>{t.autofocus&&I()}),{el:n,id:e,isFocus:i,errorMessage:o,maxlengthText:r,formDisabled:a==null?void 0:a.disabled,formReadonly:a==null?void 0:a.readonly,n:op,classes:DL,isEmpty:Es,computePlaceholderState:h,handleFocus:f,handleBlur:m,handleInput:v,handleChange:g,handleClear:y,handleClick:S,handleTouchstart:w,validate:T,resetValidation:c,reset:E,focus:I,blur:_}}});Ga.install=function(t){t.component(Ga.name,Ga)};var BL={loading:{type:Boolean,default:!1},immediateCheck:{type:Boolean,default:!0},finished:{type:Boolean,default:!1},error:{type:Boolean,default:!1},offset:{type:[String,Number],default:0},loadingText:{type:String},finishedText:{type:String},errorText:{type:String},onLoad:{type:Function},"onUpdate:loading":{type:Function},"onUpdate:error":{type:Function}};function Ty(t,e,n,i,r,s,a){try{var o=t[s](a),l=o.value}catch(u){n(u);return}o.done?e(l):Promise.resolve(l).then(i,r)}function zL(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function a(l){Ty(s,i,r,a,o,"next",l)}function o(l){Ty(s,i,r,a,o,"throw",l)}a(void 0)})}}var{n:VL,classes:HL}=Qe("list");function GL(t,e){var n=Je("var-loading"),i=jn("ripple");return ie(),he("div",{class:$(t.classes(t.n(),"var--box")),ref:"listEl"},[Ue(t.$slots,"default"),t.loading?Ue(t.$slots,"loading",{key:0},()=>[Me("div",{class:$(t.n("loading"))},[Me("div",{class:$(t.n("loading-text"))},je(t.dt(t.loadingText,t.pack.listLoadingText)),3),We(n,{size:"mini",radius:10})],2)]):qe("v-if",!0),t.finished?Ue(t.$slots,"finished",{key:1},()=>[Me("div",{class:$(t.n("finished"))},je(t.dt(t.finishedText,t.pack.listFinishedText)),3)]):qe("v-if",!0),t.error?Ue(t.$slots,"error",{key:2},()=>[Zt((ie(),he("div",{class:$(t.n("error")),onClick:e[0]||(e[0]=function(){return t.load&&t.load(...arguments)})},[Rt(je(t.dt(t.errorText,t.pack.listErrorText)),1)],2)),[[i]])]):qe("v-if",!0),Me("div",{class:$(t.n("detector")),ref:"detectorEl"},null,2)],2)}var Ml=tt({render:GL,name:"VarList",directives:{Ripple:kn},components:{VarLoading:yr},props:BL,setup(t){var e=de(null),n=de(null),i,r=()=>{ye(t["onUpdate:error"],!1),ye(t["onUpdate:loading"],!0),ye(t.onLoad)},s=()=>{var o=i===window?window.innerHeight:i.getBoundingClientRect().bottom,{bottom:l}=n.value.getBoundingClientRect();return Math.floor(l)-yn(t.offset)<=o},a=function(){var o=zL(function*(){yield rn();var{loading:l,finished:u,error:c}=t;!l&&!u&&!c&&s()&&r()});return function(){return o.apply(this,arguments)}}();return fn(()=>{i=cu(e.value),t.immediateCheck&&a(),i.addEventListener("scroll",a)}),Cr(()=>{i.removeEventListener("scroll",a)}),{pack:Un,listEl:e,detectorEl:n,dt:cf,isNumber:Zn,load:r,check:a,n:VL,classes:HL}}});Ml.install=function(t){t.component(Ml.name,Ml)};var WL={left:"right",right:"left",bottom:"top",top:"bottom"};function vh(t){return t.replace(/left|right|bottom|top/g,function(e){return WL[e]})}var $r="top",$s="bottom",eo="right",Fs="left",hg="auto",_f=[$r,$s,eo,Fs],Sf="start",hc="end",$L="clippingParents",F1="viewport",Cu="popper",XL="reference",Ey=_f.reduce(function(t,e){return t.concat([e+"-"+Sf,e+"-"+hc])},[]),U1=[].concat(_f,[hg]).reduce(function(t,e){return t.concat([e,e+"-"+Sf,e+"-"+hc])},[]),YL="beforeRead",qL="read",ZL="afterRead",jL="beforeMain",KL="main",JL="afterMain",QL="beforeWrite",eI="write",tI="afterWrite",nI=[YL,qL,ZL,jL,KL,JL,QL,eI,tI];function Us(t){return t.split("-")[0]}var iI={start:"end",end:"start"};function xy(t){return t.replace(/start|end/g,function(e){return iI[e]})}function Xi(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function to(t){var e=Xi(t).Element;return t instanceof e||t instanceof Element}function Bi(t){var e=Xi(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function fg(t){if(typeof ShadowRoot=="undefined")return!1;var e=Xi(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Js(t){return((to(t)?t.ownerDocument:t.document)||window.document).documentElement}var Zu=Math.max,Cy=Math.min,eu=Math.round;function Nm(){var t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function B1(){return!/^((?!chrome|android).)*safari/i.test(Nm())}function tu(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),r=1,s=1;e&&Bi(t)&&(r=t.offsetWidth>0&&eu(i.width)/t.offsetWidth||1,s=t.offsetHeight>0&&eu(i.height)/t.offsetHeight||1);var a=to(t)?Xi(t):window,o=a.visualViewport,l=!B1()&&n,u=(i.left+(l&&o?o.offsetLeft:0))/r,c=(i.top+(l&&o?o.offsetTop:0))/s,d=i.width/r,h=i.height/s;return{width:d,height:h,top:c,right:u+d,bottom:c+h,left:u,x:u,y:c}}function pg(t){var e=Xi(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function mg(t){return tu(Js(t)).left+pg(t).scrollLeft}function rI(t,e){var n=Xi(t),i=Js(t),r=n.visualViewport,s=i.clientWidth,a=i.clientHeight,o=0,l=0;if(r){s=r.width,a=r.height;var u=B1();(u||!u&&e==="fixed")&&(o=r.offsetLeft,l=r.offsetTop)}return{width:s,height:a,x:o+mg(t),y:l}}function Zr(t){return Xi(t).getComputedStyle(t)}function sI(t){var e,n=Js(t),i=pg(t),r=(e=t.ownerDocument)==null?void 0:e.body,s=Zu(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=Zu(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),o=-i.scrollLeft+mg(t),l=-i.scrollTop;return Zr(r||n).direction==="rtl"&&(o+=Zu(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:a,x:o,y:l}}function Er(t){return t?(t.nodeName||"").toLowerCase():null}function Mf(t){return Er(t)==="html"?t:t.assignedSlot||t.parentNode||(fg(t)?t.host:null)||Js(t)}function vg(t){var e=Zr(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function z1(t){return["html","body","#document"].indexOf(Er(t))>=0?t.ownerDocument.body:Bi(t)&&vg(t)?t:z1(Mf(t))}function ju(t,e){var n;e===void 0&&(e=[]);var i=z1(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),s=Xi(i),a=r?[s].concat(s.visualViewport||[],vg(i)?i:[]):i,o=e.concat(a);return r?o:o.concat(ju(Mf(a)))}function aI(t){return["table","td","th"].indexOf(Er(t))>=0}function Ay(t){return!Bi(t)||Zr(t).position==="fixed"?null:t.offsetParent}function oI(t){var e=/firefox/i.test(Nm()),n=/Trident/i.test(Nm());if(n&&Bi(t)){var i=Zr(t);if(i.position==="fixed")return null}var r=Mf(t);for(fg(r)&&(r=r.host);Bi(r)&&["html","body"].indexOf(Er(r))<0;){var s=Zr(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function gg(t){for(var e=Xi(t),n=Ay(t);n&&aI(n)&&Zr(n).position==="static";)n=Ay(n);return n&&(Er(n)==="html"||Er(n)==="body"&&Zr(n).position==="static")?e:n||oI(t)||e}function lI(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&fg(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function km(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function uI(t,e){var n=tu(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Ry(t,e,n){return e===F1?km(rI(t,n)):to(e)?uI(e,n):km(sI(Js(t)))}function cI(t){var e=ju(Mf(t)),n=["absolute","fixed"].indexOf(Zr(t).position)>=0,i=n&&Bi(t)?gg(t):t;return to(i)?e.filter(function(r){return to(r)&&lI(r,i)&&Er(r)!=="body"}):[]}function dI(t,e,n,i){var r=e==="clippingParents"?cI(t):[].concat(e),s=[].concat(r,[n]),a=s[0],o=s.reduce(function(l,u){var c=Ry(t,u,i);return l.top=Zu(c.top,l.top),l.right=Cy(c.right,l.right),l.bottom=Cy(c.bottom,l.bottom),l.left=Zu(c.left,l.left),l},Ry(t,a,i));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function fc(t){return t.split("-")[1]}function hI(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function V1(t){var e=t.reference,n=t.element,i=t.placement,r=i?Us(i):null,s=i?fc(i):null,a=e.x+e.width/2-n.width/2,o=e.y+e.height/2-n.height/2,l;switch(r){case $r:l={x:a,y:e.y-n.height};break;case $s:l={x:a,y:e.y+e.height};break;case eo:l={x:e.x+e.width,y:o};break;case Fs:l={x:e.x-n.width,y:o};break;default:l={x:e.x,y:e.y}}var u=r?hI(r):null;if(u!=null){var c=u==="y"?"height":"width";switch(s){case Sf:l[u]=l[u]-(e[c]/2-n[c]/2);break;case hc:l[u]=l[u]+(e[c]/2-n[c]/2);break}}return l}function fI(){return{top:0,right:0,bottom:0,left:0}}function pI(t){return Object.assign({},fI(),t)}function mI(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}function H1(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,s=n.strategy,a=s===void 0?t.strategy:s,o=n.boundary,l=o===void 0?$L:o,u=n.rootBoundary,c=u===void 0?F1:u,d=n.elementContext,h=d===void 0?Cu:d,f=n.altBoundary,m=f===void 0?!1:f,v=n.padding,g=v===void 0?0:v,y=pI(typeof g!="number"?g:mI(g,_f)),S=h===Cu?XL:Cu,b=t.rects.popper,w=t.elements[m?S:h],E=dI(to(w)?w:w.contextElement||Js(t.elements.popper),l,c,a),T=tu(t.elements.reference),I=V1({reference:T,element:b,strategy:"absolute",placement:r}),_=km(Object.assign({},b,I)),R=h===Cu?_:T,L={top:E.top-R.top+y.top,bottom:R.bottom-E.bottom+y.bottom,left:E.left-R.left+y.left,right:R.right-E.right+y.right},k=t.modifiersData.offset;if(h===Cu&&k){var F=k[r];Object.keys(L).forEach(function(G){var H=[eo,$s].indexOf(G)>=0?1:-1,J=[$r,$s].indexOf(G)>=0?"y":"x";L[G]+=F[J]*H})}return L}function vI(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,s=n.rootBoundary,a=n.padding,o=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?U1:l,c=fc(i),d=c?o?Ey:Ey.filter(function(m){return fc(m)===c}):_f,h=d.filter(function(m){return u.indexOf(m)>=0});h.length===0&&(h=d);var f=h.reduce(function(m,v){return m[v]=H1(t,{placement:v,boundary:r,rootBoundary:s,padding:a})[Us(v)],m},{});return Object.keys(f).sort(function(m,v){return f[m]-f[v]})}function gI(t){if(Us(t)===hg)return[];var e=vh(t);return[xy(t),e,xy(e)]}function yI(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,s=r===void 0?!0:r,a=n.altAxis,o=a===void 0?!0:a,l=n.fallbackPlacements,u=n.padding,c=n.boundary,d=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,m=f===void 0?!0:f,v=n.allowedAutoPlacements,g=e.options.placement,y=Us(g),S=y===g,b=l||(S||!m?[vh(g)]:gI(g)),w=[g].concat(b).reduce(function(Ee,ne){return Ee.concat(Us(ne)===hg?vI(e,{placement:ne,boundary:c,rootBoundary:d,padding:u,flipVariations:m,allowedAutoPlacements:v}):ne)},[]),E=e.rects.reference,T=e.rects.popper,I=new Map,_=!0,R=w[0],L=0;L<w.length;L++){var k=w[L],F=Us(k),G=fc(k)===Sf,H=[$r,$s].indexOf(F)>=0,J=H?"width":"height",V=H1(e,{placement:k,boundary:c,rootBoundary:d,altBoundary:h,padding:u}),re=H?G?eo:Fs:G?$s:$r;E[J]>T[J]&&(re=vh(re));var j=vh(re),Z=[];if(s&&Z.push(V[F]<=0),o&&Z.push(V[re]<=0,V[j]<=0),Z.every(function(Ee){return Ee})){R=k,_=!1;break}I.set(k,Z)}if(_)for(var z=m?3:1,ee=function(ne){var X=w.find(function(_e){var Ae=I.get(_e);if(Ae)return Ae.slice(0,ne).every(function(ze){return ze})});if(X)return R=X,"break"},Q=z;Q>0;Q--){var fe=ee(Q);if(fe==="break")break}e.placement!==R&&(e.modifiersData[i]._skip=!0,e.placement=R,e.reset=!0)}}var bI={name:"flip",enabled:!0,phase:"main",fn:yI,requiresIfExists:["offset"],data:{_skip:!1}};function wI(t,e,n){var i=Us(t),r=[Fs,$r].indexOf(i)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,a=s[0],o=s[1];return a=a||0,o=(o||0)*r,[Fs,eo].indexOf(i)>=0?{x:o,y:a}:{x:a,y:o}}function _I(t){var e=t.state,n=t.options,i=t.name,r=n.offset,s=r===void 0?[0,0]:r,a=U1.reduce(function(c,d){return c[d]=wI(d,e.rects,s),c},{}),o=a[e.placement],l=o.x,u=o.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[i]=a}var SI={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:_I};function MI(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function TI(t){return t===Xi(t)||!Bi(t)?pg(t):MI(t)}function EI(t){var e=t.getBoundingClientRect(),n=eu(e.width)/t.offsetWidth||1,i=eu(e.height)/t.offsetHeight||1;return n!==1||i!==1}function xI(t,e,n){n===void 0&&(n=!1);var i=Bi(e),r=Bi(e)&&EI(e),s=Js(e),a=tu(t,r,n),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&((Er(e)!=="body"||vg(s))&&(o=TI(e)),Bi(e)?(l=tu(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=mg(s))),{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function CI(t){var e=tu(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function AI(t){var e=new Map,n=new Set,i=[];t.forEach(function(s){e.set(s.name,s)});function r(s){n.add(s.name);var a=[].concat(s.requires||[],s.requiresIfExists||[]);a.forEach(function(o){if(!n.has(o)){var l=e.get(o);l&&r(l)}}),i.push(s)}return t.forEach(function(s){n.has(s.name)||r(s)}),i}function RI(t){var e=AI(t);return nI.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function PI(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function LI(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var Py={placement:"bottom",modifiers:[],strategy:"absolute"};function Ly(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function II(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,s=r===void 0?Py:r;return function(o,l,u){u===void 0&&(u=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},Py,s),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},d=[],h=!1,f={state:c,setOptions:function(y){var S=typeof y=="function"?y(c.options):y;v(),c.options=Object.assign({},s,c.options,S),c.scrollParents={reference:to(o)?ju(o):o.contextElement?ju(o.contextElement):[],popper:ju(l)};var b=RI(LI([].concat(i,c.options.modifiers)));return c.orderedModifiers=b.filter(function(w){return w.enabled}),m(),f.update()},forceUpdate:function(){if(!h){var y=c.elements,S=y.reference,b=y.popper;if(!!Ly(S,b)){c.rects={reference:xI(S,gg(b),c.options.strategy==="fixed"),popper:CI(b)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(L){return c.modifiersData[L.name]=Object.assign({},L.data)});for(var w=0;w<c.orderedModifiers.length;w++){if(c.reset===!0){c.reset=!1,w=-1;continue}var E=c.orderedModifiers[w],T=E.fn,I=E.options,_=I===void 0?{}:I,R=E.name;typeof T=="function"&&(c=T({state:c,options:_,name:R,instance:f})||c)}}}},update:PI(function(){return new Promise(function(g){f.forceUpdate(),g(c)})}),destroy:function(){v(),h=!0}};if(!Ly(o,l))return f;f.setOptions(u).then(function(g){!h&&u.onFirstUpdate&&u.onFirstUpdate(g)});function m(){c.orderedModifiers.forEach(function(g){var y=g.name,S=g.options,b=S===void 0?{}:S,w=g.effect;if(typeof w=="function"){var E=w({state:c,name:y,instance:f,options:b}),T=function(){};d.push(E||T)}})}function v(){d.forEach(function(g){return g()}),d=[]}return f}}var Md={passive:!0};function OI(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,s=r===void 0?!0:r,a=i.resize,o=a===void 0?!0:a,l=Xi(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach(function(c){c.addEventListener("scroll",n.update,Md)}),o&&l.addEventListener("resize",n.update,Md),function(){s&&u.forEach(function(c){c.removeEventListener("scroll",n.update,Md)}),o&&l.removeEventListener("resize",n.update,Md)}}var DI={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:OI,data:{}};function NI(t){var e=t.state,n=t.name;e.modifiersData[n]=V1({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var kI={name:"popperOffsets",enabled:!0,phase:"read",fn:NI,data:{}},FI={top:"auto",right:"auto",bottom:"auto",left:"auto"};function UI(t){var e=t.x,n=t.y,i=window,r=i.devicePixelRatio||1;return{x:eu(e*r)/r||0,y:eu(n*r)/r||0}}function Iy(t){var e,n=t.popper,i=t.popperRect,r=t.placement,s=t.variation,a=t.offsets,o=t.position,l=t.gpuAcceleration,u=t.adaptive,c=t.roundOffsets,d=t.isFixed,h=a.x,f=h===void 0?0:h,m=a.y,v=m===void 0?0:m,g=typeof c=="function"?c({x:f,y:v}):{x:f,y:v};f=g.x,v=g.y;var y=a.hasOwnProperty("x"),S=a.hasOwnProperty("y"),b=Fs,w=$r,E=window;if(u){var T=gg(n),I="clientHeight",_="clientWidth";if(T===Xi(n)&&(T=Js(n),Zr(T).position!=="static"&&o==="absolute"&&(I="scrollHeight",_="scrollWidth")),T=T,r===$r||(r===Fs||r===eo)&&s===hc){w=$s;var R=d&&T===E&&E.visualViewport?E.visualViewport.height:T[I];v-=R-i.height,v*=l?1:-1}if(r===Fs||(r===$r||r===$s)&&s===hc){b=eo;var L=d&&T===E&&E.visualViewport?E.visualViewport.width:T[_];f-=L-i.width,f*=l?1:-1}}var k=Object.assign({position:o},u&&FI),F=c===!0?UI({x:f,y:v}):{x:f,y:v};if(f=F.x,v=F.y,l){var G;return Object.assign({},k,(G={},G[w]=S?"0":"",G[b]=y?"0":"",G.transform=(E.devicePixelRatio||1)<=1?"translate("+f+"px, "+v+"px)":"translate3d("+f+"px, "+v+"px, 0)",G))}return Object.assign({},k,(e={},e[w]=S?v+"px":"",e[b]=y?f+"px":"",e.transform="",e))}function BI(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,s=n.adaptive,a=s===void 0?!0:s,o=n.roundOffsets,l=o===void 0?!0:o,u={placement:Us(e.placement),variation:fc(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Iy(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Iy(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var zI={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:BI,data:{}};function VI(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},s=e.elements[n];!Bi(s)||!Er(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(a){var o=r[a];o===!1?s.removeAttribute(a):s.setAttribute(a,o===!0?"":o)}))})}function HI(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],s=e.attributes[i]||{},a=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),o=a.reduce(function(l,u){return l[u]="",l},{});!Bi(r)||!Er(r)||(Object.assign(r.style,o),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}}var GI={name:"applyStyles",enabled:!0,phase:"write",fn:VI,effect:HI,requires:["computeStyles"]},WI=[DI,kI,zI,GI],$I=II({defaultModifiers:WI});function XI(t){return["click","hover"].includes(t)}function YI(t){return["top","top-start","top-end","bottom","bottom-start","bottom-end","right","right-start","right-end","left","left-start","left-end","cover-top","cover-top-start","cover-top-end","cover-bottom","cover-bottom-start","cover-bottom-end","cover-left","cover-right"].includes(t)}var qI={show:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},trigger:{type:String,default:"click",validator:XI},placement:{type:String,default:"cover-top-start",validator:YI},offsetX:{type:[Number,String],default:0},offsetY:{type:[Number,String],default:0},teleport:{type:[String,Object],default:"body"},defaultStyle:{type:Boolean,default:!0},onOpen:{type:Function},onOpened:{type:Function},onClose:{type:Function},onClosed:{type:Function},"onUpdate:show":{type:Function}};function Uh(){return Uh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Uh.apply(this,arguments)}function Oy(t,e,n,i,r,s,a){try{var o=t[s](a),l=o.value}catch(u){n(u);return}o.done?e(l):Promise.resolve(l).then(i,r)}function Dy(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function a(l){Oy(s,i,r,a,o,"next",l)}function o(l){Oy(s,i,r,a,o,"throw",l)}a(void 0)})}}var{n:ZI,classes:jI}=Qe("menu");function KI(t,e){return ie(),he("div",{ref:"host",class:$(t.n()),onClick:e[3]||(e[3]=function(){return t.handleClick&&t.handleClick(...arguments)}),onMouseenter:e[4]||(e[4]=function(){return t.handleMouseenter&&t.handleMouseenter(...arguments)}),onMouseleave:e[5]||(e[5]=function(){return t.handleMouseleave&&t.handleMouseleave(...arguments)})},[Ue(t.$slots,"default"),(ie(),Mt(sf,{to:t.teleport},[We(Mn,{name:t.n(),onAfterEnter:t.onOpened,onAfterLeave:t.onClosed},{default:pt(()=>[Zt(Me("div",{ref:"menu",style:Be({zIndex:t.zIndex}),class:$(t.classes(t.n("menu"),[t.defaultStyle,t.n("--menu-background-color")+" var-elevation--3"])),onClick:e[0]||(e[0]=qr(()=>{},["stop"])),onMouseenter:e[1]||(e[1]=function(){return t.handleMenuMouseenter&&t.handleMenuMouseenter(...arguments)}),onMouseleave:e[2]||(e[2]=function(){return t.handleMenuMouseleave&&t.handleMenuMouseleave(...arguments)})},[Ue(t.$slots,"menu")],38),[[Uc,t.show]])]),_:3},8,["name","onAfterEnter","onAfterLeave"])],8,["to"]))],34)}var Bs=tt({render:KI,name:"VarMenu",props:qI,setup(t){var e=de(null),n=de(null),i=de(!1),{zIndex:r}=ff(()=>i.value,1),s=null,a=!1,o=!1,l=!1,u={width:0,height:0},c=()=>{var{width:T,height:I}=getComputedStyle(e.value);u={width:yn(T),height:yn(I)}},d=()=>{t.trigger==="hover"&&(l=!0,w())},h=function(){var T=Dy(function*(){t.trigger==="hover"&&(l=!1,yield Mr(),!o&&E())});return function(){return T.apply(this,arguments)}}(),f=()=>{t.trigger==="hover"&&(o=!0)},m=function(){var T=Dy(function*(){t.trigger==="hover"&&(o=!1,yield Mr(),!l&&E())});return function(){return T.apply(this,arguments)}}(),v=()=>{w(),a=!0},g=()=>{if(a){a=!1;return}i.value=!1,ye(t["onUpdate:show"],!1)},y=()=>{c();var T={x:yn(t.offsetX),y:yn(t.offsetY)};switch(t.placement){case"cover-top":return{placement:"bottom",skidding:T.x,distance:T.y-u.height};case"cover-top-start":return{placement:"bottom-start",skidding:T.x,distance:T.y-u.height};case"cover-top-end":return{placement:"bottom-end",skidding:T.x,distance:T.y-u.height};case"cover-bottom":return{placement:"top",skidding:T.x,distance:-T.y-u.height};case"cover-bottom-start":return{placement:"top-start",skidding:T.x,distance:-T.y-u.height};case"cover-bottom-end":return{placement:"top-end",skidding:T.x,distance:-T.y-u.height};case"cover-left":return{placement:"right",skidding:T.y,distance:T.x-u.width};case"cover-right":return{placement:"left",skidding:T.y,distance:-T.x-u.width};case"left":case"left-start":case"left-end":return{placement:t.placement,skidding:T.y,distance:-T.x};case"top":case"top-start":case"top-end":return{placement:t.placement,skidding:T.x,distance:-T.y};case"bottom":case"bottom-start":case"bottom-end":return{placement:t.placement,skidding:T.x,distance:T.y};case"right":case"right-start":case"right-end":return{placement:t.placement,skidding:T.y,distance:T.x}}},S=()=>{var{placement:T,skidding:I,distance:_}=y();return{placement:T,modifiers:[Uh({},bI,{enabled:i.value}),Uh({},SI,{options:{offset:[I,_]}})]}},b=()=>{s.setOptions(S())},w=()=>{var{disabled:T}=t;T||(i.value=!0,ye(t["onUpdate:show"],!0))},E=()=>{i.value=!1,ye(t["onUpdate:show"],!1)};return Ke(()=>t.show,T=>{i.value=T!=null?T:!1},{immediate:!0}),Ke(()=>t.offsetX,b),Ke(()=>t.offsetY,b),Ke(()=>t.placement,b),Ke(()=>i.value,T=>{T?(b(),ye(t.onOpen)):ye(t.onClose)}),Ke(()=>t.trigger,T=>{T==="click"?document.addEventListener("click",g):document.removeEventListener("click",g)}),Ke(()=>t.disabled,E),fn(()=>{s=$I(e.value,n.value,S()),t.trigger==="click"&&document.addEventListener("click",g)}),Cr(()=>{document.removeEventListener("click",g),s.destroy()}),{menu:n,host:e,hostSize:u,show:i,zIndex:r,n:ZI,classes:jI,handleClick:v,handleMenuClose:g,handleMouseenter:d,handleMouseleave:h,handleMenuMouseenter:f,handleMenuMouseleave:m,resize:b,open:w,close:E}}});Bs.install=function(t){t.component(Bs.name,Bs)};var G1=Symbol("SELECT_BIND_OPTION_KEY"),W1=Symbol("SELECT_COUNT_OPTION_KEY");function JI(){var{bindChildren:t,childProviders:e}=Hi(G1),{length:n}=or(W1);return{length:n,options:e,bindOptions:t}}function QI(){var{bindParent:t,parentProvider:e}=Gi(G1),{index:n}=lr(W1);if(!t||!e)throw Error("<var-option/> must in <var-select/>");return{index:n,select:e,bindSelect:t}}var eO={label:{},value:{}},{n:tO,classes:nO}=Qe("option");function iO(t,e){var n=Je("var-checkbox"),i=jn("ripple");return Zt((ie(),he("div",{class:$(t.classes(t.n(),"var--box",[t.optionSelected,t.n("--selected-color")])),style:Be({width:t.wrapWidth,color:t.optionSelected?t.focusColor:void 0}),onClick:e[2]||(e[2]=function(){return t.handleClick&&t.handleClick(...arguments)})},[Me("div",{class:$(t.classes(t.n("cover"),[t.optionSelected,t.n("--selected-background")])),style:Be({background:t.optionSelected?t.focusColor:void 0})},null,6),t.multiple?(ie(),Mt(n,{key:0,ref:"checkbox","checked-color":t.focusColor,modelValue:t.optionSelected,"onUpdate:modelValue":e[0]||(e[0]=r=>t.optionSelected=r),onClick:e[1]||(e[1]=qr(()=>{},["stop"])),onChange:t.handleSelect},null,8,["checked-color","modelValue","onChange"])):qe("v-if",!0),Me("div",{class:$(t.classes(t.n("text"),"var--ellipsis"))},[Ue(t.$slots,"default",{},()=>[Rt(je(t.label),1)])],2)],6)),[[i]])}var Tl=tt({render:iO,name:"VarOption",directives:{Ripple:kn},components:{VarCheckbox:Ua},props:eO,setup(t){var e=de(!1),n=Le(()=>e.value),i=Le(()=>t.label),r=Le(()=>t.value),{select:s,bindSelect:a}=QI(),{wrapWidth:o,multiple:l,focusColor:u,onSelect:c}=s,d=()=>{e.value=!e.value,c(m)},h=()=>c(m),f=v=>{e.value=v},m={label:i,value:r,selected:n,sync:f};return Ke([()=>t.label,()=>t.value],()=>{if(t.label==null&&t.value==null)throw Error(`Props label and value can't both be undefined
`)},{immediate:!0}),a(m),{n:tO,classes:nO,optionSelected:e,wrapWidth:o,multiple:l,focusColor:u,handleClick:d,handleSelect:h}}});Tl.install=function(t){t.component(Tl.name,Tl)};var rO={current:{type:[Number,String]},size:{type:[Number,String],default:10},total:{type:[Number,String],default:0},maxPagerCount:{type:Number,default:3},disabled:{type:Boolean,default:!1},simple:{type:Boolean,default:!0},showSizeChanger:{type:Boolean,default:!0},showQuickJumper:{type:Boolean,default:!1},sizeOption:{type:Array,default:()=>[10,20,50,100]},showTotal:{type:Function},onChange:{type:Function},"onUpdate:current":{type:Function},"onUpdate:size":{type:Function}},{n:sO,classes:aO}=Qe("pagination"),oO=["item-mode","onClick"];function lO(t,e){var n=Je("var-icon"),i=Je("var-input"),r=Je("var-cell"),s=Je("var-menu"),a=jn("ripple");return ie(),he("ul",{class:$(t.n())},[Zt((ie(),he("li",{class:$(t.classes(t.n("item"),t.n("prev"),[t.current<=1||t.disabled,t.n("item--disabled")],[t.simple,t.n("item--simple"),"var-elevation--2"])),onClick:e[0]||(e[0]=o=>t.clickItem("prev"))},[Ue(t.$slots,"prev",{},()=>[We(n,{name:"chevron-left"})])],2)),[[a,{disabled:t.current<=1||t.disabled}]]),t.simple?(ie(),he("li",{key:0,class:$(t.classes(t.n("simple"),[t.disabled,t.n("item--disabled")]))},[We(i,{modelValue:t.simpleValue,"onUpdate:modelValue":e[1]||(e[1]=o=>t.simpleValue=o),disabled:t.disabled,"var-pagination-cover":"",onBlur:e[2]||(e[2]=o=>t.setPage("simple",t.simpleValue,o)),onKeydown:e[3]||(e[3]=G0(o=>t.setPage("simple",t.simpleValue,o),["enter"]))},null,8,["modelValue","disabled"]),Me("span",null,[Rt(" / "+je(t.pageCount)+" ",1),Me("div",{class:$(t.n("simple-line"))},null,2)])],2)):(ie(!0),he(At,{key:1},bn(t.pageList,(o,l)=>Zt((ie(),he("li",{key:t.toNumber(o)+l,"item-mode":t.getMode(o,l),class:$(t.classes(t.n("item"),"var-elevation--2",[o===t.current&&!t.disabled,t.n("item--active")],[t.isHideEllipsis(o,l),t.n("item--hide")],[t.disabled,t.n("item--disabled")],[o===t.current&&t.disabled,t.n("item--disabled--active")])),onClick:u=>t.clickItem(o,l)},[Rt(je(o),1)],10,oO)),[[a,{disabled:t.disabled}]])),128)),Zt((ie(),he("li",{class:$(t.classes(t.n("item"),t.n("next"),[t.current>=t.pageCount||t.disabled,t.n("item--disabled")],[t.simple,t.n("item--simple"),"var-elevation--2"])),onClick:e[4]||(e[4]=o=>t.clickItem("next"))},[Ue(t.$slots,"next",{},()=>[We(n,{name:"chevron-right"})])],2)),[[a,{disabled:t.current>=t.pageCount||t.disabled}]]),t.showSizeChanger?(ie(),he("li",{key:2,class:$(t.classes(t.n("size"),[t.disabled,t.n("item--disabled")]))},[We(s,{show:t.menuVisible,"onUpdate:show":e[6]||(e[6]=o=>t.menuVisible=o),"offset-x":-4},{menu:pt(()=>[(ie(!0),he(At,null,bn(t.sizeOption,(o,l)=>Zt((ie(),Mt(r,{class:$(t.classes(t.n("list"),[t.size===o,t.n("list--active")])),key:l,onClick:u=>t.clickSize(o)},{default:pt(()=>[Rt(je(o)+je(t.pack.paginationItem)+" / "+je(t.pack.paginationPage),1)]),_:2},1032,["class","onClick"])),[[a]])),128))]),default:pt(()=>[Me("div",{class:$(t.classes(t.n("size--open"),[t.current<=1||t.disabled,t.n("size--open--disabled")])),onClick:e[5]||(e[5]=function(){return t.showMenu&&t.showMenu(...arguments)})},[Me("span",null,je(t.size)+je(t.pack.paginationItem)+" / "+je(t.pack.paginationPage),1),We(n,{class:$(t.n("size--open-icon")),"var-pagination-cover":"",name:"menu-down"},null,8,["class"])],2)]),_:1},8,["show"])],2)):qe("v-if",!0),t.showQuickJumper&&!t.simple?(ie(),he("li",{key:3,class:$(t.classes(t.n("quickly"),[t.disabled,"item--disabled"]))},[Rt(je(t.pack.paginationJump)+" ",1),We(i,{modelValue:t.inputValue,"onUpdate:modelValue":e[7]||(e[7]=o=>t.inputValue=o),disabled:t.disabled,"var-pagination-cover":"",onBlur:e[8]||(e[8]=o=>t.setPage("quick",t.inputValue,o)),onKeydown:e[9]||(e[9]=G0(o=>t.setPage("quick",t.inputValue,o),["enter"]))},null,8,["modelValue","disabled"])],2)):qe("v-if",!0),t.totalText?(ie(),he("li",{key:4,class:$(t.n("total"))},je(t.totalText),3)):qe("v-if",!0)],2)}var El=tt({render:lO,name:"VarPagination",components:{VarMenu:Bs,VarIcon:Kt,VarCell:Fa,VarInput:Ga},directives:{Ripple:kn},props:rO,setup(t){var e=de(!1),n=de(""),i=de("1"),r=de(!1),s=de(!1),a=de(Te(t.current)||1),o=de(Te(t.size)||10),l=de([]),u=Le(()=>Math.ceil(t.maxPagerCount/2)),c=Le(()=>Math.ceil(Te(t.total)/Te(o.value))),d=Le(()=>{var w=o.value*(a.value-1)+1,E=Math.min(o.value*a.value,Te(t.total));return[w,E]}),h=Le(()=>t.showTotal?t.showTotal(Te(t.total),d.value):""),f=(w,E)=>Zn(w)?!1:E===1?r.value:s.value,m=(w,E)=>Zn(w)?"basic":E===1?"head":"tail",v=(w,E)=>{w===a.value||t.disabled||(Zn(w)?a.value=w:w==="prev"?a.value>1&&(a.value-=1):w==="next"?a.value<c.value&&(a.value+=1):w==="..."&&(E===1?a.value=Math.max(a.value-t.maxPagerCount,1):a.value=Math.min(a.value+t.maxPagerCount,c.value)))},g=()=>{t.disabled||(e.value=!0)},y=w=>{o.value=w,e.value=!1},S=w=>{var E=/^[1-9][0-9]*$/;return E.test(w)},b=(w,E,T)=>{if(T.target.blur(),S(E)){var I=Te(E);I>c.value&&(I=c.value,i.value=""+I),I!==a.value&&(a.value=I)}w==="quick"&&(n.value=""),w==="simple"&&!S(E)&&(i.value=""+a.value)};return Ke([()=>t.current,()=>t.size],w=>{var[E,T]=w;a.value=Te(E)||1,o.value=Te(T||10)}),Ke([a,o],(w,E)=>{var T,I,[_,R]=w,[L,k]=E;if(_>c.value){a.value=c.value;return}var F=[],{maxPagerCount:G,total:H,onChange:J}=t,V=Math.ceil(Te(H)/Te(k)),re=c.value-(G-u.value)-1;if(i.value=""+_,c.value-2>G){if(L===void 0||c.value!==V)for(var j=2;j<G+2;j++)F.push(j);if(_<=G&&_<re){F=[];for(var Z=1;Z<G+1;Z++)F.push(Z+1);r.value=!0,s.value=!1}if(_>G&&_<re){F=[];for(var z=1;z<G+1;z++)F.push(_+z-u.value);r.value=_===2&&G===1,s.value=!1}if(_>=re){F=[];for(var ee=1;ee<G+1;ee++)F.push(c.value-(G-ee)-1);r.value=!1,s.value=!0}F=[1,"...",...F,"...",c.value]}else for(var Q=1;Q<=c.value;Q++)F.push(Q);l.value=F,L!==void 0&&c.value>0&&(J==null||J(_,R)),(T=t["onUpdate:current"])==null||T.call(t,_),(I=t["onUpdate:size"])==null||I.call(t,R)},{immediate:!0}),{n:sO,classes:aO,pack:Un,current:a,menuVisible:e,size:o,pageCount:c,pageList:l,inputValue:n,simpleValue:i,totalText:h,getMode:m,isHideEllipsis:f,clickItem:v,showMenu:g,clickSize:y,setPage:b,toNumber:Te}}});El.install=function(t){t.component(El.name,El)};function Fm(){return Fm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Fm.apply(this,arguments)}var uO=Fm({columns:{type:Array,default:()=>[]},title:{type:String},textKey:{type:String,default:"text"},toolbar:{type:Boolean,default:!0},cascade:{type:Boolean,default:!1},cascadeInitialIndexes:{type:Array,default:()=>[]},optionHeight:{type:[Number,String],default:44},optionCount:{type:[Number,String],default:6},confirmButtonText:{type:String},cancelButtonText:{type:String},confirmButtonTextColor:{type:String},cancelButtonTextColor:{type:String},dynamic:{type:Boolean,default:!1},onChange:{type:Function},onConfirm:{type:Function},onCancel:{type:Function},textFormatter:{type:Function,default:t=>t}},ui(zc,["show","onUpdate:show","closeOnClickOverlay","teleport","onOpen","onClose","onOpened","onClosed","onClickOverlay","onRouteChange"])),{n:cO,classes:dO}=Qe("picker"),Ny=300,hO=15,ky=0,fO=["onTouchstart","onTouchmove","onTouchend"],pO=["onTransitionend"];function mO(t,e){var n=Je("var-button");return ie(),Mt(rf(t.dynamic?"var-popup":t.Transition),ln(t.dynamic?{onOpen:t.onOpen,onOpened:t.onOpened,onClose:t.onClose,onClosed:t.onClosed,onClickOverlay:t.onClickOverlay,onRouteChange:t.onRouteChange,closeOnClickOverlay:t.closeOnClickOverlay,teleport:t.teleport,show:t.show,"onUpdate:show":t.handlePopupUpdateShow,position:"bottom",class:t.n("popup")}:null,{"var-picker-cover":""}),{default:pt(()=>[Me("div",ln({class:t.n()},t.$attrs),[Me("div",{class:$(t.n("toolbar"))},[Ue(t.$slots,"cancel",{},()=>[We(n,{class:$(t.n("cancel-button")),"var-picker-cover":"",text:"","text-color":t.cancelButtonTextColor,onClick:t.cancel},{default:pt(()=>[Rt(je(t.dt(t.cancelButtonText,t.pack.pickerCancelButtonText)),1)]),_:1},8,["class","text-color","onClick"])]),Ue(t.$slots,"title",{},()=>[Me("div",{class:$(t.n("title"))},je(t.dt(t.title,t.pack.pickerTitle)),3)]),Ue(t.$slots,"confirm",{},()=>[We(n,{class:$(t.n("confirm-button")),text:"","var-picker-cover":"","text-color":t.confirmButtonTextColor,onClick:t.confirm},{default:pt(()=>[Rt(je(t.dt(t.confirmButtonText,t.pack.pickerConfirmButtonText)),1)]),_:1},8,["class","text-color","onClick"])])],2),Me("div",{class:$(t.n("columns")),style:Be({height:t.columnHeight+"px"})},[(ie(!0),he(At,null,bn(t.scrollColumns,i=>(ie(),he("div",{class:$(t.n("column")),key:i.id,onTouchstart:r=>t.handleTouchstart(r,i),onTouchmove:qr(r=>t.handleTouchmove(r,i),["prevent"]),onTouchend:r=>t.handleTouchend(r,i)},[Me("div",{class:$(t.n("scroller")),ref_for:!0,ref:r=>t.getScrollEl(r,i),style:Be({transform:"translateY("+i.translate+"px)",transitionDuration:i.duration+"ms",transitionProperty:i.duration?"transform":"none"}),onTransitionend:r=>t.handleTransitionend(i)},[(ie(!0),he(At,null,bn(i.column.texts,r=>(ie(),he("div",{class:$(t.n("option")),style:Be({height:t.optionHeight+"px"}),key:r},[Me("div",{class:$(t.n("text"))},je(t.textFormatter(r,i.columnIndex)),3)],6))),128))],46,pO)],42,fO))),128)),Me("div",{class:$(t.n("picked")),style:Be({top:t.center+"px",height:t.optionHeight+"px"})},null,6),Me("div",{class:$(t.n("mask")),style:Be({backgroundSize:"100% "+(t.columnHeight-t.optionHeight)/2+"px"})},null,6)],6)],16)]),_:3},16)}var Wa=tt({render:mO,name:"VarPicker",components:{VarButton:hi,VarPopup:rr},inheritAttrs:!1,props:uO,setup(t){var e=de([]),n=Le(()=>yn(t.optionHeight)),i=Le(()=>yn(t.optionCount)),r=Le(()=>i.value*n.value/2-n.value/2),s=Le(()=>i.value*n.value),a=[],o=(k,F)=>{F.scrollEl=k},l=k=>{ye(t["onUpdate:show"],k)},u=k=>{var F=n.value+r.value,G=r.value-k.column.texts.length*n.value;k.translate>=F&&(k.translate=F),k.translate<=G&&(k.translate=G)},c=(k,F)=>{var{length:G}=k.column.texts;return F=F>=G?G-1:F,F=F<=0?0:F,F},d=k=>{var F=Math.round((r.value-k.translate)/n.value);return c(k,F)},h=()=>{var k=e.value.map(G=>G.column.texts[G.index]),F=e.value.map(G=>G.index);return{texts:k,indexes:F}},f=function(k,F,G,H){H===void 0&&(H=!1);var J=r.value-c(k,F)*n.value;J===k.translate&&(k.scrolling=!1,!H&&I(k)),k.translate=J,k.duration=G},m=(k,F,G)=>{k.translate+=Math.abs(F/G)/.003*(F<0?-1:1)},v=(k,F)=>{F.touching=!0,F.scrolling=!1,F.duration=0,F.translate=ip(F.scrollEl)},g=(k,F)=>{if(!!F.touching){var{clientY:G}=k.touches[0],H=F.prevY!==void 0?G-F.prevY:0;F.prevY=G,F.translate+=H,u(F);var J=performance.now();J-F.momentumTime>Ny&&(F.momentumTime=J,F.momentumPrevY=F.translate)}},y=(k,F)=>{F.touching=!1,F.scrolling=!0,F.prevY=void 0;var G=F.translate-F.momentumPrevY,H=performance.now()-F.momentumTime,J=Math.abs(G)>=hO&&H<=Ny;J&&m(F,G,H),F.index=d(F),f(F,F.index,J?1e3:200)},S=k=>{k.scrolling=!1,I(k)},b=k=>k.map((F,G)=>{var H,J=qt(F)?{texts:F}:F,V={id:ky++,prevY:void 0,momentumPrevY:void 0,touching:!1,translate:r.value,index:(H=J.initialIndex)!=null?H:0,columnIndex:G,duration:0,momentumTime:0,column:J,scrollEl:null,scrolling:!1};return f(V,V.index,0,!0),V}),w=k=>{var F=[];return E(F,k,0,!0),F},E=function(k,F,G,H){if(H===void 0&&(H=!1),qt(F)&&F.length){var J,V=H&&(J=t.cascadeInitialIndexes[k.length])!=null?J:0,re={id:ky++,prevY:void 0,momentumPrevY:void 0,touching:!1,translate:r.value,index:V,columnIndex:G,duration:0,momentumTime:0,column:{texts:F.map(j=>j[t.textKey])},columns:F,scrollEl:null,scrolling:!1};k.push(re),f(re,re.index,0,!0),E(k,re.columns[re.index].children,G+1,H)}},T=k=>{e.value.splice(e.value.indexOf(k)+1),E(e.value,k.columns[k.index].children,k.columnIndex+1)},I=k=>{var{cascade:F,onChange:G}=t;F&&T(k);var H=e.value.some(j=>j.scrolling);if(!H){var{texts:J,indexes:V}=h(),re=V.every((j,Z)=>j===a[Z]);re||(a=[...V],ye(G,J,V))}},_=()=>{if(t.cascade){var k=e.value.find(F=>F.scrolling);k&&(k.translate=ip(k.scrollEl),k.index=d(k),f(k,k.index,0,!0),k.scrolling=!1,T(k))}else e.value.forEach(F=>{F.translate=ip(F.scrollEl),F.index=d(F),f(F,F.index,0)})},R=()=>{_();var{texts:k,indexes:F}=h();a=[...F],ye(t.onConfirm,k,F)},L=()=>{_();var{texts:k,indexes:F}=h();a=[...F],ye(t.onCancel,k,F)};return Ke(()=>t.columns,k=>{e.value=t.cascade?w(Ot(k)):b(Ot(k));var{indexes:F}=h();a=[...F]},{immediate:!0,deep:!0}),{n:cO,classes:dO,pack:Un,optionHeight:n,optionCount:i,scrollColumns:e,columnHeight:s,center:r,Transition:Mn,getScrollEl:o,handlePopupUpdateShow:l,handleTouchstart:v,handleTouchmove:g,handleTouchend:y,handleTransitionend:S,confirm:R,cancel:L,dt:cf}}}),li;function no(t){return new Promise(e=>{no.close();var n=qt(t)?{columns:t}:t,i=tn(n);i.dynamic=!0,i.teleport="body",li=i;var{unmountInstance:r}=Bc(Wa,i,{onConfirm:(s,a)=>{i.onConfirm==null||i.onConfirm(s,a),e({state:"confirm",texts:s,indexes:a}),i.show=!1,li===i&&(li=null)},onCancel:(s,a)=>{i.onCancel==null||i.onCancel(s,a),e({state:"cancel",texts:s,indexes:a}),i.show=!1,li===i&&(li=null)},onClose:()=>{i.onClose==null||i.onClose(),e({state:"close"}),li===i&&(li=null)},onClosed:()=>{i.onClosed==null||i.onClosed(),r(),li===i&&(li=null)},onRouteChange:()=>{r(),li===i&&(li=null)},"onUpdate:show":s=>{i.show=s}});i.show=!0})}Wa.install=function(t){t.component(Wa.name,Wa)};no.Component=Wa;no.install=function(t){t.component(Wa.name,Wa)};no.close=()=>{if(li!=null){var t=li;li=null,rn().then(()=>{t.show=!1})}};function vO(t){return["linear","circle"].includes(t)}var gO={mode:{type:String,default:"linear",validator:vO},lineWidth:{type:[Number,String],default:4},color:{type:String},trackColor:{type:String},ripple:{type:Boolean,default:!1},value:{type:[Number,String],default:0},label:{type:Boolean,default:!1},labelClass:{type:String},size:{type:[Number,String],default:40},rotate:{type:Number,default:0},track:{type:Boolean,default:!0}},{n:yO,classes:bO}=Qe("progress"),wO=["viewBox"],_O=["cx","cy","r","stroke-width"],SO=["cx","cy","r","stroke-width"];function MO(t,e){return ie(),he("div",{class:$(t.n())},[t.mode==="linear"?(ie(),he("div",{key:0,class:$(t.n("linear"))},[Me("div",{class:$(t.n("linear-block")),style:Be({height:t.toSizeUnit(t.lineWidth)})},[t.track?(ie(),he("div",{key:0,class:$(t.n("linear-background")),style:Be({background:t.trackColor})},null,6)):qe("v-if",!0),Me("div",{class:$(t.classes(t.n("linear-certain"),[t.ripple,t.n("linear-ripple")])),style:Be({background:t.color,width:t.linearProps.width})},null,6)],6),t.label?(ie(),he("div",{key:0,class:$(t.classes(t.n("linear-label"),[t.labelClass,t.labelClass]))},[Ue(t.$slots,"default",{},()=>[Rt(je(t.linearProps.roundValue),1)])],2)):qe("v-if",!0)],2)):qe("v-if",!0),t.mode==="circle"?(ie(),he("div",{key:1,class:$(t.n("circle")),style:Be({width:t.toSizeUnit(t.size),height:t.toSizeUnit(t.size)})},[(ie(),he("svg",{class:$(t.n("circle-svg")),style:Be({transform:"rotate("+(t.rotate-90)+"deg)"}),viewBox:t.circleProps.viewBox},[t.track?(ie(),he("circle",{key:0,class:$(t.n("circle-background")),cx:t.multiplySizeUnit(t.size,.5),cy:t.multiplySizeUnit(t.size,.5),r:t.circleProps.radius,fill:"transparent","stroke-width":t.toSizeUnit(t.lineWidth),style:Be({strokeDasharray:t.circleProps.perimeter,stroke:t.trackColor})},null,14,_O)):qe("v-if",!0),Me("circle",{class:$(t.n("circle-certain")),cx:t.multiplySizeUnit(t.size,.5),cy:t.multiplySizeUnit(t.size,.5),r:t.circleProps.radius,fill:"transparent","stroke-width":t.toSizeUnit(t.lineWidth),style:Be({strokeDasharray:t.circleProps.strokeDasharray,stroke:t.color})},null,14,SO)],14,wO)),t.label?(ie(),he("div",{key:0,class:$(t.classes(t.n("circle-label"),[t.labelClass,t.labelClass]))},[Ue(t.$slots,"default",{},()=>[Rt(je(t.circleProps.roundValue),1)])],2)):qe("v-if",!0)],6)):qe("v-if",!0)],2)}var xl=tt({render:MO,name:"VarProgress",props:gO,setup(t){var e=Le(()=>{var i=Te(t.value),r=i>100?100:i,s=i>100?100:Math.round(i);return{width:r+"%",roundValue:s+"%"}}),n=Le(()=>{var{size:i,lineWidth:r,value:s}=t,a="0 0 "+yn(i)+" "+yn(i),o=Te(s)>100?100:Math.round(Te(s)),l=(yn(i)-yn(r))/2,u=2*Math.PI*l,c=o/100*u+", "+u;return{viewBox:a,radius:l,strokeDasharray:c,perimeter:u,roundValue:o+"%"}});return{n:yO,classes:bO,toSizeUnit:dn,multiplySizeUnit:ii,linearProps:e,circleProps:n}}});xl.install=function(t){t.component(xl.name,xl)};var TO={modelValue:{type:Boolean},disabled:{type:Boolean,default:!1},animationDuration:{type:[Number,String],default:300},successDuration:{type:[Number,String],default:2e3},bgColor:{type:String},successBgColor:{type:String},color:{type:String},successColor:{type:String},onRefresh:{type:Function},"onUpdate:modelValue":{type:Function}};function Fy(t,e,n,i,r,s,a){try{var o=t[s](a),l=o.value}catch(u){n(u);return}o.done?e(l):Promise.resolve(l).then(i,r)}function EO(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function a(l){Fy(s,i,r,a,o,"next",l)}function o(l){Fy(s,i,r,a,o,"throw",l)}a(void 0)})}}var{n:xO,classes:CO}=Qe("pull-refresh"),Au=100,Ru=-50,Uy=150;function AO(t,e){var n=Je("var-icon");return ie(),he("div",{ref:"freshNode",class:$(t.n()),onTouchstart:e[0]||(e[0]=function(){return t.touchStart&&t.touchStart(...arguments)}),onTouchmove:e[1]||(e[1]=function(){return t.touchMove&&t.touchMove(...arguments)}),onTouchend:e[2]||(e[2]=function(){return t.touchEnd&&t.touchEnd(...arguments)}),onTouchcancel:e[3]||(e[3]=function(){return t.touchEnd&&t.touchEnd(...arguments)})},[Me("div",{class:$(t.classes(t.n("control"),"var-elevation--2",[t.isSuccess,t.n("control-success")])),style:Be(t.controlStyle)},[We(n,{name:t.iconName,transition:t.ICON_TRANSITION,class:$(t.classes(t.n("icon"),[t.refreshStatus==="loading"&&t.iconHasChanged,t.n("animation")])),"var-pull-refresh-cover":""},null,8,["name","transition","class"])],6),Ue(t.$slots,"default")],34)}var Cl=tt({render:AO,name:"VarPullRefresh",components:{VarIcon:Kt},props:TO,setup(t){var e,n,i=de(null),r=de(0),s=de(Ru),a=de("arrow-down"),o=de("default"),l=de(!1),u=de(!0),c=Le(()=>o.value!=="loading"&&o.value!=="success"&&!t.disabled),d=Le(()=>({transform:"translate3d(0px, "+s.value+"px, 0px) translate(-50%, 0)",transition:l.value?"transform "+t.animationDuration+"ms":void 0,background:h.value?t.successBgColor:t.bgColor,color:h.value?t.successColor:t.color})),h=Le(()=>o.value==="success"),f=()=>new Promise(S=>{window.setTimeout(()=>{u.value=!0,S()},Uy)}),m=S=>{!c.value||(o.value="pulling",r.value=S.touches[0].clientY)},v=S=>{var b=df(e);if(!(b>0||!c.value)){b===0&&s.value>Ru&&S.cancelable&&S.preventDefault();var w=(S.touches[0].clientY-r.value)/2+Ru;s.value=w>=Au?Au:w,s.value>=Au*.2?(u.value=!1,a.value="refresh",n=f()):a.value="arrow-down"}},g=function(){var S=EO(function*(){if(!!c.value)if(l.value=!0,s.value>=Au*.2){var b;yield n,o.value="loading",s.value=Au*.3,(b=t["onUpdate:modelValue"])==null||b.call(t,!0),t.onRefresh==null||t.onRefresh()}else o.value="loosing",a.value="arrow-down",s.value=Ru,setTimeout(()=>{l.value=!1},Te(t.animationDuration))});return function(){return S.apply(this,arguments)}}(),y=()=>{setTimeout(()=>{o.value="default",a.value="arrow-down",l.value=!1},Te(t.animationDuration))};return Ke(()=>t.modelValue,S=>{S===!1&&(l.value=!0,o.value="success",a.value="checkbox-marked-circle",setTimeout(()=>{s.value=Ru,y()},Te(t.successDuration)))}),fn(()=>{e=cu(i.value)}),{n:xO,classes:CO,iconHasChanged:u,ICON_TRANSITION:Uy,refreshStatus:o,freshNode:i,touchStart:m,touchMove:v,touchEnd:g,iconName:a,controlStyle:d,isSuccess:h}}});Cl.install=function(t){t.component(Cl.name,Cl)};var RO={modelValue:{type:[String,Number,Boolean,Object,Array],default:!1},checkedValue:{type:[String,Number,Boolean,Object,Array],default:!0},uncheckedValue:{type:[String,Number,Boolean,Object,Array],default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},checkedColor:{type:String},uncheckedColor:{type:String},iconSize:{type:[String,Number]},ripple:{type:Boolean,default:!0},validateTrigger:{type:Array,default:()=>["onChange"]},rules:{type:Array},onClick:{type:Function},onChange:{type:Function},"onUpdate:modelValue":{type:Function}},$1=Symbol("RADIO_GROUP_BIND_RADIO_KEY"),X1=Symbol("RADIO_GROUP_COUNT_RADIO_KEY");function PO(){var{bindChildren:t,childProviders:e}=Hi($1),{length:n}=or(X1);return{length:n,radios:e,bindRadios:t}}function LO(){var{bindParent:t,parentProvider:e}=Gi($1),{index:n}=lr(X1);return{index:n,radioGroup:e,bindRadioGroup:t}}var{n:IO,classes:OO}=Qe("radio");function DO(t,e){var n=Je("var-icon"),i=Je("var-form-details"),r=jn("ripple");return ie(),he("div",{class:$(t.n("wrap"))},[Me("div",ln({class:t.n(),onClick:e[0]||(e[0]=function(){return t.handleClick&&t.handleClick(...arguments)})},t.$attrs),[Zt((ie(),he("div",{class:$(t.classes(t.n("action"),[t.checked,t.n("--checked"),t.n("--unchecked")],[t.errorMessage||t.radioGroupErrorMessage,t.n("--error")],[t.formDisabled||t.disabled,t.n("--disabled")])),style:Be({color:t.checked?t.checkedColor:t.uncheckedColor})},[t.checked?Ue(t.$slots,"checked-icon",{key:0},()=>[We(n,{class:$(t.classes(t.n("icon"),[t.withAnimation,t.n("--with-animation")])),"var-radio-cover":"",name:"radio-marked",size:t.iconSize},null,8,["class","size"])]):Ue(t.$slots,"unchecked-icon",{key:1},()=>[We(n,{class:$(t.classes(t.n("icon"),[t.withAnimation,t.n("--with-animation")])),"var-radio-cover":"",name:"radio-blank",size:t.iconSize},null,8,["class","size"])])],6)),[[r,{disabled:t.formReadonly||t.readonly||t.formDisabled||t.disabled||!t.ripple}]]),Me("div",{class:$(t.classes(t.n("text"),[t.errorMessage||t.radioGroupErrorMessage,t.n("--error")],[t.formDisabled||t.disabled,t.n("--disabled")]))},[Ue(t.$slots,"default")],2)],16),We(i,{"error-message":t.errorMessage},null,8,["error-message"])],2)}var Al=tt({render:DO,name:"VarRadio",directives:{Ripple:kn},components:{VarIcon:Kt,VarFormDetails:Wn},inheritAttrs:!1,props:RO,setup(t){var e=de(!1),n=Le(()=>e.value===t.checkedValue),i=de(!1),{radioGroup:r,bindRadioGroup:s}=LO(),{form:a,bindForm:o}=$i(),{errorMessage:l,validateWithTrigger:u,validate:c,resetValidation:d}=Wi(),h=w=>{rn(()=>{var{validateTrigger:E,rules:T,modelValue:I}=t;u(E,w,T,I)})},f=w=>{var{checkedValue:E,onChange:T}=t;r&&e.value===E||(e.value=w,ye(t["onUpdate:modelValue"],e.value),ye(T,e.value),r==null||r.onToggle(E),h("onChange"))},m=w=>{var{disabled:E,readonly:T,uncheckedValue:I,checkedValue:_,onClick:R}=t;a!=null&&a.disabled.value||E||(ye(R,w),!(a!=null&&a.readonly.value||T)&&(i.value=!0,f(n.value?I:_)))},v=w=>{var{checkedValue:E,uncheckedValue:T}=t;e.value=w===E?E:T},g=()=>{ye(t["onUpdate:modelValue"],t.uncheckedValue),d()},y=()=>c(t.rules,t.modelValue),S=w=>{var{uncheckedValue:E,checkedValue:T}=t,I=![E,T].includes(w);I&&(w=n.value?E:T),f(w)};Ke(()=>t.modelValue,w=>{e.value=w},{immediate:!0});var b={sync:v,validate:y,resetValidation:d,reset:g};return ye(s,b),ye(o,b),{withAnimation:i,checked:n,errorMessage:l,radioGroupErrorMessage:r==null?void 0:r.errorMessage,formDisabled:a==null?void 0:a.disabled,formReadonly:a==null?void 0:a.readonly,n:IO,classes:OO,handleClick:m,toggle:S,reset:g,validate:y,resetValidation:d}}});Al.install=function(t){t.component(Al.name,Al)};function NO(t){return["horizontal","vertical"].includes(t)}var kO={modelValue:{type:[String,Number,Boolean,Object,Array],default:void 0},direction:{type:String,default:"horizontal",validator:NO},validateTrigger:{type:Array,default:()=>["onChange"]},rules:{type:Array},onChange:{type:Function},"onUpdate:modelValue":{type:Function}},{n:FO,classes:UO}=Qe("radio-group");function BO(t,e){var n=Je("var-form-details");return ie(),he("div",{class:$(t.n("wrap"))},[Me("div",{class:$(t.classes(t.n(),t.n("--"+t.direction)))},[Ue(t.$slots,"default")],2),We(n,{"error-message":t.errorMessage},null,8,["error-message"])],2)}var Rl=tt({render:BO,name:"VarRadioGroup",components:{VarFormDetails:Wn},props:kO,setup(t){var{length:e,radios:n,bindRadios:i}=PO(),{bindForm:r}=$i(),{errorMessage:s,validateWithTrigger:a,validate:o,resetValidation:l}=Wi(),u=Le(()=>s.value),c=g=>{rn(()=>{var{validateTrigger:y,rules:S,modelValue:b}=t;a(y,g,S,b)})},d=()=>n.forEach(g=>{var{sync:y}=g;return y(t.modelValue)}),h=g=>{ye(t["onUpdate:modelValue"],g),ye(t.onChange,g),c("onChange")},f=()=>o(t.rules,t.modelValue),m=()=>{ye(t["onUpdate:modelValue"],void 0),l()};Ke(()=>t.modelValue,d),Ke(()=>e.value,d);var v={onToggle:h,validate:f,reset:m,resetValidation:l,errorMessage:u};return ye(r,v),i(v),{errorMessage:s,n:FO,classes:UO,reset:m,validate:f,resetValidation:l}}});Rl.install=function(t){t.component(Rl.name,Rl)};var zO={modelValue:{type:[String,Number],default:0},count:{type:[String,Number],default:5},color:{type:String},icon:{type:String,default:"star"},emptyColor:{type:String},emptyIcon:{type:String,default:"star-outline"},size:{type:[String,Number]},gap:{type:[String,Number]},namespace:{type:String},half:{type:Boolean,default:!1},halfIcon:{type:String,default:"star-half-full"},disabled:{type:Boolean,default:!1},disabledColor:{type:String},readonly:{type:Boolean,default:!1},ripple:{type:Boolean,default:!0},rules:{type:Array},onChange:{type:Function},"onUpdate:modelValue":{type:Function}},{n:Pu}=Qe("rate"),VO=["onClick"];function HO(t,e){var n=Je("var-icon"),i=Je("var-form-details"),r=jn("ripple");return ie(),he("div",{class:$(t.n("wrap"))},[Me("div",{class:$(t.n())},[(ie(!0),he(At,null,bn(t.toNumber(t.count),s=>Zt((ie(),he("div",{key:s,style:Be(t.getStyle(s)),class:$(t.getClass(s)),onClick:a=>t.handleClick(s,a)},[We(n,{class:$(t.n("content-icon")),"var-rate-cover":"",transition:0,namespace:t.namespace,name:t.getCurrentState(s).name,style:Be({fontSize:t.toSizeUnit(t.size)})},null,8,["class","namespace","name","style"])],14,VO)),[[r,{disabled:t.formReadonly||t.readonly||t.formDisabled||t.disabled||!t.ripple}]])),128))],2),We(i,{"error-message":t.errorMessage},null,8,["error-message"])],2)}var Pl=tt({render:HO,name:"VarRate",components:{VarIcon:Kt,VarFormDetails:Wn},directives:{Ripple:kn},props:zO,setup(t){var{form:e,bindForm:n}=$i(),{errorMessage:i,validateWithTrigger:r,validate:s,resetValidation:a}=Wi(),o=g=>{var{count:y,gap:S}=t;return{color:u(g).color,marginRight:g!==Te(y)?dn(S):0}},l=g=>{var{name:y,color:S}=u(g);return{[Pu("content")]:!0,[Pu("--disabled")]:(e==null?void 0:e.disabled.value)||t.disabled,[Pu("--error")]:i.value,[Pu("--primary")]:y!==t.emptyIcon&&!S}},u=g=>{var{modelValue:y,disabled:S,disabledColor:b,color:w,half:E,emptyColor:T,icon:I,halfIcon:_,emptyIcon:R}=t,L=w;return(S||e!=null&&e.disabled.value)&&(L=b),g<=Te(y)?{color:L,name:I}:E&&g<=Te(y)+.5?{color:L,name:_}:{color:S||e!=null&&e.disabled.value?b:T,name:R}},c=(g,y)=>{if(t.half){var{offsetWidth:S}=y.target;y.offsetX<=Math.floor(S/2)&&(g-=.5)}ye(t["onUpdate:modelValue"],g)},d=()=>s(t.rules,Te(t.modelValue)),h=()=>rn(()=>r(["onChange"],"onChange",t.rules,t.modelValue)),f=(g,y)=>{var{readonly:S,disabled:b,onChange:w}=t;S||b||e!=null&&e.disabled.value||e!=null&&e.readonly.value||(c(g,y),ye(w,g),h())},m=()=>{ye(t["onUpdate:modelValue"],0),a()},v={reset:m,validate:d,resetValidation:a};return ye(n,v),{errorMessage:i,formDisabled:e==null?void 0:e.disabled,formReadonly:e==null?void 0:e.readonly,getStyle:o,getClass:l,getCurrentState:u,handleClick:f,reset:m,validate:d,resetValidation:a,toSizeUnit:dn,toNumber:Te,n:Pu}}});Pl.install=function(t){t.component(Pl.name,Pl)};function GO(t){return["flex-start","flex-end","center","space-between","space-around"].includes(t)}function WO(t){return["flex-start","center","flex-end"].includes(t)}var $O={gutter:{type:[String,Number],default:0},justify:{type:String,default:"flex-start",validator:GO},align:{type:String,default:"flex-start",validator:WO},onClick:{type:Function}},{n:XO,classes:YO}=Qe("row");function qO(t,e){return ie(),he("div",{class:$(t.classes(t.n(),"var--box")),style:Be({justifyContent:t.justify,alignItems:t.align,margin:t.average?"0 -"+t.average+"px":void 0}),onClick:e[0]||(e[0]=function(){return t.onClick&&t.onClick(...arguments)})},[Ue(t.$slots,"default")],6)}var Ll=tt({render:qO,name:"VarRow",props:$O,setup(t){var{cols:e,bindCols:n,length:i}=C2(),r=Le(()=>{var o=yn(t.gutter);return o/2}),s=()=>{e.forEach(o=>{o.setPadding({left:r.value,right:r.value})})},a={computePadding:s};return Ke(()=>i.value,s),Ke(()=>t.gutter,s),n(a),{n:XO,classes:YO,average:r}}});Ll.install=function(t){t.component(Ll.name,Ll)};function ZO(t){return["left","right","center"].includes(t)}var jO={modelValue:{default:void 0},placeholder:{type:String},multiple:{type:Boolean,default:!1},offsetY:{type:[String,Number],default:0},chip:{type:Boolean,default:!1},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},separator:{type:String,default:","},textAlign:{type:String,default:"left",validator:ZO},validateTrigger:{type:Array,default:()=>["onChange","onClear","onClose"]},rules:{type:Array},onFocus:{type:Function},onBlur:{type:Function},onClick:{type:Function},onClear:{type:Function},onClose:{type:Function},onChange:{type:Function},"onUpdate:modelValue":{type:Function}},{n:lp,classes:KO}=Qe("select"),JO={key:0},QO={key:1};function eD(t,e){var n=Je("var-chip"),i=Je("var-icon"),r=Je("var-menu"),s=Je("var-form-details");return ie(),he("div",{class:$(t.classes(t.n(),"var--box",[t.formDisabled||t.disabled,t.n("--disabled")])),onClick:e[3]||(e[3]=function(){return t.handleClick&&t.handleClick(...arguments)})},[Me("div",{class:$(t.classes(t.n("controller"),[t.isFocus,t.n("--focus")],[t.errorMessage,t.n("--error")],[t.formDisabled||t.disabled,t.n("--disabled")])),style:Be({color:t.errorMessage?void 0:t.isFocus?t.focusColor:t.blurColor})},[Me("div",{class:$(t.classes(t.n("icon"),[!t.hint,t.n("--non-hint")]))},[Ue(t.$slots,"prepend-icon")],2),Me("div",{class:$(t.classes(t.n("wrap"),[!t.hint,t.n("--non-hint")])),ref:"wrapEl",onClick:e[2]||(e[2]=function(){return t.handleFocus&&t.handleFocus(...arguments)})},[We(r,{"var-select-cover":"",class:$(t.classes(t.n("menu"))),"offset-y":t.offsetY,disabled:t.formReadonly||t.readonly||t.formDisabled||t.disabled,"default-style":!1,show:t.isFocus,"onUpdate:show":e[1]||(e[1]=a=>t.isFocus=a),onClose:t.handleBlur},{menu:pt(()=>[Me("div",{ref:"menuEl",class:$(t.classes(t.n("scroller"),"var-elevation--3"))},[Ue(t.$slots,"default")],2)]),default:pt(()=>[Me("div",{class:$(t.classes(t.n("select"),[t.errorMessage,t.n("--error")],[t.formDisabled||t.disabled,t.n("--disabled")])),style:Be({textAlign:t.textAlign,color:t.textColor})},[t.multiple?(ie(),he("div",JO,[t.chip?(ie(),he("div",{key:0,class:$(t.n("chips"))},[(ie(!0),he(At,null,bn(t.labels,a=>(ie(),Mt(n,{class:$(t.n("chip")),"var-select-cover":"",closable:"",size:"small",type:t.errorMessage?"danger":void 0,key:a,onClick:e[0]||(e[0]=qr(()=>{},["stop"])),onClose:()=>t.handleClose(a)},{default:pt(()=>[Rt(je(a),1)]),_:2},1032,["class","type","onClose"]))),128))],2)):(ie(),he("div",{key:1,class:$(t.n("values"))},je(t.labels.join(t.separator)),3))])):(ie(),he("span",QO,je(t.label),1)),Ue(t.$slots,"arrow-icon",{focus:t.isFocus},()=>[We(i,{class:$(t.classes(t.n("arrow"),[t.isFocus,t.n("--arrow-rotate")])),"var-select-cover":"",name:"menu-down",transition:300},null,8,["class"])])],6),Me("label",{class:$(t.classes(t.n("placeholder"),"var--ellipsis",[t.isFocus,t.n("--focus")],[t.errorMessage,t.n("--error")],[t.formDisabled||t.disabled,t.n("--disabled")],t.computePlaceholderState(),[!t.hint,t.n("--placeholder-non-hint")])),style:Be({color:t.errorMessage?void 0:t.isFocus?t.focusColor:t.blurColor})},je(t.placeholder),7)]),_:3},8,["class","offset-y","disabled","show","onClose"])],2),Me("div",{class:$(t.classes(t.n("icon"),[!t.hint,t.n("--non-hint")]))},[Ue(t.$slots,"append-icon",{},()=>[t.clearable?(ie(),Mt(i,{key:0,class:$(t.n("clear-icon")),name:"close-circle",size:"14px",onClick:t.handleClear},null,8,["class","onClick"])):qe("v-if",!0)])],2)],6),t.line?(ie(),he("div",{key:0,class:$(t.classes(t.n("line"),[t.formDisabled||t.disabled,t.n("--line-disabled")],[t.errorMessage,t.n("--line-error")])),style:Be({background:t.errorMessage?void 0:t.blurColor})},[Me("div",{class:$(t.classes(t.n("dot"),[t.isFocus,t.n("--spread")],[t.formDisabled||t.disabled,t.n("--line-disabled")],[t.errorMessage,t.n("--line-error")])),style:Be({background:t.errorMessage?void 0:t.focusColor})},null,6)],6)):qe("v-if",!0),We(s,{"error-message":t.errorMessage},null,8,["error-message"])],2)}var Il=tt({render:eD,name:"VarSelect",components:{VarIcon:Kt,VarMenu:Bs,VarChip:Ba,VarFormDetails:Wn},props:jO,setup(t){var e=de(null),n=de(!1),i=Le(()=>t.multiple),r=Le(()=>t.focusColor),s=de(""),a=de([]),o=de("0px"),l=de(0),{bindForm:u,form:c}=$i(),{length:d,options:h,bindOptions:f}=JI(),{errorMessage:m,validateWithTrigger:v,validate:g,resetValidation:y}=Wi(),S=de(null),b=()=>{var{multiple:ee,modelValue:Q}=t;if(ee){var fe=Q;a.value=fe.map(T)}!ee&&!Es(Q)&&(s.value=T(Q)),!ee&&Es(Q)&&(s.value="")},w=ee=>{rn(()=>{var{validateTrigger:Q,rules:fe,modelValue:Ee}=t;v(Q,ee,fe,Ee)})},E=ee=>{var{value:Q,label:fe}=ee;return Q.value!=null?Q.value:fe.value},T=ee=>{var Q,fe,Ee=h.find(ne=>{var{value:X}=ne;return X.value===ee});return Ee||(Ee=h.find(ne=>{var{label:X}=ne;return X.value===ee})),(Q=(fe=Ee)==null?void 0:fe.label.value)!=null?Q:""},I=()=>{var{hint:ee,modelValue:Q}=t;if(!ee&&!Es(Q))return lp("--placeholder-hidden");if(ee&&(!Es(Q)||n.value))return lp("--placeholder-hint")},_=()=>e.value&&window.getComputedStyle(e.value).width||"0px",R=()=>{var{disabled:ee,readonly:Q,onFocus:fe}=t;c!=null&&c.disabled.value||c!=null&&c.readonly.value||ee||Q||(o.value=_(),l.value=yn(t.offsetY),n.value=!0,ye(fe),w("onFocus"))},L=()=>{var{disabled:ee,readonly:Q,onBlur:fe}=t;c!=null&&c.disabled.value||c!=null&&c.readonly.value||ee||Q||(ye(fe),w("onBlur"))},k=ee=>{var{disabled:Q,readonly:fe,multiple:Ee,onChange:ne}=t;if(!(c!=null&&c.disabled.value||c!=null&&c.readonly.value||Q||fe)){var X=Ee?h.filter(_e=>{var{selected:Ae}=_e;return Ae.value}).map(E):E(ee);ye(t["onUpdate:modelValue"],X),ye(ne,X),w("onChange"),!Ee&&(n.value=!1)}},F=()=>{var{disabled:ee,readonly:Q,multiple:fe,clearable:Ee,onClear:ne}=t;if(!(c!=null&&c.disabled.value||c!=null&&c.readonly.value||ee||Q||!Ee)){var X=fe?[]:void 0;ye(t["onUpdate:modelValue"],X),ye(ne,X),w("onClear")}},G=ee=>{var{disabled:Q,onClick:fe}=t;c!=null&&c.disabled.value||Q||(ye(fe,ee),w("onClick"))},H=ee=>{var{disabled:Q,readonly:fe,modelValue:Ee,onClose:ne}=t;if(!(c!=null&&c.disabled.value||c!=null&&c.readonly.value||Q||fe)){var X=Ee,_e=h.find(ze=>{var{label:Ie}=ze;return Ie.value===ee}),Ae=X.filter(ze=>{var Ie;return ze!==((Ie=_e.value.value)!=null?Ie:_e.label.value)});ye(t["onUpdate:modelValue"],Ae),ye(ne,Ae),w("onClose")}},J=()=>{var{multiple:ee,modelValue:Q}=t;if(ee){var fe=Q;h.forEach(Ee=>Ee.sync(fe.includes(E(Ee))))}else h.forEach(Ee=>Ee.sync(Q===E(Ee)));b()},V=()=>{o.value=_(),l.value=yn(t.offsetY),n.value=!0},re=()=>{n.value=!1},j=()=>g(t.rules,t.modelValue),Z=()=>{ye(t["onUpdate:modelValue"],t.multiple?[]:void 0),y()};Ke(()=>t.multiple,()=>{var{multiple:ee,modelValue:Q}=t;if(ee&&!qt(Q))throw Error("The modelValue must be an array when multiple is true")}),Ke(()=>t.modelValue,J,{deep:!0}),Ke(()=>d.value,J);var z={wrapWidth:Le(()=>o.value),multiple:i,focusColor:r,onSelect:k,reset:Z,validate:j,resetValidation:y};return f(z),ye(u,z),{wrapEl:e,offsetY:l,isFocus:n,errorMessage:m,formDisabled:c==null?void 0:c.disabled,formReadonly:c==null?void 0:c.readonly,label:s,labels:a,menuEl:S,n:lp,classes:KO,computePlaceholderState:I,handleFocus:R,handleBlur:L,handleClear:F,handleClick:G,handleClose:H,reset:Z,validate:j,resetValidation:y,focus:V,blur:re}}});Il.install=function(t){t.component(Il.name,Il)};var tD={loading:{type:Boolean,default:!0},title:{type:Boolean,default:!1},card:{type:Boolean,default:!1},avatar:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},fullscreenZIndex:{type:[Number,String],default:100},titleWidth:{type:[Number,String]},cardHeight:{type:[Number,String]},avatarSize:{type:[Number,String]},rows:{type:[Number,String],default:3},rowsWidth:{type:Array,default:()=>[]}},{n:nD,classes:iD}=Qe("skeleton");function rD(t,e){return ie(),he("div",{class:$(t.classes("var--box",t.n()))},[t.loading?qe("v-if",!0):(ie(),he("div",{key:0,class:$(t.n("data"))},[Ue(t.$slots,"default")],2)),t.loading&&!t.fullscreen?(ie(),he("div",{key:1,class:$(t.n("content"))},[t.card?(ie(),he("div",{key:0,class:$(t.n("card")),style:Be({height:t.toSizeUnit(t.cardHeight)})},[Me("div",{class:$(t.n("--animation"))},null,2)],6)):qe("v-if",!0),t.avatar||t.title||t.toNumber(t.rows)>0?(ie(),he("div",{key:1,class:$(t.n("article"))},[t.avatar?(ie(),he("div",{key:0,class:$(t.n("avatar")),style:Be({width:t.toSizeUnit(t.avatarSize),height:t.toSizeUnit(t.avatarSize)})},[Me("div",{class:$(t.n("--animation"))},null,2)],6)):qe("v-if",!0),t.title||t.toNumber(t.rows)>0?(ie(),he("div",{key:1,class:$(t.n("section"))},[t.title?(ie(),he("div",{key:0,class:$(t.n("title")),style:Be({width:t.toSizeUnit(t.titleWidth)})},[Me("div",{class:$(t.n("--animation"))},null,2)],6)):qe("v-if",!0),(ie(!0),he(At,null,bn(t.toNumber(t.rows),(n,i)=>(ie(),he("div",{class:$(t.n("row")),key:n,style:Be({width:t.toSizeUnit(t.rowsWidth[i])})},[Me("div",{class:$(t.n("--animation"))},null,2)],6))),128))],2)):qe("v-if",!0)],2)):qe("v-if",!0)],2)):qe("v-if",!0),t.loading&&t.fullscreen?(ie(),he("div",{key:2,class:$(t.n("fullscreen")),style:Be({zIndex:t.toNumber(t.fullscreenZIndex)})},[Me("div",{class:$(t.n("--animation"))},null,2)],6)):qe("v-if",!0)],2)}var Ol=tt({render:rD,name:"VarSkeleton",props:tD,setup(){return{n:nD,classes:iD,toSizeUnit:dn,toNumber:Te}}});Ol.install=function(t){t.component(Ol.name,Ol)};function sD(t){return["always","normal","never"].includes(t)}var aD={modelValue:{type:[Number,Array],default:0},step:{type:[Number,String],default:1},range:{type:Boolean,default:!1},labelVisible:{type:String,default:"normal",validator:sD},activeColor:{type:String},trackColor:{type:String},thumbColor:{type:String},labelColor:{type:String},labelTextColor:{type:String},trackHeight:{type:[String,Number]},max:{type:[String,Number],default:100},min:{type:[String,Number],default:0},thumbSize:{type:[String,Number]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},rules:{type:Array},onChange:{type:Function},onStart:{type:Function},onEnd:{type:Function},"onUpdate:modelValue":{type:Function}},{n:oD,classes:lD}=Qe("slider"),cn;(function(t){t.First="1",t.Second="2"})(cn||(cn={}));var uD=["onTouchstart","onTouchmove","onTouchend","onTouchcancel"];function cD(t,e){var n=Je("var-form-details");return ie(),he("div",{class:$(t.n())},[Me("div",{class:$(t.classes(t.n("block"),[t.isDisabled,t.n("--disabled")],[t.errorMessage,t.n("--error")])),ref:"sliderEl",onClick:e[0]||(e[0]=function(){return t.click&&t.click(...arguments)})},[Me("div",{class:$(t.n("track"))},[Me("div",{class:$(t.n("track-background")),style:Be({background:t.trackColor,height:t.multiplySizeUnit(t.trackHeight)})},null,6),Me("div",{class:$(t.n("track-fill")),style:Be(t.getFillStyle)},null,6)],2),(ie(!0),he(At,null,bn(t.thumbList,i=>(ie(),he("div",{class:$(t.n("thumb")),key:i.enumValue,style:Be({left:i.value+"%",zIndex:t.thumbsProps[i.enumValue].active?1:void 0}),onTouchstart:qr(r=>t.start(r,i.enumValue),["stop"]),onTouchmove:qr(r=>t.move(r,i.enumValue),["stop"]),onTouchend:r=>t.end(i.enumValue),onTouchcancel:r=>t.end(i.enumValue)},[Ue(t.$slots,"button",{currentValue:i.text},()=>[Me("div",{class:$(t.n("thumb-block")),style:Be({background:t.thumbColor})},null,6),Me("div",{class:$(t.classes(t.n("thumb-ripple"),[t.thumbsProps[i.enumValue].active,t.n("thumb-ripple--active")])),style:Be({background:t.thumbColor})},null,6),Me("div",{class:$(t.classes(t.n("thumb-label"),[t.showLabel(i.enumValue),t.n("thumb-label--active")])),style:Be({background:t.labelColor,color:t.labelTextColor,height:t.thumbSize===void 0?t.thumbSize:t.multiplySizeUnit(t.thumbSize,2),width:t.thumbSize===void 0?t.thumbSize:t.multiplySizeUnit(t.thumbSize,2)})},[Me("span",null,je(i.text),1)],6)])],46,uD))),128))],2),We(n,{"error-message":t.errorMessage,class:$(t.n("form")),"var-slider-cover":""},null,8,["error-message","class"])],2)}var Dl=tt({render:cD,name:"VarSlider",components:{VarFormDetails:Wn},props:aD,setup(t){var{bindForm:e,form:n}=$i(),{errorMessage:i,validateWithTrigger:r,validate:s,resetValidation:a}=Wi(),o=()=>s(t.rules,t.modelValue),l=()=>({startPosition:0,currentLeft:0,active:!1,percentValue:0}),u=()=>rn(()=>r(["onChange"],"onChange",t.rules,t.modelValue)),c=de(null),d=de(0),h=de(!1),f=tn({[cn.First]:l(),[cn.Second]:l()}),m=Le(()=>Te(t.max)-Te(t.min)),v=Le(()=>d.value/m.value*Te(t.step)),g=Le(()=>{var{modelValue:j,range:Z}=t,z=[];return Z&&qt(j)?z=[{value:E(j[0]),enumValue:cn.First,text:T(j[0])},{value:E(j[1]),enumValue:cn.Second,text:T(j[1])}]:Zn(j)&&(z=[{value:E(j),enumValue:cn.First,text:T(j)}]),z}),y=Le(()=>{var{activeColor:j,range:Z,modelValue:z}=t,ee=Z&&qt(z)?E(Math.min(z[0],z[1])):0,Q=Z&&qt(z)?E(Math.max(z[0],z[1]))-ee:E(z);return{width:Q+"%",left:ee+"%",background:j}}),S=Le(()=>t.disabled||(n==null?void 0:n.disabled.value)),b=Le(()=>t.readonly||(n==null?void 0:n.readonly.value)),w=j=>t.labelVisible==="always"?!0:t.labelVisible==="never"?!1:f[j].active,E=j=>{var{min:Z,max:z}=t;return j<Te(Z)?0:j>Te(z)?100:(j-Te(Z))/m.value*100},T=j=>{if(!Zn(j))return 0;var Z=j;Z<Number(t.min)&&(Z=Number(t.min)),Z>Number(t.max)&&(Z=Number(t.max));var z=parseInt(""+Z,10)===Z;return z?Z:Te(Z.toPrecision(5))},I=(j,Z)=>{var z=[],{step:ee,range:Q,modelValue:fe,onChange:Ee,min:ne}=t,X=Te(ee),_e=Math.round(j/v.value),Ae=_e*X+Te(ne),ze=f[Z].percentValue*X+Te(ne);if(f[Z].percentValue=_e,Q&&qt(fe)&&(z=Z===cn.First?[Ae,fe[1]]:[fe[0],Ae]),ze!==Ae){var Ie=Q?z.map(Ge=>T(Ge)):T(Ae);ye(Ee,Ie),ye(t["onUpdate:modelValue"],Ie),u()}},_=j=>{if(!t.range)return cn.First;var Z=f[cn.First].percentValue*v.value,z=f[cn.Second].percentValue*v.value,ee=Math.abs(j-Z),Q=Math.abs(j-z);return ee<=Q?cn.First:cn.Second},R=(j,Z)=>{d.value||(d.value=c.value.offsetWidth),!(S.value||b.value)&&(ye(t.onStart),h.value=!0,f[Z].startPosition=j.touches[0].clientX)},L=(j,Z)=>{if(!(S.value||b.value||!h.value)){var z=j.touches[0].clientX-f[Z].startPosition+f[Z].currentLeft;f[Z].active=!0,z<=0?z=0:z>=d.value&&(z=d.value),I(z,Z)}},k=j=>{var{range:Z,modelValue:z,onEnd:ee,step:Q,min:fe}=t;if(!(S.value||b.value)){var Ee=[];f[j].currentLeft=f[j].percentValue*v.value,f[j].active=!1;var ne=f[j].percentValue*Te(Q)+Te(fe);Z&&qt(z)&&(Ee=j===cn.First?[ne,z[1]]:[z[0],ne]),ye(ee,Z?Ee:ne),h.value=!1}},F=j=>{if(!(S.value||b.value)&&!j.target.closest(".var-slider__thumb")){var Z=j.clientX-xC(j.currentTarget),z=_(Z);I(Z,z),k(z)}},G=()=>{var j=Te(t.step);return isNaN(j)?(console.warn('[Varlet] Slider: type of prop "step" should be Number'),!1):j<0?(console.warn('[Varlet] Slider: "step" should be > 0'),!1):!0},H=()=>{var{range:j,modelValue:Z}=t;return j&&!qt(Z)?(console.error('[Varlet] Slider: "modelValue" should be an Array'),!1):!j&&qt(Z)?(console.error('[Varlet] Slider: "modelValue" should be a Number'),!1):j&&qt(Z)&&Z.length<2?(console.error('[Varlet] Slider: "modelValue" should have two value'),!1):!0},J=function(j,Z){j===void 0&&(j=t.modelValue),Z===void 0&&(Z=Te(t.step));var z=ee=>{var{min:Q,max:fe}=t;return ee<Te(Q)?0:ee>Te(fe)?m.value/Z:(ee-Te(Q))/Z};t.range&&qt(j)?(f[cn.First].percentValue=z(j[0]),f[cn.First].currentLeft=f[cn.First].percentValue*v.value,f[cn.Second].percentValue=z(j[1]),f[cn.Second].currentLeft=f[cn.Second].percentValue*v.value):Zn(j)&&(f[cn.First].currentLeft=z(j)*v.value)},V=()=>{var j=t.range?[0,0]:0;ye(t["onUpdate:modelValue"],j),a()},re={reset:V,validate:o,resetValidation:a};return ye(e,re),Ke([()=>t.modelValue,()=>t.step],j=>{var[Z,z]=j;!G()||!H()||h.value||J(Z,Te(z))}),Ke(d,()=>J()),fn(()=>{!G()||!H()||(d.value=c.value.offsetWidth)}),{n:oD,classes:lD,Thumbs:cn,sliderEl:c,getFillStyle:y,isDisabled:S,errorMessage:i,thumbsProps:f,thumbList:g,multiplySizeUnit:ii,toNumber:Te,showLabel:w,start:R,move:L,end:k,click:F}}});Dl.install=function(t){t.component(Dl.name,Dl)};function Um(){return Um=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Um.apply(this,arguments)}function dD(t){var e=["top","center","bottom"];return e.includes(t)}function hD(t){return yg.includes(t)}var Y1={type:{type:String,validator:hD},position:{type:String,default:"top",validator:dD},content:{type:String},contentClass:{type:String},duration:{type:Number,default:3e3},vertical:{type:Boolean,default:!1},loadingType:ui(xs,"type"),loadingSize:ui(xs,"size"),loadingRadius:ui(xs,"radius"),loadingColor:Um({},ui(xs,"color"),{default:"currentColor"}),lockScroll:{type:Boolean,default:!1},show:{type:Boolean,default:!1},teleport:{type:String,default:"body"},forbidClick:{type:Boolean,default:!1},onOpen:{type:Function,default:()=>{}},onOpened:{type:Function,default:()=>{}},onClose:{type:Function,default:()=>{}},onClosed:{type:Function,default:()=>{}},"onUpdate:show":{type:Function},_update:{type:String}},{n:fD,classes:pD}=Qe("snackbar"),mD={success:"checkbox-marked-circle",warning:"warning",info:"information",error:"error",loading:""};function vD(t,e){var n=Je("var-icon"),i=Je("var-loading");return Zt((ie(),he("div",{class:$(t.n()),style:Be({pointerEvents:t.isForbidClick?"auto":"none",zIndex:t.zIndex})},[Me("div",{class:$(t.classes(t.n("wrapper"),t.n("wrapper-"+t.position),"var-elevation--4",[t.vertical,t.n("vertical")],[t.type&&t.SNACKBAR_TYPE.includes(t.type),t.n("wrapper-"+t.type)])),style:Be({zIndex:t.zIndex})},[Me("div",{class:$([t.n("content"),t.contentClass])},[Ue(t.$slots,"default",{},()=>[Rt(je(t.content),1)])],2),Me("div",{class:$(t.n("action"))},[t.iconName?(ie(),Mt(n,{key:0,name:t.iconName},null,8,["name"])):qe("v-if",!0),t.type==="loading"?(ie(),Mt(i,{key:1,type:t.loadingType,size:t.loadingSize,color:t.loadingColor,radius:t.loadingRadius},null,8,["type","size","color","radius"])):qe("v-if",!0),Ue(t.$slots,"action")],2)],6)],6)),[[Uc,t.show]])}var q1=tt({render:vD,name:"VarSnackbarCore",components:{VarLoading:yr,VarIcon:Kt},props:Y1,setup(t){var e=de(null),{zIndex:n}=ff(()=>t.show,1);sg(()=>t.show,()=>t.lockScroll);var i=Le(()=>t.type==="loading"||t.forbidClick),r=Le(()=>t.type?mD[t.type]:""),s=()=>{e.value=setTimeout(()=>{var a;t.type!=="loading"&&((a=t["onUpdate:show"])==null||a.call(t,!1))},t.duration)};return Ke(()=>t.show,a=>{a?(t.onOpen==null||t.onOpen(),s()):a===!1&&(clearTimeout(e.value),t.onClose==null||t.onClose())}),Ke(()=>t._update,()=>{clearTimeout(e.value),s()}),fn(()=>{t.show&&(t.onOpen==null||t.onOpen(),s())}),{SNACKBAR_TYPE:yg,n:fD,classes:pD,zIndex:n,iconName:r,isForbidClick:i}}}),{n:gD}=Qe("snackbar");function yD(t,e){var n=Je("var-snackbar-core");return ie(),Mt(sf,{to:t.teleport,disabled:t.disabled},[We(Mn,{name:t.n()+"-fade",onAfterEnter:t.onOpened,onAfterLeave:t.onClosed},{default:pt(()=>[We(n,ln(t.$props,{class:t.n("transition")}),{action:pt(()=>[Ue(t.$slots,"action")]),default:pt(()=>[Ue(t.$slots,"default",{},()=>[Rt(je(t.content),1)])]),_:3},16,["class"])]),_:3},8,["name","onAfterEnter","onAfterLeave"])],8,["to","disabled"])}var Nl=tt({render:yD,name:"VarSnackbar",components:{VarSnackbarCore:q1},props:Y1,setup(){var{disabled:t}=G_();return{n:gD,disabled:t}}});function pc(){return pc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},pc.apply(this,arguments)}function bD(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!ja(t)}var yg=["loading","success","warning","info","error"],By=0,Bm=!1,zm,nu=!1,zi=tn([]),wD={type:void 0,content:"",position:"top",duration:3e3,vertical:!1,contentClass:void 0,loadingType:"circle",loadingSize:"normal",lockScroll:!1,teleport:"body",forbidClick:!1,onOpen:()=>{},onOpened:()=>{},onClose:()=>{},onClosed:()=>{}},_D={name:"var-snackbar-fade",tag:"div",class:"var-transition-group"},SD={setup(){return()=>{var t=zi.map(n=>{var{id:i,reactiveSnackOptions:r,_update:s}=n,a=document.querySelector(".var-transition-group");r.forbidClick||r.type==="loading"?a.classList.add("var-pointer-auto"):a.classList.remove("var-pointer-auto"),nu&&(r.position="top");var o=nu?"relative":"absolute",l=pc({position:o},CD(r.position));return We(q1,ln(r,{key:i,style:l,"data-id":i,_update:s,show:r.show,"onUpdate:show":u=>r.show=u}),null)}),e=Ui.zIndex;return We(nC,ln(_D,{style:{zIndex:e},onAfterEnter:MD,onAfterLeave:TD}),bD(t)?t:{default:()=>[t]})}}},io=function(t){var e=pi(t)||Zn(t)?{content:String(t)}:t,n=tn(pc({},wD,e));n.show=!0,Bm||(Bm=!0,zm=Bc(SD).unmountInstance);var{length:i}=zi,r={id:By++,reactiveSnackOptions:n};if(i===0||nu)ED(r);else{var s="update-"+By;xD(n,s)}return{clear(){!nu&&zi.length?zi[0].reactiveSnackOptions.show=!1:n.show=!1}}};yg.forEach(t=>{io[t]=e=>(tg(e)?e.type=t:e={content:e,type:t},io(e))});io.install=function(t){t.component(Nl.name,Nl)};io.allowMultiple=function(t){t===void 0&&(t=!1),t!==nu&&(zi.forEach(e=>{e.reactiveSnackOptions.show=!1}),nu=t)};io.clear=function(){zi.forEach(t=>{t.reactiveSnackOptions.show=!1})};io.Component=Nl;function MD(t){var e=t.getAttribute("data-id"),n=zi.find(i=>i.id===Te(e));n&&(n.reactiveSnackOptions.onOpened==null||n.reactiveSnackOptions.onOpened())}function TD(t){t.parentElement&&t.parentElement.classList.remove("var-pointer-auto");var e=t.getAttribute("data-id"),n=zi.find(r=>r.id===Te(e));n&&(n.animationEnd=!0,n.reactiveSnackOptions.onClosed==null||n.reactiveSnackOptions.onClosed());var i=zi.every(r=>r.animationEnd);i&&(zm==null||zm(),zi=tn([]),Bm=!1)}function ED(t){zi.push(t)}function xD(t,e){var[n]=zi;n.reactiveSnackOptions=pc({},n.reactiveSnackOptions,t),n._update=e}function CD(t){return t===void 0&&(t="top"),t==="bottom"?{[t]:"5%"}:{top:t==="top"?"5%":"45%"}}Nl.install=function(t){t.component(Nl.name,Nl)};var Vm=io,Z1=t=>["mini","small","normal","large"].includes(t),AD=t=>Z1(t)||qt(t)||Zn(t)||pi(t),RD=t=>["start","end","center","space-around","space-between"].includes(t),PD={align:{type:String},size:{type:[String,Number,Array],default:"normal",validator:AD},wrap:{type:Boolean,default:!0},direction:{type:String,default:"row"},justify:{type:String,default:"start",validator:RD},inline:{type:Boolean,default:!1}},{n:zy,classes:LD}=Qe("space"),ID={mini:[4,4],small:[6,6],normal:[8,12],large:[12,20]},kl=tt({name:"VarSpace",props:PD,setup(t,e){var{slots:n}=e,i=(s,a)=>a?ID[s]:qt(s)?s.map(yn):[yn(s),yn(s)],r=s=>s==="start"||s==="end"?"flex-"+s:s;return()=>{var s,{inline:a,justify:o,align:l,wrap:u,direction:c,size:d}=t,h=(s=ye(n.default))!=null?s:[],f=Z1(d),[m,v]=i(d,f),g=b=>{var w=[];return b.forEach(E=>{if(E.type!==Ti){if(E.type===At&&qt(E.children)){E.children.forEach(T=>{w.push(T)});return}w.push(E)}}),w};h=g(h);var y=h.length-1,S=h.map((b,w)=>{var E=c==="row"?void 0:"100%",T="0";return c==="row"&&(o==="start"||o==="center"||o==="end"?w!==y?T=m/2+"px "+v+"px "+m/2+"px 0":T=m/2+"px 0":o==="space-around"?T=m/2+"px "+v/2+"px":o==="space-between"&&(w===0?T=m/2+"px "+v/2+"px "+m/2+"px 0":w===y?T=m/2+"px 0 "+m/2+"px "+v/2+"px":T=m/2+"px "+v/2+"px")),c==="column"&&w!==y&&(T="0 0 "+m+"px 0"),We("div",{style:{margin:T,width:E}},[b])});return We("div",{class:LD(zy(),"var--box",[a,zy("--inline")]),style:{flexDirection:c,justifyContent:r(o),alignItems:r(l),flexWrap:u?"wrap":"nowrap",margin:c==="row"?"-"+m/2+"px 0":void 0}},[S])}}});kl.install=function(t){t.component(kl.name,kl)};var OD={activeIcon:{type:String,default:"check"},currentIcon:{type:String},inactiveIcon:{type:String}},j1=Symbol("STEPS_BIND_STEP_KEY"),K1=Symbol("STEPS_COUNT_STEP_KEY");function DD(){var{bindChildren:t,childProviders:e}=Hi(j1),{length:n}=or(K1);return{length:n,step:e,bindStep:t}}function ND(){var{parentProvider:t,bindParent:e}=Gi(j1),{index:n}=lr(K1);if(!t||!e||!n)throw Error("[Varlet] Steps: <step/> must in <steps>");return{index:n,steps:t,bindSteps:e}}var{n:kD,classes:FD}=Qe("step"),UD={key:3};function BD(t,e){var n=Je("var-icon");return ie(),he("div",{class:$(t.n())},[Me("div",{class:$(t.n(t.direction))},[Me("div",{class:$(t.n(t.direction+"-main")),ref:t.getRef},[Me("div",{class:$(t.classes(t.n(t.direction+"-tag"),[t.isActive||t.isCurrent,t.n(t.direction+"-tag--active")])),style:Be({backgroundColor:t.isActive||t.isCurrent?t.activeColor:t.inactiveColor}),onClick:e[0]||(e[0]=function(){return t.click&&t.click(...arguments)})},[t.isActive?(ie(),Mt(n,{key:0,class:$(t.n("icon")),"var-step-cover":"",name:t.activeIcon},null,8,["class","name"])):t.isCurrent&&t.currentIcon?(ie(),Mt(n,{key:1,class:$(t.n("icon")),"var-step-cover":"",name:t.currentIcon},null,8,["class","name"])):t.inactiveIcon?(ie(),Mt(n,{key:2,class:$(t.n("icon")),"var-step-cover":"",name:t.inactiveIcon},null,8,["class","name"])):(ie(),he("span",UD,je(t.index+1),1))],6),Me("div",{class:$(t.classes(t.n(t.direction+"-content"),[t.isActive||t.isCurrent,t.n(t.direction+"-content--active")])),onClick:e[1]||(e[1]=function(){return t.click&&t.click(...arguments)})},[Ue(t.$slots,"default")],2)],2),t.isLastChild?qe("v-if",!0):(ie(),he("div",{key:0,class:$(t.n(t.direction+"-line")),style:Be({margin:t.lineMargin})},null,6))],2)],2)}var Fl=tt({render:BD,name:"VarStep",components:{VarIcon:Kt},props:OD,setup(){var t=de(null),e=de(""),n=de(!1),{index:i,steps:r,bindSteps:s}=ND(),{active:a,length:o,activeColor:l,inactiveColor:u,direction:c,clickStep:d}=r,h=Le(()=>a.value===i.value),f=Le(()=>i.value!==-1&&a.value>i.value),m={index:i},v=()=>d(i.value),g=y=>{c.value==="horizontal"&&(t.value=y)};return s(m),Ke(o,y=>{if(n.value=y-1===i.value,t.value){var S=t.value.offsetWidth/2-14;e.value="0 -"+S+"px"}}),{n:kD,classes:FD,main:t,index:i,isActive:f,isCurrent:h,direction:c,lineMargin:e,activeColor:l,inactiveColor:u,isLastChild:n,click:v,getRef:g}}});Fl.install=function(t){t.component(Fl.name,Fl)};function zD(t){return["horizontal","vertical"].includes(t)}var VD={active:{type:[String,Number],default:0},direction:{type:String,default:"horizontal",validator:zD},activeColor:{type:String},inactiveColor:{type:String},onClickStep:{type:Function}},{n:HD}=Qe("steps");function GD(t,e){return ie(),he("div",{class:$(t.n()),style:Be({flexDirection:t.direction==="horizontal"?"row":"column"})},[Ue(t.$slots,"default")],6)}var Ul=tt({render:GD,name:"VarSteps",props:VD,setup(t){var e=Le(()=>t.active),n=Le(()=>t.activeColor),i=Le(()=>t.inactiveColor),r=Le(()=>t.direction),{length:s,bindStep:a}=DD(),o=u=>{ye(t.onClickStep,u)},l={active:e,length:s,direction:r,activeColor:n,inactiveColor:i,clickStep:o};return a(l),{n:HD}}});Ul.install=function(t){t.component(Ul.name,Ul)};var{n:WD}=Qe("style-provider"),Bl=tt({name:"VarStyleProvider",props:{styleVars:{type:Object,default:()=>({})},tag:{type:String,default:"div"}},setup(t,e){var{slots:n}=e;return()=>Fc(t.tag,{class:WD(),style:V_(t.styleVars)},ye(n.default))}}),up=[];function mc(t){up.forEach(n=>document.documentElement.style.removeProperty(n)),up.length=0;var e=V_(t!=null?t:{});Object.entries(e).forEach(n=>{var[i,r]=n;document.documentElement.style.setProperty(i,r),up.push(i)})}mc.Component=Bl;Bl.install=function(t){t.component(Bl.name,Bl)};mc.install=function(t){t.component(Bl.name,Bl)};var $D={modelValue:{default:!1},activeValue:{default:!0},inactiveValue:{default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},color:{type:String},loadingColor:{type:String},closeColor:{type:String},size:{type:[String,Number]},rules:{type:Array},ripple:{type:Boolean,default:!0},onClick:{type:Function},onChange:{type:Function},"onUpdate:modelValue":{type:Function}},{n:XD,classes:YD}=Qe("switch");function qD(t,e){var n=Je("var-loading"),i=Je("var-form-details"),r=jn("ripple");return ie(),he("div",{class:$(t.n())},[Me("div",{class:$(t.classes(t.n("block"),[t.disabled||t.formDisabled,t.n("--disabled")])),onClick:e[0]||(e[0]=function(){return t.switchActive&&t.switchActive(...arguments)}),style:Be(t.styleComputed.switch)},[Me("div",{style:Be(t.styleComputed.track),class:$(t.classes(t.n("track"),[t.modelValue===t.activeValue,t.n("track--active")],[t.errorMessage,t.n("track--error")]))},null,6),Zt((ie(),he("div",{class:$(t.classes(t.n("ripple"),[t.modelValue===t.activeValue,t.n("ripple--active")])),style:Be(t.styleComputed.ripple)},[Me("div",{style:Be(t.styleComputed.handle),class:$(t.classes(t.n("handle"),"var-elevation--2",[t.modelValue===t.activeValue,t.n("handle--active")],[t.errorMessage,t.n("handle--error")]))},[t.loading?(ie(),Mt(n,{key:0,radius:t.radius,color:"currentColor"},null,8,["radius"])):qe("v-if",!0)],6)],6)),[[r,{disabled:!t.ripple||t.disabled||t.loading||t.formDisabled}]])],6),We(i,{"error-message":t.errorMessage},null,8,["error-message"])],2)}var zl=tt({render:qD,name:"VarSwitch",components:{VarLoading:yr,VarFormDetails:Wn},directives:{Ripple:kn},props:$D,setup(t){var{bindForm:e,form:n}=$i(),{errorMessage:i,validateWithTrigger:r,validate:s,resetValidation:a}=Wi(),o=()=>s(t.rules,t.modelValue),l=()=>rn(()=>r(["onChange"],"onChange",t.rules,t.modelValue)),u=Le(()=>{var{size:m,modelValue:v,color:g,closeColor:y,loadingColor:S,activeValue:b}=t;return{handle:{width:ii(m),height:ii(m),backgroundColor:v===b?g:y,color:S},ripple:{left:v===b?ii(m,.5):"-"+ii(m,.5),color:v===b?g:y||"#999",width:ii(m,2),height:ii(m,2)},track:{height:ii(m,.72),width:ii(m,1.9),borderRadius:ii(m,2/3),filter:v===b||i!=null&&i.value?void 0:"brightness(.6)",backgroundColor:v===b?g:y},switch:{height:ii(m,1.2),width:ii(m,2)}}}),c=Le(()=>{var{size:m="5.333vw"}=t;return ii(m,.4)}),d=m=>{var{onClick:v,onChange:g,disabled:y,loading:S,readonly:b,modelValue:w,activeValue:E,inactiveValue:T,"onUpdate:modelValue":I}=t;if(ye(v,m),!(y||S||b||n!=null&&n.disabled.value||n!=null&&n.readonly.value)){var _=w===E?T:E;ye(g,_),ye(I,_),l()}},h=()=>{ye(t["onUpdate:modelValue"],t.inactiveValue),a()},f={reset:h,validate:o,resetValidation:a};return ye(e,f),{n:XD,classes:YD,switchActive:d,radius:c,styleComputed:u,errorMessage:i,formDisabled:n==null?void 0:n.disabled,formReadonly:n==null?void 0:n.readonly}}});zl.install=function(t){t.component(zl.name,zl)};var ZD={name:{type:[String,Number]},disabled:{type:Boolean,default:!1},onClick:{type:Function}},J1=Symbol("TABS_BIND_TAB_KEY"),Q1=Symbol("TABS_COUNT_TAB_KEY");function jD(){var{childProviders:t,bindChildren:e}=Hi(J1),{length:n}=or(Q1);return{length:n,tabList:t,bindTabList:e}}function KD(){var{parentProvider:t,bindParent:e}=Gi(J1),{index:n}=lr(Q1);if(!t||!e||!n)throw Error("<var-tab/> must in <var-tabs/>");return{index:n,tabs:t,bindTabs:e}}var{n:JD,classes:QD}=Qe("tab");function e3(t,e){var n=jn("ripple");return Zt((ie(),he("div",{class:$(t.classes(t.n(),"var--box",t.computeColorClass(),t.n("--"+t.itemDirection))),ref:"tabEl",style:Be({color:t.computeColorStyle()}),onClick:e[0]||(e[0]=function(){return t.handleClick&&t.handleClick(...arguments)})},[Ue(t.$slots,"default")],6)),[[n,{disabled:t.disabled}]])}var Vl=tt({render:e3,name:"VarTab",directives:{Ripple:kn},props:ZD,setup(t){var e=de(null),n=Le(()=>t.name),i=Le(()=>t.disabled),r=Le(()=>e.value),{index:s,tabs:a,bindTabs:o}=KD(),{onTabClick:l,active:u,activeColor:c,inactiveColor:d,disabledColor:h,itemDirection:f,resize:m}=a,v={name:n,index:s,disabled:i,element:r};o(v);var g=()=>{var{disabled:b,name:w}=t;return b?h.value:u.value===w||u.value===(s==null?void 0:s.value)?c.value:d.value},y=()=>{var{disabled:b,name:w}=t;return b?"var-tab--disabled":u.value===w||u.value===(s==null?void 0:s.value)?"var-tab--active":"var-tab--inactive"},S=b=>{var{disabled:w,name:E,onClick:T}=t;w||(T==null||T(E!=null?E:s.value,b),l(v))};return Ke(()=>t.name,m),Ke(()=>t.disabled,m),{n:JD,classes:QD,tabEl:e,active:u,activeColor:c,inactiveColor:d,itemDirection:f,computeColorStyle:g,computeColorClass:y,handleClick:S}}});Vl.install=function(t){t.component(Vl.name,Vl)};var eS=Symbol("TABS_ITEMS_BIND_TAB_ITEM_KEY"),tS=Symbol("TABS_ITEMS_COUNT_TAB_ITEM_KEY");function t3(){var{bindChildren:t,childProviders:e}=Hi(eS),{length:n}=or(tS);return{length:n,tabItemList:e,bindTabItem:t}}function n3(){var{parentProvider:t,bindParent:e}=Gi(eS),{index:n}=lr(tS);if(!t||!e||!n)throw Error("<var-tab-item/> must in <var-tabs-items/>");return{index:n,tabsItems:t,bindTabsItems:e}}var i3={name:{type:[String,Number]}},{n:r3,classes:s3}=Qe("tab-item");function a3(t,e){var n=Je("var-swipe-item");return ie(),Mt(n,{class:$(t.classes(t.n(),[!t.current,t.n("--inactive")])),"var-tab-item-cover":""},{default:pt(()=>[t.initSlot?Ue(t.$slots,"default",{key:0}):qe("v-if",!0)]),_:3},8,["class"])}var Hl=tt({render:a3,name:"VarTabItem",components:{VarSwipeItem:Ns},props:i3,setup(t){var e=de(!1),n=de(!1),i=Le(()=>t.name),{index:r,bindTabsItems:s}=n3(),a=l=>{!n.value&&l&&(n.value=!0),e.value=l},o={index:r,name:i,setCurrent:a};return s(o),{n:r3,classes:s3,current:e,initSlot:n}}});Hl.install=function(t){t.component(Hl.name,Hl)};var{n:o3,classes:l3}=Qe("table");function u3(t,e){return ie(),he("div",{class:$(t.classes(t.n(),"var-elevation--1 var--box"))},[Me("div",{class:$(t.n("main"))},[Me("table",{class:$(t.n("table")),style:Be({width:t.toSizeUnit(t.fullWidth)})},[Ue(t.$slots,"default")],6)],2),t.$slots.footer?(ie(),he("div",{key:0,class:$(t.n("footer"))},[Ue(t.$slots,"footer")],2)):qe("v-if",!0)],2)}var Gl=tt({render:u3,name:"VarTable",props:{fullWidth:{type:[Number,String],default:"100%"}},setup(){return{toSizeUnit:dn,n:o3,classes:l3}}});Gl.install=function(t){t.component(Gl.name,Gl)};function Vy(t){return["horizontal","vertical"].includes(t)}var c3={active:{type:[String,Number],default:0},layoutDirection:{type:String,default:"horizontal",validator:Vy},itemDirection:{type:String,default:"horizontal",validator:Vy},fixedBottom:{type:Boolean,default:!1},activeColor:{type:String},inactiveColor:{type:String},disabledColor:{type:String},color:{type:String},indicatorColor:{type:String},indicatorSize:{type:[String,Number]},elevation:{type:Boolean,default:!1},sticky:{type:Boolean,default:!1},safeArea:{type:Boolean,default:!1},offsetTop:ui(D1,"offsetTop"),onClick:{type:Function},onChange:{type:Function},"onUpdate:active":{type:Function}};function Hy(t,e,n,i,r,s,a){try{var o=t[s](a),l=o.value}catch(u){n(u);return}o.done?e(l):Promise.resolve(l).then(i,r)}function d3(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function a(l){Hy(s,i,r,a,o,"next",l)}function o(l){Hy(s,i,r,a,o,"throw",l)}a(void 0)})}}var{n:h3,classes:f3}=Qe("tabs");function p3(t,e){return ie(),Mt(rf(t.sticky?"var-sticky":t.Transition),{"offset-top":t.sticky?t.offsetTop:null},{default:pt(()=>[Me("div",ln({class:t.classes(t.n(),"var--box",t.n("--item-"+t.itemDirection),t.n("--layout-"+t.layoutDirection+"-padding"),[t.elevation,"var-elevation--4"],[t.fixedBottom,t.n("--fixed-bottom")],[t.safeArea,t.n("--safe-area")]),style:{background:t.color}},t.$attrs),[Me("div",{ref:"scrollerEl",class:$(t.classes(t.n("tab-wrap"),[t.scrollable,t.n("--layout-"+t.layoutDirection+"-scrollable")],t.n("--layout-"+t.layoutDirection)))},[Ue(t.$slots,"default"),Me("div",{class:$(t.classes(t.n("indicator"),t.n("--layout-"+t.layoutDirection+"-indicator"))),style:Be({width:t.layoutDirection==="horizontal"?t.indicatorWidth:t.toSizeUnit(t.indicatorSize),height:t.layoutDirection==="horizontal"?t.toSizeUnit(t.indicatorSize):t.indicatorHeight,transform:t.layoutDirection==="horizontal"?"translateX("+t.indicatorX+")":"translateY("+t.indicatorY+")",background:t.indicatorColor||t.activeColor})},null,6)],2)],16)]),_:3},8,["offset-top"])}var Wl=tt({render:p3,name:"VarTabs",components:{VarSticky:ks},inheritAttrs:!1,props:c3,setup(t){var e=de("0px"),n=de("0px"),i=de("0px"),r=de("0px"),s=de(!1),a=de(null),o=Le(()=>t.active),l=Le(()=>t.activeColor),u=Le(()=>t.inactiveColor),c=Le(()=>t.disabledColor),d=Le(()=>t.itemDirection),{tabList:h,bindTabList:f,length:m}=jD(),v=_=>{var R,L=(R=_.name.value)!=null?R:_.index.value,{active:k,onChange:F,onClick:G}=t;ye(t["onUpdate:active"],L),ye(G,L),L!==k&&ye(F,L)},g=()=>h.find(_=>{var{name:R}=_;return t.active===R.value}),y=_=>h.find(R=>{var{index:L}=R;return(_!=null?_:t.active)===L.value}),S=()=>{if(m.value!==0){var{active:_}=t;if(Zn(_)){var R=_>m.value-1?m.value-1:0;return ye(t["onUpdate:active"],R),y(R)}}},b=()=>{s.value=h.length>=5},w=_=>{var{element:R}=_,L=R.value;t.layoutDirection==="horizontal"?(e.value=(L==null?void 0:L.offsetWidth)+"px",i.value=(L==null?void 0:L.offsetLeft)+"px"):(n.value=(L==null?void 0:L.offsetHeight)+"px",r.value=(L==null?void 0:L.offsetTop)+"px")},E=_=>{var{element:R}=_;if(!!s.value){var L=a.value,k=R.value;if(t.layoutDirection==="horizontal"){var F=k.offsetLeft+k.offsetWidth/2-L.offsetWidth/2;Rh(L,{left:F,animation:q0})}else{var G=k.offsetTop+k.offsetHeight/2-L.offsetHeight/2;Rh(L,{top:G,animation:q0})}}},T=()=>{var _=g()||y()||S();!_||_.disabled.value||(b(),w(_),E(_))},I={active:o,activeColor:l,inactiveColor:u,disabledColor:c,itemDirection:d,resize:T,onTabClick:v};return f(I),Ke(()=>m.value,d3(function*(){yield Mr(),T()})),Ke(()=>t.active,T),fn(()=>window.addEventListener("resize",T)),Cr(()=>window.removeEventListener("resize",T)),{indicatorWidth:e,indicatorHeight:n,indicatorX:i,indicatorY:r,scrollable:s,scrollerEl:a,Transition:Mn,toSizeUnit:dn,n:h3,classes:f3,resize:T}}});Wl.install=function(t){t.component(Wl.name,Wl)};var m3={active:{type:[String,Number],default:0},canSwipe:{type:Boolean,default:!0},loop:{type:Boolean,default:!1},"onUpdate:active":{type:Function}};function Gy(t,e,n,i,r,s,a){try{var o=t[s](a),l=o.value}catch(u){n(u);return}o.done?e(l):Promise.resolve(l).then(i,r)}function v3(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function a(l){Gy(s,i,r,a,o,"next",l)}function o(l){Gy(s,i,r,a,o,"throw",l)}a(void 0)})}}var{n:g3}=Qe("tabs-items");function y3(t,e){var n=Je("var-swipe");return ie(),Mt(n,{class:$(t.n()),ref:"swipe",loop:t.loop,touchable:t.canSwipe,indicator:!1,onChange:t.handleSwipeChange},{default:pt(()=>[Ue(t.$slots,"default")]),_:3},8,["class","loop","touchable","onChange"])}var $l=tt({render:y3,name:"VarTabsItems",components:{VarSwipe:Ds},props:m3,setup(t){var e=de(null),{tabItemList:n,bindTabItem:i,length:r}=t3(),s=h=>n.find(f=>{var{name:m}=f;return h===m.value}),a=h=>n.find(f=>{var{index:m}=f;return h===m.value}),o=h=>s(h)||a(h),l=h=>{var f,m=o(h);!m||(n.forEach(v=>{var{setCurrent:g}=v;return g(!1)}),m.setCurrent(!0),(f=e.value)==null||f.to(m.index.value))},u=h=>{var f,m=n.find(g=>{var{index:y}=g;return y.value===h}),v=(f=m.name.value)!=null?f:m.index.value;ye(t["onUpdate:active"],v)},c=()=>e.value,d={};return i(d),Ke(()=>t.active,l),Ke(()=>r.value,v3(function*(){yield Mr(),l(t.active)})),{swipe:e,n:g3,handleSwipeChange:u,getSwipe:c}}});$l.install=function(t){t.component($l.name,$l)};var b3={"--action-sheet-background":"#1e1e1e","--action-sheet-title-color":"#aaa","--action-sheet-action-item-color":"#fff"},w3={"--badge-default-color":"#555"},_3={"--button-default-color":"#303030"},S3={"--card-background":"#303030","--card-title-color":"#ffffff","--card-subtitle-color":"#aaaaaa","--card-description-color":"#aaaaaa"},M3={"--cell-description-color":"#aaa","--cell-border-color":"#545454"},T3={"--checkbox-unchecked-color":"#fff"},E3={"--chip-default-color":"#555"},x3={"--collapse-background":"#303030","--collapse-text-color":"#fff","--collapse-border-top":"thin solid rgba(255, 255, 255, 0.12)"},C3={"--date-picker-main-color":"#fff","--date-picker-body-background-color":"#303030","--day-picker-head-item-color":"#aaaaaa"},A3={"--dialog-background":"#1e1e1e","--dialog-message-color":"#bbb"},R3={"--divider-color":"rgba(255, 255, 255, 0.2)","--divider-text-color":"#aaa"},P3={"--input-input-text-color":"#fff","--input-blur-color":"rgb(255, 255, 255, .7)"},L3={"--pagination-list-bg-color":"#303030","--pagination-hover-bg-color":"#25293a","--pagination-list-active-bg-color":"#25293a","--pagination-list-active-color":"#4a7afe","--pagination-item-background":"#303030"},I3={"--picker-background":"#1e1e1e","--picker-cancel-button-text-color":"#aaa","--picker-picked-border":"1px solid rgba(255, 255, 255, 0.12)","--picker-mask-background-image":"linear-gradient(180deg, hsla(0, 0%, 12%, 0.9), hsla(0, 0%, 12%, 0.4)), linear-gradient(0deg, hsla(0, 0%, 12%, 0.9), hsla(0, 0%, 12%, 0.4))"},O3={"--popup-content-background-color":"#1e1e1e"},D3={"--pull-refresh-background":"#303030"},N3={"--radio-unchecked-color":"#fff"},k3={"--select-select-text-color":"#fff","--select-blur-color":"rgb(255, 255, 255, .7)","--select-scroller-background":"#303030"},F3={"--skeleton-card-background-color":"hsla(0,0%,100%,.12)","--skeleton-animation-background":`linear-gradient(
        90deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.05),hsla(0,0%,100%,0))
      `,"--skeleton-avatar-background-color":"hsla(0,0%,100%,.12)","--skeleton-title-background-color":"hsla(0,0%,100%,.12)"},U3={"--step-content-color":"rgba(255, 255, 255, .38)","--step-content-active-color":"#fff","--step-line-background":"#fff"},B3={"--switch-track-background":"#727272","--switch-handle-background":"#727272"},z3={"--tab-inactive-color":"rgba(255, 255, 255, .65)"},V3={"--table-background":"#303030","--table-thead-th-text-color":"rgba(255, 255, 255, 0.6)","--table-tbody-tr-hover-background":"#4c4b4b","--table-thead-border-bottom":"thin solid rgba(255, 255, 255, 0.12)","--table-tbody-tr-border-bottom":"thin solid rgba(255, 255, 255, 0.12)"},H3={"--time-picker-clock-container-background":"#545454","--time-picker-body-background":"#303030","--time-picker-clock-item-disable-color":"#aaaaaa"},G3={"--uploader-action-background":"#303030","--uploader-action-icon-color":"#fff","--uploader-file-name-background":"#303030","--uploader-file-name-color":"#aaa","--uploader-file-cover-background":"#303030"},W3={"--tabs-background":"#1e1e1e"},$3={"--app-bar-color":"#272727"},X3={"--bottom-navigation-background-color":"#272727","--bottom-navigation-border-color":"#444"},Y3={"--bottom-navigation-item-active-background-color":"#272727"},q3={"--menu-background-color":"#272727"};function Hm(){return Hm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Hm.apply(this,arguments)}var Z3=Hm({"--color-body":"#1e1e1e","--color-text":"#fff","--color-primary":"#4a7afe","--color-info":"#10afef","--color-success":"#10c48f","--color-warning":"#ff8800","--color-danger":"#ef5350","--color-disabled":"#404040","--color-text-disabled":"#757575"},_3,M3,S3,H3,C3,F3,W3,z3,O3,A3,b3,E3,w3,G3,x3,D3,B3,U3,L3,V3,P3,k3,N3,T3,R3,I3,$3,X3,Y3,q3),j3={dark:Z3},Gm=j3,Ni=["12","1","2","3","4","5","6","7","8","9","10","11"],ri=["00","13","14","15","16","17","18","19","20","21","22","23"],Wy=["00","05","10","15","20","25","30","35","40","45","50","55"];function K3(t){return["ampm","24hr"].includes(t)}var J3={modelValue:{type:String},elevation:{type:Boolean,default:!1},color:{type:String},headerColor:{type:String},format:{type:String,default:"ampm",validator:K3},allowedTime:{type:Object},min:{type:String},max:{type:String},useSeconds:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},"onUpdate:modelValue":{type:Function},onChange:{type:Function}},nS=(t,e)=>t==="24hr"||e==="am",bg=(t,e,n)=>{var i=Ni.findIndex(s=>Te(s)===Te(n)),r=nS(t,e)?n:ri[i];return{hourStr:r,hourNum:Te(r)}},ci=t=>{var[e,n,i]=t.split(":");return{hour:Te(e),minute:Te(n),second:Te(i)}},iS=t=>{var e,n,{time:i,format:r,ampm:s,hour:a,max:o,min:l,disableHour:u}=t,{hourStr:c,hourNum:d}=bg(r,s,a),h=!1,f=!1;if(u.includes(c))return!0;if(o&&!l){var{hour:m,minute:v}=ci(o);h=m===d&&i>v}if(!o&&l){var{hour:g,minute:y}=ci(l);h=g===d&&i<y}if(o&&l){var{hour:S,minute:b}=ci(o),{hour:w,minute:E}=ci(l);h=w===d&&i<E||S===d&&i>b}return(e=t.allowedTime)!=null&&e.minutes&&(f=(n=t.allowedTime)==null?void 0:n.minutes(i)),h||f},rS=t=>{var e,n,{time:i,format:r,ampm:s,hour:a,minute:o,max:l,min:u,disableHour:c}=t,{hourStr:d,hourNum:h}=bg(r,s,a),f=!1,m=!1;if(c.includes(d))return!0;if(l&&!u){var{hour:v,minute:g,second:y}=ci(l);f=v===h&&g<o||g===o&&i>y}if(!l&&u){var{hour:S,minute:b,second:w}=ci(u);f=S===h&&b>o||b===o&&i>w}if(l&&u){var{hour:E,minute:T,second:I}=ci(l),{hour:_,minute:R,second:L}=ci(u);f=E===h&&T<o||_===h&&R>o||E===h&&T===o&&i>I||_===h&&R===o&&i<L}return(e=t.allowedTime)!=null&&e.seconds&&(m=(n=t.allowedTime)==null?void 0:n.seconds(i)),f||m},{n:Q3,classes:eN}=Qe("time-picker");function tN(t,e){return ie(),he("div",{class:$(t.n("clock"))},[Me("div",{class:$(t.n("clock-hand")),style:Be(t.handStyle)},null,6),(ie(!0),he(At,null,bn(t.timeScales,(n,i)=>(ie(),he("div",{class:$(t.classes(t.n("clock-item"),[t.isActive(i,!1),t.n("clock-item--active")],[t.isDisable(n),t.n("clock-item--disable")])),key:n,style:Be(t.getStyle(i,n,!1))},je(n),7))),128)),t.format==="24hr"&&t.type==="hour"?(ie(),he("div",{key:0,class:$(t.n("clock-inner")),ref:"inner"},[(ie(!0),he(At,null,bn(t.hours24,(n,i)=>(ie(),he("div",{class:$(t.classes(t.n("clock-item"),[t.isActive(i,!0),t.n("clock-item--active")],[t.isDisable(n),t.n("clock-item--disable")])),key:n,style:Be(t.getStyle(i,n,!0))},je(n),7))),128))],2)):qe("v-if",!0)],2)}var nN=tt({render:tN,name:"Clock",props:{isInner:{type:Boolean,required:!0},rad:{type:Number},format:{type:String,default:"ampm"},allowedTime:{type:Object},time:{type:Object,required:!0},useSeconds:{type:Boolean,default:!1},preventNextUpdate:{type:Boolean,default:!1},type:{type:String,default:"hour"},ampm:{type:String,default:"am"},color:{type:String},min:{type:String},max:{type:String}},emits:["update","change-prevent-update"],setup(t,e){var{emit:n}=e,i=de(null),r=de([]),s=de([]),a=Le(()=>({transform:"rotate("+Te(t.rad)+"deg)",height:t.isInner&&t.type==="hour"?"calc(50% - 40px)":"calc(50% - 4px)",backgroundColor:c(),borderColor:c()})),o=Le(()=>{if(t.rad!==void 0){var g=t.rad/30;return g>=0?g:g+12}}),l=Le(()=>t.type==="hour"?Ni:Wy),u=(g,y)=>{var S;g=(S=g)!=null?S:t.type==="minute"?t.time.minute:t.time.second;var b=t.type==="minute"?iS:rS,w={time:Te(g),format:t.format,ampm:t.ampm,hour:t.time.hour,minute:Te(t.time.minute),max:t.max,min:t.min,allowedTime:t.allowedTime,disableHour:r.value};return y&&t.type==="minute"&&Reflect.deleteProperty(w,"minute"),b(w)},c=()=>{if(o.value===void 0)return t.color;var g=t.isInner?ri[o.value]:l.value[o.value];return l.value===Wy?u()?"#bdbdbd":t.color:h(g)?"#bdbdbd":t.color},d=(g,y)=>y?o.value===g&&t.isInner:o.value===g&&(!t.isInner||t.type!=="hour"),h=g=>{if(t.type==="hour"){if(nS(t.format,t.ampm))return r.value.includes(g);var y=Ni.findIndex(S=>S===g);return s.value.includes(y)}return u(g,!0)},f=(g,y,S)=>{var b=2*Math.PI/12*g-Math.PI/2,w=50*(1+Math.cos(b)),E=50*(1+Math.sin(b)),T=()=>d(g,S)?h(y)?{backgroundColor:"#bdbdbd",color:"#fff"}:{backgroundColor:t.color,color:void 0}:{backgroundColor:void 0,color:void 0},{backgroundColor:I,color:_}=T();return{left:w+"%",top:E+"%",backgroundColor:I,color:_}},m=()=>{var{width:g,height:y}=i.value.getBoundingClientRect();return{width:g,height:y}},v=()=>{if(o.value!==void 0){var g=t.ampm==="am"?Ni:ri;return Ka(g[o.value],2,"0")}};return Ke([o,()=>t.isInner],(g,y)=>{var[S,b]=g,[w,E]=y,T=S===w&&b===E;if(!(T||t.type!=="hour"||o.value===void 0)){var I=b?ri[o.value]:v(),_=t.useSeconds?":"+t.time.second:"",R=I+":"+t.time.minute+_;t.preventNextUpdate||n("update",R),n("change-prevent-update")}}),Ke(()=>t.rad,(g,y)=>{if(!(t.type==="hour"||g===void 0||y===void 0)){var S=g/6>=0?g/6:g/6+60,b=y/6>=0?y/6:y/6+60;if(S!==b){var w,{hourStr:E}=bg(t.format,t.ampm,t.time.hour);if(t.type==="minute"){var T=ht().minute(S).format("mm"),I=t.useSeconds?":"+t.time.second:"";w=E+":"+T+I}if(t.type==="second"){var _=ht().second(S).format("ss"),R=t.useSeconds?":"+_:"";w=E+":"+t.time.minute+R}n("update",w)}}}),Ke([()=>t.max,()=>t.min,()=>t.allowedTime],g=>{var[y,S,b]=g;if(r.value=[],y&&!S){var{hour:w}=ci(y),E=Ni.filter(re=>Te(re)>w),T=ri.filter(re=>Te(re)>w);r.value=[...E,...T]}if(!y&&S){var{hour:I}=ci(S),_=Ni.filter(re=>Te(re)<I),R=ri.filter(re=>Te(re)<I);r.value=[..._,...R]}if(y&&S){var{hour:L}=ci(y),{hour:k}=ci(S),F=Ni.filter(re=>Te(re)<k||Te(re)>L),G=ri.filter(re=>Te(re)<k||Te(re)>L);r.value=[...F,...G]}if(b!=null&&b.hours){var{hours:H}=b,J=Ni.filter(re=>!H(Te(re))),V=ri.filter(re=>!H(Te(re)));r.value=[...new Set([...r.value,...J,...V])]}s.value=r.value.map(re=>ri.findIndex(j=>re===j)).filter(re=>re>=0)},{immediate:!0}),{n:Q3,classes:eN,hours24:ri,timeScales:l,inner:i,handStyle:a,disableHour:r,isActive:d,isDisable:h,getSize:m,getStyle:f,activeItemIndex:o}}}),{n:iN,classes:rN}=Qe("time-picker"),sN=t=>(Xv(""),t=t(),Yv(),t),aN=sN(()=>Me("span",null,":",-1)),oN={key:0};function lN(t,e){var n=Je("clock");return ie(),he("div",{class:$(t.classes(t.n(),[t.elevation,"var-elevation--2"])),ref:"picker"},[Me("div",{class:$(t.n("title")),style:Be({background:t.headerColor||t.color})},[Me("div",{class:$(t.n("title-time"))},[Me("div",{class:$(t.classes(t.n("title-btn"),[t.type==="hour",t.n("title-btn--active")])),onClick:e[0]||(e[0]=i=>t.checkPanel("hour"))},je(t.time.hour),3),aN,Me("div",{class:$(t.classes(t.n("title-btn"),[t.type==="minute",t.n("title-btn--active")])),onClick:e[1]||(e[1]=i=>t.checkPanel("minute"))},je(t.time.minute),3),t.useSeconds?(ie(),he("span",oN,":")):qe("v-if",!0),t.useSeconds?(ie(),he("div",{key:1,class:$(t.classes(t.n("title-btn"),[t.type==="second",t.n("title-btn--active")])),onClick:e[2]||(e[2]=i=>t.checkPanel("second"))},je(t.time.second),3)):qe("v-if",!0)],2),t.format==="ampm"?(ie(),he("div",{key:0,class:$(t.n("title-ampm"))},[Me("div",{class:$(t.classes(t.n("title-btn"),[t.ampm==="am",t.n("title-btn--active")])),onClick:e[3]||(e[3]=i=>t.checkAmpm("am"))},"AM",2),Me("div",{class:$(t.classes(t.n("title-btn"),[t.ampm==="pm",t.n("title-btn--active")])),onClick:e[4]||(e[4]=i=>t.checkAmpm("pm"))},"PM",2)],2)):qe("v-if",!0)],6),Me("div",{class:$(t.n("body"))},[Me("div",{class:$(t.n("clock-container")),onTouchstart:e[5]||(e[5]=function(){return t.moveHand&&t.moveHand(...arguments)}),onTouchmove:e[6]||(e[6]=function(){return t.moveHand&&t.moveHand(...arguments)}),onTouchend:e[7]||(e[7]=function(){return t.end&&t.end(...arguments)}),ref:"container"},[We(Mn,{name:t.n()+"-panel-fade"},{default:pt(()=>[(ie(),Mt(n,{key:t.type,ref:"inner",type:t.type,ampm:t.ampm,color:t.color,"is-inner":t.isInner,format:t.format,"allowed-time":t.allowedTime,rad:t.getRad,time:t.time,"prevent-next-update":t.isPreventNextUpdate,"use-seconds":t.useSeconds,max:t.max,min:t.min,onUpdate:t.update,onChangePreventUpdate:t.changePreventUpdate},null,8,["type","ampm","color","is-inner","format","allowed-time","rad","time","prevent-next-update","use-seconds","max","min","onUpdate","onChangePreventUpdate"]))]),_:1},8,["name"])],34)],2)],2)}var Xl=tt({render:lN,name:"VarTimePicker",components:{Clock:nN},props:J3,setup(t){var e=de(null),n=de(null),i=de(null),r=de(!1),s=de(!1),a=de(!1),o=de(!1),l=de(!1),u=de(void 0),c=de(0),d=de(0),h=de("hour"),f=de("am"),m=de(!1),v=de(!1),g=de({hour:"00",minute:"00",second:"00"}),y=tn({x:0,y:0}),S=tn({x:[],y:[]}),b=Le(()=>h.value==="hour"?u.value:h.value==="minute"?c.value:d.value),w=z=>{ye(t["onUpdate:modelValue"],z),ye(t.onChange,z)},E=z=>z*57.29577951308232,T=z=>{o.value=!1,v.value=!1,h.value=z},I=z=>{var{disableHour:ee}=i.value,Q=Ni.findIndex(ne=>Te(ne)===Te(g.value.hour)),fe=z==="am"?Ni:ri,Ee=[...fe.slice(Q),...fe.slice(0,Q)];return Ee.find((ne,X)=>(s.value=X!==0,!ee.includes(ne)))},_=z=>{if(!t.readonly){f.value=z;var ee=I(z);if(!!ee){var Q=t.useSeconds?":"+g.value.second:"",fe=Ka(ee,2,"0")+":"+g.value.minute+Q;w(fe)}}},R=(z,ee)=>{var Q=z>=S.x[0]&&z<=S.x[1],fe=ee>=S.y[0]&&ee<=S.y[1];return Q&&fe},L=z=>{var ee=t.format==="24hr"?"HH":"hh",{hour:Q,minute:fe,second:Ee}=ci(z);return{hour:ht().hour(Q).format(ee),minute:ht().minute(fe).format("mm"),second:ht().second(Ee).format("ss")}},k=z=>{var ee=z/30;return ee>=0?ee:ee+12},F=()=>{var{width:z,height:ee}=i.value.getSize(),Q=y.x-z/2-8,fe=y.x+z/2+8,Ee=y.y-ee/2-8,ne=y.y+ee/2+8;return{rangeXMin:Q,rangeXMax:fe,rangeYMin:Ee,rangeYMax:ne}},G=(z,ee,Q)=>{var{disableHour:fe}=i.value;a.value=R(z,ee);var Ee=Math.round(Q/30)*30+90,ne=k(Ee),X=r.value?Ni[ne]:ri[ne];if(fe.includes(X)||(r.value=t.format==="24hr"?R(z,ee):!1),r.value===a.value){var _e=r.value||f.value==="pm"?ri[ne]:Ni[ne];m.value=fe.includes(_e),!m.value&&(u.value=Ee,o.value=!0)}},H=z=>{var{disableHour:ee}=i.value,Q=Math.round(z/6)*6+90,fe=Q/6>=0?Q/6:Q/6+60,Ee={time:fe,format:t.format,ampm:f.value,hour:g.value.hour,max:t.max,min:t.min,disableHour:ee,allowedTime:t.allowedTime};v.value=iS(Ee),!v.value&&(c.value=Q,l.value=!0)},J=z=>{var{disableHour:ee}=i.value,Q=Math.round(z/6)*6+90,fe=Q/6>=0?Q/6:Q/6+60,Ee={time:fe,format:t.format,ampm:f.value,hour:g.value.hour,minute:Te(g.value.minute),max:t.max,min:t.min,disableHour:ee,allowedTime:t.allowedTime};rS(Ee)||(d.value=Q)},V=()=>{var{left:z,top:ee,width:Q,height:fe}=e.value.getBoundingClientRect();if(y.x=z+Q/2,y.y=ee+fe/2,h.value==="hour"&&t.format==="24hr"){var{rangeXMin:Ee,rangeXMax:ne,rangeYMin:X,rangeYMax:_e}=F();S.x=[Ee,ne],S.y=[X,_e]}},re=z=>{if(z.preventDefault(),!t.readonly){V();var{clientX:ee,clientY:Q}=z.touches[0],fe=ee-y.x,Ee=Q-y.y,ne=Math.round(E(Math.atan2(Ee,fe)));h.value==="hour"?G(ee,Q,ne):h.value==="minute"?H(ne):J(ne)}},j=()=>{if(!t.readonly){if(h.value==="hour"&&o.value){h.value="minute";return}h.value==="minute"&&t.useSeconds&&l.value&&(h.value="second")}},Z=()=>{s.value=!1};return Ke(()=>t.modelValue,z=>{if(z){var{hour:ee,minute:Q,second:fe}=ci(z),Ee=ht().hour(ee).format("hh"),ne=ht().hour(ee).format("HH"),X=ht().minute(Q).format("mm"),_e=ht().second(fe).format("ss");u.value=(Ee==="12"?0:Te(Ee))*30,c.value=Te(X)*6,d.value=Te(_e)*6,g.value=L(z),t.format!=="24hr"&&(f.value=Ka(""+ee,2,"0")===ne&&ri.includes(ne)?"pm":"am"),r.value=t.format==="24hr"&&ri.includes(ne)}},{immediate:!0}),{n:iN,classes:rN,getRad:b,time:g,container:e,inner:i,picker:n,isInner:r,type:h,ampm:f,isPreventNextUpdate:s,moveHand:re,checkPanel:T,checkAmpm:_,end:j,update:w,changePreventUpdate:Z}}});Xl.install=function(t){t.component(Xl.name,Xl)};var uN={modelValue:{type:Array,default:()=>[]},accept:{type:String,default:"image/*"},capture:{type:[String,Boolean],default:void 0},multiple:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},removable:{type:Boolean,default:!0},maxlength:{type:[Number,String]},maxsize:{type:[Number,String]},previewed:{type:Boolean,default:!0},ripple:{type:Boolean,default:!0},validateTrigger:{type:Array,default:()=>["onChange","onRemove"]},rules:{type:Array},hideList:{type:Boolean,default:!1},onBeforeRead:{type:Function},onAfterRead:{type:Function},onBeforeRemove:{type:Function},onRemove:{type:Function},onOversize:{type:Function},"onUpdate:modelValue":{type:Function}};function $y(t,e,n,i,r,s,a){try{var o=t[s](a),l=o.value}catch(u){n(u);return}o.done?e(l):Promise.resolve(l).then(i,r)}function Xy(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function a(l){$y(s,i,r,a,o,"next",l)}function o(l){$y(s,i,r,a,o,"throw",l)}a(void 0)})}}var{n:cN,classes:dN}=Qe("uploader"),hN=0,fN=["onClick"],pN=["onClick"],mN=["src","alt"],vN=["multiple","accept","capture","disabled"],gN=["src"];function yN(t,e){var n=Je("var-icon"),i=Je("var-form-details"),r=Je("var-popup"),s=jn("ripple");return ie(),he("div",{class:$(t.classes(t.n(),"var--box"))},[Me("div",{class:$(t.n("file-list"))},[(ie(!0),he(At,null,bn(t.files,a=>Zt((ie(),he("div",{class:$(t.classes(t.n("file"),"var-elevation--2",[a.state==="loading",t.n("--loading")])),key:a.id,onClick:o=>t.preview(a)},[Me("div",{class:$(t.n("file-name"))},je(a.name||a.url),3),t.removable?(ie(),he("div",{key:0,class:$(t.n("file-close")),onClick:qr(o=>t.handleRemove(a),["stop"])},[We(n,{class:$(t.n("file-close-icon")),"var-uploader-cover":"",name:"delete"},null,8,["class"])],10,pN)):qe("v-if",!0),a.cover?(ie(),he("img",{key:1,class:$(t.n("file-cover")),style:Be({objectFit:a.fit}),src:a.cover,alt:a.name},null,14,mN)):qe("v-if",!0),Me("div",{class:$(t.classes(t.n("file-indicator"),[a.state==="success",t.n("--success")],[a.state==="error",t.n("--error")]))},null,2)],10,fN)),[[s,{disabled:t.disabled||t.formDisabled||t.readonly||t.formReadonly||!t.ripple}]])),128)),!t.maxlength||t.modelValue.length<t.maxlength?Zt((ie(),he("div",{key:0,class:$(t.classes([!t.$slots.default,t.n("action")+" var-elevation--2"],[t.disabled||t.formDisabled,t.n("--disabled")])),onClick:e[1]||(e[1]=function(){return t.triggerAction&&t.triggerAction(...arguments)})},[Me("input",{ref:"input",class:$(t.n("action-input")),type:"file",multiple:t.multiple,accept:t.accept,capture:t.capture,disabled:t.disabled||t.formDisabled||t.readonly||t.formReadonly,onChange:e[0]||(e[0]=function(){return t.handleChange&&t.handleChange(...arguments)})},null,42,vN),Ue(t.$slots,"default",{},()=>[We(n,{class:$(t.n("action-icon")),"var-uploader-cover":"",name:"plus"},null,8,["class"])])],2)),[[s,{disabled:t.disabled||t.formDisabled||t.readonly||t.formReadonly||!t.ripple||t.$slots.default}]]):qe("v-if",!0)],2),We(i,{"error-message":t.errorMessage,"extra-message":t.maxlengthText},null,8,["error-message","extra-message"]),We(r,{class:$(t.n("preview")),"var-uploader-cover":"",position:"center",show:t.showPreview,"onUpdate:show":e[2]||(e[2]=a=>t.showPreview=a),onClosed:e[3]||(e[3]=a=>t.currentPreview=null)},{default:pt(()=>{var a,o;return[t.currentPreview&&t.isHTMLSupportVideo((a=t.currentPreview)==null?void 0:a.url)?(ie(),he("video",{key:0,class:$(t.n("preview-video")),playsinline:"true","webkit-playsinline":"true","x5-playsinline":"true","x5-video-player-type":"h5","x5-video-player-fullscreen":"false",controls:"",src:(o=t.currentPreview)==null?void 0:o.url},null,10,gN)):qe("v-if",!0)]}),_:1},8,["class","show"])],2)}var Yl=tt({render:yN,name:"VarUploader",directives:{Ripple:kn},components:{VarIcon:Kt,VarPopup:rr,VarFormDetails:Wn},props:uN,setup(t){var e=de(null),n=de(!1),i=de(null),r=Le(()=>{var{maxlength:H,modelValue:{length:J}}=t;return Zn(H)?J+" / "+H:""}),{form:s,bindForm:a}=$i(),{errorMessage:o,validateWithTrigger:l,validate:u,resetValidation:c}=Wi(),d=Le(()=>{var{modelValue:H,hideList:J}=t;return J?[]:H}),h=()=>{e.value.click()},f=H=>{var{disabled:J,readonly:V,previewed:re}=t;if(!(s!=null&&s.disabled.value||s!=null&&s.readonly.value||J||V||!re)){var{url:j}=H;if(pi(j)&&X0(j)){Ws(j);return}pi(j)&&Y0(j)&&(i.value=H,n.value=!0)}},m=H=>({id:hN++,url:"",cover:"",name:H.name,file:H}),v=H=>{var J=H.target,{files:V}=J;return Array.from(V)},g=H=>new Promise(J=>{var V=new FileReader;V.onload=()=>{var re=V.result;H.file.type.startsWith("image")&&(H.cover=re),H.url=re,J(H)},V.readAsDataURL(H.file)}),y=H=>H.map(g),S=H=>{var{onBeforeRead:J}=t;return H.map(V=>new Promise(re=>{var j=J?J(tn(V)):!0;Promise.resolve(j).then(Z=>re({valid:Z,varFile:V}))}))},b=function(){var H=Xy(function*(J){var{maxsize:V,maxlength:re,modelValue:j,onOversize:Z,onAfterRead:z,readonly:ee,disabled:Q}=t;if(!(s!=null&&s.disabled.value||s!=null&&s.readonly.value||Q||ee)){var fe=Ie=>Ie.filter(Ge=>Ge.file.size>Te(V)?(ye(Z,tn(Ge)),!1):!0),Ee=Ie=>{var Ge=Math.min(Ie.length,Te(re)-j.length);return Ie.slice(0,Ge)},ne=v(J),X=ne.map(m);X=V!=null?fe(X):X,X=re!=null?Ee(X):X;var _e=yield Promise.all(y(X)),Ae=yield Promise.all(S(_e)),ze=Ae.filter(Ie=>{var{valid:Ge}=Ie;return Ge}).map(Ie=>{var{varFile:Ge}=Ie;return Ge});ye(t["onUpdate:modelValue"],[...j,...ze]),J.target.value="",ze.forEach(Ie=>ye(z,tn(Ie)))}});return function(V){return H.apply(this,arguments)}}(),w=function(){var H=Xy(function*(J){var{disabled:V,readonly:re,modelValue:j,onBeforeRemove:Z,onRemove:z}=t;if(!(s!=null&&s.disabled.value||s!=null&&s.readonly.value||V||re)&&!(Z&&!(yield Z(J)))){var ee=j.filter(Q=>Q!==J);ye(z,J),R("onRemove"),ye(t["onUpdate:modelValue"],ee)}});return function(V){return H.apply(this,arguments)}}(),E=()=>t.modelValue.filter(H=>H.state==="success"),T=()=>t.modelValue.filter(H=>H.state==="error"),I=()=>t.modelValue.filter(H=>H.state==="loading"),_={getSuccess:E,getError:T,getLoading:I},R=H=>{rn(()=>{var{validateTrigger:J,rules:V,modelValue:re}=t;l(J,H,V,re,_)})},L=!1,k=()=>u(t.rules,t.modelValue,_),F=()=>{L=!0,ye(t["onUpdate:modelValue"],[]),c()},G={validate:k,resetValidation:c,reset:F};return ye(a,G),Ke(()=>t.modelValue,()=>{!L&&R("onChange"),L=!1},{deep:!0}),{n:cN,classes:dN,input:e,files:d,showPreview:n,currentPreview:i,errorMessage:o,maxlengthText:r,isHTMLSupportVideo:Y0,isHTMLSupportImage:X0,formDisabled:s==null?void 0:s.disabled,formReadonly:s==null?void 0:s.readonly,preview:f,triggerAction:h,handleChange:b,handleRemove:w,getSuccess:E,getError:T,getLoading:I,validate:k,resetValidation:c,reset:F}}});Yl.install=function(t){t.component(Yl.name,Yl)};function bN(t){Ja.install&&t.use(Ja),ol.install&&t.use(ol),ll.install&&t.use(ll),ka.install&&t.use(ka),ul.install&&t.use(ul),cl.install&&t.use(cl),hi.install&&t.use(hi),dl.install&&t.use(dl),Fa.install&&t.use(Fa),Ua.install&&t.use(Ua),hl.install&&t.use(hl),Ba.install&&t.use(Ba),fl.install&&t.use(fl),pl.install&&t.use(pl),ml.install&&t.use(ml),Ui.install&&t.use(Ui),vl.install&&t.use(vl),gl.install&&t.use(gl),yl.install&&t.use(yl),Qa.install&&t.use(Qa),bl.install&&t.use(bl),Os.install&&t.use(Os),Wn.install&&t.use(Wn),Kt.install&&t.use(Kt),wl.install&&t.use(wl),Ws.install&&t.use(Ws),_l.install&&t.use(_l),Sl.install&&t.use(Sl),Ga.install&&t.use(Ga),Fh.install&&t.use(Fh),Ml.install&&t.use(Ml),yr.install&&t.use(yr),hm.install&&t.use(hm),Bs.install&&t.use(Bs),Tl.install&&t.use(Tl),El.install&&t.use(El),no.install&&t.use(no),rr.install&&t.use(rr),xl.install&&t.use(xl),Cl.install&&t.use(Cl),Al.install&&t.use(Al),Rl.install&&t.use(Rl),Pl.install&&t.use(Pl),kn.install&&t.use(kn),Ll.install&&t.use(Ll),Il.install&&t.use(Il),Ol.install&&t.use(Ol),Dl.install&&t.use(Dl),Vm.install&&t.use(Vm),kl.install&&t.use(kl),Fl.install&&t.use(Fl),Ul.install&&t.use(Ul),ks.install&&t.use(ks),mc.install&&t.use(mc),Ds.install&&t.use(Ds),Ns.install&&t.use(Ns),zl.install&&t.use(zl),Vl.install&&t.use(Vl),Hl.install&&t.use(Hl),Gl.install&&t.use(Gl),Wl.install&&t.use(Wl),$l.install&&t.use($l),Gm.install&&t.use(Gm),Xl.install&&t.use(Xl),Yl.install&&t.use(Yl)}var wN={install:bN,ActionSheet:Ja,AppBar:ol,BackTop:ll,Badge:ka,BottomNavigation:ul,BottomNavigationItem:cl,Button:hi,Card:dl,Cell:Fa,Checkbox:Ua,CheckboxGroup:hl,Chip:Ba,Col:fl,Collapse:pl,CollapseItem:ml,Context:Ui,Countdown:vl,Counter:gl,DatePicker:yl,Dialog:Qa,Divider:bl,Form:Os,FormDetails:Wn,Icon:Kt,Image:wl,ImagePreview:Ws,IndexAnchor:_l,IndexBar:Sl,Input:Ga,Lazy:Fh,List:Ml,Loading:yr,Locale:hm,Menu:Bs,Option:Tl,Pagination:El,Picker:no,Popup:rr,Progress:xl,PullRefresh:Cl,Radio:Al,RadioGroup:Rl,Rate:Pl,Ripple:kn,Row:Ll,Select:Il,Skeleton:Ol,Slider:Dl,Snackbar:Vm,Space:kl,Step:Fl,Steps:Ul,Sticky:ks,StyleProvider:mc,Swipe:Ds,SwipeItem:Ns,Switch:zl,Tab:Vl,TabItem:Hl,Table:Gl,Tabs:Wl,TabsItems:$l,Themes:Gm,TimePicker:Xl,Uploader:Yl};/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Go=typeof window!="undefined";function _N(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Vt=Object.assign;function cp(t,e){const n={};for(const i in e){const r=e[i];n[i]=ar(r)?r.map(t):t(r)}return n}const Ku=()=>{},ar=Array.isArray,SN=/\/$/,MN=t=>t.replace(SN,"");function dp(t,e,n="/"){let i,r={},s="",a="";const o=e.indexOf("#");let l=e.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(i=e.slice(0,l),s=e.slice(l+1,o>-1?o:e.length),r=t(s)),o>-1&&(i=i||e.slice(0,o),a=e.slice(o,e.length)),i=CN(i!=null?i:e,n),{fullPath:i+(s&&"?")+s+a,path:i,query:r,hash:a}}function TN(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Yy(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function EN(t,e,n){const i=e.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&iu(e.matched[i],n.matched[r])&&sS(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function iu(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function sS(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!xN(t[n],e[n]))return!1;return!0}function xN(t,e){return ar(t)?qy(t,e):ar(e)?qy(e,t):t===e}function qy(t,e){return ar(e)?t.length===e.length&&t.every((n,i)=>n===e[i]):t.length===1&&t[0]===e}function CN(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),i=t.split("/");let r=n.length-1,s,a;for(s=0;s<i.length;s++)if(a=i[s],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+i.slice(s-(s===i.length?1:0)).join("/")}var vc;(function(t){t.pop="pop",t.push="push"})(vc||(vc={}));var Ju;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ju||(Ju={}));function AN(t){if(!t)if(Go){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),MN(t)}const RN=/^[^#]+#/;function PN(t,e){return t.replace(RN,"#")+e}function LN(t,e){const n=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-n.left-(e.left||0),top:i.top-n.top-(e.top||0)}}const Tf=()=>({left:window.pageXOffset,top:window.pageYOffset});function IN(t){let e;if("el"in t){const n=t.el,i=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=LN(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function Zy(t,e){return(history.state?history.state.position-e:-1)+t}const Wm=new Map;function ON(t,e){Wm.set(t,e)}function DN(t){const e=Wm.get(t);return Wm.delete(t),e}let NN=()=>location.protocol+"//"+location.host;function aS(t,e){const{pathname:n,search:i,hash:r}=e,s=t.indexOf("#");if(s>-1){let o=r.includes(t.slice(s))?t.slice(s).length:1,l=r.slice(o);return l[0]!=="/"&&(l="/"+l),Yy(l,"")}return Yy(n,t)+i+r}function kN(t,e,n,i){let r=[],s=[],a=null;const o=({state:h})=>{const f=aS(t,location),m=n.value,v=e.value;let g=0;if(h){if(n.value=f,e.value=h,a&&a===m){a=null;return}g=v?h.position-v.position:0}else i(f);r.forEach(y=>{y(n.value,m,{delta:g,type:vc.pop,direction:g?g>0?Ju.forward:Ju.back:Ju.unknown})})};function l(){a=n.value}function u(h){r.push(h);const f=()=>{const m=r.indexOf(h);m>-1&&r.splice(m,1)};return s.push(f),f}function c(){const{history:h}=window;!h.state||h.replaceState(Vt({},h.state,{scroll:Tf()}),"")}function d(){for(const h of s)h();s=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",c),{pauseListeners:l,listen:u,destroy:d}}function jy(t,e,n,i=!1,r=!1){return{back:t,current:e,forward:n,replaced:i,position:window.history.length,scroll:r?Tf():null}}function FN(t){const{history:e,location:n}=window,i={value:aS(t,n)},r={value:e.state};r.value||s(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,u,c){const d=t.indexOf("#"),h=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:NN()+t+l;try{e[c?"replaceState":"pushState"](u,"",h),r.value=u}catch(f){console.error(f),n[c?"replace":"assign"](h)}}function a(l,u){const c=Vt({},e.state,jy(r.value.back,l,r.value.forward,!0),u,{position:r.value.position});s(l,c,!0),i.value=l}function o(l,u){const c=Vt({},r.value,e.state,{forward:l,scroll:Tf()});s(c.current,c,!0);const d=Vt({},jy(i.value,l,null),{position:c.position+1},u);s(l,d,!1),i.value=l}return{location:i,state:r,push:o,replace:a}}function UN(t){t=AN(t);const e=FN(t),n=kN(t,e.state,e.location,e.replace);function i(s,a=!0){a||n.pauseListeners(),history.go(s)}const r=Vt({location:"",base:t,go:i,createHref:PN.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function BN(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),UN(t)}function zN(t){return typeof t=="string"||t&&typeof t=="object"}function oS(t){return typeof t=="string"||typeof t=="symbol"}const as={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},lS=Symbol("");var Ky;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Ky||(Ky={}));function ru(t,e){return Vt(new Error,{type:t,[lS]:!0},e)}function Lr(t,e){return t instanceof Error&&lS in t&&(e==null||!!(t.type&e))}const Jy="[^/]+?",VN={sensitive:!1,strict:!1,start:!0,end:!0},HN=/[.+*?^${}()[\]/\\]/g;function GN(t,e){const n=Vt({},VN,e),i=[];let r=n.start?"^":"";const s=[];for(const u of t){const c=u.length?[]:[90];n.strict&&!u.length&&(r+="/");for(let d=0;d<u.length;d++){const h=u[d];let f=40+(n.sensitive?.25:0);if(h.type===0)d||(r+="/"),r+=h.value.replace(HN,"\\$&"),f+=40;else if(h.type===1){const{value:m,repeatable:v,optional:g,regexp:y}=h;s.push({name:m,repeatable:v,optional:g});const S=y||Jy;if(S!==Jy){f+=10;try{new RegExp(`(${S})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${m}" (${S}): `+w.message)}}let b=v?`((?:${S})(?:/(?:${S}))*)`:`(${S})`;d||(b=g&&u.length<2?`(?:/${b})`:"/"+b),g&&(b+="?"),r+=b,f+=20,g&&(f+=-8),v&&(f+=-20),S===".*"&&(f+=-50)}c.push(f)}i.push(c)}if(n.strict&&n.end){const u=i.length-1;i[u][i[u].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const a=new RegExp(r,n.sensitive?"":"i");function o(u){const c=u.match(a),d={};if(!c)return null;for(let h=1;h<c.length;h++){const f=c[h]||"",m=s[h-1];d[m.name]=f&&m.repeatable?f.split("/"):f}return d}function l(u){let c="",d=!1;for(const h of t){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const f of h)if(f.type===0)c+=f.value;else if(f.type===1){const{value:m,repeatable:v,optional:g}=f,y=m in u?u[m]:"";if(ar(y)&&!v)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const S=ar(y)?y.join("/"):y;if(!S)if(g)h.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);c+=S}}return c||"/"}return{re:a,score:i,keys:s,parse:o,stringify:l}}function WN(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=e[n]-t[n];if(i)return i;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function $N(t,e){let n=0;const i=t.score,r=e.score;for(;n<i.length&&n<r.length;){const s=WN(i[n],r[n]);if(s)return s;n++}if(Math.abs(r.length-i.length)===1){if(Qy(i))return 1;if(Qy(r))return-1}return r.length-i.length}function Qy(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const XN={type:0,value:""},YN=/[a-zA-Z0-9_]/;function qN(t){if(!t)return[[]];if(t==="/")return[[XN]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${u}": ${f}`)}let n=0,i=n;const r=[];let s;function a(){s&&r.push(s),s=[]}let o=0,l,u="",c="";function d(){!u||(n===0?s.push({type:0,value:u}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function h(){u+=l}for(;o<t.length;){if(l=t[o++],l==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),a()):l===":"?(d(),n=1):h();break;case 4:h(),n=i;break;case 1:l==="("?n=2:YN.test(l)?h():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=3:c+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,c="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),d(),a(),r}function ZN(t,e,n){const i=GN(qN(t.path),n),r=Vt(i,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function jN(t,e){const n=[],i=new Map;e=nb({strict:!1,end:!0,sensitive:!1},e);function r(c){return i.get(c)}function s(c,d,h){const f=!h,m=KN(c);m.aliasOf=h&&h.record;const v=nb(e,c),g=[m];if("alias"in c){const b=typeof c.alias=="string"?[c.alias]:c.alias;for(const w of b)g.push(Vt({},m,{components:h?h.record.components:m.components,path:w,aliasOf:h?h.record:m}))}let y,S;for(const b of g){const{path:w}=b;if(d&&w[0]!=="/"){const E=d.record.path,T=E[E.length-1]==="/"?"":"/";b.path=d.record.path+(w&&T+w)}if(y=ZN(b,d,v),h?h.alias.push(y):(S=S||y,S!==y&&S.alias.push(y),f&&c.name&&!tb(y)&&a(c.name)),m.children){const E=m.children;for(let T=0;T<E.length;T++)s(E[T],y,h&&h.children[T])}h=h||y,(y.record.components&&Object.keys(y.record.components).length||y.record.name||y.record.redirect)&&l(y)}return S?()=>{a(S)}:Ku}function a(c){if(oS(c)){const d=i.get(c);d&&(i.delete(c),n.splice(n.indexOf(d),1),d.children.forEach(a),d.alias.forEach(a))}else{const d=n.indexOf(c);d>-1&&(n.splice(d,1),c.record.name&&i.delete(c.record.name),c.children.forEach(a),c.alias.forEach(a))}}function o(){return n}function l(c){let d=0;for(;d<n.length&&$N(c,n[d])>=0&&(c.record.path!==n[d].record.path||!uS(c,n[d]));)d++;n.splice(d,0,c),c.record.name&&!tb(c)&&i.set(c.record.name,c)}function u(c,d){let h,f={},m,v;if("name"in c&&c.name){if(h=i.get(c.name),!h)throw ru(1,{location:c});v=h.record.name,f=Vt(eb(d.params,h.keys.filter(S=>!S.optional).map(S=>S.name)),c.params&&eb(c.params,h.keys.map(S=>S.name))),m=h.stringify(f)}else if("path"in c)m=c.path,h=n.find(S=>S.re.test(m)),h&&(f=h.parse(m),v=h.record.name);else{if(h=d.name?i.get(d.name):n.find(S=>S.re.test(d.path)),!h)throw ru(1,{location:c,currentLocation:d});v=h.record.name,f=Vt({},d.params,c.params),m=h.stringify(f)}const g=[];let y=h;for(;y;)g.unshift(y.record),y=y.parent;return{name:v,path:m,params:f,matched:g,meta:QN(g)}}return t.forEach(c=>s(c)),{addRoute:s,resolve:u,removeRoute:a,getRoutes:o,getRecordMatcher:r}}function eb(t,e){const n={};for(const i of e)i in t&&(n[i]=t[i]);return n}function KN(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:JN(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function JN(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const i in t.components)e[i]=typeof n=="boolean"?n:n[i];return e}function tb(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function QN(t){return t.reduce((e,n)=>Vt(e,n.meta),{})}function nb(t,e){const n={};for(const i in t)n[i]=i in e?e[i]:t[i];return n}function uS(t,e){return e.children.some(n=>n===t||uS(t,n))}const cS=/#/g,ek=/&/g,tk=/\//g,nk=/=/g,ik=/\?/g,dS=/\+/g,rk=/%5B/g,sk=/%5D/g,hS=/%5E/g,ak=/%60/g,fS=/%7B/g,ok=/%7C/g,pS=/%7D/g,lk=/%20/g;function wg(t){return encodeURI(""+t).replace(ok,"|").replace(rk,"[").replace(sk,"]")}function uk(t){return wg(t).replace(fS,"{").replace(pS,"}").replace(hS,"^")}function $m(t){return wg(t).replace(dS,"%2B").replace(lk,"+").replace(cS,"%23").replace(ek,"%26").replace(ak,"`").replace(fS,"{").replace(pS,"}").replace(hS,"^")}function ck(t){return $m(t).replace(nk,"%3D")}function dk(t){return wg(t).replace(cS,"%23").replace(ik,"%3F")}function hk(t){return t==null?"":dk(t).replace(tk,"%2F")}function Bh(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function fk(t){const e={};if(t===""||t==="?")return e;const i=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<i.length;++r){const s=i[r].replace(dS," "),a=s.indexOf("="),o=Bh(a<0?s:s.slice(0,a)),l=a<0?null:Bh(s.slice(a+1));if(o in e){let u=e[o];ar(u)||(u=e[o]=[u]),u.push(l)}else e[o]=l}return e}function ib(t){let e="";for(let n in t){const i=t[n];if(n=ck(n),i==null){i!==void 0&&(e+=(e.length?"&":"")+n);continue}(ar(i)?i.map(s=>s&&$m(s)):[i&&$m(i)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function pk(t){const e={};for(const n in t){const i=t[n];i!==void 0&&(e[n]=ar(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return e}const mk=Symbol(""),rb=Symbol(""),Ef=Symbol(""),_g=Symbol(""),Xm=Symbol("");function Lu(){let t=[];function e(i){return t.push(i),()=>{const r=t.indexOf(i);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function ws(t,e,n,i,r){const s=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((a,o)=>{const l=d=>{d===!1?o(ru(4,{from:n,to:e})):d instanceof Error?o(d):zN(d)?o(ru(2,{from:e,to:d})):(s&&i.enterCallbacks[r]===s&&typeof d=="function"&&s.push(d),a())},u=t.call(i&&i.instances[r],e,n,l);let c=Promise.resolve(u);t.length<3&&(c=c.then(l)),c.catch(d=>o(d))})}function hp(t,e,n,i){const r=[];for(const s of t)for(const a in s.components){let o=s.components[a];if(!(e!=="beforeRouteEnter"&&!s.instances[a]))if(vk(o)){const u=(o.__vccOpts||o)[e];u&&r.push(ws(u,n,i,s,a))}else{let l=o();r.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${s.path}"`));const c=_N(u)?u.default:u;s.components[a]=c;const h=(c.__vccOpts||c)[e];return h&&ws(h,n,i,s,a)()}))}}return r}function vk(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function sb(t){const e=Mi(Ef),n=Mi(_g),i=Le(()=>e.resolve(rl(t.to))),r=Le(()=>{const{matched:l}=i.value,{length:u}=l,c=l[u-1],d=n.matched;if(!c||!d.length)return-1;const h=d.findIndex(iu.bind(null,c));if(h>-1)return h;const f=ab(l[u-2]);return u>1&&ab(c)===f&&d[d.length-1].path!==f?d.findIndex(iu.bind(null,l[u-2])):h}),s=Le(()=>r.value>-1&&wk(n.params,i.value.params)),a=Le(()=>r.value>-1&&r.value===n.matched.length-1&&sS(n.params,i.value.params));function o(l={}){return bk(l)?e[rl(t.replace)?"replace":"push"](rl(t.to)).catch(Ku):Promise.resolve()}return{route:i,href:Le(()=>i.value.href),isActive:s,isExactActive:a,navigate:o}}const gk=tt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:sb,setup(t,{slots:e}){const n=tn(sb(t)),{options:i}=Mi(Ef),r=Le(()=>({[ob(t.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[ob(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:Fc("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},s)}}}),yk=gk;function bk(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function wk(t,e){for(const n in e){const i=e[n],r=t[n];if(typeof i=="string"){if(i!==r)return!1}else if(!ar(r)||r.length!==i.length||i.some((s,a)=>s!==r[a]))return!1}return!0}function ab(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const ob=(t,e,n)=>t!=null?t:e!=null?e:n,_k=tt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const i=Mi(Xm),r=Le(()=>t.route||i.value),s=Mi(rb,0),a=Le(()=>{let u=rl(s);const{matched:c}=r.value;let d;for(;(d=c[u])&&!d.components;)u++;return u}),o=Le(()=>r.value.matched[a.value]);al(rb,Le(()=>a.value+1)),al(mk,o),al(Xm,r);const l=de();return Ke(()=>[l.value,o.value,t.name],([u,c,d],[h,f,m])=>{c&&(c.instances[d]=u,f&&f!==c&&u&&u===h&&(c.leaveGuards.size||(c.leaveGuards=f.leaveGuards),c.updateGuards.size||(c.updateGuards=f.updateGuards))),u&&c&&(!f||!iu(c,f)||!h)&&(c.enterCallbacks[d]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=r.value,c=t.name,d=o.value,h=d&&d.components[c];if(!h)return lb(n.default,{Component:h,route:u});const f=d.props[c],m=f?f===!0?u.params:typeof f=="function"?f(u):f:null,g=Fc(h,Vt({},m,e,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(d.instances[c]=null)},ref:l}));return lb(n.default,{Component:g,route:u})||g}}});function lb(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Sk=_k;function Mk(t){const e=jN(t.routes,t),n=t.parseQuery||fk,i=t.stringifyQuery||ib,r=t.history,s=Lu(),a=Lu(),o=Lu(),l=AE(as);let u=as;Go&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=cp.bind(null,ne=>""+ne),d=cp.bind(null,hk),h=cp.bind(null,Bh);function f(ne,X){let _e,Ae;return oS(ne)?(_e=e.getRecordMatcher(ne),Ae=X):Ae=ne,e.addRoute(Ae,_e)}function m(ne){const X=e.getRecordMatcher(ne);X&&e.removeRoute(X)}function v(){return e.getRoutes().map(ne=>ne.record)}function g(ne){return!!e.getRecordMatcher(ne)}function y(ne,X){if(X=Vt({},X||l.value),typeof ne=="string"){const N=dp(n,ne,X.path),B=e.resolve({path:N.path},X),te=r.createHref(N.fullPath);return Vt(N,B,{params:h(B.params),hash:Bh(N.hash),redirectedFrom:void 0,href:te})}let _e;if("path"in ne)_e=Vt({},ne,{path:dp(n,ne.path,X.path).path});else{const N=Vt({},ne.params);for(const B in N)N[B]==null&&delete N[B];_e=Vt({},ne,{params:d(ne.params)}),X.params=d(X.params)}const Ae=e.resolve(_e,X),ze=ne.hash||"";Ae.params=c(h(Ae.params));const Ie=TN(i,Vt({},ne,{hash:uk(ze),path:Ae.path})),Ge=r.createHref(Ie);return Vt({fullPath:Ie,hash:ze,query:i===ib?pk(ne.query):ne.query||{}},Ae,{redirectedFrom:void 0,href:Ge})}function S(ne){return typeof ne=="string"?dp(n,ne,l.value.path):Vt({},ne)}function b(ne,X){if(u!==ne)return ru(8,{from:X,to:ne})}function w(ne){return I(ne)}function E(ne){return w(Vt(S(ne),{replace:!0}))}function T(ne){const X=ne.matched[ne.matched.length-1];if(X&&X.redirect){const{redirect:_e}=X;let Ae=typeof _e=="function"?_e(ne):_e;return typeof Ae=="string"&&(Ae=Ae.includes("?")||Ae.includes("#")?Ae=S(Ae):{path:Ae},Ae.params={}),Vt({query:ne.query,hash:ne.hash,params:"path"in Ae?{}:ne.params},Ae)}}function I(ne,X){const _e=u=y(ne),Ae=l.value,ze=ne.state,Ie=ne.force,Ge=ne.replace===!0,N=T(_e);if(N)return I(Vt(S(N),{state:typeof N=="object"?Vt({},ze,N.state):ze,force:Ie,replace:Ge}),X||_e);const B=_e;B.redirectedFrom=X;let te;return!Ie&&EN(i,Ae,_e)&&(te=ru(16,{to:B,from:Ae}),z(Ae,Ae,!0,!1)),(te?Promise.resolve(te):R(B,Ae)).catch(ue=>Lr(ue)?Lr(ue,2)?ue:Z(ue):re(ue,B,Ae)).then(ue=>{if(ue){if(Lr(ue,2))return I(Vt({replace:Ge},S(ue.to),{state:typeof ue.to=="object"?Vt({},ze,ue.to.state):ze,force:Ie}),X||B)}else ue=k(B,Ae,!0,Ge,ze);return L(B,Ae,ue),ue})}function _(ne,X){const _e=b(ne,X);return _e?Promise.reject(_e):Promise.resolve()}function R(ne,X){let _e;const[Ae,ze,Ie]=Tk(ne,X);_e=hp(Ae.reverse(),"beforeRouteLeave",ne,X);for(const N of Ae)N.leaveGuards.forEach(B=>{_e.push(ws(B,ne,X))});const Ge=_.bind(null,ne,X);return _e.push(Ge),Mo(_e).then(()=>{_e=[];for(const N of s.list())_e.push(ws(N,ne,X));return _e.push(Ge),Mo(_e)}).then(()=>{_e=hp(ze,"beforeRouteUpdate",ne,X);for(const N of ze)N.updateGuards.forEach(B=>{_e.push(ws(B,ne,X))});return _e.push(Ge),Mo(_e)}).then(()=>{_e=[];for(const N of ne.matched)if(N.beforeEnter&&!X.matched.includes(N))if(ar(N.beforeEnter))for(const B of N.beforeEnter)_e.push(ws(B,ne,X));else _e.push(ws(N.beforeEnter,ne,X));return _e.push(Ge),Mo(_e)}).then(()=>(ne.matched.forEach(N=>N.enterCallbacks={}),_e=hp(Ie,"beforeRouteEnter",ne,X),_e.push(Ge),Mo(_e))).then(()=>{_e=[];for(const N of a.list())_e.push(ws(N,ne,X));return _e.push(Ge),Mo(_e)}).catch(N=>Lr(N,8)?N:Promise.reject(N))}function L(ne,X,_e){for(const Ae of o.list())Ae(ne,X,_e)}function k(ne,X,_e,Ae,ze){const Ie=b(ne,X);if(Ie)return Ie;const Ge=X===as,N=Go?history.state:{};_e&&(Ae||Ge?r.replace(ne.fullPath,Vt({scroll:Ge&&N&&N.scroll},ze)):r.push(ne.fullPath,ze)),l.value=ne,z(ne,X,_e,Ge),Z()}let F;function G(){F||(F=r.listen((ne,X,_e)=>{if(!Ee.listening)return;const Ae=y(ne),ze=T(Ae);if(ze){I(Vt(ze,{replace:!0}),Ae).catch(Ku);return}u=Ae;const Ie=l.value;Go&&ON(Zy(Ie.fullPath,_e.delta),Tf()),R(Ae,Ie).catch(Ge=>Lr(Ge,12)?Ge:Lr(Ge,2)?(I(Ge.to,Ae).then(N=>{Lr(N,20)&&!_e.delta&&_e.type===vc.pop&&r.go(-1,!1)}).catch(Ku),Promise.reject()):(_e.delta&&r.go(-_e.delta,!1),re(Ge,Ae,Ie))).then(Ge=>{Ge=Ge||k(Ae,Ie,!1),Ge&&(_e.delta&&!Lr(Ge,8)?r.go(-_e.delta,!1):_e.type===vc.pop&&Lr(Ge,20)&&r.go(-1,!1)),L(Ae,Ie,Ge)}).catch(Ku)}))}let H=Lu(),J=Lu(),V;function re(ne,X,_e){Z(ne);const Ae=J.list();return Ae.length?Ae.forEach(ze=>ze(ne,X,_e)):console.error(ne),Promise.reject(ne)}function j(){return V&&l.value!==as?Promise.resolve():new Promise((ne,X)=>{H.add([ne,X])})}function Z(ne){return V||(V=!ne,G(),H.list().forEach(([X,_e])=>ne?_e(ne):X()),H.reset()),ne}function z(ne,X,_e,Ae){const{scrollBehavior:ze}=t;if(!Go||!ze)return Promise.resolve();const Ie=!_e&&DN(Zy(ne.fullPath,0))||(Ae||!_e)&&history.state&&history.state.scroll||null;return rn().then(()=>ze(ne,X,Ie)).then(Ge=>Ge&&IN(Ge)).catch(Ge=>re(Ge,ne,X))}const ee=ne=>r.go(ne);let Q;const fe=new Set,Ee={currentRoute:l,listening:!0,addRoute:f,removeRoute:m,hasRoute:g,getRoutes:v,resolve:y,options:t,push:w,replace:E,go:ee,back:()=>ee(-1),forward:()=>ee(1),beforeEach:s.add,beforeResolve:a.add,afterEach:o.add,onError:J.add,isReady:j,install(ne){const X=this;ne.component("RouterLink",yk),ne.component("RouterView",Sk),ne.config.globalProperties.$router=X,Object.defineProperty(ne.config.globalProperties,"$route",{enumerable:!0,get:()=>rl(l)}),Go&&!Q&&l.value===as&&(Q=!0,w(r.location).catch(ze=>{}));const _e={};for(const ze in as)_e[ze]=Le(()=>l.value[ze]);ne.provide(Ef,X),ne.provide(_g,tn(_e)),ne.provide(Xm,l);const Ae=ne.unmount;fe.add(ne),ne.unmount=function(){fe.delete(ne),fe.size<1&&(u=as,F&&F(),F=null,l.value=as,Q=!1,V=!1),Ae()}}};return Ee}function Mo(t){return t.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function Tk(t,e){const n=[],i=[],r=[],s=Math.max(e.matched.length,t.matched.length);for(let a=0;a<s;a++){const o=e.matched[a];o&&(t.matched.find(u=>iu(u,o))?i.push(o):n.push(o));const l=t.matched[a];l&&(e.matched.find(u=>iu(u,l))||r.push(l))}return[n,i,r]}function VH(){return Mi(Ef)}function HH(){return Mi(_g)}const Ek="modulepreload",ub={},xk="./",ha=function(e,n){return!n||n.length===0?e():Promise.all(n.map(i=>{if(i=`${xk}${i}`,i in ub)return;ub[i]=!0;const r=i.endsWith(".css"),s=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const a=document.createElement("link");if(a.rel=r?"stylesheet":Ek,r||(a.as="script",a.crossOrigin=""),a.href=i,document.head.appendChild(a),r)return new Promise((o,l)=>{a.addEventListener("load",o),a.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())};var mS=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Ym={exports:{}},O={};/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */Object.defineProperty(O,"__esModule",{value:!0});const xf="146",Ck={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ak={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},vS=0,qm=1,gS=2,Rk=3,Pk=0,Sg=1,yS=2,jo=3,ro=0,Ei=1,Hr=2,Xr=0,$a=1,Zm=2,jm=3,Km=4,bS=5,xa=100,wS=101,_S=102,Jm=103,Qm=104,SS=200,MS=201,TS=202,ES=203,Mg=204,Tg=205,xS=206,CS=207,AS=208,RS=209,PS=210,LS=0,IS=1,OS=2,zh=3,DS=4,NS=5,kS=6,FS=7,Hc=0,US=1,BS=2,br=0,zS=1,VS=2,HS=3,GS=4,WS=5,Cf=300,Xs=301,Ys=302,gc=303,yc=304,du=306,bc=1e3,qn=1001,wc=1002,Sn=1003,Vh=1004,Lk=1004,Hh=1005,Ik=1005,vn=1006,Eg=1007,Ok=1007,ho=1008,Dk=1008,qs=1009,$S=1010,XS=1011,xg=1012,YS=1013,Rs=1014,Gr=1015,su=1016,qS=1017,ZS=1018,Xa=1020,jS=1021,KS=1022,Si=1023,JS=1024,QS=1025,zs=1026,so=1027,eM=1028,tM=1029,nM=1030,iM=1031,rM=1033,gh=33776,yh=33777,bh=33778,wh=33779,ev=35840,tv=35841,nv=35842,iv=35843,sM=36196,rv=37492,sv=37496,av=37808,ov=37809,lv=37810,uv=37811,cv=37812,dv=37813,hv=37814,fv=37815,pv=37816,mv=37817,vv=37818,gv=37819,yv=37820,bv=37821,wv=36492,aM=2200,oM=2201,lM=2202,_c=2300,Sc=2301,_h=2302,Ra=2400,Pa=2401,Mc=2402,Af=2500,Cg=2501,Nk=0,kk=1,Fk=2,Zs=3e3,an=3001,uM=3200,cM=3201,Qs=0,dM=1,Uk="",mr="srgb",Ps="srgb-linear",Bk=0,Sh=7680,zk=7681,Vk=7682,Hk=7683,Gk=34055,Wk=34056,$k=5386,Xk=512,Yk=513,qk=514,Zk=515,jk=516,Kk=517,Jk=518,hM=519,Tc=35044,Qk=35048,eF=35040,tF=35045,nF=35049,iF=35041,rF=35046,sF=35050,aF=35042,oF="100",_v="300 es",Gh=1035;class Jr{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}const Xn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let cb=1234567;const Ya=Math.PI/180,Ec=180/Math.PI;function xi(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Xn[t&255]+Xn[t>>8&255]+Xn[t>>16&255]+Xn[t>>24&255]+"-"+Xn[e&255]+Xn[e>>8&255]+"-"+Xn[e>>16&15|64]+Xn[e>>24&255]+"-"+Xn[n&63|128]+Xn[n>>8&255]+"-"+Xn[n>>16&255]+Xn[n>>24&255]+Xn[i&255]+Xn[i>>8&255]+Xn[i>>16&255]+Xn[i>>24&255]).toLowerCase()}function gn(t,e,n){return Math.max(e,Math.min(n,t))}function Ag(t,e){return(t%e+e)%e}function lF(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function uF(t,e,n){return t!==e?(n-t)/(e-t):0}function Qu(t,e,n){return(1-n)*t+n*e}function cF(t,e,n,i){return Qu(t,e,1-Math.exp(-n*i))}function dF(t,e=1){return e-Math.abs(Ag(t,e*2)-e)}function hF(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function fF(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function pF(t,e){return t+Math.floor(Math.random()*(e-t+1))}function mF(t,e){return t+Math.random()*(e-t)}function vF(t){return t*(.5-Math.random())}function gF(t){t!==void 0&&(cb=t);let e=cb+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function yF(t){return t*Ya}function bF(t){return t*Ec}function Sv(t){return(t&t-1)===0&&t!==0}function fM(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Wh(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function wF(t,e,n,i,r){const s=Math.cos,a=Math.sin,o=s(n/2),l=a(n/2),u=s((e+i)/2),c=a((e+i)/2),d=s((e-i)/2),h=a((e-i)/2),f=s((i-e)/2),m=a((i-e)/2);switch(r){case"XYX":t.set(o*c,l*d,l*h,o*u);break;case"YZY":t.set(l*h,o*c,l*d,o*u);break;case"ZXZ":t.set(l*d,l*h,o*c,o*u);break;case"XZX":t.set(o*c,l*m,l*f,o*u);break;case"YXY":t.set(l*f,o*c,l*m,o*u);break;case"ZYZ":t.set(l*m,l*f,o*c,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Wr(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Yt(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}var _F=Object.freeze({__proto__:null,DEG2RAD:Ya,RAD2DEG:Ec,generateUUID:xi,clamp:gn,euclideanModulo:Ag,mapLinear:lF,inverseLerp:uF,lerp:Qu,damp:cF,pingpong:dF,smoothstep:hF,smootherstep:fF,randInt:pF,randFloat:mF,randFloatSpread:vF,seededRandom:gF,degToRad:yF,radToDeg:bF,isPowerOfTwo:Sv,ceilPowerOfTwo:fM,floorPowerOfTwo:Wh,setQuaternionFromProperEuler:wF,normalize:Yt,denormalize:Wr});class ke{constructor(e=0,n=0){ke.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),r=Math.sin(n),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class di{constructor(){di.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,n,i,r,s,a,o,l,u){const c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=n,c[4]=s,c[5]=l,c[6]=i,c[7]=a,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,a=i[0],o=i[3],l=i[6],u=i[1],c=i[4],d=i[7],h=i[2],f=i[5],m=i[8],v=r[0],g=r[3],y=r[6],S=r[1],b=r[4],w=r[7],E=r[2],T=r[5],I=r[8];return s[0]=a*v+o*S+l*E,s[3]=a*g+o*b+l*T,s[6]=a*y+o*w+l*I,s[1]=u*v+c*S+d*E,s[4]=u*g+c*b+d*T,s[7]=u*y+c*w+d*I,s[2]=h*v+f*S+m*E,s[5]=h*g+f*b+m*T,s[8]=h*y+f*w+m*I,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8];return n*a*c-n*o*u-i*s*c+i*o*l+r*s*u-r*a*l}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],d=c*a-o*u,h=o*l-c*s,f=u*s-a*l,m=n*d+i*h+r*f;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/m;return e[0]=d*v,e[1]=(r*u-c*i)*v,e[2]=(o*i-r*a)*v,e[3]=h*v,e[4]=(c*n-r*l)*v,e[5]=(r*s-o*n)*v,e[6]=f*v,e[7]=(i*l-u*n)*v,e[8]=(a*n-i*s)*v,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,r,s,a,o){const l=Math.cos(s),u=Math.sin(s);return this.set(i*l,i*u,-i*(l*a+u*o)+a+e,-r*u,r*l,-r*(-u*a+l*o)+o+n,0,0,1),this}scale(e,n){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=n,i[4]*=n,i[7]*=n,this}rotate(e){const n=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],a=r[3],o=r[6],l=r[1],u=r[4],c=r[7];return r[0]=n*s+i*l,r[3]=n*a+i*u,r[6]=n*o+i*c,r[1]=-i*s+n*l,r[4]=-i*a+n*u,r[7]=-i*o+n*c,this}translate(e,n){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=n*i[2],i[4]+=n*i[5],i[7]+=n*i[8],this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function pM(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const SF={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ko(t,e){return new SF[t](e)}function xc(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function qa(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function Mh(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const fp={[mr]:{[Ps]:qa},[Ps]:{[mr]:Mh}},Oi={legacyMode:!0,get workingColorSpace(){return Ps},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.legacyMode||e===n||!e||!n)return t;if(fp[e]&&fp[e][n]!==void 0){const i=fp[e][n];return t.r=i(t.r),t.g=i(t.g),t.b=i(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},mM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},xn={r:0,g:0,b:0},Zi={h:0,s:0,l:0},Td={h:0,s:0,l:0};function pp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}function Ed(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}class it{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,n===void 0&&i===void 0?this.set(e):this.setRGB(e,n,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=mr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Oi.toWorkingColorSpace(this,n),this}setRGB(e,n,i,r=Ps){return this.r=e,this.g=n,this.b=i,Oi.toWorkingColorSpace(this,r),this}setHSL(e,n,i,r=Ps){if(e=Ag(e,1),n=gn(n,0,1),i=gn(i,0,1),n===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+n):i+n-i*n,a=2*i-s;this.r=pp(a,s,e+1/3),this.g=pp(a,s,e),this.b=pp(a,s,e-1/3)}return Oi.toWorkingColorSpace(this,r),this}setStyle(e,n=mr){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Oi.toWorkingColorSpace(this,n),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Oi.toWorkingColorSpace(this,n),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const l=parseFloat(s[1])/360,u=parseFloat(s[2])/100,c=parseFloat(s[3])/100;return i(s[4]),this.setHSL(l,u,c,n)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,Oi.toWorkingColorSpace(this,n),this;if(a===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,Oi.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}setColorName(e,n=mr){const i=mM[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=qa(e.r),this.g=qa(e.g),this.b=qa(e.b),this}copyLinearToSRGB(e){return this.r=Mh(e.r),this.g=Mh(e.g),this.b=Mh(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=mr){return Oi.fromWorkingColorSpace(Ed(this,xn),e),gn(xn.r*255,0,255)<<16^gn(xn.g*255,0,255)<<8^gn(xn.b*255,0,255)<<0}getHexString(e=mr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Ps){Oi.fromWorkingColorSpace(Ed(this,xn),n);const i=xn.r,r=xn.g,s=xn.b,a=Math.max(i,r,s),o=Math.min(i,r,s);let l,u;const c=(o+a)/2;if(o===a)l=0,u=0;else{const d=a-o;switch(u=c<=.5?d/(a+o):d/(2-a-o),a){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,n=Ps){return Oi.fromWorkingColorSpace(Ed(this,xn),n),e.r=xn.r,e.g=xn.g,e.b=xn.b,e}getStyle(e=mr){return Oi.fromWorkingColorSpace(Ed(this,xn),e),e!==mr?`color(${e} ${xn.r} ${xn.g} ${xn.b})`:`rgb(${xn.r*255|0},${xn.g*255|0},${xn.b*255|0})`}offsetHSL(e,n,i){return this.getHSL(Zi),Zi.h+=e,Zi.s+=n,Zi.l+=i,this.setHSL(Zi.h,Zi.s,Zi.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(Zi),e.getHSL(Td);const i=Qu(Zi.h,Td.h,n),r=Qu(Zi.s,Td.s,n),s=Qu(Zi.l,Td.l,n);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}it.NAMES=mM;let To;class Rg{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{To===void 0&&(To=xc("canvas")),To.width=e.width,To.height=e.height;const i=To.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=To}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap){const n=xc("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=qa(s[a]/255)*255;return i.putImageData(r,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(qa(n[i]/255)*255):n[i]=qa(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class La{constructor(e=null){this.isSource=!0,this.uuid=xi(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(mp(r[a].image)):s.push(mp(r[a]))}else s=mp(r);i.url=s}return n||(e.images[this.uuid]=i),i}}function mp(t){return typeof HTMLImageElement!="undefined"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&t instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&t instanceof ImageBitmap?Rg.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let MF=0;class Rn extends Jr{constructor(e=Rn.DEFAULT_IMAGE,n=Rn.DEFAULT_MAPPING,i=qn,r=qn,s=vn,a=ho,o=Si,l=qs,u=1,c=Zs){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:MF++}),this.uuid=xi(),this.name="",this.source=new La(e),this.mipmaps=[],this.mapping=n,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=l,this.offset=new ke(0,0),this.repeat=new ke(1,1),this.center=new ke(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new di,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Cf)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case bc:e.x=e.x-Math.floor(e.x);break;case qn:e.x=e.x<0?0:1;break;case wc:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case bc:e.y=e.y-Math.floor(e.y);break;case qn:e.y=e.y<0?0:1;break;case wc:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Rn.DEFAULT_IMAGE=null;Rn.DEFAULT_MAPPING=Cf;class Ht{constructor(e=0,n=0,i=0,r=1){Ht.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*n+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*n+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*n+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*n+a[7]*i+a[11]*r+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,r,s;const l=e.elements,u=l[0],c=l[4],d=l[8],h=l[1],f=l[5],m=l[9],v=l[2],g=l[6],y=l[10];if(Math.abs(c-h)<.01&&Math.abs(d-v)<.01&&Math.abs(m-g)<.01){if(Math.abs(c+h)<.1&&Math.abs(d+v)<.1&&Math.abs(m+g)<.1&&Math.abs(u+f+y-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const b=(u+1)/2,w=(f+1)/2,E=(y+1)/2,T=(c+h)/4,I=(d+v)/4,_=(m+g)/4;return b>w&&b>E?b<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(b),r=T/i,s=I/i):w>E?w<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(w),i=T/r,s=_/r):E<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(E),i=I/s,r=_/s),this.set(i,r,s,n),this}let S=Math.sqrt((g-m)*(g-m)+(d-v)*(d-v)+(h-c)*(h-c));return Math.abs(S)<.001&&(S=1),this.x=(g-m)/S,this.y=(d-v)/S,this.z=(h-c)/S,this.w=Math.acos((u+f+y-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Vi extends Jr{constructor(e=1,n=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Ht(0,0,e,n),this.scissorTest=!1,this.viewport=new Ht(0,0,e,n);const r={width:e,height:n,depth:1};this.texture=new Rn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:vn,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,n,i=1){(this.width!==e||this.height!==n||this.depth!==i)&&(this.width=e,this.height=n,this.depth=i,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new La(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Gc extends Rn{constructor(e=null,n=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=Sn,this.minFilter=Sn,this.wrapR=qn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class TF extends Vi{constructor(e=1,n=1,i=1){super(e,n),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Gc(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class Rf extends Rn{constructor(e=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=Sn,this.minFilter=Sn,this.wrapR=qn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class EF extends Vi{constructor(e=1,n=1,i=1){super(e,n),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Rf(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class xF extends Vi{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let a=0;a<i;a++)this.texture[a]=s.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=n,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,i=e.texture.length;n<i;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class fi{constructor(e=0,n=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}static slerpFlat(e,n,i,r,s,a,o){let l=i[r+0],u=i[r+1],c=i[r+2],d=i[r+3];const h=s[a+0],f=s[a+1],m=s[a+2],v=s[a+3];if(o===0){e[n+0]=l,e[n+1]=u,e[n+2]=c,e[n+3]=d;return}if(o===1){e[n+0]=h,e[n+1]=f,e[n+2]=m,e[n+3]=v;return}if(d!==v||l!==h||u!==f||c!==m){let g=1-o;const y=l*h+u*f+c*m+d*v,S=y>=0?1:-1,b=1-y*y;if(b>Number.EPSILON){const E=Math.sqrt(b),T=Math.atan2(E,y*S);g=Math.sin(g*T)/E,o=Math.sin(o*T)/E}const w=o*S;if(l=l*g+h*w,u=u*g+f*w,c=c*g+m*w,d=d*g+v*w,g===1-o){const E=1/Math.sqrt(l*l+u*u+c*c+d*d);l*=E,u*=E,c*=E,d*=E}}e[n]=l,e[n+1]=u,e[n+2]=c,e[n+3]=d}static multiplyQuaternionsFlat(e,n,i,r,s,a){const o=i[r],l=i[r+1],u=i[r+2],c=i[r+3],d=s[a],h=s[a+1],f=s[a+2],m=s[a+3];return e[n]=o*m+c*d+l*f-u*h,e[n+1]=l*m+c*h+u*d-o*f,e[n+2]=u*m+c*f+o*h-l*d,e[n+3]=c*m-o*d-l*h-u*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,r){return this._x=e,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const i=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,u=o(i/2),c=o(r/2),d=o(s/2),h=l(i/2),f=l(r/2),m=l(s/2);switch(a){case"XYZ":this._x=h*c*d+u*f*m,this._y=u*f*d-h*c*m,this._z=u*c*m+h*f*d,this._w=u*c*d-h*f*m;break;case"YXZ":this._x=h*c*d+u*f*m,this._y=u*f*d-h*c*m,this._z=u*c*m-h*f*d,this._w=u*c*d+h*f*m;break;case"ZXY":this._x=h*c*d-u*f*m,this._y=u*f*d+h*c*m,this._z=u*c*m+h*f*d,this._w=u*c*d-h*f*m;break;case"ZYX":this._x=h*c*d-u*f*m,this._y=u*f*d+h*c*m,this._z=u*c*m-h*f*d,this._w=u*c*d+h*f*m;break;case"YZX":this._x=h*c*d+u*f*m,this._y=u*f*d+h*c*m,this._z=u*c*m-h*f*d,this._w=u*c*d-h*f*m;break;case"XZY":this._x=h*c*d-u*f*m,this._y=u*f*d-h*c*m,this._z=u*c*m+h*f*d,this._w=u*c*d+h*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],r=n[4],s=n[8],a=n[1],o=n[5],l=n[9],u=n[2],c=n[6],d=n[10],h=i+o+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(c-l)*f,this._y=(s-u)*f,this._z=(a-r)*f}else if(i>o&&i>d){const f=2*Math.sqrt(1+i-o-d);this._w=(c-l)/f,this._x=.25*f,this._y=(r+a)/f,this._z=(s+u)/f}else if(o>d){const f=2*Math.sqrt(1+o-i-d);this._w=(s-u)/f,this._x=(r+a)/f,this._y=.25*f,this._z=(l+c)/f}else{const f=2*Math.sqrt(1+d-i-o);this._w=(a-r)/f,this._x=(s+u)/f,this._y=(l+c)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(gn(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,r=e._y,s=e._z,a=e._w,o=n._x,l=n._y,u=n._z,c=n._w;return this._x=i*c+a*o+r*u-s*l,this._y=r*c+a*l+s*o-i*u,this._z=s*c+a*u+i*l-r*o,this._w=a*c-i*o-r*l-s*u,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+i*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const f=1-n;return this._w=f*a+n*this._w,this._x=f*i+n*this._x,this._y=f*r+n*this._y,this._z=f*s+n*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),c=Math.atan2(u,o),d=Math.sin((1-n)*c)/u,h=Math.sin(n*c)/u;return this._w=a*d+this._w*h,this._x=i*d+this._x*h,this._y=r*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=Math.random(),n=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(r),i*Math.sin(s),i*Math.cos(s),n*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class q{constructor(e=0,n=0,i=0){q.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(db.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(db.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6]*r,this.y=s[1]*n+s[4]*i+s[7]*r,this.z=s[2]*n+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*n+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*n+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*n+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*n+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const n=this.x,i=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,u=l*n+a*r-o*i,c=l*i+o*n-s*r,d=l*r+s*i-a*n,h=-s*n-a*i-o*r;return this.x=u*l+h*-s+c*-o-d*-a,this.y=c*l+h*-a+d*-s-u*-o,this.z=d*l+h*-o+u*-a-c*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[4]*i+s[8]*r,this.y=s[1]*n+s[5]*i+s[9]*r,this.z=s[2]*n+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,r=e.y,s=e.z,a=n.x,o=n.y,l=n.z;return this.x=r*l-s*o,this.y=s*a-i*l,this.z=i*o-r*a,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return vp.copy(this).projectOnVector(e),this.sub(vp)}reflect(e){return this.sub(vp.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(gn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(n),this.y=i*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const vp=new q,db=new fi;class fo{constructor(e=new q(1/0,1/0,1/0),n=new q(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){let n=1/0,i=1/0,r=1/0,s=-1/0,a=-1/0,o=-1/0;for(let l=0,u=e.length;l<u;l+=3){const c=e[l],d=e[l+1],h=e[l+2];c<n&&(n=c),d<i&&(i=d),h<r&&(r=h),c>s&&(s=c),d>a&&(a=d),h>o&&(o=h)}return this.min.set(n,i,r),this.max.set(s,a,o),this}setFromBufferAttribute(e){let n=1/0,i=1/0,r=1/0,s=-1/0,a=-1/0,o=-1/0;for(let l=0,u=e.count;l<u;l++){const c=e.getX(l),d=e.getY(l),h=e.getZ(l);c<n&&(n=c),d<i&&(i=d),h<r&&(r=h),c>s&&(s=c),d>a&&(a=d),h>o&&(o=h)}return this.min.set(n,i,r),this.max.set(s,a,o),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=fa.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(n&&i.attributes!=null&&i.attributes.position!==void 0){const s=i.attributes.position;for(let a=0,o=s.count;a<o;a++)fa.fromBufferAttribute(s,a).applyMatrix4(e.matrixWorld),this.expandByPoint(fa)}else i.boundingBox===null&&i.computeBoundingBox(),gp.copy(i.boundingBox),gp.applyMatrix4(e.matrixWorld),this.union(gp);const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,fa),fa.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Iu),xd.subVectors(this.max,Iu),Eo.subVectors(e.a,Iu),xo.subVectors(e.b,Iu),Co.subVectors(e.c,Iu),os.subVectors(xo,Eo),ls.subVectors(Co,xo),pa.subVectors(Eo,Co);let n=[0,-os.z,os.y,0,-ls.z,ls.y,0,-pa.z,pa.y,os.z,0,-os.x,ls.z,0,-ls.x,pa.z,0,-pa.x,-os.y,os.x,0,-ls.y,ls.x,0,-pa.y,pa.x,0];return!yp(n,Eo,xo,Co,xd)||(n=[1,0,0,0,1,0,0,0,1],!yp(n,Eo,xo,Co,xd))?!1:(Cd.crossVectors(os,ls),n=[Cd.x,Cd.y,Cd.z],yp(n,Eo,xo,Co,xd))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return fa.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(fa).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ir[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ir[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ir[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ir[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ir[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ir[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ir[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ir[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ir),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ir=[new q,new q,new q,new q,new q,new q,new q,new q],fa=new q,gp=new fo,Eo=new q,xo=new q,Co=new q,os=new q,ls=new q,pa=new q,Iu=new q,xd=new q,Cd=new q,ma=new q;function yp(t,e,n,i,r){for(let s=0,a=t.length-3;s<=a;s+=3){ma.fromArray(t,s);const o=r.x*Math.abs(ma.x)+r.y*Math.abs(ma.y)+r.z*Math.abs(ma.z),l=e.dot(ma),u=n.dot(ma),c=i.dot(ma);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>o)return!1}return!0}const CF=new fo,Ou=new q,bp=new q;class po{constructor(e=new q,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):CF.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ou.subVectors(e,this.center);const n=Ou.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),r=(i-this.radius)*.5;this.center.addScaledVector(Ou,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(bp.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ou.copy(e.center).add(bp)),this.expandByPoint(Ou.copy(e.center).sub(bp))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Or=new q,wp=new q,Ad=new q,us=new q,_p=new q,Rd=new q,Sp=new q;class Wc{constructor(e=new q,n=new q(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Or)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Or.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Or.copy(this.direction).multiplyScalar(n).add(this.origin),Or.distanceToSquared(e))}distanceSqToSegment(e,n,i,r){wp.copy(e).add(n).multiplyScalar(.5),Ad.copy(n).sub(e).normalize(),us.copy(this.origin).sub(wp);const s=e.distanceTo(n)*.5,a=-this.direction.dot(Ad),o=us.dot(this.direction),l=-us.dot(Ad),u=us.lengthSq(),c=Math.abs(1-a*a);let d,h,f,m;if(c>0)if(d=a*l-o,h=a*o-l,m=s*c,d>=0)if(h>=-m)if(h<=m){const v=1/c;d*=v,h*=v,f=d*(d+a*h+2*o)+h*(a*d+h+2*l)+u}else h=s,d=Math.max(0,-(a*h+o)),f=-d*d+h*(h+2*l)+u;else h=-s,d=Math.max(0,-(a*h+o)),f=-d*d+h*(h+2*l)+u;else h<=-m?(d=Math.max(0,-(-a*s+o)),h=d>0?-s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+u):h<=m?(d=0,h=Math.min(Math.max(-s,-l),s),f=h*(h+2*l)+u):(d=Math.max(0,-(a*s+o)),h=d>0?s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+u);else h=a>0?-s:s,d=Math.max(0,-(a*h+o)),f=-d*d+h*(h+2*l)+u;return i&&i.copy(this.direction).multiplyScalar(d).add(this.origin),r&&r.copy(Ad).multiplyScalar(h).add(wp),f}intersectSphere(e,n){Or.subVectors(e.center,this.origin);const i=Or.dot(this.direction),r=Or.dot(Or)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=i-a,l=i+a;return o<0&&l<0?null:o<0?this.at(l,n):this.at(o,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,r,s,a,o,l;const u=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,h=this.origin;return u>=0?(i=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(i=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),c>=0?(s=(e.min.y-h.y)*c,a=(e.max.y-h.y)*c):(s=(e.max.y-h.y)*c,a=(e.min.y-h.y)*c),i>a||s>r||((s>i||isNaN(i))&&(i=s),(a<r||isNaN(r))&&(r=a),d>=0?(o=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(o=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),i>l||o>r)||((o>i||i!==i)&&(i=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(e){return this.intersectBox(e,Or)!==null}intersectTriangle(e,n,i,r,s){_p.subVectors(n,e),Rd.subVectors(i,e),Sp.crossVectors(_p,Rd);let a=this.direction.dot(Sp),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;us.subVectors(this.origin,e);const l=o*this.direction.dot(Rd.crossVectors(us,Rd));if(l<0)return null;const u=o*this.direction.dot(_p.cross(us));if(u<0||l+u>a)return null;const c=-o*us.dot(Sp);return c<0?null:this.at(c/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class wt{constructor(){wt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,n,i,r,s,a,o,l,u,c,d,h,f,m,v,g){const y=this.elements;return y[0]=e,y[4]=n,y[8]=i,y[12]=r,y[1]=s,y[5]=a,y[9]=o,y[13]=l,y[2]=u,y[6]=c,y[10]=d,y[14]=h,y[3]=f,y[7]=m,y[11]=v,y[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new wt().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,r=1/Ao.setFromMatrixColumn(e,0).length(),s=1/Ao.setFromMatrixColumn(e,1).length(),a=1/Ao.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*s,n[5]=i[5]*s,n[6]=i[6]*s,n[7]=0,n[8]=i[8]*a,n[9]=i[9]*a,n[10]=i[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),o=Math.sin(i),l=Math.cos(r),u=Math.sin(r),c=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const h=a*c,f=a*d,m=o*c,v=o*d;n[0]=l*c,n[4]=-l*d,n[8]=u,n[1]=f+m*u,n[5]=h-v*u,n[9]=-o*l,n[2]=v-h*u,n[6]=m+f*u,n[10]=a*l}else if(e.order==="YXZ"){const h=l*c,f=l*d,m=u*c,v=u*d;n[0]=h+v*o,n[4]=m*o-f,n[8]=a*u,n[1]=a*d,n[5]=a*c,n[9]=-o,n[2]=f*o-m,n[6]=v+h*o,n[10]=a*l}else if(e.order==="ZXY"){const h=l*c,f=l*d,m=u*c,v=u*d;n[0]=h-v*o,n[4]=-a*d,n[8]=m+f*o,n[1]=f+m*o,n[5]=a*c,n[9]=v-h*o,n[2]=-a*u,n[6]=o,n[10]=a*l}else if(e.order==="ZYX"){const h=a*c,f=a*d,m=o*c,v=o*d;n[0]=l*c,n[4]=m*u-f,n[8]=h*u+v,n[1]=l*d,n[5]=v*u+h,n[9]=f*u-m,n[2]=-u,n[6]=o*l,n[10]=a*l}else if(e.order==="YZX"){const h=a*l,f=a*u,m=o*l,v=o*u;n[0]=l*c,n[4]=v-h*d,n[8]=m*d+f,n[1]=d,n[5]=a*c,n[9]=-o*c,n[2]=-u*c,n[6]=f*d+m,n[10]=h-v*d}else if(e.order==="XZY"){const h=a*l,f=a*u,m=o*l,v=o*u;n[0]=l*c,n[4]=-d,n[8]=u*c,n[1]=h*d+v,n[5]=a*c,n[9]=f*d-m,n[2]=m*d-f,n[6]=o*c,n[10]=v*d+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(AF,e,RF)}lookAt(e,n,i){const r=this.elements;return wi.subVectors(e,n),wi.lengthSq()===0&&(wi.z=1),wi.normalize(),cs.crossVectors(i,wi),cs.lengthSq()===0&&(Math.abs(i.z)===1?wi.x+=1e-4:wi.z+=1e-4,wi.normalize(),cs.crossVectors(i,wi)),cs.normalize(),Pd.crossVectors(wi,cs),r[0]=cs.x,r[4]=Pd.x,r[8]=wi.x,r[1]=cs.y,r[5]=Pd.y,r[9]=wi.y,r[2]=cs.z,r[6]=Pd.z,r[10]=wi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,a=i[0],o=i[4],l=i[8],u=i[12],c=i[1],d=i[5],h=i[9],f=i[13],m=i[2],v=i[6],g=i[10],y=i[14],S=i[3],b=i[7],w=i[11],E=i[15],T=r[0],I=r[4],_=r[8],R=r[12],L=r[1],k=r[5],F=r[9],G=r[13],H=r[2],J=r[6],V=r[10],re=r[14],j=r[3],Z=r[7],z=r[11],ee=r[15];return s[0]=a*T+o*L+l*H+u*j,s[4]=a*I+o*k+l*J+u*Z,s[8]=a*_+o*F+l*V+u*z,s[12]=a*R+o*G+l*re+u*ee,s[1]=c*T+d*L+h*H+f*j,s[5]=c*I+d*k+h*J+f*Z,s[9]=c*_+d*F+h*V+f*z,s[13]=c*R+d*G+h*re+f*ee,s[2]=m*T+v*L+g*H+y*j,s[6]=m*I+v*k+g*J+y*Z,s[10]=m*_+v*F+g*V+y*z,s[14]=m*R+v*G+g*re+y*ee,s[3]=S*T+b*L+w*H+E*j,s[7]=S*I+b*k+w*J+E*Z,s[11]=S*_+b*F+w*V+E*z,s[15]=S*R+b*G+w*re+E*ee,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],u=e[13],c=e[2],d=e[6],h=e[10],f=e[14],m=e[3],v=e[7],g=e[11],y=e[15];return m*(+s*l*d-r*u*d-s*o*h+i*u*h+r*o*f-i*l*f)+v*(+n*l*f-n*u*h+s*a*h-r*a*f+r*u*c-s*l*c)+g*(+n*u*d-n*o*f-s*a*d+i*a*f+s*o*c-i*u*c)+y*(-r*o*c-n*l*d+n*o*h+r*a*d-i*a*h+i*l*c)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],d=e[9],h=e[10],f=e[11],m=e[12],v=e[13],g=e[14],y=e[15],S=d*g*u-v*h*u+v*l*f-o*g*f-d*l*y+o*h*y,b=m*h*u-c*g*u-m*l*f+a*g*f+c*l*y-a*h*y,w=c*v*u-m*d*u+m*o*f-a*v*f-c*o*y+a*d*y,E=m*d*l-c*v*l-m*o*h+a*v*h+c*o*g-a*d*g,T=n*S+i*b+r*w+s*E;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const I=1/T;return e[0]=S*I,e[1]=(v*h*s-d*g*s-v*r*f+i*g*f+d*r*y-i*h*y)*I,e[2]=(o*g*s-v*l*s+v*r*u-i*g*u-o*r*y+i*l*y)*I,e[3]=(d*l*s-o*h*s-d*r*u+i*h*u+o*r*f-i*l*f)*I,e[4]=b*I,e[5]=(c*g*s-m*h*s+m*r*f-n*g*f-c*r*y+n*h*y)*I,e[6]=(m*l*s-a*g*s-m*r*u+n*g*u+a*r*y-n*l*y)*I,e[7]=(a*h*s-c*l*s+c*r*u-n*h*u-a*r*f+n*l*f)*I,e[8]=w*I,e[9]=(m*d*s-c*v*s-m*i*f+n*v*f+c*i*y-n*d*y)*I,e[10]=(a*v*s-m*o*s+m*i*u-n*v*u-a*i*y+n*o*y)*I,e[11]=(c*o*s-a*d*s-c*i*u+n*d*u+a*i*f-n*o*f)*I,e[12]=E*I,e[13]=(c*v*r-m*d*r+m*i*h-n*v*h-c*i*g+n*d*g)*I,e[14]=(m*o*r-a*v*r-m*i*l+n*v*l+a*i*g-n*o*g)*I,e[15]=(a*d*r-c*o*r+c*i*l-n*d*l-a*i*h+n*o*h)*I,this}scale(e){const n=this.elements,i=e.x,r=e.y,s=e.z;return n[0]*=i,n[4]*=r,n[8]*=s,n[1]*=i,n[5]*=r,n[9]*=s,n[2]*=i,n[6]*=r,n[10]*=s,n[3]*=i,n[7]*=r,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(e,n,i){return this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),r=Math.sin(n),s=1-i,a=e.x,o=e.y,l=e.z,u=s*a,c=s*o;return this.set(u*a+i,u*o-r*l,u*l+r*o,0,u*o+r*l,c*o+i,c*l-r*a,0,u*l-r*o,c*l+r*a,s*l*l+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,n,r,1,0,0,0,0,1),this}compose(e,n,i){const r=this.elements,s=n._x,a=n._y,o=n._z,l=n._w,u=s+s,c=a+a,d=o+o,h=s*u,f=s*c,m=s*d,v=a*c,g=a*d,y=o*d,S=l*u,b=l*c,w=l*d,E=i.x,T=i.y,I=i.z;return r[0]=(1-(v+y))*E,r[1]=(f+w)*E,r[2]=(m-b)*E,r[3]=0,r[4]=(f-w)*T,r[5]=(1-(h+y))*T,r[6]=(g+S)*T,r[7]=0,r[8]=(m+b)*I,r[9]=(g-S)*I,r[10]=(1-(h+v))*I,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,i){const r=this.elements;let s=Ao.set(r[0],r[1],r[2]).length();const a=Ao.set(r[4],r[5],r[6]).length(),o=Ao.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],ji.copy(this);const u=1/s,c=1/a,d=1/o;return ji.elements[0]*=u,ji.elements[1]*=u,ji.elements[2]*=u,ji.elements[4]*=c,ji.elements[5]*=c,ji.elements[6]*=c,ji.elements[8]*=d,ji.elements[9]*=d,ji.elements[10]*=d,n.setFromRotationMatrix(ji),i.x=s,i.y=a,i.z=o,this}makePerspective(e,n,i,r,s,a){const o=this.elements,l=2*s/(n-e),u=2*s/(i-r),c=(n+e)/(n-e),d=(i+r)/(i-r),h=-(a+s)/(a-s),f=-2*a*s/(a-s);return o[0]=l,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=u,o[9]=d,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,n,i,r,s,a){const o=this.elements,l=1/(n-e),u=1/(i-r),c=1/(a-s),d=(n+e)*l,h=(i+r)*u,f=(a+s)*c;return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-d,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const Ao=new q,ji=new wt,AF=new q(0,0,0),RF=new q(1,1,1),cs=new q,Pd=new q,wi=new q,hb=new wt,fb=new fi;class hu{constructor(e=0,n=0,i=0,r=hu.DefaultOrder){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,r=this._order){return this._x=e,this._y=n,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const r=e.elements,s=r[0],a=r[4],o=r[8],l=r[1],u=r[5],c=r[9],d=r[2],h=r[6],f=r[10];switch(n){case"XYZ":this._y=Math.asin(gn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-gn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,f),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(gn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-gn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(gn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(o,f));break;case"XZY":this._z=Math.asin(-gn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-c,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return hb.makeRotationFromQuaternion(e),this.setFromRotationMatrix(hb,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return fb.setFromEuler(this),this.setFromQuaternion(fb,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}hu.DefaultOrder="XYZ";hu.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Pf{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let PF=0;const pb=new q,Ro=new fi,Dr=new wt,Ld=new q,Du=new q,LF=new q,IF=new fi,mb=new q(1,0,0),vb=new q(0,1,0),gb=new q(0,0,1),OF={type:"added"},yb={type:"removed"};class Ft extends Jr{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:PF++}),this.uuid=xi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ft.DefaultUp.clone();const e=new q,n=new hu,i=new fi,r=new q(1,1,1);function s(){i.setFromEuler(n,!1)}function a(){n.setFromQuaternion(i,void 0,!1)}n._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new wt},normalMatrix:{value:new di}}),this.matrix=new wt,this.matrixWorld=new wt,this.matrixAutoUpdate=Ft.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Ft.DefaultMatrixWorldAutoUpdate,this.layers=new Pf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Ro.setFromAxisAngle(e,n),this.quaternion.multiply(Ro),this}rotateOnWorldAxis(e,n){return Ro.setFromAxisAngle(e,n),this.quaternion.premultiply(Ro),this}rotateX(e){return this.rotateOnAxis(mb,e)}rotateY(e){return this.rotateOnAxis(vb,e)}rotateZ(e){return this.rotateOnAxis(gb,e)}translateOnAxis(e,n){return pb.copy(e).applyQuaternion(this.quaternion),this.position.add(pb.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(mb,e)}translateY(e){return this.translateOnAxis(vb,e)}translateZ(e){return this.translateOnAxis(gb,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Dr.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?Ld.copy(e):Ld.set(e,n,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Du.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Dr.lookAt(Du,Ld,this.up):Dr.lookAt(Ld,Du,this.up),this.quaternion.setFromRotationMatrix(Dr),r&&(Dr.extractRotation(r.matrixWorld),Ro.setFromRotationMatrix(Dr),this.quaternion.premultiply(Ro.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(OF)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(yb)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(yb)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Dr.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Dr.multiply(e.parent.matrixWorld)),e.applyMatrix4(Dr),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectByProperty(e,n);if(a!==void 0)return a}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Du,e,LF),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Du,IF,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,r=n.length;i<r;i++){const s=n[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++){const o=r[s];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const d=l[u];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,u=this.material.length;l<u;l++)o.push(s(e.materials,this.material[l]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(s(e.animations,l))}}if(n){const o=a(e.geometries),l=a(e.materials),u=a(e.textures),c=a(e.images),d=a(e.shapes),h=a(e.skeletons),f=a(e.animations),m=a(e.nodes);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),c.length>0&&(i.images=c),d.length>0&&(i.shapes=d),h.length>0&&(i.skeletons=h),f.length>0&&(i.animations=f),m.length>0&&(i.nodes=m)}return i.object=r,i;function a(o){const l=[];for(const u in o){const c=o[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Ft.DefaultUp=new q(0,1,0);Ft.DefaultMatrixAutoUpdate=!0;Ft.DefaultMatrixWorldAutoUpdate=!0;const Ki=new q,Nr=new q,Mp=new q,kr=new q,Po=new q,Lo=new q,bb=new q,Tp=new q,Ep=new q,xp=new q;class ki{constructor(e=new q,n=new q,i=new q){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,r){r.subVectors(i,n),Ki.subVectors(e,n),r.cross(Ki);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,n,i,r,s){Ki.subVectors(r,n),Nr.subVectors(i,n),Mp.subVectors(e,n);const a=Ki.dot(Ki),o=Ki.dot(Nr),l=Ki.dot(Mp),u=Nr.dot(Nr),c=Nr.dot(Mp),d=a*u-o*o;if(d===0)return s.set(-2,-1,-1);const h=1/d,f=(u*l-o*c)*h,m=(a*c-o*l)*h;return s.set(1-f-m,m,f)}static containsPoint(e,n,i,r){return this.getBarycoord(e,n,i,r,kr),kr.x>=0&&kr.y>=0&&kr.x+kr.y<=1}static getUV(e,n,i,r,s,a,o,l){return this.getBarycoord(e,n,i,r,kr),l.set(0,0),l.addScaledVector(s,kr.x),l.addScaledVector(a,kr.y),l.addScaledVector(o,kr.z),l}static isFrontFacing(e,n,i,r){return Ki.subVectors(i,n),Nr.subVectors(e,n),Ki.cross(Nr).dot(r)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,r){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,n,i,r){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ki.subVectors(this.c,this.b),Nr.subVectors(this.a,this.b),Ki.cross(Nr).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ki.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return ki.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,i,r,s){return ki.getUV(e,this.a,this.b,this.c,n,i,r,s)}containsPoint(e){return ki.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ki.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,r=this.b,s=this.c;let a,o;Po.subVectors(r,i),Lo.subVectors(s,i),Tp.subVectors(e,i);const l=Po.dot(Tp),u=Lo.dot(Tp);if(l<=0&&u<=0)return n.copy(i);Ep.subVectors(e,r);const c=Po.dot(Ep),d=Lo.dot(Ep);if(c>=0&&d<=c)return n.copy(r);const h=l*d-c*u;if(h<=0&&l>=0&&c<=0)return a=l/(l-c),n.copy(i).addScaledVector(Po,a);xp.subVectors(e,s);const f=Po.dot(xp),m=Lo.dot(xp);if(m>=0&&f<=m)return n.copy(s);const v=f*u-l*m;if(v<=0&&u>=0&&m<=0)return o=u/(u-m),n.copy(i).addScaledVector(Lo,o);const g=c*m-f*d;if(g<=0&&d-c>=0&&f-m>=0)return bb.subVectors(s,r),o=(d-c)/(d-c+(f-m)),n.copy(r).addScaledVector(bb,o);const y=1/(g+v+h);return a=v*y,o=h*y,n.copy(i).addScaledVector(Po,a).addScaledVector(Lo,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let DF=0;class Jn extends Jr{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:DF++}),this.uuid=xi(),this.name="",this.type="Material",this.blending=$a,this.side=ro,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Mg,this.blendDst=Tg,this.blendEquation=xa,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=zh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=hM,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Sh,this.stencilZFail=Sh,this.stencilZPass=Sh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){console.warn("THREE.Material: '"+n+"' parameter is undefined.");continue}const r=this[n];if(r===void 0){console.warn("THREE."+this.type+": '"+n+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==$a&&(i.blending=this.blending),this.side!==ro&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function r(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(n){const s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const r=n.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=n[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class ea extends Jn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new it(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Hc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const _n=new q,Id=new ke;class Jt{constructor(e,n,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i===!0,this.usage=Tc,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=n.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)Id.fromBufferAttribute(this,n),Id.applyMatrix3(e),this.setXY(n,Id.x,Id.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)_n.fromBufferAttribute(this,n),_n.applyMatrix3(e),this.setXYZ(n,_n.x,_n.y,_n.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)_n.fromBufferAttribute(this,n),_n.applyMatrix4(e),this.setXYZ(n,_n.x,_n.y,_n.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)_n.fromBufferAttribute(this,n),_n.applyNormalMatrix(e),this.setXYZ(n,_n.x,_n.y,_n.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)_n.fromBufferAttribute(this,n),_n.transformDirection(e),this.setXYZ(n,_n.x,_n.y,_n.z);return this}set(e,n=0){return this.array.set(e,n),this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Wr(n,this.array)),n}setX(e,n){return this.normalized&&(n=Yt(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Wr(n,this.array)),n}setY(e,n){return this.normalized&&(n=Yt(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Wr(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Yt(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Wr(n,this.array)),n}setW(e,n){return this.normalized&&(n=Yt(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=Yt(n,this.array),i=Yt(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=Yt(n,this.array),i=Yt(i,this.array),r=Yt(r,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e*=this.itemSize,this.normalized&&(n=Yt(n,this.array),i=Yt(i,this.array),r=Yt(r,this.array),s=Yt(s,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Tc&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class NF extends Jt{constructor(e,n,i){super(new Int8Array(e),n,i)}}class kF extends Jt{constructor(e,n,i){super(new Uint8Array(e),n,i)}}class FF extends Jt{constructor(e,n,i){super(new Uint8ClampedArray(e),n,i)}}class UF extends Jt{constructor(e,n,i){super(new Int16Array(e),n,i)}}class Pg extends Jt{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class BF extends Jt{constructor(e,n,i){super(new Int32Array(e),n,i)}}class Lg extends Jt{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class zF extends Jt{constructor(e,n,i){super(new Uint16Array(e),n,i),this.isFloat16BufferAttribute=!0}}class ot extends Jt{constructor(e,n,i){super(new Float32Array(e),n,i)}}class VF extends Jt{constructor(e,n,i){super(new Float64Array(e),n,i)}}let HF=0;const Ii=new wt,Cp=new Ft,Io=new q,_i=new fo,Nu=new fo,In=new q;class xt extends Jr{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:HF++}),this.uuid=xi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(pM(e)?Lg:Pg)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new di().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ii.makeRotationFromQuaternion(e),this.applyMatrix4(Ii),this}rotateX(e){return Ii.makeRotationX(e),this.applyMatrix4(Ii),this}rotateY(e){return Ii.makeRotationY(e),this.applyMatrix4(Ii),this}rotateZ(e){return Ii.makeRotationZ(e),this.applyMatrix4(Ii),this}translate(e,n,i){return Ii.makeTranslation(e,n,i),this.applyMatrix4(Ii),this}scale(e,n,i){return Ii.makeScale(e,n,i),this.applyMatrix4(Ii),this}lookAt(e){return Cp.lookAt(e),Cp.updateMatrix(),this.applyMatrix4(Cp.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Io).negate(),this.translate(Io.x,Io.y,Io.z),this}setFromPoints(e){const n=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ot(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new fo);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new q(-1/0,-1/0,-1/0),new q(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,r=n.length;i<r;i++){const s=n[i];_i.setFromBufferAttribute(s),this.morphTargetsRelative?(In.addVectors(this.boundingBox.min,_i.min),this.boundingBox.expandByPoint(In),In.addVectors(this.boundingBox.max,_i.max),this.boundingBox.expandByPoint(In)):(this.boundingBox.expandByPoint(_i.min),this.boundingBox.expandByPoint(_i.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new po);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new q,1/0);return}if(e){const i=this.boundingSphere.center;if(_i.setFromBufferAttribute(e),n)for(let s=0,a=n.length;s<a;s++){const o=n[s];Nu.setFromBufferAttribute(o),this.morphTargetsRelative?(In.addVectors(_i.min,Nu.min),_i.expandByPoint(In),In.addVectors(_i.max,Nu.max),_i.expandByPoint(In)):(_i.expandByPoint(Nu.min),_i.expandByPoint(Nu.max))}_i.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)In.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(In));if(n)for(let s=0,a=n.length;s<a;s++){const o=n[s],l=this.morphTargetsRelative;for(let u=0,c=o.count;u<c;u++)In.fromBufferAttribute(o,u),l&&(Io.fromBufferAttribute(e,u),In.add(Io)),r=Math.max(r,i.distanceToSquared(In))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=n.position.array,s=n.normal.array,a=n.uv.array,o=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Jt(new Float32Array(4*o),4));const l=this.getAttribute("tangent").array,u=[],c=[];for(let L=0;L<o;L++)u[L]=new q,c[L]=new q;const d=new q,h=new q,f=new q,m=new ke,v=new ke,g=new ke,y=new q,S=new q;function b(L,k,F){d.fromArray(r,L*3),h.fromArray(r,k*3),f.fromArray(r,F*3),m.fromArray(a,L*2),v.fromArray(a,k*2),g.fromArray(a,F*2),h.sub(d),f.sub(d),v.sub(m),g.sub(m);const G=1/(v.x*g.y-g.x*v.y);!isFinite(G)||(y.copy(h).multiplyScalar(g.y).addScaledVector(f,-v.y).multiplyScalar(G),S.copy(f).multiplyScalar(v.x).addScaledVector(h,-g.x).multiplyScalar(G),u[L].add(y),u[k].add(y),u[F].add(y),c[L].add(S),c[k].add(S),c[F].add(S))}let w=this.groups;w.length===0&&(w=[{start:0,count:i.length}]);for(let L=0,k=w.length;L<k;++L){const F=w[L],G=F.start,H=F.count;for(let J=G,V=G+H;J<V;J+=3)b(i[J+0],i[J+1],i[J+2])}const E=new q,T=new q,I=new q,_=new q;function R(L){I.fromArray(s,L*3),_.copy(I);const k=u[L];E.copy(k),E.sub(I.multiplyScalar(I.dot(k))).normalize(),T.crossVectors(_,k);const G=T.dot(c[L])<0?-1:1;l[L*4]=E.x,l[L*4+1]=E.y,l[L*4+2]=E.z,l[L*4+3]=G}for(let L=0,k=w.length;L<k;++L){const F=w[L],G=F.start,H=F.count;for(let J=G,V=G+H;J<V;J+=3)R(i[J+0]),R(i[J+1]),R(i[J+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Jt(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);const r=new q,s=new q,a=new q,o=new q,l=new q,u=new q,c=new q,d=new q;if(e)for(let h=0,f=e.count;h<f;h+=3){const m=e.getX(h+0),v=e.getX(h+1),g=e.getX(h+2);r.fromBufferAttribute(n,m),s.fromBufferAttribute(n,v),a.fromBufferAttribute(n,g),c.subVectors(a,s),d.subVectors(r,s),c.cross(d),o.fromBufferAttribute(i,m),l.fromBufferAttribute(i,v),u.fromBufferAttribute(i,g),o.add(c),l.add(c),u.add(c),i.setXYZ(m,o.x,o.y,o.z),i.setXYZ(v,l.x,l.y,l.z),i.setXYZ(g,u.x,u.y,u.z)}else for(let h=0,f=n.count;h<f;h+=3)r.fromBufferAttribute(n,h+0),s.fromBufferAttribute(n,h+1),a.fromBufferAttribute(n,h+2),c.subVectors(a,s),d.subVectors(r,s),c.cross(d),i.setXYZ(h+0,c.x,c.y,c.z),i.setXYZ(h+1,c.x,c.y,c.z),i.setXYZ(h+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)In.fromBufferAttribute(e,n),In.normalize(),e.setXYZ(n,In.x,In.y,In.z)}toNonIndexed(){function e(o,l){const u=o.array,c=o.itemSize,d=o.normalized,h=new u.constructor(l.length*c);let f=0,m=0;for(let v=0,g=l.length;v<g;v++){o.isInterleavedBufferAttribute?f=l[v]*o.data.stride+o.offset:f=l[v]*c;for(let y=0;y<c;y++)h[m++]=u[f++]}return new Jt(h,c,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new xt,i=this.index.array,r=this.attributes;for(const o in r){const l=r[o],u=e(l,i);n.setAttribute(o,u)}const s=this.morphAttributes;for(const o in s){const l=[],u=s[o];for(let c=0,d=u.length;c<d;c++){const h=u[c],f=e(h,i);l.push(f)}n.morphAttributes[o]=l}n.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const u=a[o];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const l in i){const u=i[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let d=0,h=u.length;d<h;d++){const f=u[d];c.push(f.toJSON(e.data))}c.length>0&&(r[l]=c,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(n));const r=e.attributes;for(const u in r){const c=r[u];this.setAttribute(u,c.clone(n))}const s=e.morphAttributes;for(const u in s){const c=[],d=s[u];for(let h=0,f=d.length;h<f;h++)c.push(d[h].clone(n));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let u=0,c=a.length;u<c;u++){const d=a[u];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const wb=new wt,Oo=new Wc,Ap=new po,ds=new q,hs=new q,fs=new q,Rp=new q,Pp=new q,Lp=new q,Od=new q,Dd=new q,Nd=new q,kd=new ke,Fd=new ke,Ud=new ke,Ip=new q,Bd=new q;class Gn extends Ft{constructor(e=new xt,n=new ea){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}raycast(e,n){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),Ap.copy(i.boundingSphere),Ap.applyMatrix4(s),e.ray.intersectsSphere(Ap)===!1)||(wb.copy(s).invert(),Oo.copy(e.ray).applyMatrix4(wb),i.boundingBox!==null&&Oo.intersectsBox(i.boundingBox)===!1))return;let a;const o=i.index,l=i.attributes.position,u=i.morphAttributes.position,c=i.morphTargetsRelative,d=i.attributes.uv,h=i.attributes.uv2,f=i.groups,m=i.drawRange;if(o!==null)if(Array.isArray(r))for(let v=0,g=f.length;v<g;v++){const y=f[v],S=r[y.materialIndex],b=Math.max(y.start,m.start),w=Math.min(o.count,Math.min(y.start+y.count,m.start+m.count));for(let E=b,T=w;E<T;E+=3){const I=o.getX(E),_=o.getX(E+1),R=o.getX(E+2);a=zd(this,S,e,Oo,l,u,c,d,h,I,_,R),a&&(a.faceIndex=Math.floor(E/3),a.face.materialIndex=y.materialIndex,n.push(a))}}else{const v=Math.max(0,m.start),g=Math.min(o.count,m.start+m.count);for(let y=v,S=g;y<S;y+=3){const b=o.getX(y),w=o.getX(y+1),E=o.getX(y+2);a=zd(this,r,e,Oo,l,u,c,d,h,b,w,E),a&&(a.faceIndex=Math.floor(y/3),n.push(a))}}else if(l!==void 0)if(Array.isArray(r))for(let v=0,g=f.length;v<g;v++){const y=f[v],S=r[y.materialIndex],b=Math.max(y.start,m.start),w=Math.min(l.count,Math.min(y.start+y.count,m.start+m.count));for(let E=b,T=w;E<T;E+=3){const I=E,_=E+1,R=E+2;a=zd(this,S,e,Oo,l,u,c,d,h,I,_,R),a&&(a.faceIndex=Math.floor(E/3),a.face.materialIndex=y.materialIndex,n.push(a))}}else{const v=Math.max(0,m.start),g=Math.min(l.count,m.start+m.count);for(let y=v,S=g;y<S;y+=3){const b=y,w=y+1,E=y+2;a=zd(this,r,e,Oo,l,u,c,d,h,b,w,E),a&&(a.faceIndex=Math.floor(y/3),n.push(a))}}}}function GF(t,e,n,i,r,s,a,o){let l;if(e.side===Ei?l=i.intersectTriangle(a,s,r,!0,o):l=i.intersectTriangle(r,s,a,e.side!==Hr,o),l===null)return null;Bd.copy(o),Bd.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(Bd);return u<n.near||u>n.far?null:{distance:u,point:Bd.clone(),object:t}}function zd(t,e,n,i,r,s,a,o,l,u,c,d){ds.fromBufferAttribute(r,u),hs.fromBufferAttribute(r,c),fs.fromBufferAttribute(r,d);const h=t.morphTargetInfluences;if(s&&h){Od.set(0,0,0),Dd.set(0,0,0),Nd.set(0,0,0);for(let m=0,v=s.length;m<v;m++){const g=h[m],y=s[m];g!==0&&(Rp.fromBufferAttribute(y,u),Pp.fromBufferAttribute(y,c),Lp.fromBufferAttribute(y,d),a?(Od.addScaledVector(Rp,g),Dd.addScaledVector(Pp,g),Nd.addScaledVector(Lp,g)):(Od.addScaledVector(Rp.sub(ds),g),Dd.addScaledVector(Pp.sub(hs),g),Nd.addScaledVector(Lp.sub(fs),g)))}ds.add(Od),hs.add(Dd),fs.add(Nd)}t.isSkinnedMesh&&(t.boneTransform(u,ds),t.boneTransform(c,hs),t.boneTransform(d,fs));const f=GF(t,e,n,i,ds,hs,fs,Ip);if(f){o&&(kd.fromBufferAttribute(o,u),Fd.fromBufferAttribute(o,c),Ud.fromBufferAttribute(o,d),f.uv=ki.getUV(Ip,ds,hs,fs,kd,Fd,Ud,new ke)),l&&(kd.fromBufferAttribute(l,u),Fd.fromBufferAttribute(l,c),Ud.fromBufferAttribute(l,d),f.uv2=ki.getUV(Ip,ds,hs,fs,kd,Fd,Ud,new ke));const m={a:u,b:c,c:d,normal:new q,materialIndex:0};ki.getNormal(ds,hs,fs,m.normal),f.face=m}return f}class ta extends xt{constructor(e=1,n=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const l=[],u=[],c=[],d=[];let h=0,f=0;m("z","y","x",-1,-1,i,n,e,a,s,0),m("z","y","x",1,-1,i,n,-e,a,s,1),m("x","z","y",1,1,e,i,n,r,a,2),m("x","z","y",1,-1,e,i,-n,r,a,3),m("x","y","z",1,-1,e,n,i,r,s,4),m("x","y","z",-1,-1,e,n,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new ot(u,3)),this.setAttribute("normal",new ot(c,3)),this.setAttribute("uv",new ot(d,2));function m(v,g,y,S,b,w,E,T,I,_,R){const L=w/I,k=E/_,F=w/2,G=E/2,H=T/2,J=I+1,V=_+1;let re=0,j=0;const Z=new q;for(let z=0;z<V;z++){const ee=z*k-G;for(let Q=0;Q<J;Q++){const fe=Q*L-F;Z[v]=fe*S,Z[g]=ee*b,Z[y]=H,u.push(Z.x,Z.y,Z.z),Z[v]=0,Z[g]=0,Z[y]=T>0?1:-1,c.push(Z.x,Z.y,Z.z),d.push(Q/I),d.push(1-z/_),re+=1}}for(let z=0;z<_;z++)for(let ee=0;ee<I;ee++){const Q=h+ee+J*z,fe=h+ee+J*(z+1),Ee=h+(ee+1)+J*(z+1),ne=h+(ee+1)+J*z;l.push(Q,fe,ne),l.push(fe,Ee,ne),j+=6}o.addGroup(f,j,R),f+=j,h+=re}}static fromJSON(e){return new ta(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function au(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function ni(t){const e={};for(let n=0;n<t.length;n++){const i=au(t[n]);for(const r in i)e[r]=i[r]}return e}function WF(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}const vM={clone:au,merge:ni};var $F=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,XF=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class xr extends Jn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=$F,this.fragmentShader=XF,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=au(e.uniforms),this.uniformsGroups=WF(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?n.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?n.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?n.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?n.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?n.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?n.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?n.uniforms[r]={type:"m4",value:a.toArray()}:n.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class Lf extends Ft{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new wt,this.projectionMatrix=new wt,this.projectionMatrixInverse=new wt}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Bn extends Lf{constructor(e=50,n=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Ec*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Ya*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ec*2*Math.atan(Math.tan(Ya*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,i,r,s,a){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Ya*.5*this.fov)/this.zoom,i=2*n,r=this.aspect*i,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,u=a.fullHeight;s+=a.offsetX*r/l,n-=a.offsetY*i/u,r*=a.width/l,i*=a.height/u}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,n,n-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Do=90,No=1;class gM extends Ft{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new Bn(Do,No,e,n);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new q(1,0,0)),this.add(r);const s=new Bn(Do,No,e,n);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new q(-1,0,0)),this.add(s);const a=new Bn(Do,No,e,n);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new q(0,1,0)),this.add(a);const o=new Bn(Do,No,e,n);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new q(0,-1,0)),this.add(o);const l=new Bn(Do,No,e,n);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new q(0,0,1)),this.add(l);const u=new Bn(Do,No,e,n);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new q(0,0,-1)),this.add(u)}update(e,n){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,a,o,l,u]=this.children,c=e.getRenderTarget(),d=e.toneMapping,h=e.xr.enabled;e.toneMapping=br,e.xr.enabled=!1;const f=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(n,r),e.setRenderTarget(i,1),e.render(n,s),e.setRenderTarget(i,2),e.render(n,a),e.setRenderTarget(i,3),e.render(n,o),e.setRenderTarget(i,4),e.render(n,l),i.texture.generateMipmaps=f,e.setRenderTarget(i,5),e.render(n,u),e.setRenderTarget(c),e.toneMapping=d,e.xr.enabled=h,i.texture.needsPMREMUpdate=!0}}class $c extends Rn{constructor(e,n,i,r,s,a,o,l,u,c){e=e!==void 0?e:[],n=n!==void 0?n:Xs,super(e,n,i,r,s,a,o,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class yM extends Vi{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new $c(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:vn}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.encoding=n.encoding,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new ta(5,5,5),s=new xr({name:"CubemapFromEquirect",uniforms:au(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Ei,blending:Xr});s.uniforms.tEquirect.value=n;const a=new Gn(r,s),o=n.minFilter;return n.minFilter===ho&&(n.minFilter=vn),new gM(1,10,this).update(e,a),n.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,n,i,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(n,i,r);e.setRenderTarget(s)}}const Op=new q,YF=new q,qF=new di;class _s{constructor(e=new q(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,r){return this.normal.set(e,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const r=Op.subVectors(i,n).cross(YF.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,n){const i=e.delta(Op),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:n.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||qF.getNormalMatrix(e),r=this.coplanarPoint(Op).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ko=new po,Vd=new q;class If{constructor(e=new _s,n=new _s,i=new _s,r=new _s,s=new _s,a=new _s){this.planes=[e,n,i,r,s,a]}set(e,n,i,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(n),o[2].copy(i),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const n=this.planes,i=e.elements,r=i[0],s=i[1],a=i[2],o=i[3],l=i[4],u=i[5],c=i[6],d=i[7],h=i[8],f=i[9],m=i[10],v=i[11],g=i[12],y=i[13],S=i[14],b=i[15];return n[0].setComponents(o-r,d-l,v-h,b-g).normalize(),n[1].setComponents(o+r,d+l,v+h,b+g).normalize(),n[2].setComponents(o+s,d+u,v+f,b+y).normalize(),n[3].setComponents(o-s,d-u,v-f,b-y).normalize(),n[4].setComponents(o-a,d-c,v-m,b-S).normalize(),n[5].setComponents(o+a,d+c,v+m,b+S).normalize(),this}intersectsObject(e){const n=e.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),ko.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(ko)}intersectsSprite(e){return ko.center.set(0,0,0),ko.radius=.7071067811865476,ko.applyMatrix4(e.matrixWorld),this.intersectsSphere(ko)}intersectsSphere(e){const n=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(Vd.x=r.normal.x>0?e.max.x:e.min.x,Vd.y=r.normal.y>0?e.max.y:e.min.y,Vd.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Vd)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function bM(){let t=null,e=!1,n=null,i=null;function r(s,a){n(s,a),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function ZF(t,e){const n=e.isWebGL2,i=new WeakMap;function r(u,c){const d=u.array,h=u.usage,f=t.createBuffer();t.bindBuffer(c,f),t.bufferData(c,d,h),u.onUploadCallback();let m;if(d instanceof Float32Array)m=t.FLOAT;else if(d instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(n)m=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else m=t.UNSIGNED_SHORT;else if(d instanceof Int16Array)m=t.SHORT;else if(d instanceof Uint32Array)m=t.UNSIGNED_INT;else if(d instanceof Int32Array)m=t.INT;else if(d instanceof Int8Array)m=t.BYTE;else if(d instanceof Uint8Array)m=t.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)m=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:f,type:m,bytesPerElement:d.BYTES_PER_ELEMENT,version:u.version}}function s(u,c,d){const h=c.array,f=c.updateRange;t.bindBuffer(d,u),f.count===-1?t.bufferSubData(d,0,h):(n?t.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):t.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1)}function a(u){return u.isInterleavedBufferAttribute&&(u=u.data),i.get(u)}function o(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=i.get(u);c&&(t.deleteBuffer(c.buffer),i.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const h=i.get(u);(!h||h.version<u.version)&&i.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const d=i.get(u);d===void 0?i.set(u,r(u,c)):d.version<u.version&&(s(d.buffer,u,c),d.version=u.version)}return{get:a,remove:o,update:l}}class fu extends xt{constructor(e=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:r};const s=e/2,a=n/2,o=Math.floor(i),l=Math.floor(r),u=o+1,c=l+1,d=e/o,h=n/l,f=[],m=[],v=[],g=[];for(let y=0;y<c;y++){const S=y*h-a;for(let b=0;b<u;b++){const w=b*d-s;m.push(w,-S,0),v.push(0,0,1),g.push(b/o),g.push(1-y/l)}}for(let y=0;y<l;y++)for(let S=0;S<o;S++){const b=S+u*y,w=S+u*(y+1),E=S+1+u*(y+1),T=S+1+u*y;f.push(b,w,T),f.push(w,E,T)}this.setIndex(f),this.setAttribute("position",new ot(m,3)),this.setAttribute("normal",new ot(v,3)),this.setAttribute("uv",new ot(g,2))}static fromJSON(e){return new fu(e.width,e.height,e.widthSegments,e.heightSegments)}}var jF=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,KF=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,JF=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,QF=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,eU=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,tU=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,nU="vec3 transformed = vec3( position );",iU=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,rU=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
		float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
		float x2 = x * x;
		float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
		return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,sU=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,	0.0556434,
		-1.5371385,	1.8760108, -0.2040259,
		-0.4985314,	0.0415560,	1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,aU=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,oU=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,lU=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,uU=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,cU=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,dU=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,hU=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,fU=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,pU=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,mU=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,vU=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,gU=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,yU=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,bU=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,wU=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,_U=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,SU="gl_FragColor = linearToOutputTexel( gl_FragColor );",MU=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,TU=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,EU=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,xU=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,CU=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,AU=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,RU=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,PU=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,LU=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,IU=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,OU=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,DU=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,NU=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,kU=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,FU=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert
#define Material_LightProbeLOD( material )	(0)`,UU=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,BU=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,zU=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,VU=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,HU=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,GU=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,WU=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,$U=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(		0, 1,		0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,XU=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,YU=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,qU=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,ZU=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,jU=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,KU=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,JU=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,QU=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,eB=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,tB=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,nB=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,iB=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,rB=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,sB=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,aB=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,oB=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,lB=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,uB=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,cB=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,dB=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,hB=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,fB=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,pB=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,mB=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,vB=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,gB=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,yB=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,bB=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,wB=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,_B=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,SB=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,MB=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,TB=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,EB=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,xB=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,CB=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
							texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
							f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
							texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
							f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,AB=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,RB=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,PB=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,LB=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,IB=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,OB=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,DB=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,NB=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,kB=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,FB=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,UB=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(	1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,	1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,	1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,BB=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,zB=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,VB=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,HB=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,GB=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,WB=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,$B=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,XB=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,YB=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const qB=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,ZB=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,jB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,KB=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,JB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,QB=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,ez=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,tz=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,nz=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,iz=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,rz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,sz=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,az=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,oz=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,lz=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,uz=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cz=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,dz=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hz=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fz=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pz=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,mz=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vz=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gz=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yz=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,bz=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wz=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_z=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Sz=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Mz=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Tz=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ez=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,xz=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Cz=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Et={alphamap_fragment:jF,alphamap_pars_fragment:KF,alphatest_fragment:JF,alphatest_pars_fragment:QF,aomap_fragment:eU,aomap_pars_fragment:tU,begin_vertex:nU,beginnormal_vertex:iU,bsdfs:rU,iridescence_fragment:sU,bumpmap_pars_fragment:aU,clipping_planes_fragment:oU,clipping_planes_pars_fragment:lU,clipping_planes_pars_vertex:uU,clipping_planes_vertex:cU,color_fragment:dU,color_pars_fragment:hU,color_pars_vertex:fU,color_vertex:pU,common:mU,cube_uv_reflection_fragment:vU,defaultnormal_vertex:gU,displacementmap_pars_vertex:yU,displacementmap_vertex:bU,emissivemap_fragment:wU,emissivemap_pars_fragment:_U,encodings_fragment:SU,encodings_pars_fragment:MU,envmap_fragment:TU,envmap_common_pars_fragment:EU,envmap_pars_fragment:xU,envmap_pars_vertex:CU,envmap_physical_pars_fragment:BU,envmap_vertex:AU,fog_vertex:RU,fog_pars_vertex:PU,fog_fragment:LU,fog_pars_fragment:IU,gradientmap_pars_fragment:OU,lightmap_fragment:DU,lightmap_pars_fragment:NU,lights_lambert_fragment:kU,lights_lambert_pars_fragment:FU,lights_pars_begin:UU,lights_toon_fragment:zU,lights_toon_pars_fragment:VU,lights_phong_fragment:HU,lights_phong_pars_fragment:GU,lights_physical_fragment:WU,lights_physical_pars_fragment:$U,lights_fragment_begin:XU,lights_fragment_maps:YU,lights_fragment_end:qU,logdepthbuf_fragment:ZU,logdepthbuf_pars_fragment:jU,logdepthbuf_pars_vertex:KU,logdepthbuf_vertex:JU,map_fragment:QU,map_pars_fragment:eB,map_particle_fragment:tB,map_particle_pars_fragment:nB,metalnessmap_fragment:iB,metalnessmap_pars_fragment:rB,morphcolor_vertex:sB,morphnormal_vertex:aB,morphtarget_pars_vertex:oB,morphtarget_vertex:lB,normal_fragment_begin:uB,normal_fragment_maps:cB,normal_pars_fragment:dB,normal_pars_vertex:hB,normal_vertex:fB,normalmap_pars_fragment:pB,clearcoat_normal_fragment_begin:mB,clearcoat_normal_fragment_maps:vB,clearcoat_pars_fragment:gB,iridescence_pars_fragment:yB,output_fragment:bB,packing:wB,premultiplied_alpha_fragment:_B,project_vertex:SB,dithering_fragment:MB,dithering_pars_fragment:TB,roughnessmap_fragment:EB,roughnessmap_pars_fragment:xB,shadowmap_pars_fragment:CB,shadowmap_pars_vertex:AB,shadowmap_vertex:RB,shadowmask_pars_fragment:PB,skinbase_vertex:LB,skinning_pars_vertex:IB,skinning_vertex:OB,skinnormal_vertex:DB,specularmap_fragment:NB,specularmap_pars_fragment:kB,tonemapping_fragment:FB,tonemapping_pars_fragment:UB,transmission_fragment:BB,transmission_pars_fragment:zB,uv_pars_fragment:VB,uv_pars_vertex:HB,uv_vertex:GB,uv2_pars_fragment:WB,uv2_pars_vertex:$B,uv2_vertex:XB,worldpos_vertex:YB,background_vert:qB,background_frag:ZB,backgroundCube_vert:jB,backgroundCube_frag:KB,cube_vert:JB,cube_frag:QB,depth_vert:ez,depth_frag:tz,distanceRGBA_vert:nz,distanceRGBA_frag:iz,equirect_vert:rz,equirect_frag:sz,linedashed_vert:az,linedashed_frag:oz,meshbasic_vert:lz,meshbasic_frag:uz,meshlambert_vert:cz,meshlambert_frag:dz,meshmatcap_vert:hz,meshmatcap_frag:fz,meshnormal_vert:pz,meshnormal_frag:mz,meshphong_vert:vz,meshphong_frag:gz,meshphysical_vert:yz,meshphysical_frag:bz,meshtoon_vert:wz,meshtoon_frag:_z,points_vert:Sz,points_frag:Mz,shadow_vert:Tz,shadow_frag:Ez,sprite_vert:xz,sprite_frag:Cz},Ye={common:{diffuse:{value:new it(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new di},uv2Transform:{value:new di},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ke(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new it(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new it(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new di}},sprite:{diffuse:{value:new it(16777215)},opacity:{value:1},center:{value:new ke(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new di}}},Qi={basic:{uniforms:ni([Ye.common,Ye.specularmap,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.fog]),vertexShader:Et.meshbasic_vert,fragmentShader:Et.meshbasic_frag},lambert:{uniforms:ni([Ye.common,Ye.specularmap,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.fog,Ye.lights,{emissive:{value:new it(0)}}]),vertexShader:Et.meshlambert_vert,fragmentShader:Et.meshlambert_frag},phong:{uniforms:ni([Ye.common,Ye.specularmap,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.fog,Ye.lights,{emissive:{value:new it(0)},specular:{value:new it(1118481)},shininess:{value:30}}]),vertexShader:Et.meshphong_vert,fragmentShader:Et.meshphong_frag},standard:{uniforms:ni([Ye.common,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.roughnessmap,Ye.metalnessmap,Ye.fog,Ye.lights,{emissive:{value:new it(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Et.meshphysical_vert,fragmentShader:Et.meshphysical_frag},toon:{uniforms:ni([Ye.common,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.gradientmap,Ye.fog,Ye.lights,{emissive:{value:new it(0)}}]),vertexShader:Et.meshtoon_vert,fragmentShader:Et.meshtoon_frag},matcap:{uniforms:ni([Ye.common,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.fog,{matcap:{value:null}}]),vertexShader:Et.meshmatcap_vert,fragmentShader:Et.meshmatcap_frag},points:{uniforms:ni([Ye.points,Ye.fog]),vertexShader:Et.points_vert,fragmentShader:Et.points_frag},dashed:{uniforms:ni([Ye.common,Ye.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Et.linedashed_vert,fragmentShader:Et.linedashed_frag},depth:{uniforms:ni([Ye.common,Ye.displacementmap]),vertexShader:Et.depth_vert,fragmentShader:Et.depth_frag},normal:{uniforms:ni([Ye.common,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,{opacity:{value:1}}]),vertexShader:Et.meshnormal_vert,fragmentShader:Et.meshnormal_frag},sprite:{uniforms:ni([Ye.sprite,Ye.fog]),vertexShader:Et.sprite_vert,fragmentShader:Et.sprite_frag},background:{uniforms:{uvTransform:{value:new di},t2D:{value:null}},vertexShader:Et.background_vert,fragmentShader:Et.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:Et.backgroundCube_vert,fragmentShader:Et.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Et.cube_vert,fragmentShader:Et.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Et.equirect_vert,fragmentShader:Et.equirect_frag},distanceRGBA:{uniforms:ni([Ye.common,Ye.displacementmap,{referencePosition:{value:new q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Et.distanceRGBA_vert,fragmentShader:Et.distanceRGBA_frag},shadow:{uniforms:ni([Ye.lights,Ye.fog,{color:{value:new it(0)},opacity:{value:1}}]),vertexShader:Et.shadow_vert,fragmentShader:Et.shadow_frag}};Qi.physical={uniforms:ni([Qi.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ke(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new it(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ke},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new it(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new it(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Et.meshphysical_vert,fragmentShader:Et.meshphysical_frag};function Az(t,e,n,i,r,s,a){const o=new it(0);let l=s===!0?0:1,u,c,d=null,h=0,f=null;function m(g,y){let S=!1,b=y.isScene===!0?y.background:null;b&&b.isTexture&&(b=(y.backgroundBlurriness>0?n:e).get(b));const w=t.xr,E=w.getSession&&w.getSession();E&&E.environmentBlendMode==="additive"&&(b=null),b===null?v(o,l):b&&b.isColor&&(v(b,1),S=!0),(t.autoClear||S)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),b&&(b.isCubeTexture||b.mapping===du)?(c===void 0&&(c=new Gn(new ta(1,1,1),new xr({name:"BackgroundCubeMaterial",uniforms:au(Qi.backgroundCube.uniforms),vertexShader:Qi.backgroundCube.vertexShader,fragmentShader:Qi.backgroundCube.fragmentShader,side:Ei,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(T,I,_){this.matrixWorld.copyPosition(_.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),c.material.uniforms.envMap.value=b,c.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=y.backgroundBlurriness,(d!==b||h!==b.version||f!==t.toneMapping)&&(c.material.needsUpdate=!0,d=b,h=b.version,f=t.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null)):b&&b.isTexture&&(u===void 0&&(u=new Gn(new fu(2,2),new xr({name:"BackgroundMaterial",uniforms:au(Qi.background.uniforms),vertexShader:Qi.background.vertexShader,fragmentShader:Qi.background.fragmentShader,side:ro,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=b,b.matrixAutoUpdate===!0&&b.updateMatrix(),u.material.uniforms.uvTransform.value.copy(b.matrix),(d!==b||h!==b.version||f!==t.toneMapping)&&(u.material.needsUpdate=!0,d=b,h=b.version,f=t.toneMapping),u.layers.enableAll(),g.unshift(u,u.geometry,u.material,0,0,null))}function v(g,y){i.buffers.color.setClear(g.r,g.g,g.b,y,a)}return{getClearColor:function(){return o},setClearColor:function(g,y=1){o.set(g),l=y,v(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(g){l=g,v(o,l)},render:m}}function Rz(t,e,n,i){const r=t.getParameter(t.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),a=i.isWebGL2||s!==null,o={},l=g(null);let u=l,c=!1;function d(H,J,V,re,j){let Z=!1;if(a){const z=v(re,V,J);u!==z&&(u=z,f(u.object)),Z=y(H,re,V,j),Z&&S(H,re,V,j)}else{const z=J.wireframe===!0;(u.geometry!==re.id||u.program!==V.id||u.wireframe!==z)&&(u.geometry=re.id,u.program=V.id,u.wireframe=z,Z=!0)}j!==null&&n.update(j,t.ELEMENT_ARRAY_BUFFER),(Z||c)&&(c=!1,_(H,J,V,re),j!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(j).buffer))}function h(){return i.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function f(H){return i.isWebGL2?t.bindVertexArray(H):s.bindVertexArrayOES(H)}function m(H){return i.isWebGL2?t.deleteVertexArray(H):s.deleteVertexArrayOES(H)}function v(H,J,V){const re=V.wireframe===!0;let j=o[H.id];j===void 0&&(j={},o[H.id]=j);let Z=j[J.id];Z===void 0&&(Z={},j[J.id]=Z);let z=Z[re];return z===void 0&&(z=g(h()),Z[re]=z),z}function g(H){const J=[],V=[],re=[];for(let j=0;j<r;j++)J[j]=0,V[j]=0,re[j]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:J,enabledAttributes:V,attributeDivisors:re,object:H,attributes:{},index:null}}function y(H,J,V,re){const j=u.attributes,Z=J.attributes;let z=0;const ee=V.getAttributes();for(const Q in ee)if(ee[Q].location>=0){const Ee=j[Q];let ne=Z[Q];if(ne===void 0&&(Q==="instanceMatrix"&&H.instanceMatrix&&(ne=H.instanceMatrix),Q==="instanceColor"&&H.instanceColor&&(ne=H.instanceColor)),Ee===void 0||Ee.attribute!==ne||ne&&Ee.data!==ne.data)return!0;z++}return u.attributesNum!==z||u.index!==re}function S(H,J,V,re){const j={},Z=J.attributes;let z=0;const ee=V.getAttributes();for(const Q in ee)if(ee[Q].location>=0){let Ee=Z[Q];Ee===void 0&&(Q==="instanceMatrix"&&H.instanceMatrix&&(Ee=H.instanceMatrix),Q==="instanceColor"&&H.instanceColor&&(Ee=H.instanceColor));const ne={};ne.attribute=Ee,Ee&&Ee.data&&(ne.data=Ee.data),j[Q]=ne,z++}u.attributes=j,u.attributesNum=z,u.index=re}function b(){const H=u.newAttributes;for(let J=0,V=H.length;J<V;J++)H[J]=0}function w(H){E(H,0)}function E(H,J){const V=u.newAttributes,re=u.enabledAttributes,j=u.attributeDivisors;V[H]=1,re[H]===0&&(t.enableVertexAttribArray(H),re[H]=1),j[H]!==J&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](H,J),j[H]=J)}function T(){const H=u.newAttributes,J=u.enabledAttributes;for(let V=0,re=J.length;V<re;V++)J[V]!==H[V]&&(t.disableVertexAttribArray(V),J[V]=0)}function I(H,J,V,re,j,Z){i.isWebGL2===!0&&(V===t.INT||V===t.UNSIGNED_INT)?t.vertexAttribIPointer(H,J,V,j,Z):t.vertexAttribPointer(H,J,V,re,j,Z)}function _(H,J,V,re){if(i.isWebGL2===!1&&(H.isInstancedMesh||re.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;b();const j=re.attributes,Z=V.getAttributes(),z=J.defaultAttributeValues;for(const ee in Z){const Q=Z[ee];if(Q.location>=0){let fe=j[ee];if(fe===void 0&&(ee==="instanceMatrix"&&H.instanceMatrix&&(fe=H.instanceMatrix),ee==="instanceColor"&&H.instanceColor&&(fe=H.instanceColor)),fe!==void 0){const Ee=fe.normalized,ne=fe.itemSize,X=n.get(fe);if(X===void 0)continue;const _e=X.buffer,Ae=X.type,ze=X.bytesPerElement;if(fe.isInterleavedBufferAttribute){const Ie=fe.data,Ge=Ie.stride,N=fe.offset;if(Ie.isInstancedInterleavedBuffer){for(let B=0;B<Q.locationSize;B++)E(Q.location+B,Ie.meshPerAttribute);H.isInstancedMesh!==!0&&re._maxInstanceCount===void 0&&(re._maxInstanceCount=Ie.meshPerAttribute*Ie.count)}else for(let B=0;B<Q.locationSize;B++)w(Q.location+B);t.bindBuffer(t.ARRAY_BUFFER,_e);for(let B=0;B<Q.locationSize;B++)I(Q.location+B,ne/Q.locationSize,Ae,Ee,Ge*ze,(N+ne/Q.locationSize*B)*ze)}else{if(fe.isInstancedBufferAttribute){for(let Ie=0;Ie<Q.locationSize;Ie++)E(Q.location+Ie,fe.meshPerAttribute);H.isInstancedMesh!==!0&&re._maxInstanceCount===void 0&&(re._maxInstanceCount=fe.meshPerAttribute*fe.count)}else for(let Ie=0;Ie<Q.locationSize;Ie++)w(Q.location+Ie);t.bindBuffer(t.ARRAY_BUFFER,_e);for(let Ie=0;Ie<Q.locationSize;Ie++)I(Q.location+Ie,ne/Q.locationSize,Ae,Ee,ne*ze,ne/Q.locationSize*Ie*ze)}}else if(z!==void 0){const Ee=z[ee];if(Ee!==void 0)switch(Ee.length){case 2:t.vertexAttrib2fv(Q.location,Ee);break;case 3:t.vertexAttrib3fv(Q.location,Ee);break;case 4:t.vertexAttrib4fv(Q.location,Ee);break;default:t.vertexAttrib1fv(Q.location,Ee)}}}}T()}function R(){F();for(const H in o){const J=o[H];for(const V in J){const re=J[V];for(const j in re)m(re[j].object),delete re[j];delete J[V]}delete o[H]}}function L(H){if(o[H.id]===void 0)return;const J=o[H.id];for(const V in J){const re=J[V];for(const j in re)m(re[j].object),delete re[j];delete J[V]}delete o[H.id]}function k(H){for(const J in o){const V=o[J];if(V[H.id]===void 0)continue;const re=V[H.id];for(const j in re)m(re[j].object),delete re[j];delete V[H.id]}}function F(){G(),c=!0,u!==l&&(u=l,f(u.object))}function G(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:F,resetDefaultState:G,dispose:R,releaseStatesOfGeometry:L,releaseStatesOfProgram:k,initAttributes:b,enableAttribute:w,disableUnusedAttributes:T}}function Pz(t,e,n,i){const r=i.isWebGL2;let s;function a(u){s=u}function o(u,c){t.drawArrays(s,u,c),n.update(c,s,1)}function l(u,c,d){if(d===0)return;let h,f;if(r)h=t,f="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[f](s,u,c,d),n.update(c,s,d)}this.setMode=a,this.render=o,this.renderInstances=l}function Lz(t,e,n){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const I=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(I.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(I){if(I==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";I="mediump"}return I==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext!="undefined"&&t instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&t instanceof WebGL2ComputeRenderingContext;let o=n.precision!==void 0?n.precision:"highp";const l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const u=a||e.has("WEBGL_draw_buffers"),c=n.logarithmicDepthBuffer===!0,d=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=t.getParameter(t.MAX_TEXTURE_SIZE),m=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),v=t.getParameter(t.MAX_VERTEX_ATTRIBS),g=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),y=t.getParameter(t.MAX_VARYING_VECTORS),S=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),b=h>0,w=a||e.has("OES_texture_float"),E=b&&w,T=a?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:r,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:c,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:m,maxAttributes:v,maxVertexUniforms:g,maxVaryings:y,maxFragmentUniforms:S,vertexTextures:b,floatFragmentTextures:w,floatVertexTextures:E,maxSamples:T}}function Iz(t){const e=this;let n=null,i=0,r=!1,s=!1;const a=new _s,o=new di,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h,f){const m=d.length!==0||h||i!==0||r;return r=h,n=c(d,f,0),i=d.length,m},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1,u()},this.setState=function(d,h,f){const m=d.clippingPlanes,v=d.clipIntersection,g=d.clipShadows,y=t.get(d);if(!r||m===null||m.length===0||s&&!g)s?c(null):u();else{const S=s?0:i,b=S*4;let w=y.clippingState||null;l.value=w,w=c(m,h,b,f);for(let E=0;E!==b;++E)w[E]=n[E];y.clippingState=w,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=S}};function u(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function c(d,h,f,m){const v=d!==null?d.length:0;let g=null;if(v!==0){if(g=l.value,m!==!0||g===null){const y=f+v*4,S=h.matrixWorldInverse;o.getNormalMatrix(S),(g===null||g.length<y)&&(g=new Float32Array(y));for(let b=0,w=f;b!==v;++b,w+=4)a.copy(d[b]).applyMatrix4(S,o),a.normal.toArray(g,w),g[w+3]=a.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,g}}function Oz(t){let e=new WeakMap;function n(a,o){return o===gc?a.mapping=Xs:o===yc&&(a.mapping=Ys),a}function i(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const o=a.mapping;if(o===gc||o===yc)if(e.has(a)){const l=e.get(a).texture;return n(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const u=new yM(l.height/2);return u.fromEquirectangularTexture(t,a),e.set(a,u),a.addEventListener("dispose",r),n(u.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Of extends Lf{constructor(e=-1,n=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,a=i+e,o=r+n,l=r-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,a=s+u*this.view.width,o-=c*this.view.offsetY,l=o-c*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Jo=4,_b=[.125,.215,.35,.446,.526,.582],Ca=20,Dp=new Of,Sb=new it;let Np=null;const Sa=(1+Math.sqrt(5))/2,Fo=1/Sa,Mb=[new q(1,1,1),new q(-1,1,1),new q(1,1,-1),new q(-1,1,-1),new q(0,Sa,Fo),new q(0,Sa,-Fo),new q(Fo,0,Sa),new q(-Fo,0,Sa),new q(Sa,Fo,0),new q(-Sa,Fo,0)];class Mv{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,i=.1,r=100){Np=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=xb(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Eb(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Np),e.scissorTest=!1,Hd(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Xs||e.mapping===Ys?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Np=this._renderer.getRenderTarget();const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:vn,minFilter:vn,generateMipmaps:!1,type:su,format:Si,encoding:Zs,depthBuffer:!1},r=Tb(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Tb(e,n,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Dz(s)),this._blurMaterial=Nz(s,e,n)}return r}_compileMaterial(e){const n=new Gn(this._lodPlanes[0],e);this._renderer.compile(n,Dp)}_sceneToCubeUV(e,n,i,r){const o=new Bn(90,1,n,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,d=c.autoClear,h=c.toneMapping;c.getClearColor(Sb),c.toneMapping=br,c.autoClear=!1;const f=new ea({name:"PMREM.Background",side:Ei,depthWrite:!1,depthTest:!1}),m=new Gn(new ta,f);let v=!1;const g=e.background;g?g.isColor&&(f.color.copy(g),e.background=null,v=!0):(f.color.copy(Sb),v=!0);for(let y=0;y<6;y++){const S=y%3;S===0?(o.up.set(0,l[y],0),o.lookAt(u[y],0,0)):S===1?(o.up.set(0,0,l[y]),o.lookAt(0,u[y],0)):(o.up.set(0,l[y],0),o.lookAt(0,0,u[y]));const b=this._cubeSize;Hd(r,S*b,y>2?b:0,b,b),c.setRenderTarget(r),v&&c.render(m,o),c.render(e,o)}m.geometry.dispose(),m.material.dispose(),c.toneMapping=h,c.autoClear=d,e.background=g}_textureToCubeUV(e,n){const i=this._renderer,r=e.mapping===Xs||e.mapping===Ys;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=xb()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Eb());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new Gn(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;Hd(n,0,0,3*l,2*l),i.setRenderTarget(n),i.render(a,Dp)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=Mb[(r-1)%Mb.length];this._blur(e,r-1,r,s,a)}n.autoClear=i}_blur(e,n,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,n,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,n,i,r,s,a,o){const l=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,d=new Gn(this._lodPlanes[r],u),h=u.uniforms,f=this._sizeLods[i]-1,m=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*Ca-1),v=s/m,g=isFinite(s)?1+Math.floor(c*v):Ca;g>Ca&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${Ca}`);const y=[];let S=0;for(let I=0;I<Ca;++I){const _=I/v,R=Math.exp(-_*_/2);y.push(R),I===0?S+=R:I<g&&(S+=2*R)}for(let I=0;I<y.length;I++)y[I]=y[I]/S;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=y,h.latitudinal.value=a==="latitudinal",o&&(h.poleAxis.value=o);const{_lodMax:b}=this;h.dTheta.value=m,h.mipInt.value=b-i;const w=this._sizeLods[r],E=3*w*(r>b-Jo?r-b+Jo:0),T=4*(this._cubeSize-w);Hd(n,E,T,3*w,2*w),l.setRenderTarget(n),l.render(d,Dp)}}function Dz(t){const e=[],n=[],i=[];let r=t;const s=t-Jo+1+_b.length;for(let a=0;a<s;a++){const o=Math.pow(2,r);n.push(o);let l=1/o;a>t-Jo?l=_b[a-t+Jo-1]:a===0&&(l=0),i.push(l);const u=1/(o-2),c=-u,d=1+u,h=[c,c,d,c,d,d,c,c,d,d,c,d],f=6,m=6,v=3,g=2,y=1,S=new Float32Array(v*m*f),b=new Float32Array(g*m*f),w=new Float32Array(y*m*f);for(let T=0;T<f;T++){const I=T%3*2/3-1,_=T>2?0:-1,R=[I,_,0,I+2/3,_,0,I+2/3,_+1,0,I,_,0,I+2/3,_+1,0,I,_+1,0];S.set(R,v*m*T),b.set(h,g*m*T);const L=[T,T,T,T,T,T];w.set(L,y*m*T)}const E=new xt;E.setAttribute("position",new Jt(S,v)),E.setAttribute("uv",new Jt(b,g)),E.setAttribute("faceIndex",new Jt(w,y)),e.push(E),r>Jo&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function Tb(t,e,n){const i=new Vi(t,e,n);return i.texture.mapping=du,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Hd(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function Nz(t,e,n){const i=new Float32Array(Ca),r=new q(0,1,0);return new xr({name:"SphericalGaussianBlur",defines:{n:Ca,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Ig(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Xr,depthTest:!1,depthWrite:!1})}function Eb(){return new xr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Ig(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Xr,depthTest:!1,depthWrite:!1})}function xb(){return new xr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Ig(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Xr,depthTest:!1,depthWrite:!1})}function Ig(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function kz(t){let e=new WeakMap,n=null;function i(o){if(o&&o.isTexture){const l=o.mapping,u=l===gc||l===yc,c=l===Xs||l===Ys;if(u||c)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let d=e.get(o);return n===null&&(n=new Mv(t)),d=u?n.fromEquirectangular(o,d):n.fromCubemap(o,d),e.set(o,d),d.texture}else{if(e.has(o))return e.get(o).texture;{const d=o.image;if(u&&d&&d.height>0||c&&d&&r(d)){n===null&&(n=new Mv(t));const h=u?n.fromEquirectangular(o):n.fromCubemap(o);return e.set(o,h),o.addEventListener("dispose",s),h.texture}else return null}}}return o}function r(o){let l=0;const u=6;for(let c=0;c<u;c++)o[c]!==void 0&&l++;return l===u}function s(o){const l=o.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function a(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:a}}function Fz(t){const e={};function n(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(i)}return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(i){i.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(i){const r=n(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Uz(t,e,n,i){const r={},s=new WeakMap;function a(d){const h=d.target;h.index!==null&&e.remove(h.index);for(const m in h.attributes)e.remove(h.attributes[m]);h.removeEventListener("dispose",a),delete r[h.id];const f=s.get(h);f&&(e.remove(f),s.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function o(d,h){return r[h.id]===!0||(h.addEventListener("dispose",a),r[h.id]=!0,n.memory.geometries++),h}function l(d){const h=d.attributes;for(const m in h)e.update(h[m],t.ARRAY_BUFFER);const f=d.morphAttributes;for(const m in f){const v=f[m];for(let g=0,y=v.length;g<y;g++)e.update(v[g],t.ARRAY_BUFFER)}}function u(d){const h=[],f=d.index,m=d.attributes.position;let v=0;if(f!==null){const S=f.array;v=f.version;for(let b=0,w=S.length;b<w;b+=3){const E=S[b+0],T=S[b+1],I=S[b+2];h.push(E,T,T,I,I,E)}}else{const S=m.array;v=m.version;for(let b=0,w=S.length/3-1;b<w;b+=3){const E=b+0,T=b+1,I=b+2;h.push(E,T,T,I,I,E)}}const g=new(pM(h)?Lg:Pg)(h,1);g.version=v;const y=s.get(d);y&&e.remove(y),s.set(d,g)}function c(d){const h=s.get(d);if(h){const f=d.index;f!==null&&h.version<f.version&&u(d)}else u(d);return s.get(d)}return{get:o,update:l,getWireframeAttribute:c}}function Bz(t,e,n,i){const r=i.isWebGL2;let s;function a(h){s=h}let o,l;function u(h){o=h.type,l=h.bytesPerElement}function c(h,f){t.drawElements(s,f,o,h*l),n.update(f,s,1)}function d(h,f,m){if(m===0)return;let v,g;if(r)v=t,g="drawElementsInstanced";else if(v=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[g](s,f,o,h*l,m),n.update(f,s,m)}this.setMode=a,this.setIndex=u,this.render=c,this.renderInstances=d}function zz(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(n.calls++,a){case t.TRIANGLES:n.triangles+=o*(s/3);break;case t.LINES:n.lines+=o*(s/2);break;case t.LINE_STRIP:n.lines+=o*(s-1);break;case t.LINE_LOOP:n.lines+=o*s;break;case t.POINTS:n.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function Vz(t,e){return t[0]-e[0]}function Hz(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Gz(t,e,n){const i={},r=new Float32Array(8),s=new WeakMap,a=new Ht,o=[];for(let u=0;u<8;u++)o[u]=[u,0];function l(u,c,d,h){const f=u.morphTargetInfluences;if(e.isWebGL2===!0){const m=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,v=m!==void 0?m.length:0;let g=s.get(c);if(g===void 0||g.count!==v){let J=function(){G.dispose(),s.delete(c),c.removeEventListener("dispose",J)};g!==void 0&&g.texture.dispose();const b=c.morphAttributes.position!==void 0,w=c.morphAttributes.normal!==void 0,E=c.morphAttributes.color!==void 0,T=c.morphAttributes.position||[],I=c.morphAttributes.normal||[],_=c.morphAttributes.color||[];let R=0;b===!0&&(R=1),w===!0&&(R=2),E===!0&&(R=3);let L=c.attributes.position.count*R,k=1;L>e.maxTextureSize&&(k=Math.ceil(L/e.maxTextureSize),L=e.maxTextureSize);const F=new Float32Array(L*k*4*v),G=new Gc(F,L,k,v);G.type=Gr,G.needsUpdate=!0;const H=R*4;for(let V=0;V<v;V++){const re=T[V],j=I[V],Z=_[V],z=L*k*4*V;for(let ee=0;ee<re.count;ee++){const Q=ee*H;b===!0&&(a.fromBufferAttribute(re,ee),F[z+Q+0]=a.x,F[z+Q+1]=a.y,F[z+Q+2]=a.z,F[z+Q+3]=0),w===!0&&(a.fromBufferAttribute(j,ee),F[z+Q+4]=a.x,F[z+Q+5]=a.y,F[z+Q+6]=a.z,F[z+Q+7]=0),E===!0&&(a.fromBufferAttribute(Z,ee),F[z+Q+8]=a.x,F[z+Q+9]=a.y,F[z+Q+10]=a.z,F[z+Q+11]=Z.itemSize===4?a.w:1)}}g={count:v,texture:G,size:new ke(L,k)},s.set(c,g),c.addEventListener("dispose",J)}let y=0;for(let b=0;b<f.length;b++)y+=f[b];const S=c.morphTargetsRelative?1:1-y;h.getUniforms().setValue(t,"morphTargetBaseInfluence",S),h.getUniforms().setValue(t,"morphTargetInfluences",f),h.getUniforms().setValue(t,"morphTargetsTexture",g.texture,n),h.getUniforms().setValue(t,"morphTargetsTextureSize",g.size)}else{const m=f===void 0?0:f.length;let v=i[c.id];if(v===void 0||v.length!==m){v=[];for(let w=0;w<m;w++)v[w]=[w,0];i[c.id]=v}for(let w=0;w<m;w++){const E=v[w];E[0]=w,E[1]=f[w]}v.sort(Hz);for(let w=0;w<8;w++)w<m&&v[w][1]?(o[w][0]=v[w][0],o[w][1]=v[w][1]):(o[w][0]=Number.MAX_SAFE_INTEGER,o[w][1]=0);o.sort(Vz);const g=c.morphAttributes.position,y=c.morphAttributes.normal;let S=0;for(let w=0;w<8;w++){const E=o[w],T=E[0],I=E[1];T!==Number.MAX_SAFE_INTEGER&&I?(g&&c.getAttribute("morphTarget"+w)!==g[T]&&c.setAttribute("morphTarget"+w,g[T]),y&&c.getAttribute("morphNormal"+w)!==y[T]&&c.setAttribute("morphNormal"+w,y[T]),r[w]=I,S+=I):(g&&c.hasAttribute("morphTarget"+w)===!0&&c.deleteAttribute("morphTarget"+w),y&&c.hasAttribute("morphNormal"+w)===!0&&c.deleteAttribute("morphNormal"+w),r[w]=0)}const b=c.morphTargetsRelative?1:1-S;h.getUniforms().setValue(t,"morphTargetBaseInfluence",b),h.getUniforms().setValue(t,"morphTargetInfluences",r)}}return{update:l}}function Wz(t,e,n,i){let r=new WeakMap;function s(l){const u=i.render.frame,c=l.geometry,d=e.get(l,c);return r.get(d)!==u&&(e.update(d),r.set(d,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER)),d}function a(){r=new WeakMap}function o(l){const u=l.target;u.removeEventListener("dispose",o),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:s,dispose:a}}const wM=new Rn,_M=new Gc,SM=new Rf,MM=new $c,Cb=[],Ab=[],Rb=new Float32Array(16),Pb=new Float32Array(9),Lb=new Float32Array(4);function pu(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let s=Cb[r];if(s===void 0&&(s=new Float32Array(r),Cb[r]=s),e!==0){i.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=n,t[a].toArray(s,o)}return s}function Pn(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Ln(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function Df(t,e){let n=Ab[e];n===void 0&&(n=new Int32Array(e),Ab[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function $z(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Xz(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Pn(n,e))return;t.uniform2fv(this.addr,e),Ln(n,e)}}function Yz(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Pn(n,e))return;t.uniform3fv(this.addr,e),Ln(n,e)}}function qz(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Pn(n,e))return;t.uniform4fv(this.addr,e),Ln(n,e)}}function Zz(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Pn(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ln(n,e)}else{if(Pn(n,i))return;Lb.set(i),t.uniformMatrix2fv(this.addr,!1,Lb),Ln(n,i)}}function jz(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Pn(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ln(n,e)}else{if(Pn(n,i))return;Pb.set(i),t.uniformMatrix3fv(this.addr,!1,Pb),Ln(n,i)}}function Kz(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Pn(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ln(n,e)}else{if(Pn(n,i))return;Rb.set(i),t.uniformMatrix4fv(this.addr,!1,Rb),Ln(n,i)}}function Jz(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Qz(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Pn(n,e))return;t.uniform2iv(this.addr,e),Ln(n,e)}}function eV(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Pn(n,e))return;t.uniform3iv(this.addr,e),Ln(n,e)}}function tV(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Pn(n,e))return;t.uniform4iv(this.addr,e),Ln(n,e)}}function nV(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function iV(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Pn(n,e))return;t.uniform2uiv(this.addr,e),Ln(n,e)}}function rV(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Pn(n,e))return;t.uniform3uiv(this.addr,e),Ln(n,e)}}function sV(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Pn(n,e))return;t.uniform4uiv(this.addr,e),Ln(n,e)}}function aV(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(e||wM,r)}function oV(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||SM,r)}function lV(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||MM,r)}function uV(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||_M,r)}function cV(t){switch(t){case 5126:return $z;case 35664:return Xz;case 35665:return Yz;case 35666:return qz;case 35674:return Zz;case 35675:return jz;case 35676:return Kz;case 5124:case 35670:return Jz;case 35667:case 35671:return Qz;case 35668:case 35672:return eV;case 35669:case 35673:return tV;case 5125:return nV;case 36294:return iV;case 36295:return rV;case 36296:return sV;case 35678:case 36198:case 36298:case 36306:case 35682:return aV;case 35679:case 36299:case 36307:return oV;case 35680:case 36300:case 36308:case 36293:return lV;case 36289:case 36303:case 36311:case 36292:return uV}}function dV(t,e){t.uniform1fv(this.addr,e)}function hV(t,e){const n=pu(e,this.size,2);t.uniform2fv(this.addr,n)}function fV(t,e){const n=pu(e,this.size,3);t.uniform3fv(this.addr,n)}function pV(t,e){const n=pu(e,this.size,4);t.uniform4fv(this.addr,n)}function mV(t,e){const n=pu(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function vV(t,e){const n=pu(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function gV(t,e){const n=pu(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function yV(t,e){t.uniform1iv(this.addr,e)}function bV(t,e){t.uniform2iv(this.addr,e)}function wV(t,e){t.uniform3iv(this.addr,e)}function _V(t,e){t.uniform4iv(this.addr,e)}function SV(t,e){t.uniform1uiv(this.addr,e)}function MV(t,e){t.uniform2uiv(this.addr,e)}function TV(t,e){t.uniform3uiv(this.addr,e)}function EV(t,e){t.uniform4uiv(this.addr,e)}function xV(t,e,n){const i=this.cache,r=e.length,s=Df(n,r);Pn(i,s)||(t.uniform1iv(this.addr,s),Ln(i,s));for(let a=0;a!==r;++a)n.setTexture2D(e[a]||wM,s[a])}function CV(t,e,n){const i=this.cache,r=e.length,s=Df(n,r);Pn(i,s)||(t.uniform1iv(this.addr,s),Ln(i,s));for(let a=0;a!==r;++a)n.setTexture3D(e[a]||SM,s[a])}function AV(t,e,n){const i=this.cache,r=e.length,s=Df(n,r);Pn(i,s)||(t.uniform1iv(this.addr,s),Ln(i,s));for(let a=0;a!==r;++a)n.setTextureCube(e[a]||MM,s[a])}function RV(t,e,n){const i=this.cache,r=e.length,s=Df(n,r);Pn(i,s)||(t.uniform1iv(this.addr,s),Ln(i,s));for(let a=0;a!==r;++a)n.setTexture2DArray(e[a]||_M,s[a])}function PV(t){switch(t){case 5126:return dV;case 35664:return hV;case 35665:return fV;case 35666:return pV;case 35674:return mV;case 35675:return vV;case 35676:return gV;case 5124:case 35670:return yV;case 35667:case 35671:return bV;case 35668:case 35672:return wV;case 35669:case 35673:return _V;case 5125:return SV;case 36294:return MV;case 36295:return TV;case 36296:return EV;case 35678:case 36198:case 36298:case 36306:case 35682:return xV;case 35679:case 36299:case 36307:return CV;case 35680:case 36300:case 36308:case 36293:return AV;case 36289:case 36303:case 36311:case 36292:return RV}}class LV{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.setValue=cV(n.type)}}class IV{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.size=n.size,this.setValue=PV(n.type)}}class OV{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const o=r[s];o.setValue(e,n[o.id],i)}}}const kp=/(\w+)(\])?(\[|\.)?/g;function Ib(t,e){t.seq.push(e),t.map[e.id]=e}function DV(t,e,n){const i=t.name,r=i.length;for(kp.lastIndex=0;;){const s=kp.exec(i),a=kp.lastIndex;let o=s[1];const l=s[2]==="]",u=s[3];if(l&&(o=o|0),u===void 0||u==="["&&a+2===r){Ib(n,u===void 0?new LV(o,t,e):new IV(o,t,e));break}else{let d=n.map[o];d===void 0&&(d=new OV(o),Ib(n,d)),n=d}}}class Th{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(n,r),a=e.getUniformLocation(n,s.name);DV(s,a,this)}}setValue(e,n,i,r){const s=this.map[n];s!==void 0&&s.setValue(e,i,r)}setOptional(e,n,i){const r=n[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,n,i,r){for(let s=0,a=n.length;s!==a;++s){const o=n[s],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,n){const i=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in n&&i.push(a)}return i}}function Ob(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}let NV=0;function kV(t,e){const n=t.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let a=r;a<s;a++){const o=a+1;i.push(`${o===e?">":" "} ${o}: ${n[a]}`)}return i.join(`
`)}function FV(t){switch(t){case Zs:return["Linear","( value )"];case an:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function Db(t,e,n){const i=t.getShaderParameter(e,t.COMPILE_STATUS),r=t.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return n.toUpperCase()+`

`+r+`

`+kV(t.getShaderSource(e),a)}else return r}function UV(t,e){const n=FV(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function BV(t,e){let n;switch(e){case zS:n="Linear";break;case VS:n="Reinhard";break;case HS:n="OptimizedCineon";break;case GS:n="ACESFilmic";break;case WS:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function zV(t){return[t.extensionDerivatives||!!t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Gu).join(`
`)}function VV(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function HV(t,e){const n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=t.getActiveAttrib(e,r),a=s.name;let o=1;s.type===t.FLOAT_MAT2&&(o=2),s.type===t.FLOAT_MAT3&&(o=3),s.type===t.FLOAT_MAT4&&(o=4),n[a]={type:s.type,location:t.getAttribLocation(e,a),locationSize:o}}return n}function Gu(t){return t!==""}function Nb(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function kb(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const GV=/^[ \t]*#include +<([\w\d./]+)>/gm;function Tv(t){return t.replace(GV,WV)}function WV(t,e){const n=Et[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return Tv(n)}const $V=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Fb(t){return t.replace($V,XV)}function XV(t,e,n,i){let r="";for(let s=parseInt(e);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Ub(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function YV(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===Sg?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===yS?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===jo&&(e="SHADOWMAP_TYPE_VSM"),e}function qV(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Xs:case Ys:e="ENVMAP_TYPE_CUBE";break;case du:e="ENVMAP_TYPE_CUBE_UV";break}return e}function ZV(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Ys:e="ENVMAP_MODE_REFRACTION";break}return e}function jV(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Hc:e="ENVMAP_BLENDING_MULTIPLY";break;case US:e="ENVMAP_BLENDING_MIX";break;case BS:e="ENVMAP_BLENDING_ADD";break}return e}function KV(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function JV(t,e,n,i){const r=t.getContext(),s=n.defines;let a=n.vertexShader,o=n.fragmentShader;const l=YV(n),u=qV(n),c=ZV(n),d=jV(n),h=KV(n),f=n.isWebGL2?"":zV(n),m=VV(s),v=r.createProgram();let g,y,S=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(g=[m].filter(Gu).join(`
`),g.length>0&&(g+=`
`),y=[f,m].filter(Gu).join(`
`),y.length>0&&(y+=`
`)):(g=[Ub(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Gu).join(`
`),y=[f,Ub(n),"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+c:"",n.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==br?"#define TONE_MAPPING":"",n.toneMapping!==br?Et.tonemapping_pars_fragment:"",n.toneMapping!==br?BV("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Et.encodings_pars_fragment,UV("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Gu).join(`
`)),a=Tv(a),a=Nb(a,n),a=kb(a,n),o=Tv(o),o=Nb(o,n),o=kb(o,n),a=Fb(a),o=Fb(o),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,y=["#define varying in",n.glslVersion===_v?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===_v?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);const b=S+g+a,w=S+y+o,E=Ob(r,r.VERTEX_SHADER,b),T=Ob(r,r.FRAGMENT_SHADER,w);if(r.attachShader(v,E),r.attachShader(v,T),n.index0AttributeName!==void 0?r.bindAttribLocation(v,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v),t.debug.checkShaderErrors){const R=r.getProgramInfoLog(v).trim(),L=r.getShaderInfoLog(E).trim(),k=r.getShaderInfoLog(T).trim();let F=!0,G=!0;if(r.getProgramParameter(v,r.LINK_STATUS)===!1){F=!1;const H=Db(r,E,"vertex"),J=Db(r,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(v,r.VALIDATE_STATUS)+`

Program Info Log: `+R+`
`+H+`
`+J)}else R!==""?console.warn("THREE.WebGLProgram: Program Info Log:",R):(L===""||k==="")&&(G=!1);G&&(this.diagnostics={runnable:F,programLog:R,vertexShader:{log:L,prefix:g},fragmentShader:{log:k,prefix:y}})}r.deleteShader(E),r.deleteShader(T);let I;this.getUniforms=function(){return I===void 0&&(I=new Th(r,v)),I};let _;return this.getAttributes=function(){return _===void 0&&(_=HV(r,v)),_},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.name=n.shaderName,this.id=NV++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=E,this.fragmentShader=T,this}let QV=0;class e4{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(n),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new t4(e),n.set(e,i)),i}}class t4{constructor(e){this.id=QV++,this.code=e,this.usedTimes=0}}function n4(t,e,n,i,r,s,a){const o=new Pf,l=new e4,u=[],c=r.isWebGL2,d=r.logarithmicDepthBuffer,h=r.vertexTextures;let f=r.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(_,R,L,k,F){const G=k.fog,H=F.geometry,J=_.isMeshStandardMaterial?k.environment:null,V=(_.isMeshStandardMaterial?n:e).get(_.envMap||J),re=!!V&&V.mapping===du?V.image.height:null,j=m[_.type];_.precision!==null&&(f=r.getMaxPrecision(_.precision),f!==_.precision&&console.warn("THREE.WebGLProgram.getParameters:",_.precision,"not supported, using",f,"instead."));const Z=H.morphAttributes.position||H.morphAttributes.normal||H.morphAttributes.color,z=Z!==void 0?Z.length:0;let ee=0;H.morphAttributes.position!==void 0&&(ee=1),H.morphAttributes.normal!==void 0&&(ee=2),H.morphAttributes.color!==void 0&&(ee=3);let Q,fe,Ee,ne;if(j){const Ge=Qi[j];Q=Ge.vertexShader,fe=Ge.fragmentShader}else Q=_.vertexShader,fe=_.fragmentShader,l.update(_),Ee=l.getVertexShaderID(_),ne=l.getFragmentShaderID(_);const X=t.getRenderTarget(),_e=_.alphaTest>0,Ae=_.clearcoat>0,ze=_.iridescence>0;return{isWebGL2:c,shaderID:j,shaderName:_.type,vertexShader:Q,fragmentShader:fe,defines:_.defines,customVertexShaderID:Ee,customFragmentShaderID:ne,isRawShaderMaterial:_.isRawShaderMaterial===!0,glslVersion:_.glslVersion,precision:f,instancing:F.isInstancedMesh===!0,instancingColor:F.isInstancedMesh===!0&&F.instanceColor!==null,supportsVertexTextures:h,outputEncoding:X===null?t.outputEncoding:X.isXRRenderTarget===!0?X.texture.encoding:Zs,map:!!_.map,matcap:!!_.matcap,envMap:!!V,envMapMode:V&&V.mapping,envMapCubeUVHeight:re,lightMap:!!_.lightMap,aoMap:!!_.aoMap,emissiveMap:!!_.emissiveMap,bumpMap:!!_.bumpMap,normalMap:!!_.normalMap,objectSpaceNormalMap:_.normalMapType===dM,tangentSpaceNormalMap:_.normalMapType===Qs,decodeVideoTexture:!!_.map&&_.map.isVideoTexture===!0&&_.map.encoding===an,clearcoat:Ae,clearcoatMap:Ae&&!!_.clearcoatMap,clearcoatRoughnessMap:Ae&&!!_.clearcoatRoughnessMap,clearcoatNormalMap:Ae&&!!_.clearcoatNormalMap,iridescence:ze,iridescenceMap:ze&&!!_.iridescenceMap,iridescenceThicknessMap:ze&&!!_.iridescenceThicknessMap,displacementMap:!!_.displacementMap,roughnessMap:!!_.roughnessMap,metalnessMap:!!_.metalnessMap,specularMap:!!_.specularMap,specularIntensityMap:!!_.specularIntensityMap,specularColorMap:!!_.specularColorMap,opaque:_.transparent===!1&&_.blending===$a,alphaMap:!!_.alphaMap,alphaTest:_e,gradientMap:!!_.gradientMap,sheen:_.sheen>0,sheenColorMap:!!_.sheenColorMap,sheenRoughnessMap:!!_.sheenRoughnessMap,transmission:_.transmission>0,transmissionMap:!!_.transmissionMap,thicknessMap:!!_.thicknessMap,combine:_.combine,vertexTangents:!!_.normalMap&&!!H.attributes.tangent,vertexColors:_.vertexColors,vertexAlphas:_.vertexColors===!0&&!!H.attributes.color&&H.attributes.color.itemSize===4,vertexUvs:!!_.map||!!_.bumpMap||!!_.normalMap||!!_.specularMap||!!_.alphaMap||!!_.emissiveMap||!!_.roughnessMap||!!_.metalnessMap||!!_.clearcoatMap||!!_.clearcoatRoughnessMap||!!_.clearcoatNormalMap||!!_.iridescenceMap||!!_.iridescenceThicknessMap||!!_.displacementMap||!!_.transmissionMap||!!_.thicknessMap||!!_.specularIntensityMap||!!_.specularColorMap||!!_.sheenColorMap||!!_.sheenRoughnessMap,uvsVertexOnly:!(!!_.map||!!_.bumpMap||!!_.normalMap||!!_.specularMap||!!_.alphaMap||!!_.emissiveMap||!!_.roughnessMap||!!_.metalnessMap||!!_.clearcoatNormalMap||!!_.iridescenceMap||!!_.iridescenceThicknessMap||_.transmission>0||!!_.transmissionMap||!!_.thicknessMap||!!_.specularIntensityMap||!!_.specularColorMap||_.sheen>0||!!_.sheenColorMap||!!_.sheenRoughnessMap)&&!!_.displacementMap,fog:!!G,useFog:_.fog===!0,fogExp2:G&&G.isFogExp2,flatShading:!!_.flatShading,sizeAttenuation:_.sizeAttenuation,logarithmicDepthBuffer:d,skinning:F.isSkinnedMesh===!0,morphTargets:H.morphAttributes.position!==void 0,morphNormals:H.morphAttributes.normal!==void 0,morphColors:H.morphAttributes.color!==void 0,morphTargetsCount:z,morphTextureStride:ee,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:_.dithering,shadowMapEnabled:t.shadowMap.enabled&&L.length>0,shadowMapType:t.shadowMap.type,toneMapping:_.toneMapped?t.toneMapping:br,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:_.premultipliedAlpha,doubleSided:_.side===Hr,flipSided:_.side===Ei,useDepthPacking:!!_.depthPacking,depthPacking:_.depthPacking||0,index0AttributeName:_.index0AttributeName,extensionDerivatives:_.extensions&&_.extensions.derivatives,extensionFragDepth:_.extensions&&_.extensions.fragDepth,extensionDrawBuffers:_.extensions&&_.extensions.drawBuffers,extensionShaderTextureLOD:_.extensions&&_.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||i.has("EXT_shader_texture_lod"),customProgramCacheKey:_.customProgramCacheKey()}}function g(_){const R=[];if(_.shaderID?R.push(_.shaderID):(R.push(_.customVertexShaderID),R.push(_.customFragmentShaderID)),_.defines!==void 0)for(const L in _.defines)R.push(L),R.push(_.defines[L]);return _.isRawShaderMaterial===!1&&(y(R,_),S(R,_),R.push(t.outputEncoding)),R.push(_.customProgramCacheKey),R.join()}function y(_,R){_.push(R.precision),_.push(R.outputEncoding),_.push(R.envMapMode),_.push(R.envMapCubeUVHeight),_.push(R.combine),_.push(R.vertexUvs),_.push(R.fogExp2),_.push(R.sizeAttenuation),_.push(R.morphTargetsCount),_.push(R.morphAttributeCount),_.push(R.numDirLights),_.push(R.numPointLights),_.push(R.numSpotLights),_.push(R.numSpotLightMaps),_.push(R.numHemiLights),_.push(R.numRectAreaLights),_.push(R.numDirLightShadows),_.push(R.numPointLightShadows),_.push(R.numSpotLightShadows),_.push(R.numSpotLightShadowsWithMaps),_.push(R.shadowMapType),_.push(R.toneMapping),_.push(R.numClippingPlanes),_.push(R.numClipIntersection),_.push(R.depthPacking)}function S(_,R){o.disableAll(),R.isWebGL2&&o.enable(0),R.supportsVertexTextures&&o.enable(1),R.instancing&&o.enable(2),R.instancingColor&&o.enable(3),R.map&&o.enable(4),R.matcap&&o.enable(5),R.envMap&&o.enable(6),R.lightMap&&o.enable(7),R.aoMap&&o.enable(8),R.emissiveMap&&o.enable(9),R.bumpMap&&o.enable(10),R.normalMap&&o.enable(11),R.objectSpaceNormalMap&&o.enable(12),R.tangentSpaceNormalMap&&o.enable(13),R.clearcoat&&o.enable(14),R.clearcoatMap&&o.enable(15),R.clearcoatRoughnessMap&&o.enable(16),R.clearcoatNormalMap&&o.enable(17),R.iridescence&&o.enable(18),R.iridescenceMap&&o.enable(19),R.iridescenceThicknessMap&&o.enable(20),R.displacementMap&&o.enable(21),R.specularMap&&o.enable(22),R.roughnessMap&&o.enable(23),R.metalnessMap&&o.enable(24),R.gradientMap&&o.enable(25),R.alphaMap&&o.enable(26),R.alphaTest&&o.enable(27),R.vertexColors&&o.enable(28),R.vertexAlphas&&o.enable(29),R.vertexUvs&&o.enable(30),R.vertexTangents&&o.enable(31),R.uvsVertexOnly&&o.enable(32),_.push(o.mask),o.disableAll(),R.fog&&o.enable(0),R.useFog&&o.enable(1),R.flatShading&&o.enable(2),R.logarithmicDepthBuffer&&o.enable(3),R.skinning&&o.enable(4),R.morphTargets&&o.enable(5),R.morphNormals&&o.enable(6),R.morphColors&&o.enable(7),R.premultipliedAlpha&&o.enable(8),R.shadowMapEnabled&&o.enable(9),R.physicallyCorrectLights&&o.enable(10),R.doubleSided&&o.enable(11),R.flipSided&&o.enable(12),R.useDepthPacking&&o.enable(13),R.dithering&&o.enable(14),R.specularIntensityMap&&o.enable(15),R.specularColorMap&&o.enable(16),R.transmission&&o.enable(17),R.transmissionMap&&o.enable(18),R.thicknessMap&&o.enable(19),R.sheen&&o.enable(20),R.sheenColorMap&&o.enable(21),R.sheenRoughnessMap&&o.enable(22),R.decodeVideoTexture&&o.enable(23),R.opaque&&o.enable(24),_.push(o.mask)}function b(_){const R=m[_.type];let L;if(R){const k=Qi[R];L=vM.clone(k.uniforms)}else L=_.uniforms;return L}function w(_,R){let L;for(let k=0,F=u.length;k<F;k++){const G=u[k];if(G.cacheKey===R){L=G,++L.usedTimes;break}}return L===void 0&&(L=new JV(t,R,_,s),u.push(L)),L}function E(_){if(--_.usedTimes===0){const R=u.indexOf(_);u[R]=u[u.length-1],u.pop(),_.destroy()}}function T(_){l.remove(_)}function I(){l.dispose()}return{getParameters:v,getProgramCacheKey:g,getUniforms:b,acquireProgram:w,releaseProgram:E,releaseShaderCache:T,programs:u,dispose:I}}function i4(){let t=new WeakMap;function e(s){let a=t.get(s);return a===void 0&&(a={},t.set(s,a)),a}function n(s){t.delete(s)}function i(s,a,o){t.get(s)[a]=o}function r(){t=new WeakMap}return{get:e,remove:n,update:i,dispose:r}}function r4(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Bb(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function zb(){const t=[];let e=0;const n=[],i=[],r=[];function s(){e=0,n.length=0,i.length=0,r.length=0}function a(d,h,f,m,v,g){let y=t[e];return y===void 0?(y={id:d.id,object:d,geometry:h,material:f,groupOrder:m,renderOrder:d.renderOrder,z:v,group:g},t[e]=y):(y.id=d.id,y.object=d,y.geometry=h,y.material=f,y.groupOrder=m,y.renderOrder=d.renderOrder,y.z=v,y.group=g),e++,y}function o(d,h,f,m,v,g){const y=a(d,h,f,m,v,g);f.transmission>0?i.push(y):f.transparent===!0?r.push(y):n.push(y)}function l(d,h,f,m,v,g){const y=a(d,h,f,m,v,g);f.transmission>0?i.unshift(y):f.transparent===!0?r.unshift(y):n.unshift(y)}function u(d,h){n.length>1&&n.sort(d||r4),i.length>1&&i.sort(h||Bb),r.length>1&&r.sort(h||Bb)}function c(){for(let d=e,h=t.length;d<h;d++){const f=t[d];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:n,transmissive:i,transparent:r,init:s,push:o,unshift:l,finish:c,sort:u}}function s4(){let t=new WeakMap;function e(i,r){const s=t.get(i);let a;return s===void 0?(a=new zb,t.set(i,[a])):r>=s.length?(a=new zb,s.push(a)):a=s[r],a}function n(){t=new WeakMap}return{get:e,dispose:n}}function a4(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new q,color:new it};break;case"SpotLight":n={position:new q,direction:new q,color:new it,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new q,color:new it,distance:0,decay:0};break;case"HemisphereLight":n={direction:new q,skyColor:new it,groundColor:new it};break;case"RectAreaLight":n={color:new it,position:new q,halfWidth:new q,halfHeight:new q};break}return t[e.id]=n,n}}}function o4(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ke};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ke};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ke,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let l4=0;function u4(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function c4(t,e){const n=new a4,i=o4(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)r.probe.push(new q);const s=new q,a=new wt,o=new wt;function l(c,d){let h=0,f=0,m=0;for(let k=0;k<9;k++)r.probe[k].set(0,0,0);let v=0,g=0,y=0,S=0,b=0,w=0,E=0,T=0,I=0,_=0;c.sort(u4);const R=d!==!0?Math.PI:1;for(let k=0,F=c.length;k<F;k++){const G=c[k],H=G.color,J=G.intensity,V=G.distance,re=G.shadow&&G.shadow.map?G.shadow.map.texture:null;if(G.isAmbientLight)h+=H.r*J*R,f+=H.g*J*R,m+=H.b*J*R;else if(G.isLightProbe)for(let j=0;j<9;j++)r.probe[j].addScaledVector(G.sh.coefficients[j],J);else if(G.isDirectionalLight){const j=n.get(G);if(j.color.copy(G.color).multiplyScalar(G.intensity*R),G.castShadow){const Z=G.shadow,z=i.get(G);z.shadowBias=Z.bias,z.shadowNormalBias=Z.normalBias,z.shadowRadius=Z.radius,z.shadowMapSize=Z.mapSize,r.directionalShadow[v]=z,r.directionalShadowMap[v]=re,r.directionalShadowMatrix[v]=G.shadow.matrix,w++}r.directional[v]=j,v++}else if(G.isSpotLight){const j=n.get(G);j.position.setFromMatrixPosition(G.matrixWorld),j.color.copy(H).multiplyScalar(J*R),j.distance=V,j.coneCos=Math.cos(G.angle),j.penumbraCos=Math.cos(G.angle*(1-G.penumbra)),j.decay=G.decay,r.spot[y]=j;const Z=G.shadow;if(G.map&&(r.spotLightMap[I]=G.map,I++,Z.updateMatrices(G),G.castShadow&&_++),r.spotLightMatrix[y]=Z.matrix,G.castShadow){const z=i.get(G);z.shadowBias=Z.bias,z.shadowNormalBias=Z.normalBias,z.shadowRadius=Z.radius,z.shadowMapSize=Z.mapSize,r.spotShadow[y]=z,r.spotShadowMap[y]=re,T++}y++}else if(G.isRectAreaLight){const j=n.get(G);j.color.copy(H).multiplyScalar(J),j.halfWidth.set(G.width*.5,0,0),j.halfHeight.set(0,G.height*.5,0),r.rectArea[S]=j,S++}else if(G.isPointLight){const j=n.get(G);if(j.color.copy(G.color).multiplyScalar(G.intensity*R),j.distance=G.distance,j.decay=G.decay,G.castShadow){const Z=G.shadow,z=i.get(G);z.shadowBias=Z.bias,z.shadowNormalBias=Z.normalBias,z.shadowRadius=Z.radius,z.shadowMapSize=Z.mapSize,z.shadowCameraNear=Z.camera.near,z.shadowCameraFar=Z.camera.far,r.pointShadow[g]=z,r.pointShadowMap[g]=re,r.pointShadowMatrix[g]=G.shadow.matrix,E++}r.point[g]=j,g++}else if(G.isHemisphereLight){const j=n.get(G);j.skyColor.copy(G.color).multiplyScalar(J*R),j.groundColor.copy(G.groundColor).multiplyScalar(J*R),r.hemi[b]=j,b++}}S>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ye.LTC_FLOAT_1,r.rectAreaLTC2=Ye.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Ye.LTC_HALF_1,r.rectAreaLTC2=Ye.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=m;const L=r.hash;(L.directionalLength!==v||L.pointLength!==g||L.spotLength!==y||L.rectAreaLength!==S||L.hemiLength!==b||L.numDirectionalShadows!==w||L.numPointShadows!==E||L.numSpotShadows!==T||L.numSpotMaps!==I)&&(r.directional.length=v,r.spot.length=y,r.rectArea.length=S,r.point.length=g,r.hemi.length=b,r.directionalShadow.length=w,r.directionalShadowMap.length=w,r.pointShadow.length=E,r.pointShadowMap.length=E,r.spotShadow.length=T,r.spotShadowMap.length=T,r.directionalShadowMatrix.length=w,r.pointShadowMatrix.length=E,r.spotLightMatrix.length=T+I-_,r.spotLightMap.length=I,r.numSpotLightShadowsWithMaps=_,L.directionalLength=v,L.pointLength=g,L.spotLength=y,L.rectAreaLength=S,L.hemiLength=b,L.numDirectionalShadows=w,L.numPointShadows=E,L.numSpotShadows=T,L.numSpotMaps=I,r.version=l4++)}function u(c,d){let h=0,f=0,m=0,v=0,g=0;const y=d.matrixWorldInverse;for(let S=0,b=c.length;S<b;S++){const w=c[S];if(w.isDirectionalLight){const E=r.directional[h];E.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(y),h++}else if(w.isSpotLight){const E=r.spot[m];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(y),E.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(y),m++}else if(w.isRectAreaLight){const E=r.rectArea[v];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(y),o.identity(),a.copy(w.matrixWorld),a.premultiply(y),o.extractRotation(a),E.halfWidth.set(w.width*.5,0,0),E.halfHeight.set(0,w.height*.5,0),E.halfWidth.applyMatrix4(o),E.halfHeight.applyMatrix4(o),v++}else if(w.isPointLight){const E=r.point[f];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(y),f++}else if(w.isHemisphereLight){const E=r.hemi[g];E.direction.setFromMatrixPosition(w.matrixWorld),E.direction.transformDirection(y),g++}}}return{setup:l,setupView:u,state:r}}function Vb(t,e){const n=new c4(t,e),i=[],r=[];function s(){i.length=0,r.length=0}function a(d){i.push(d)}function o(d){r.push(d)}function l(d){n.setup(i,d)}function u(d){n.setupView(i,d)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:l,setupLightsView:u,pushLight:a,pushShadow:o}}function d4(t,e){let n=new WeakMap;function i(s,a=0){const o=n.get(s);let l;return o===void 0?(l=new Vb(t,e),n.set(s,[l])):a>=o.length?(l=new Vb(t,e),o.push(l)):l=o[a],l}function r(){n=new WeakMap}return{get:i,dispose:r}}class Og extends Jn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=uM,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Dg extends Jn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new q,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const h4=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,f4=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function p4(t,e,n){let i=new If;const r=new ke,s=new ke,a=new Ht,o=new Og({depthPacking:cM}),l=new Dg,u={},c=n.maxTextureSize,d={0:Ei,1:ro,2:Hr},h=new xr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ke},radius:{value:4}},vertexShader:h4,fragmentShader:f4}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const m=new xt;m.setAttribute("position",new Jt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Gn(m,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Sg,this.render=function(w,E,T){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||w.length===0)return;const I=t.getRenderTarget(),_=t.getActiveCubeFace(),R=t.getActiveMipmapLevel(),L=t.state;L.setBlending(Xr),L.buffers.color.setClear(1,1,1,1),L.buffers.depth.setTest(!0),L.setScissorTest(!1);for(let k=0,F=w.length;k<F;k++){const G=w[k],H=G.shadow;if(H===void 0){console.warn("THREE.WebGLShadowMap:",G,"has no shadow.");continue}if(H.autoUpdate===!1&&H.needsUpdate===!1)continue;r.copy(H.mapSize);const J=H.getFrameExtents();if(r.multiply(J),s.copy(H.mapSize),(r.x>c||r.y>c)&&(r.x>c&&(s.x=Math.floor(c/J.x),r.x=s.x*J.x,H.mapSize.x=s.x),r.y>c&&(s.y=Math.floor(c/J.y),r.y=s.y*J.y,H.mapSize.y=s.y)),H.map===null){const re=this.type!==jo?{minFilter:Sn,magFilter:Sn}:{};H.map=new Vi(r.x,r.y,re),H.map.texture.name=G.name+".shadowMap",H.camera.updateProjectionMatrix()}t.setRenderTarget(H.map),t.clear();const V=H.getViewportCount();for(let re=0;re<V;re++){const j=H.getViewport(re);a.set(s.x*j.x,s.y*j.y,s.x*j.z,s.y*j.w),L.viewport(a),H.updateMatrices(G,re),i=H.getFrustum(),b(E,T,H.camera,G,this.type)}H.isPointLightShadow!==!0&&this.type===jo&&y(H,T),H.needsUpdate=!1}g.needsUpdate=!1,t.setRenderTarget(I,_,R)};function y(w,E){const T=e.update(v);h.defines.VSM_SAMPLES!==w.blurSamples&&(h.defines.VSM_SAMPLES=w.blurSamples,f.defines.VSM_SAMPLES=w.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),w.mapPass===null&&(w.mapPass=new Vi(r.x,r.y)),h.uniforms.shadow_pass.value=w.map.texture,h.uniforms.resolution.value=w.mapSize,h.uniforms.radius.value=w.radius,t.setRenderTarget(w.mapPass),t.clear(),t.renderBufferDirect(E,null,T,h,v,null),f.uniforms.shadow_pass.value=w.mapPass.texture,f.uniforms.resolution.value=w.mapSize,f.uniforms.radius.value=w.radius,t.setRenderTarget(w.map),t.clear(),t.renderBufferDirect(E,null,T,f,v,null)}function S(w,E,T,I,_,R){let L=null;const k=T.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(k!==void 0?L=k:L=T.isPointLight===!0?l:o,t.localClippingEnabled&&E.clipShadows===!0&&Array.isArray(E.clippingPlanes)&&E.clippingPlanes.length!==0||E.displacementMap&&E.displacementScale!==0||E.alphaMap&&E.alphaTest>0){const F=L.uuid,G=E.uuid;let H=u[F];H===void 0&&(H={},u[F]=H);let J=H[G];J===void 0&&(J=L.clone(),H[G]=J),L=J}return L.visible=E.visible,L.wireframe=E.wireframe,R===jo?L.side=E.shadowSide!==null?E.shadowSide:E.side:L.side=E.shadowSide!==null?E.shadowSide:d[E.side],L.alphaMap=E.alphaMap,L.alphaTest=E.alphaTest,L.clipShadows=E.clipShadows,L.clippingPlanes=E.clippingPlanes,L.clipIntersection=E.clipIntersection,L.displacementMap=E.displacementMap,L.displacementScale=E.displacementScale,L.displacementBias=E.displacementBias,L.wireframeLinewidth=E.wireframeLinewidth,L.linewidth=E.linewidth,T.isPointLight===!0&&L.isMeshDistanceMaterial===!0&&(L.referencePosition.setFromMatrixPosition(T.matrixWorld),L.nearDistance=I,L.farDistance=_),L}function b(w,E,T,I,_){if(w.visible===!1)return;if(w.layers.test(E.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&_===jo)&&(!w.frustumCulled||i.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(T.matrixWorldInverse,w.matrixWorld);const k=e.update(w),F=w.material;if(Array.isArray(F)){const G=k.groups;for(let H=0,J=G.length;H<J;H++){const V=G[H],re=F[V.materialIndex];if(re&&re.visible){const j=S(w,re,I,T.near,T.far,_);t.renderBufferDirect(T,null,k,j,w,V)}}}else if(F.visible){const G=S(w,F,I,T.near,T.far,_);t.renderBufferDirect(T,null,k,G,w,null)}}const L=w.children;for(let k=0,F=L.length;k<F;k++)b(L[k],E,T,I,_)}}function m4(t,e,n){const i=n.isWebGL2;function r(){let oe=!1;const xe=new Ht;let He=null;const et=new Ht(0,0,0,0);return{setMask:function(lt){He!==lt&&!oe&&(t.colorMask(lt,lt,lt,lt),He=lt)},setLocked:function(lt){oe=lt},setClear:function(lt,Pt,pn,Gt,dr){dr===!0&&(lt*=Gt,Pt*=Gt,pn*=Gt),xe.set(lt,Pt,pn,Gt),et.equals(xe)===!1&&(t.clearColor(lt,Pt,pn,Gt),et.copy(xe))},reset:function(){oe=!1,He=null,et.set(-1,0,0,0)}}}function s(){let oe=!1,xe=null,He=null,et=null;return{setTest:function(lt){lt?_e(t.DEPTH_TEST):Ae(t.DEPTH_TEST)},setMask:function(lt){xe!==lt&&!oe&&(t.depthMask(lt),xe=lt)},setFunc:function(lt){if(He!==lt){switch(lt){case LS:t.depthFunc(t.NEVER);break;case IS:t.depthFunc(t.ALWAYS);break;case OS:t.depthFunc(t.LESS);break;case zh:t.depthFunc(t.LEQUAL);break;case DS:t.depthFunc(t.EQUAL);break;case NS:t.depthFunc(t.GEQUAL);break;case kS:t.depthFunc(t.GREATER);break;case FS:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}He=lt}},setLocked:function(lt){oe=lt},setClear:function(lt){et!==lt&&(t.clearDepth(lt),et=lt)},reset:function(){oe=!1,xe=null,He=null,et=null}}}function a(){let oe=!1,xe=null,He=null,et=null,lt=null,Pt=null,pn=null,Gt=null,dr=null;return{setTest:function(Wt){oe||(Wt?_e(t.STENCIL_TEST):Ae(t.STENCIL_TEST))},setMask:function(Wt){xe!==Wt&&!oe&&(t.stencilMask(Wt),xe=Wt)},setFunc:function(Wt,vi,sn){(He!==Wt||et!==vi||lt!==sn)&&(t.stencilFunc(Wt,vi,sn),He=Wt,et=vi,lt=sn)},setOp:function(Wt,vi,sn){(Pt!==Wt||pn!==vi||Gt!==sn)&&(t.stencilOp(Wt,vi,sn),Pt=Wt,pn=vi,Gt=sn)},setLocked:function(Wt){oe=Wt},setClear:function(Wt){dr!==Wt&&(t.clearStencil(Wt),dr=Wt)},reset:function(){oe=!1,xe=null,He=null,et=null,lt=null,Pt=null,pn=null,Gt=null,dr=null}}}const o=new r,l=new s,u=new a,c=new WeakMap,d=new WeakMap;let h={},f={},m=new WeakMap,v=[],g=null,y=!1,S=null,b=null,w=null,E=null,T=null,I=null,_=null,R=!1,L=null,k=null,F=null,G=null,H=null;const J=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let V=!1,re=0;const j=t.getParameter(t.VERSION);j.indexOf("WebGL")!==-1?(re=parseFloat(/^WebGL (\d)/.exec(j)[1]),V=re>=1):j.indexOf("OpenGL ES")!==-1&&(re=parseFloat(/^OpenGL ES (\d)/.exec(j)[1]),V=re>=2);let Z=null,z={};const ee=t.getParameter(t.SCISSOR_BOX),Q=t.getParameter(t.VIEWPORT),fe=new Ht().fromArray(ee),Ee=new Ht().fromArray(Q);function ne(oe,xe,He){const et=new Uint8Array(4),lt=t.createTexture();t.bindTexture(oe,lt),t.texParameteri(oe,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(oe,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Pt=0;Pt<He;Pt++)t.texImage2D(xe+Pt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,et);return lt}const X={};X[t.TEXTURE_2D]=ne(t.TEXTURE_2D,t.TEXTURE_2D,1),X[t.TEXTURE_CUBE_MAP]=ne(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),o.setClear(0,0,0,1),l.setClear(1),u.setClear(0),_e(t.DEPTH_TEST),l.setFunc(zh),ce(!1),ae(qm),_e(t.CULL_FACE),te(Xr);function _e(oe){h[oe]!==!0&&(t.enable(oe),h[oe]=!0)}function Ae(oe){h[oe]!==!1&&(t.disable(oe),h[oe]=!1)}function ze(oe,xe){return f[oe]!==xe?(t.bindFramebuffer(oe,xe),f[oe]=xe,i&&(oe===t.DRAW_FRAMEBUFFER&&(f[t.FRAMEBUFFER]=xe),oe===t.FRAMEBUFFER&&(f[t.DRAW_FRAMEBUFFER]=xe)),!0):!1}function Ie(oe,xe){let He=v,et=!1;if(oe)if(He=m.get(xe),He===void 0&&(He=[],m.set(xe,He)),oe.isWebGLMultipleRenderTargets){const lt=oe.texture;if(He.length!==lt.length||He[0]!==t.COLOR_ATTACHMENT0){for(let Pt=0,pn=lt.length;Pt<pn;Pt++)He[Pt]=t.COLOR_ATTACHMENT0+Pt;He.length=lt.length,et=!0}}else He[0]!==t.COLOR_ATTACHMENT0&&(He[0]=t.COLOR_ATTACHMENT0,et=!0);else He[0]!==t.BACK&&(He[0]=t.BACK,et=!0);et&&(n.isWebGL2?t.drawBuffers(He):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(He))}function Ge(oe){return g!==oe?(t.useProgram(oe),g=oe,!0):!1}const N={[xa]:t.FUNC_ADD,[wS]:t.FUNC_SUBTRACT,[_S]:t.FUNC_REVERSE_SUBTRACT};if(i)N[Jm]=t.MIN,N[Qm]=t.MAX;else{const oe=e.get("EXT_blend_minmax");oe!==null&&(N[Jm]=oe.MIN_EXT,N[Qm]=oe.MAX_EXT)}const B={[SS]:t.ZERO,[MS]:t.ONE,[TS]:t.SRC_COLOR,[Mg]:t.SRC_ALPHA,[PS]:t.SRC_ALPHA_SATURATE,[AS]:t.DST_COLOR,[xS]:t.DST_ALPHA,[ES]:t.ONE_MINUS_SRC_COLOR,[Tg]:t.ONE_MINUS_SRC_ALPHA,[RS]:t.ONE_MINUS_DST_COLOR,[CS]:t.ONE_MINUS_DST_ALPHA};function te(oe,xe,He,et,lt,Pt,pn,Gt){if(oe===Xr){y===!0&&(Ae(t.BLEND),y=!1);return}if(y===!1&&(_e(t.BLEND),y=!0),oe!==bS){if(oe!==S||Gt!==R){if((b!==xa||T!==xa)&&(t.blendEquation(t.FUNC_ADD),b=xa,T=xa),Gt)switch(oe){case $a:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Zm:t.blendFunc(t.ONE,t.ONE);break;case jm:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case Km:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",oe);break}else switch(oe){case $a:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Zm:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case jm:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case Km:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",oe);break}w=null,E=null,I=null,_=null,S=oe,R=Gt}return}lt=lt||xe,Pt=Pt||He,pn=pn||et,(xe!==b||lt!==T)&&(t.blendEquationSeparate(N[xe],N[lt]),b=xe,T=lt),(He!==w||et!==E||Pt!==I||pn!==_)&&(t.blendFuncSeparate(B[He],B[et],B[Pt],B[pn]),w=He,E=et,I=Pt,_=pn),S=oe,R=null}function ue(oe,xe){oe.side===Hr?Ae(t.CULL_FACE):_e(t.CULL_FACE);let He=oe.side===Ei;xe&&(He=!He),ce(He),oe.blending===$a&&oe.transparent===!1?te(Xr):te(oe.blending,oe.blendEquation,oe.blendSrc,oe.blendDst,oe.blendEquationAlpha,oe.blendSrcAlpha,oe.blendDstAlpha,oe.premultipliedAlpha),l.setFunc(oe.depthFunc),l.setTest(oe.depthTest),l.setMask(oe.depthWrite),o.setMask(oe.colorWrite);const et=oe.stencilWrite;u.setTest(et),et&&(u.setMask(oe.stencilWriteMask),u.setFunc(oe.stencilFunc,oe.stencilRef,oe.stencilFuncMask),u.setOp(oe.stencilFail,oe.stencilZFail,oe.stencilZPass)),le(oe.polygonOffset,oe.polygonOffsetFactor,oe.polygonOffsetUnits),oe.alphaToCoverage===!0?_e(t.SAMPLE_ALPHA_TO_COVERAGE):Ae(t.SAMPLE_ALPHA_TO_COVERAGE)}function ce(oe){L!==oe&&(oe?t.frontFace(t.CW):t.frontFace(t.CCW),L=oe)}function ae(oe){oe!==vS?(_e(t.CULL_FACE),oe!==k&&(oe===qm?t.cullFace(t.BACK):oe===gS?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Ae(t.CULL_FACE),k=oe}function me(oe){oe!==F&&(V&&t.lineWidth(oe),F=oe)}function le(oe,xe,He){oe?(_e(t.POLYGON_OFFSET_FILL),(G!==xe||H!==He)&&(t.polygonOffset(xe,He),G=xe,H=He)):Ae(t.POLYGON_OFFSET_FILL)}function Se(oe){oe?_e(t.SCISSOR_TEST):Ae(t.SCISSOR_TEST)}function ve(oe){oe===void 0&&(oe=t.TEXTURE0+J-1),Z!==oe&&(t.activeTexture(oe),Z=oe)}function U(oe,xe,He){He===void 0&&(Z===null?He=t.TEXTURE0+J-1:He=Z);let et=z[He];et===void 0&&(et={type:void 0,texture:void 0},z[He]=et),(et.type!==oe||et.texture!==xe)&&(Z!==He&&(t.activeTexture(He),Z=He),t.bindTexture(oe,xe||X[oe]),et.type=oe,et.texture=xe)}function D(){const oe=z[Z];oe!==void 0&&oe.type!==void 0&&(t.bindTexture(oe.type,null),oe.type=void 0,oe.texture=void 0)}function se(){try{t.compressedTexImage2D.apply(t,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function be(){try{t.compressedTexImage3D.apply(t,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function Re(){try{t.texSubImage2D.apply(t,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function Fe(){try{t.texSubImage3D.apply(t,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function Xe(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function Ve(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function we(){try{t.texStorage2D.apply(t,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function rt(){try{t.texStorage3D.apply(t,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function st(){try{t.texImage2D.apply(t,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function nt(){try{t.texImage3D.apply(t,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function dt(oe){fe.equals(oe)===!1&&(t.scissor(oe.x,oe.y,oe.z,oe.w),fe.copy(oe))}function Ze(oe){Ee.equals(oe)===!1&&(t.viewport(oe.x,oe.y,oe.z,oe.w),Ee.copy(oe))}function mt(oe,xe){let He=d.get(xe);He===void 0&&(He=new WeakMap,d.set(xe,He));let et=He.get(oe);et===void 0&&(et=t.getUniformBlockIndex(xe,oe.name),He.set(oe,et))}function zt(oe,xe){const et=d.get(xe).get(oe);c.get(oe)!==et&&(t.uniformBlockBinding(xe,et,oe.__bindingPointIndex),c.set(oe,et))}function Ut(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),i===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),h={},Z=null,z={},f={},m=new WeakMap,v=[],g=null,y=!1,S=null,b=null,w=null,E=null,T=null,I=null,_=null,R=!1,L=null,k=null,F=null,G=null,H=null,fe.set(0,0,t.canvas.width,t.canvas.height),Ee.set(0,0,t.canvas.width,t.canvas.height),o.reset(),l.reset(),u.reset()}return{buffers:{color:o,depth:l,stencil:u},enable:_e,disable:Ae,bindFramebuffer:ze,drawBuffers:Ie,useProgram:Ge,setBlending:te,setMaterial:ue,setFlipSided:ce,setCullFace:ae,setLineWidth:me,setPolygonOffset:le,setScissorTest:Se,activeTexture:ve,bindTexture:U,unbindTexture:D,compressedTexImage2D:se,compressedTexImage3D:be,texImage2D:st,texImage3D:nt,updateUBOMapping:mt,uniformBlockBinding:zt,texStorage2D:we,texStorage3D:rt,texSubImage2D:Re,texSubImage3D:Fe,compressedTexSubImage2D:Xe,compressedTexSubImage3D:Ve,scissor:dt,viewport:Ze,reset:Ut}}function v4(t,e,n,i,r,s,a){const o=r.isWebGL2,l=r.maxTextures,u=r.maxCubemapSize,c=r.maxTextureSize,d=r.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(typeof navigator=="undefined"?"":navigator.userAgent),m=new WeakMap;let v;const g=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(U,D){return y?new OffscreenCanvas(U,D):xc("canvas")}function b(U,D,se,be){let Re=1;if((U.width>be||U.height>be)&&(Re=be/Math.max(U.width,U.height)),Re<1||D===!0)if(typeof HTMLImageElement!="undefined"&&U instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&U instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&U instanceof ImageBitmap){const Fe=D?Wh:Math.floor,Xe=Fe(Re*U.width),Ve=Fe(Re*U.height);v===void 0&&(v=S(Xe,Ve));const we=se?S(Xe,Ve):v;return we.width=Xe,we.height=Ve,we.getContext("2d").drawImage(U,0,0,Xe,Ve),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+U.width+"x"+U.height+") to ("+Xe+"x"+Ve+")."),we}else return"data"in U&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+U.width+"x"+U.height+")."),U;return U}function w(U){return Sv(U.width)&&Sv(U.height)}function E(U){return o?!1:U.wrapS!==qn||U.wrapT!==qn||U.minFilter!==Sn&&U.minFilter!==vn}function T(U,D){return U.generateMipmaps&&D&&U.minFilter!==Sn&&U.minFilter!==vn}function I(U){t.generateMipmap(U)}function _(U,D,se,be,Re=!1){if(o===!1)return D;if(U!==null){if(t[U]!==void 0)return t[U];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+U+"'")}let Fe=D;return D===t.RED&&(se===t.FLOAT&&(Fe=t.R32F),se===t.HALF_FLOAT&&(Fe=t.R16F),se===t.UNSIGNED_BYTE&&(Fe=t.R8)),D===t.RG&&(se===t.FLOAT&&(Fe=t.RG32F),se===t.HALF_FLOAT&&(Fe=t.RG16F),se===t.UNSIGNED_BYTE&&(Fe=t.RG8)),D===t.RGBA&&(se===t.FLOAT&&(Fe=t.RGBA32F),se===t.HALF_FLOAT&&(Fe=t.RGBA16F),se===t.UNSIGNED_BYTE&&(Fe=be===an&&Re===!1?t.SRGB8_ALPHA8:t.RGBA8),se===t.UNSIGNED_SHORT_4_4_4_4&&(Fe=t.RGBA4),se===t.UNSIGNED_SHORT_5_5_5_1&&(Fe=t.RGB5_A1)),(Fe===t.R16F||Fe===t.R32F||Fe===t.RG16F||Fe===t.RG32F||Fe===t.RGBA16F||Fe===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Fe}function R(U,D,se){return T(U,se)===!0||U.isFramebufferTexture&&U.minFilter!==Sn&&U.minFilter!==vn?Math.log2(Math.max(D.width,D.height))+1:U.mipmaps!==void 0&&U.mipmaps.length>0?U.mipmaps.length:U.isCompressedTexture&&Array.isArray(U.image)?D.mipmaps.length:1}function L(U){return U===Sn||U===Vh||U===Hh?t.NEAREST:t.LINEAR}function k(U){const D=U.target;D.removeEventListener("dispose",k),G(D),D.isVideoTexture&&m.delete(D)}function F(U){const D=U.target;D.removeEventListener("dispose",F),J(D)}function G(U){const D=i.get(U);if(D.__webglInit===void 0)return;const se=U.source,be=g.get(se);if(be){const Re=be[D.__cacheKey];Re.usedTimes--,Re.usedTimes===0&&H(U),Object.keys(be).length===0&&g.delete(se)}i.remove(U)}function H(U){const D=i.get(U);t.deleteTexture(D.__webglTexture);const se=U.source,be=g.get(se);delete be[D.__cacheKey],a.memory.textures--}function J(U){const D=U.texture,se=i.get(U),be=i.get(D);if(be.__webglTexture!==void 0&&(t.deleteTexture(be.__webglTexture),a.memory.textures--),U.depthTexture&&U.depthTexture.dispose(),U.isWebGLCubeRenderTarget)for(let Re=0;Re<6;Re++)t.deleteFramebuffer(se.__webglFramebuffer[Re]),se.__webglDepthbuffer&&t.deleteRenderbuffer(se.__webglDepthbuffer[Re]);else{if(t.deleteFramebuffer(se.__webglFramebuffer),se.__webglDepthbuffer&&t.deleteRenderbuffer(se.__webglDepthbuffer),se.__webglMultisampledFramebuffer&&t.deleteFramebuffer(se.__webglMultisampledFramebuffer),se.__webglColorRenderbuffer)for(let Re=0;Re<se.__webglColorRenderbuffer.length;Re++)se.__webglColorRenderbuffer[Re]&&t.deleteRenderbuffer(se.__webglColorRenderbuffer[Re]);se.__webglDepthRenderbuffer&&t.deleteRenderbuffer(se.__webglDepthRenderbuffer)}if(U.isWebGLMultipleRenderTargets)for(let Re=0,Fe=D.length;Re<Fe;Re++){const Xe=i.get(D[Re]);Xe.__webglTexture&&(t.deleteTexture(Xe.__webglTexture),a.memory.textures--),i.remove(D[Re])}i.remove(D),i.remove(U)}let V=0;function re(){V=0}function j(){const U=V;return U>=l&&console.warn("THREE.WebGLTextures: Trying to use "+U+" texture units while this GPU supports only "+l),V+=1,U}function Z(U){const D=[];return D.push(U.wrapS),D.push(U.wrapT),D.push(U.wrapR||0),D.push(U.magFilter),D.push(U.minFilter),D.push(U.anisotropy),D.push(U.internalFormat),D.push(U.format),D.push(U.type),D.push(U.generateMipmaps),D.push(U.premultiplyAlpha),D.push(U.flipY),D.push(U.unpackAlignment),D.push(U.encoding),D.join()}function z(U,D){const se=i.get(U);if(U.isVideoTexture&&Se(U),U.isRenderTargetTexture===!1&&U.version>0&&se.__version!==U.version){const be=U.image;if(be===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(be.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ae(se,U,D);return}}n.bindTexture(t.TEXTURE_2D,se.__webglTexture,t.TEXTURE0+D)}function ee(U,D){const se=i.get(U);if(U.version>0&&se.__version!==U.version){Ae(se,U,D);return}n.bindTexture(t.TEXTURE_2D_ARRAY,se.__webglTexture,t.TEXTURE0+D)}function Q(U,D){const se=i.get(U);if(U.version>0&&se.__version!==U.version){Ae(se,U,D);return}n.bindTexture(t.TEXTURE_3D,se.__webglTexture,t.TEXTURE0+D)}function fe(U,D){const se=i.get(U);if(U.version>0&&se.__version!==U.version){ze(se,U,D);return}n.bindTexture(t.TEXTURE_CUBE_MAP,se.__webglTexture,t.TEXTURE0+D)}const Ee={[bc]:t.REPEAT,[qn]:t.CLAMP_TO_EDGE,[wc]:t.MIRRORED_REPEAT},ne={[Sn]:t.NEAREST,[Vh]:t.NEAREST_MIPMAP_NEAREST,[Hh]:t.NEAREST_MIPMAP_LINEAR,[vn]:t.LINEAR,[Eg]:t.LINEAR_MIPMAP_NEAREST,[ho]:t.LINEAR_MIPMAP_LINEAR};function X(U,D,se){if(se?(t.texParameteri(U,t.TEXTURE_WRAP_S,Ee[D.wrapS]),t.texParameteri(U,t.TEXTURE_WRAP_T,Ee[D.wrapT]),(U===t.TEXTURE_3D||U===t.TEXTURE_2D_ARRAY)&&t.texParameteri(U,t.TEXTURE_WRAP_R,Ee[D.wrapR]),t.texParameteri(U,t.TEXTURE_MAG_FILTER,ne[D.magFilter]),t.texParameteri(U,t.TEXTURE_MIN_FILTER,ne[D.minFilter])):(t.texParameteri(U,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(U,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(U===t.TEXTURE_3D||U===t.TEXTURE_2D_ARRAY)&&t.texParameteri(U,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(D.wrapS!==qn||D.wrapT!==qn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(U,t.TEXTURE_MAG_FILTER,L(D.magFilter)),t.texParameteri(U,t.TEXTURE_MIN_FILTER,L(D.minFilter)),D.minFilter!==Sn&&D.minFilter!==vn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const be=e.get("EXT_texture_filter_anisotropic");if(D.type===Gr&&e.has("OES_texture_float_linear")===!1||o===!1&&D.type===su&&e.has("OES_texture_half_float_linear")===!1)return;(D.anisotropy>1||i.get(D).__currentAnisotropy)&&(t.texParameterf(U,be.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(D.anisotropy,r.getMaxAnisotropy())),i.get(D).__currentAnisotropy=D.anisotropy)}}function _e(U,D){let se=!1;U.__webglInit===void 0&&(U.__webglInit=!0,D.addEventListener("dispose",k));const be=D.source;let Re=g.get(be);Re===void 0&&(Re={},g.set(be,Re));const Fe=Z(D);if(Fe!==U.__cacheKey){Re[Fe]===void 0&&(Re[Fe]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,se=!0),Re[Fe].usedTimes++;const Xe=Re[U.__cacheKey];Xe!==void 0&&(Re[U.__cacheKey].usedTimes--,Xe.usedTimes===0&&H(D)),U.__cacheKey=Fe,U.__webglTexture=Re[Fe].texture}return se}function Ae(U,D,se){let be=t.TEXTURE_2D;(D.isDataArrayTexture||D.isCompressedArrayTexture)&&(be=t.TEXTURE_2D_ARRAY),D.isData3DTexture&&(be=t.TEXTURE_3D);const Re=_e(U,D),Fe=D.source;n.bindTexture(be,U.__webglTexture,t.TEXTURE0+se);const Xe=i.get(Fe);if(Fe.version!==Xe.__version||Re===!0){n.activeTexture(t.TEXTURE0+se),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,D.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,D.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const Ve=E(D)&&w(D.image)===!1;let we=b(D.image,Ve,!1,c);we=ve(D,we);const rt=w(we)||o,st=s.convert(D.format,D.encoding);let nt=s.convert(D.type),dt=_(D.internalFormat,st,nt,D.encoding,D.isVideoTexture);X(be,D,rt);let Ze;const mt=D.mipmaps,zt=o&&D.isVideoTexture!==!0,Ut=Xe.__version===void 0||Re===!0,oe=R(D,we,rt);if(D.isDepthTexture)dt=t.DEPTH_COMPONENT,o?D.type===Gr?dt=t.DEPTH_COMPONENT32F:D.type===Rs?dt=t.DEPTH_COMPONENT24:D.type===Xa?dt=t.DEPTH24_STENCIL8:dt=t.DEPTH_COMPONENT16:D.type===Gr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),D.format===zs&&dt===t.DEPTH_COMPONENT&&D.type!==xg&&D.type!==Rs&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),D.type=Rs,nt=s.convert(D.type)),D.format===so&&dt===t.DEPTH_COMPONENT&&(dt=t.DEPTH_STENCIL,D.type!==Xa&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),D.type=Xa,nt=s.convert(D.type))),Ut&&(zt?n.texStorage2D(t.TEXTURE_2D,1,dt,we.width,we.height):n.texImage2D(t.TEXTURE_2D,0,dt,we.width,we.height,0,st,nt,null));else if(D.isDataTexture)if(mt.length>0&&rt){zt&&Ut&&n.texStorage2D(t.TEXTURE_2D,oe,dt,mt[0].width,mt[0].height);for(let xe=0,He=mt.length;xe<He;xe++)Ze=mt[xe],zt?n.texSubImage2D(t.TEXTURE_2D,xe,0,0,Ze.width,Ze.height,st,nt,Ze.data):n.texImage2D(t.TEXTURE_2D,xe,dt,Ze.width,Ze.height,0,st,nt,Ze.data);D.generateMipmaps=!1}else zt?(Ut&&n.texStorage2D(t.TEXTURE_2D,oe,dt,we.width,we.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,we.width,we.height,st,nt,we.data)):n.texImage2D(t.TEXTURE_2D,0,dt,we.width,we.height,0,st,nt,we.data);else if(D.isCompressedTexture)if(D.isCompressedArrayTexture){zt&&Ut&&n.texStorage3D(t.TEXTURE_2D_ARRAY,oe,dt,mt[0].width,mt[0].height,we.depth);for(let xe=0,He=mt.length;xe<He;xe++)Ze=mt[xe],D.format!==Si?st!==null?zt?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,xe,0,0,0,Ze.width,Ze.height,we.depth,st,Ze.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,xe,dt,Ze.width,Ze.height,we.depth,0,Ze.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):zt?n.texSubImage3D(t.TEXTURE_2D_ARRAY,xe,0,0,0,Ze.width,Ze.height,we.depth,st,nt,Ze.data):n.texImage3D(t.TEXTURE_2D_ARRAY,xe,dt,Ze.width,Ze.height,we.depth,0,st,nt,Ze.data)}else{zt&&Ut&&n.texStorage2D(t.TEXTURE_2D,oe,dt,mt[0].width,mt[0].height);for(let xe=0,He=mt.length;xe<He;xe++)Ze=mt[xe],D.format!==Si?st!==null?zt?n.compressedTexSubImage2D(t.TEXTURE_2D,xe,0,0,Ze.width,Ze.height,st,Ze.data):n.compressedTexImage2D(t.TEXTURE_2D,xe,dt,Ze.width,Ze.height,0,Ze.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):zt?n.texSubImage2D(t.TEXTURE_2D,xe,0,0,Ze.width,Ze.height,st,nt,Ze.data):n.texImage2D(t.TEXTURE_2D,xe,dt,Ze.width,Ze.height,0,st,nt,Ze.data)}else if(D.isDataArrayTexture)zt?(Ut&&n.texStorage3D(t.TEXTURE_2D_ARRAY,oe,dt,we.width,we.height,we.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,we.width,we.height,we.depth,st,nt,we.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,dt,we.width,we.height,we.depth,0,st,nt,we.data);else if(D.isData3DTexture)zt?(Ut&&n.texStorage3D(t.TEXTURE_3D,oe,dt,we.width,we.height,we.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,we.width,we.height,we.depth,st,nt,we.data)):n.texImage3D(t.TEXTURE_3D,0,dt,we.width,we.height,we.depth,0,st,nt,we.data);else if(D.isFramebufferTexture){if(Ut)if(zt)n.texStorage2D(t.TEXTURE_2D,oe,dt,we.width,we.height);else{let xe=we.width,He=we.height;for(let et=0;et<oe;et++)n.texImage2D(t.TEXTURE_2D,et,dt,xe,He,0,st,nt,null),xe>>=1,He>>=1}}else if(mt.length>0&&rt){zt&&Ut&&n.texStorage2D(t.TEXTURE_2D,oe,dt,mt[0].width,mt[0].height);for(let xe=0,He=mt.length;xe<He;xe++)Ze=mt[xe],zt?n.texSubImage2D(t.TEXTURE_2D,xe,0,0,st,nt,Ze):n.texImage2D(t.TEXTURE_2D,xe,dt,st,nt,Ze);D.generateMipmaps=!1}else zt?(Ut&&n.texStorage2D(t.TEXTURE_2D,oe,dt,we.width,we.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,st,nt,we)):n.texImage2D(t.TEXTURE_2D,0,dt,st,nt,we);T(D,rt)&&I(be),Xe.__version=Fe.version,D.onUpdate&&D.onUpdate(D)}U.__version=D.version}function ze(U,D,se){if(D.image.length!==6)return;const be=_e(U,D),Re=D.source;n.bindTexture(t.TEXTURE_CUBE_MAP,U.__webglTexture,t.TEXTURE0+se);const Fe=i.get(Re);if(Re.version!==Fe.__version||be===!0){n.activeTexture(t.TEXTURE0+se),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,D.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,D.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const Xe=D.isCompressedTexture||D.image[0].isCompressedTexture,Ve=D.image[0]&&D.image[0].isDataTexture,we=[];for(let xe=0;xe<6;xe++)!Xe&&!Ve?we[xe]=b(D.image[xe],!1,!0,u):we[xe]=Ve?D.image[xe].image:D.image[xe],we[xe]=ve(D,we[xe]);const rt=we[0],st=w(rt)||o,nt=s.convert(D.format,D.encoding),dt=s.convert(D.type),Ze=_(D.internalFormat,nt,dt,D.encoding),mt=o&&D.isVideoTexture!==!0,zt=Fe.__version===void 0||be===!0;let Ut=R(D,rt,st);X(t.TEXTURE_CUBE_MAP,D,st);let oe;if(Xe){mt&&zt&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Ut,Ze,rt.width,rt.height);for(let xe=0;xe<6;xe++){oe=we[xe].mipmaps;for(let He=0;He<oe.length;He++){const et=oe[He];D.format!==Si?nt!==null?mt?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+xe,He,0,0,et.width,et.height,nt,et.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+xe,He,Ze,et.width,et.height,0,et.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):mt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+xe,He,0,0,et.width,et.height,nt,dt,et.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+xe,He,Ze,et.width,et.height,0,nt,dt,et.data)}}}else{oe=D.mipmaps,mt&&zt&&(oe.length>0&&Ut++,n.texStorage2D(t.TEXTURE_CUBE_MAP,Ut,Ze,we[0].width,we[0].height));for(let xe=0;xe<6;xe++)if(Ve){mt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,0,0,we[xe].width,we[xe].height,nt,dt,we[xe].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,Ze,we[xe].width,we[xe].height,0,nt,dt,we[xe].data);for(let He=0;He<oe.length;He++){const lt=oe[He].image[xe].image;mt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+xe,He+1,0,0,lt.width,lt.height,nt,dt,lt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+xe,He+1,Ze,lt.width,lt.height,0,nt,dt,lt.data)}}else{mt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,0,0,nt,dt,we[xe]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,Ze,nt,dt,we[xe]);for(let He=0;He<oe.length;He++){const et=oe[He];mt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+xe,He+1,0,0,nt,dt,et.image[xe]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+xe,He+1,Ze,nt,dt,et.image[xe])}}}T(D,st)&&I(t.TEXTURE_CUBE_MAP),Fe.__version=Re.version,D.onUpdate&&D.onUpdate(D)}U.__version=D.version}function Ie(U,D,se,be,Re){const Fe=s.convert(se.format,se.encoding),Xe=s.convert(se.type),Ve=_(se.internalFormat,Fe,Xe,se.encoding);i.get(D).__hasExternalTextures||(Re===t.TEXTURE_3D||Re===t.TEXTURE_2D_ARRAY?n.texImage3D(Re,0,Ve,D.width,D.height,D.depth,0,Fe,Xe,null):n.texImage2D(Re,0,Ve,D.width,D.height,0,Fe,Xe,null)),n.bindFramebuffer(t.FRAMEBUFFER,U),le(D)?h.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,be,Re,i.get(se).__webglTexture,0,me(D)):(Re===t.TEXTURE_2D||Re>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Re<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,be,Re,i.get(se).__webglTexture,0),n.bindFramebuffer(t.FRAMEBUFFER,null)}function Ge(U,D,se){if(t.bindRenderbuffer(t.RENDERBUFFER,U),D.depthBuffer&&!D.stencilBuffer){let be=t.DEPTH_COMPONENT16;if(se||le(D)){const Re=D.depthTexture;Re&&Re.isDepthTexture&&(Re.type===Gr?be=t.DEPTH_COMPONENT32F:Re.type===Rs&&(be=t.DEPTH_COMPONENT24));const Fe=me(D);le(D)?h.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Fe,be,D.width,D.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,Fe,be,D.width,D.height)}else t.renderbufferStorage(t.RENDERBUFFER,be,D.width,D.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,U)}else if(D.depthBuffer&&D.stencilBuffer){const be=me(D);se&&le(D)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,be,t.DEPTH24_STENCIL8,D.width,D.height):le(D)?h.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,be,t.DEPTH24_STENCIL8,D.width,D.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,D.width,D.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,U)}else{const be=D.isWebGLMultipleRenderTargets===!0?D.texture:[D.texture];for(let Re=0;Re<be.length;Re++){const Fe=be[Re],Xe=s.convert(Fe.format,Fe.encoding),Ve=s.convert(Fe.type),we=_(Fe.internalFormat,Xe,Ve,Fe.encoding),rt=me(D);se&&le(D)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,rt,we,D.width,D.height):le(D)?h.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,rt,we,D.width,D.height):t.renderbufferStorage(t.RENDERBUFFER,we,D.width,D.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function N(U,D){if(D&&D.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,U),!(D.depthTexture&&D.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(D.depthTexture).__webglTexture||D.depthTexture.image.width!==D.width||D.depthTexture.image.height!==D.height)&&(D.depthTexture.image.width=D.width,D.depthTexture.image.height=D.height,D.depthTexture.needsUpdate=!0),z(D.depthTexture,0);const be=i.get(D.depthTexture).__webglTexture,Re=me(D);if(D.depthTexture.format===zs)le(D)?h.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,be,0,Re):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,be,0);else if(D.depthTexture.format===so)le(D)?h.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,be,0,Re):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,be,0);else throw new Error("Unknown depthTexture format")}function B(U){const D=i.get(U),se=U.isWebGLCubeRenderTarget===!0;if(U.depthTexture&&!D.__autoAllocateDepthBuffer){if(se)throw new Error("target.depthTexture not supported in Cube render targets");N(D.__webglFramebuffer,U)}else if(se){D.__webglDepthbuffer=[];for(let be=0;be<6;be++)n.bindFramebuffer(t.FRAMEBUFFER,D.__webglFramebuffer[be]),D.__webglDepthbuffer[be]=t.createRenderbuffer(),Ge(D.__webglDepthbuffer[be],U,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,D.__webglFramebuffer),D.__webglDepthbuffer=t.createRenderbuffer(),Ge(D.__webglDepthbuffer,U,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function te(U,D,se){const be=i.get(U);D!==void 0&&Ie(be.__webglFramebuffer,U,U.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),se!==void 0&&B(U)}function ue(U){const D=U.texture,se=i.get(U),be=i.get(D);U.addEventListener("dispose",F),U.isWebGLMultipleRenderTargets!==!0&&(be.__webglTexture===void 0&&(be.__webglTexture=t.createTexture()),be.__version=D.version,a.memory.textures++);const Re=U.isWebGLCubeRenderTarget===!0,Fe=U.isWebGLMultipleRenderTargets===!0,Xe=w(U)||o;if(Re){se.__webglFramebuffer=[];for(let Ve=0;Ve<6;Ve++)se.__webglFramebuffer[Ve]=t.createFramebuffer()}else{if(se.__webglFramebuffer=t.createFramebuffer(),Fe)if(r.drawBuffers){const Ve=U.texture;for(let we=0,rt=Ve.length;we<rt;we++){const st=i.get(Ve[we]);st.__webglTexture===void 0&&(st.__webglTexture=t.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&U.samples>0&&le(U)===!1){const Ve=Fe?D:[D];se.__webglMultisampledFramebuffer=t.createFramebuffer(),se.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,se.__webglMultisampledFramebuffer);for(let we=0;we<Ve.length;we++){const rt=Ve[we];se.__webglColorRenderbuffer[we]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,se.__webglColorRenderbuffer[we]);const st=s.convert(rt.format,rt.encoding),nt=s.convert(rt.type),dt=_(rt.internalFormat,st,nt,rt.encoding,U.isXRRenderTarget===!0),Ze=me(U);t.renderbufferStorageMultisample(t.RENDERBUFFER,Ze,dt,U.width,U.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+we,t.RENDERBUFFER,se.__webglColorRenderbuffer[we])}t.bindRenderbuffer(t.RENDERBUFFER,null),U.depthBuffer&&(se.__webglDepthRenderbuffer=t.createRenderbuffer(),Ge(se.__webglDepthRenderbuffer,U,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Re){n.bindTexture(t.TEXTURE_CUBE_MAP,be.__webglTexture),X(t.TEXTURE_CUBE_MAP,D,Xe);for(let Ve=0;Ve<6;Ve++)Ie(se.__webglFramebuffer[Ve],U,D,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ve);T(D,Xe)&&I(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Fe){const Ve=U.texture;for(let we=0,rt=Ve.length;we<rt;we++){const st=Ve[we],nt=i.get(st);n.bindTexture(t.TEXTURE_2D,nt.__webglTexture),X(t.TEXTURE_2D,st,Xe),Ie(se.__webglFramebuffer,U,st,t.COLOR_ATTACHMENT0+we,t.TEXTURE_2D),T(st,Xe)&&I(t.TEXTURE_2D)}n.unbindTexture()}else{let Ve=t.TEXTURE_2D;(U.isWebGL3DRenderTarget||U.isWebGLArrayRenderTarget)&&(o?Ve=U.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Ve,be.__webglTexture),X(Ve,D,Xe),Ie(se.__webglFramebuffer,U,D,t.COLOR_ATTACHMENT0,Ve),T(D,Xe)&&I(Ve),n.unbindTexture()}U.depthBuffer&&B(U)}function ce(U){const D=w(U)||o,se=U.isWebGLMultipleRenderTargets===!0?U.texture:[U.texture];for(let be=0,Re=se.length;be<Re;be++){const Fe=se[be];if(T(Fe,D)){const Xe=U.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,Ve=i.get(Fe).__webglTexture;n.bindTexture(Xe,Ve),I(Xe),n.unbindTexture()}}}function ae(U){if(o&&U.samples>0&&le(U)===!1){const D=U.isWebGLMultipleRenderTargets?U.texture:[U.texture],se=U.width,be=U.height;let Re=t.COLOR_BUFFER_BIT;const Fe=[],Xe=U.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ve=i.get(U),we=U.isWebGLMultipleRenderTargets===!0;if(we)for(let rt=0;rt<D.length;rt++)n.bindFramebuffer(t.FRAMEBUFFER,Ve.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+rt,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Ve.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+rt,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Ve.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ve.__webglFramebuffer);for(let rt=0;rt<D.length;rt++){Fe.push(t.COLOR_ATTACHMENT0+rt),U.depthBuffer&&Fe.push(Xe);const st=Ve.__ignoreDepthValues!==void 0?Ve.__ignoreDepthValues:!1;if(st===!1&&(U.depthBuffer&&(Re|=t.DEPTH_BUFFER_BIT),U.stencilBuffer&&(Re|=t.STENCIL_BUFFER_BIT)),we&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Ve.__webglColorRenderbuffer[rt]),st===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[Xe]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[Xe])),we){const nt=i.get(D[rt]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,nt,0)}t.blitFramebuffer(0,0,se,be,0,0,se,be,Re,t.NEAREST),f&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Fe)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),we)for(let rt=0;rt<D.length;rt++){n.bindFramebuffer(t.FRAMEBUFFER,Ve.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+rt,t.RENDERBUFFER,Ve.__webglColorRenderbuffer[rt]);const st=i.get(D[rt]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Ve.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+rt,t.TEXTURE_2D,st,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ve.__webglMultisampledFramebuffer)}}function me(U){return Math.min(d,U.samples)}function le(U){const D=i.get(U);return o&&U.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&D.__useRenderToTexture!==!1}function Se(U){const D=a.render.frame;m.get(U)!==D&&(m.set(U,D),U.update())}function ve(U,D){const se=U.encoding,be=U.format,Re=U.type;return U.isCompressedTexture===!0||U.isVideoTexture===!0||U.format===Gh||se!==Zs&&(se===an?o===!1?e.has("EXT_sRGB")===!0&&be===Si?(U.format=Gh,U.minFilter=vn,U.generateMipmaps=!1):D=Rg.sRGBToLinear(D):(be!==Si||Re!==qs)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",se)),D}this.allocateTextureUnit=j,this.resetTextureUnits=re,this.setTexture2D=z,this.setTexture2DArray=ee,this.setTexture3D=Q,this.setTextureCube=fe,this.rebindTextures=te,this.setupRenderTarget=ue,this.updateRenderTargetMipmap=ce,this.updateMultisampleRenderTarget=ae,this.setupDepthRenderbuffer=B,this.setupFrameBufferTexture=Ie,this.useMultisampledRTT=le}function TM(t,e,n){const i=n.isWebGL2;function r(s,a=null){let o;if(s===qs)return t.UNSIGNED_BYTE;if(s===qS)return t.UNSIGNED_SHORT_4_4_4_4;if(s===ZS)return t.UNSIGNED_SHORT_5_5_5_1;if(s===$S)return t.BYTE;if(s===XS)return t.SHORT;if(s===xg)return t.UNSIGNED_SHORT;if(s===YS)return t.INT;if(s===Rs)return t.UNSIGNED_INT;if(s===Gr)return t.FLOAT;if(s===su)return i?t.HALF_FLOAT:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===jS)return t.ALPHA;if(s===Si)return t.RGBA;if(s===JS)return t.LUMINANCE;if(s===QS)return t.LUMINANCE_ALPHA;if(s===zs)return t.DEPTH_COMPONENT;if(s===so)return t.DEPTH_STENCIL;if(s===eM)return t.RED;if(s===KS)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),t.RGBA;if(s===Gh)return o=e.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(s===tM)return t.RED_INTEGER;if(s===nM)return t.RG;if(s===iM)return t.RG_INTEGER;if(s===rM)return t.RGBA_INTEGER;if(s===gh||s===yh||s===bh||s===wh)if(a===an)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(s===gh)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===yh)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===bh)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===wh)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===gh)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===yh)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===bh)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===wh)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===ev||s===tv||s===nv||s===iv)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===ev)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===tv)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===nv)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===iv)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===sM)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===rv||s===sv)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(s===rv)return a===an?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(s===sv)return a===an?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===av||s===ov||s===lv||s===uv||s===cv||s===dv||s===hv||s===fv||s===pv||s===mv||s===vv||s===gv||s===yv||s===bv)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(s===av)return a===an?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===ov)return a===an?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===lv)return a===an?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===uv)return a===an?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===cv)return a===an?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===dv)return a===an?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===hv)return a===an?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===fv)return a===an?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===pv)return a===an?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===mv)return a===an?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===vv)return a===an?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===gv)return a===an?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===yv)return a===an?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===bv)return a===an?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===wv)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(s===wv)return a===an?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===Xa?i?t.UNSIGNED_INT_24_8:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:r}}class EM extends Bn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Qo extends Ft{constructor(){super(),this.isGroup=!0,this.type="Group"}}const g4={type:"move"};class Fp{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Qo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Qo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new q),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Qo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new q),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let r=null,s=null,a=null;const o=this._targetRay,l=this._grip,u=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(u&&e.hand){a=!0;for(const v of e.hand.values()){const g=n.getJointPose(v,i);if(u.joints[v.jointName]===void 0){const S=new Qo;S.matrixAutoUpdate=!1,S.visible=!1,u.joints[v.jointName]=S,u.add(S)}const y=u.joints[v.jointName];g!==null&&(y.matrix.fromArray(g.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.jointRadius=g.radius),y.visible=g!==null}const c=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],h=c.position.distanceTo(d.position),f=.02,m=.005;u.inputState.pinching&&h>f+m?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&h<=f-m&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=n.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(g4)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=a!==null),this}}class xM extends Rn{constructor(e,n,i,r,s,a,o,l,u,c){if(c=c!==void 0?c:zs,c!==zs&&c!==so)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&c===zs&&(i=Rs),i===void 0&&c===so&&(i=Xa),super(null,r,s,a,o,l,c,i,u),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=o!==void 0?o:Sn,this.minFilter=l!==void 0?l:Sn,this.flipY=!1,this.generateMipmaps=!1}}class y4 extends Jr{constructor(e,n){super();const i=this;let r=null,s=1,a=null,o="local-floor",l=null,u=null,c=null,d=null,h=null,f=null;const m=n.getContextAttributes();let v=null,g=null;const y=[],S=[],b=new Bn;b.layers.enable(1),b.viewport=new Ht;const w=new Bn;w.layers.enable(2),w.viewport=new Ht;const E=[b,w],T=new EM;T.layers.enable(1),T.layers.enable(2);let I=null,_=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Z){let z=y[Z];return z===void 0&&(z=new Fp,y[Z]=z),z.getTargetRaySpace()},this.getControllerGrip=function(Z){let z=y[Z];return z===void 0&&(z=new Fp,y[Z]=z),z.getGripSpace()},this.getHand=function(Z){let z=y[Z];return z===void 0&&(z=new Fp,y[Z]=z),z.getHandSpace()};function R(Z){const z=S.indexOf(Z.inputSource);if(z===-1)return;const ee=y[z];ee!==void 0&&ee.dispatchEvent({type:Z.type,data:Z.inputSource})}function L(){r.removeEventListener("select",R),r.removeEventListener("selectstart",R),r.removeEventListener("selectend",R),r.removeEventListener("squeeze",R),r.removeEventListener("squeezestart",R),r.removeEventListener("squeezeend",R),r.removeEventListener("end",L),r.removeEventListener("inputsourceschange",k);for(let Z=0;Z<y.length;Z++){const z=S[Z];z!==null&&(S[Z]=null,y[Z].disconnect(z))}I=null,_=null,e.setRenderTarget(v),h=null,d=null,c=null,r=null,g=null,j.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Z){s=Z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Z){o=Z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(Z){l=Z},this.getBaseLayer=function(){return d!==null?d:h},this.getBinding=function(){return c},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=async function(Z){if(r=Z,r!==null){if(v=e.getRenderTarget(),r.addEventListener("select",R),r.addEventListener("selectstart",R),r.addEventListener("selectend",R),r.addEventListener("squeeze",R),r.addEventListener("squeezestart",R),r.addEventListener("squeezeend",R),r.addEventListener("end",L),r.addEventListener("inputsourceschange",k),m.xrCompatible!==!0&&await n.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const z={antialias:r.renderState.layers===void 0?m.antialias:!0,alpha:m.alpha,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:s};h=new XRWebGLLayer(r,n,z),r.updateRenderState({baseLayer:h}),g=new Vi(h.framebufferWidth,h.framebufferHeight,{format:Si,type:qs,encoding:e.outputEncoding,stencilBuffer:m.stencil})}else{let z=null,ee=null,Q=null;m.depth&&(Q=m.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,z=m.stencil?so:zs,ee=m.stencil?Xa:Rs);const fe={colorFormat:n.RGBA8,depthFormat:Q,scaleFactor:s};c=new XRWebGLBinding(r,n),d=c.createProjectionLayer(fe),r.updateRenderState({layers:[d]}),g=new Vi(d.textureWidth,d.textureHeight,{format:Si,type:qs,depthTexture:new xM(d.textureWidth,d.textureHeight,ee,void 0,void 0,void 0,void 0,void 0,void 0,z),stencilBuffer:m.stencil,encoding:e.outputEncoding,samples:m.antialias?4:0});const Ee=e.properties.get(g);Ee.__ignoreDepthValues=d.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(1),l=null,a=await r.requestReferenceSpace(o),j.setContext(r),j.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function k(Z){for(let z=0;z<Z.removed.length;z++){const ee=Z.removed[z],Q=S.indexOf(ee);Q>=0&&(S[Q]=null,y[Q].dispatchEvent({type:"disconnected",data:ee}))}for(let z=0;z<Z.added.length;z++){const ee=Z.added[z];let Q=S.indexOf(ee);if(Q===-1){for(let Ee=0;Ee<y.length;Ee++)if(Ee>=S.length){S.push(ee),Q=Ee;break}else if(S[Ee]===null){S[Ee]=ee,Q=Ee;break}if(Q===-1)break}const fe=y[Q];fe&&fe.dispatchEvent({type:"connected",data:ee})}}const F=new q,G=new q;function H(Z,z,ee){F.setFromMatrixPosition(z.matrixWorld),G.setFromMatrixPosition(ee.matrixWorld);const Q=F.distanceTo(G),fe=z.projectionMatrix.elements,Ee=ee.projectionMatrix.elements,ne=fe[14]/(fe[10]-1),X=fe[14]/(fe[10]+1),_e=(fe[9]+1)/fe[5],Ae=(fe[9]-1)/fe[5],ze=(fe[8]-1)/fe[0],Ie=(Ee[8]+1)/Ee[0],Ge=ne*ze,N=ne*Ie,B=Q/(-ze+Ie),te=B*-ze;z.matrixWorld.decompose(Z.position,Z.quaternion,Z.scale),Z.translateX(te),Z.translateZ(B),Z.matrixWorld.compose(Z.position,Z.quaternion,Z.scale),Z.matrixWorldInverse.copy(Z.matrixWorld).invert();const ue=ne+B,ce=X+B,ae=Ge-te,me=N+(Q-te),le=_e*X/ce*ue,Se=Ae*X/ce*ue;Z.projectionMatrix.makePerspective(ae,me,le,Se,ue,ce)}function J(Z,z){z===null?Z.matrixWorld.copy(Z.matrix):Z.matrixWorld.multiplyMatrices(z.matrixWorld,Z.matrix),Z.matrixWorldInverse.copy(Z.matrixWorld).invert()}this.updateCamera=function(Z){if(r===null)return;T.near=w.near=b.near=Z.near,T.far=w.far=b.far=Z.far,(I!==T.near||_!==T.far)&&(r.updateRenderState({depthNear:T.near,depthFar:T.far}),I=T.near,_=T.far);const z=Z.parent,ee=T.cameras;J(T,z);for(let fe=0;fe<ee.length;fe++)J(ee[fe],z);T.matrixWorld.decompose(T.position,T.quaternion,T.scale),Z.matrix.copy(T.matrix),Z.matrix.decompose(Z.position,Z.quaternion,Z.scale);const Q=Z.children;for(let fe=0,Ee=Q.length;fe<Ee;fe++)Q[fe].updateMatrixWorld(!0);ee.length===2?H(T,b,w):T.projectionMatrix.copy(b.projectionMatrix)},this.getCamera=function(){return T},this.getFoveation=function(){if(d!==null)return d.fixedFoveation;if(h!==null)return h.fixedFoveation},this.setFoveation=function(Z){d!==null&&(d.fixedFoveation=Z),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=Z)};let V=null;function re(Z,z){if(u=z.getViewerPose(l||a),f=z,u!==null){const ee=u.views;h!==null&&(e.setRenderTargetFramebuffer(g,h.framebuffer),e.setRenderTarget(g));let Q=!1;ee.length!==T.cameras.length&&(T.cameras.length=0,Q=!0);for(let fe=0;fe<ee.length;fe++){const Ee=ee[fe];let ne=null;if(h!==null)ne=h.getViewport(Ee);else{const _e=c.getViewSubImage(d,Ee);ne=_e.viewport,fe===0&&(e.setRenderTargetTextures(g,_e.colorTexture,d.ignoreDepthValues?void 0:_e.depthStencilTexture),e.setRenderTarget(g))}let X=E[fe];X===void 0&&(X=new Bn,X.layers.enable(fe),X.viewport=new Ht,E[fe]=X),X.matrix.fromArray(Ee.transform.matrix),X.projectionMatrix.fromArray(Ee.projectionMatrix),X.viewport.set(ne.x,ne.y,ne.width,ne.height),fe===0&&T.matrix.copy(X.matrix),Q===!0&&T.cameras.push(X)}}for(let ee=0;ee<y.length;ee++){const Q=S[ee],fe=y[ee];Q!==null&&fe!==void 0&&fe.update(Q,z,l||a)}V&&V(Z,z),f=null}const j=new bM;j.setAnimationLoop(re),this.setAnimationLoop=function(Z){V=Z},this.dispose=function(){}}}function b4(t,e){function n(v,g){v.fogColor.value.copy(g.color),g.isFog?(v.fogNear.value=g.near,v.fogFar.value=g.far):g.isFogExp2&&(v.fogDensity.value=g.density)}function i(v,g,y,S,b){g.isMeshBasicMaterial||g.isMeshLambertMaterial?r(v,g):g.isMeshToonMaterial?(r(v,g),c(v,g)):g.isMeshPhongMaterial?(r(v,g),u(v,g)):g.isMeshStandardMaterial?(r(v,g),d(v,g),g.isMeshPhysicalMaterial&&h(v,g,b)):g.isMeshMatcapMaterial?(r(v,g),f(v,g)):g.isMeshDepthMaterial?r(v,g):g.isMeshDistanceMaterial?(r(v,g),m(v,g)):g.isMeshNormalMaterial?r(v,g):g.isLineBasicMaterial?(s(v,g),g.isLineDashedMaterial&&a(v,g)):g.isPointsMaterial?o(v,g,y,S):g.isSpriteMaterial?l(v,g):g.isShadowMaterial?(v.color.value.copy(g.color),v.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function r(v,g){v.opacity.value=g.opacity,g.color&&v.diffuse.value.copy(g.color),g.emissive&&v.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(v.map.value=g.map),g.alphaMap&&(v.alphaMap.value=g.alphaMap),g.bumpMap&&(v.bumpMap.value=g.bumpMap,v.bumpScale.value=g.bumpScale,g.side===Ei&&(v.bumpScale.value*=-1)),g.displacementMap&&(v.displacementMap.value=g.displacementMap,v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias),g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap),g.normalMap&&(v.normalMap.value=g.normalMap,v.normalScale.value.copy(g.normalScale),g.side===Ei&&v.normalScale.value.negate()),g.specularMap&&(v.specularMap.value=g.specularMap),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest);const y=e.get(g).envMap;if(y&&(v.envMap.value=y,v.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=g.reflectivity,v.ior.value=g.ior,v.refractionRatio.value=g.refractionRatio),g.lightMap){v.lightMap.value=g.lightMap;const w=t.physicallyCorrectLights!==!0?Math.PI:1;v.lightMapIntensity.value=g.lightMapIntensity*w}g.aoMap&&(v.aoMap.value=g.aoMap,v.aoMapIntensity.value=g.aoMapIntensity);let S;g.map?S=g.map:g.specularMap?S=g.specularMap:g.displacementMap?S=g.displacementMap:g.normalMap?S=g.normalMap:g.bumpMap?S=g.bumpMap:g.roughnessMap?S=g.roughnessMap:g.metalnessMap?S=g.metalnessMap:g.alphaMap?S=g.alphaMap:g.emissiveMap?S=g.emissiveMap:g.clearcoatMap?S=g.clearcoatMap:g.clearcoatNormalMap?S=g.clearcoatNormalMap:g.clearcoatRoughnessMap?S=g.clearcoatRoughnessMap:g.iridescenceMap?S=g.iridescenceMap:g.iridescenceThicknessMap?S=g.iridescenceThicknessMap:g.specularIntensityMap?S=g.specularIntensityMap:g.specularColorMap?S=g.specularColorMap:g.transmissionMap?S=g.transmissionMap:g.thicknessMap?S=g.thicknessMap:g.sheenColorMap?S=g.sheenColorMap:g.sheenRoughnessMap&&(S=g.sheenRoughnessMap),S!==void 0&&(S.isWebGLRenderTarget&&(S=S.texture),S.matrixAutoUpdate===!0&&S.updateMatrix(),v.uvTransform.value.copy(S.matrix));let b;g.aoMap?b=g.aoMap:g.lightMap&&(b=g.lightMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),v.uv2Transform.value.copy(b.matrix))}function s(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity}function a(v,g){v.dashSize.value=g.dashSize,v.totalSize.value=g.dashSize+g.gapSize,v.scale.value=g.scale}function o(v,g,y,S){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.size.value=g.size*y,v.scale.value=S*.5,g.map&&(v.map.value=g.map),g.alphaMap&&(v.alphaMap.value=g.alphaMap),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest);let b;g.map?b=g.map:g.alphaMap&&(b=g.alphaMap),b!==void 0&&(b.matrixAutoUpdate===!0&&b.updateMatrix(),v.uvTransform.value.copy(b.matrix))}function l(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.rotation.value=g.rotation,g.map&&(v.map.value=g.map),g.alphaMap&&(v.alphaMap.value=g.alphaMap),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest);let y;g.map?y=g.map:g.alphaMap&&(y=g.alphaMap),y!==void 0&&(y.matrixAutoUpdate===!0&&y.updateMatrix(),v.uvTransform.value.copy(y.matrix))}function u(v,g){v.specular.value.copy(g.specular),v.shininess.value=Math.max(g.shininess,1e-4)}function c(v,g){g.gradientMap&&(v.gradientMap.value=g.gradientMap)}function d(v,g){v.roughness.value=g.roughness,v.metalness.value=g.metalness,g.roughnessMap&&(v.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(v.metalnessMap.value=g.metalnessMap),e.get(g).envMap&&(v.envMapIntensity.value=g.envMapIntensity)}function h(v,g,y){v.ior.value=g.ior,g.sheen>0&&(v.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),v.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(v.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(v.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(v.clearcoat.value=g.clearcoat,v.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(v.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(v.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),v.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===Ei&&v.clearcoatNormalScale.value.negate())),g.iridescence>0&&(v.iridescence.value=g.iridescence,v.iridescenceIOR.value=g.iridescenceIOR,v.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(v.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(v.transmission.value=g.transmission,v.transmissionSamplerMap.value=y.texture,v.transmissionSamplerSize.value.set(y.width,y.height),g.transmissionMap&&(v.transmissionMap.value=g.transmissionMap),v.thickness.value=g.thickness,g.thicknessMap&&(v.thicknessMap.value=g.thicknessMap),v.attenuationDistance.value=g.attenuationDistance,v.attenuationColor.value.copy(g.attenuationColor)),v.specularIntensity.value=g.specularIntensity,v.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(v.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(v.specularColorMap.value=g.specularColorMap)}function f(v,g){g.matcap&&(v.matcap.value=g.matcap)}function m(v,g){v.referencePosition.value.copy(g.referencePosition),v.nearDistance.value=g.nearDistance,v.farDistance.value=g.farDistance}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function w4(t,e,n,i){let r={},s={},a=[];const o=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(S,b){const w=b.program;i.uniformBlockBinding(S,w)}function u(S,b){let w=r[S.id];w===void 0&&(m(S),w=c(S),r[S.id]=w,S.addEventListener("dispose",g));const E=b.program;i.updateUBOMapping(S,E);const T=e.render.frame;s[S.id]!==T&&(h(S),s[S.id]=T)}function c(S){const b=d();S.__bindingPointIndex=b;const w=t.createBuffer(),E=S.__size,T=S.usage;return t.bindBuffer(t.UNIFORM_BUFFER,w),t.bufferData(t.UNIFORM_BUFFER,E,T),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,b,w),w}function d(){for(let S=0;S<o;S++)if(a.indexOf(S)===-1)return a.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(S){const b=r[S.id],w=S.uniforms,E=S.__cache;t.bindBuffer(t.UNIFORM_BUFFER,b);for(let T=0,I=w.length;T<I;T++){const _=w[T];if(f(_,T,E)===!0){const R=_.value,L=_.__offset;typeof R=="number"?(_.__data[0]=R,t.bufferSubData(t.UNIFORM_BUFFER,L,_.__data)):(_.value.isMatrix3?(_.__data[0]=_.value.elements[0],_.__data[1]=_.value.elements[1],_.__data[2]=_.value.elements[2],_.__data[3]=_.value.elements[0],_.__data[4]=_.value.elements[3],_.__data[5]=_.value.elements[4],_.__data[6]=_.value.elements[5],_.__data[7]=_.value.elements[0],_.__data[8]=_.value.elements[6],_.__data[9]=_.value.elements[7],_.__data[10]=_.value.elements[8],_.__data[11]=_.value.elements[0]):R.toArray(_.__data),t.bufferSubData(t.UNIFORM_BUFFER,L,_.__data))}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function f(S,b,w){const E=S.value;if(w[b]===void 0)return typeof E=="number"?w[b]=E:w[b]=E.clone(),!0;if(typeof E=="number"){if(w[b]!==E)return w[b]=E,!0}else{const T=w[b];if(T.equals(E)===!1)return T.copy(E),!0}return!1}function m(S){const b=S.uniforms;let w=0;const E=16;let T=0;for(let I=0,_=b.length;I<_;I++){const R=b[I],L=v(R);if(R.__data=new Float32Array(L.storage/Float32Array.BYTES_PER_ELEMENT),R.__offset=w,I>0){T=w%E;const k=E-T;T!==0&&k-L.boundary<0&&(w+=E-T,R.__offset=w)}w+=L.storage}return T=w%E,T>0&&(w+=E-T),S.__size=w,S.__cache={},this}function v(S){const b=S.value,w={boundary:0,storage:0};return typeof b=="number"?(w.boundary=4,w.storage=4):b.isVector2?(w.boundary=8,w.storage=8):b.isVector3||b.isColor?(w.boundary=16,w.storage=12):b.isVector4?(w.boundary=16,w.storage=16):b.isMatrix3?(w.boundary=48,w.storage=48):b.isMatrix4?(w.boundary=64,w.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),w}function g(S){const b=S.target;b.removeEventListener("dispose",g);const w=a.indexOf(b.__bindingPointIndex);a.splice(w,1),t.deleteBuffer(r[b.id]),delete r[b.id],delete s[b.id]}function y(){for(const S in r)t.deleteBuffer(r[S]);a=[],r={},s={}}return{bind:l,update:u,dispose:y}}function _4(){const t=xc("canvas");return t.style.display="block",t}function CM(t={}){this.isWebGLRenderer=!0;const e=t.canvas!==void 0?t.canvas:_4(),n=t.context!==void 0?t.context:null,i=t.depth!==void 0?t.depth:!0,r=t.stencil!==void 0?t.stencil:!0,s=t.antialias!==void 0?t.antialias:!1,a=t.premultipliedAlpha!==void 0?t.premultipliedAlpha:!0,o=t.preserveDrawingBuffer!==void 0?t.preserveDrawingBuffer:!1,l=t.powerPreference!==void 0?t.powerPreference:"default",u=t.failIfMajorPerformanceCaveat!==void 0?t.failIfMajorPerformanceCaveat:!1;let c;n!==null?c=n.getContextAttributes().alpha:c=t.alpha!==void 0?t.alpha:!1;let d=null,h=null;const f=[],m=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Zs,this.physicallyCorrectLights=!1,this.toneMapping=br,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const v=this;let g=!1,y=0,S=0,b=null,w=-1,E=null;const T=new Ht,I=new Ht;let _=null,R=e.width,L=e.height,k=1,F=null,G=null;const H=new Ht(0,0,R,L),J=new Ht(0,0,R,L);let V=!1;const re=new If;let j=!1,Z=!1,z=null;const ee=new wt,Q=new ke,fe=new q,Ee={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ne(){return b===null?k:1}let X=n;function _e(Y,ge){for(let Pe=0;Pe<Y.length;Pe++){const pe=Y[Pe],Oe=e.getContext(pe,ge);if(Oe!==null)return Oe}return null}try{const Y={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:o,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${xf}`),e.addEventListener("webglcontextlost",dt,!1),e.addEventListener("webglcontextrestored",Ze,!1),e.addEventListener("webglcontextcreationerror",mt,!1),X===null){const ge=["webgl2","webgl","experimental-webgl"];if(v.isWebGL1Renderer===!0&&ge.shift(),X=_e(ge,Y),X===null)throw _e(ge)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}X.getShaderPrecisionFormat===void 0&&(X.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Y){throw console.error("THREE.WebGLRenderer: "+Y.message),Y}let Ae,ze,Ie,Ge,N,B,te,ue,ce,ae,me,le,Se,ve,U,D,se,be,Re,Fe,Xe,Ve,we,rt;function st(){Ae=new Fz(X),ze=new Lz(X,Ae,t),Ae.init(ze),Ve=new TM(X,Ae,ze),Ie=new m4(X,Ae,ze),Ge=new zz(X),N=new i4,B=new v4(X,Ae,Ie,N,ze,Ve,Ge),te=new Oz(v),ue=new kz(v),ce=new ZF(X,ze),we=new Rz(X,Ae,ce,ze),ae=new Uz(X,ce,Ge,we),me=new Wz(X,ae,ce,Ge),Re=new Gz(X,ze,B),D=new Iz(N),le=new n4(v,te,ue,Ae,ze,we,D),Se=new b4(v,N),ve=new s4,U=new d4(Ae,ze),be=new Az(v,te,ue,Ie,me,c,a),se=new p4(v,me,ze),rt=new w4(X,Ge,ze,Ie),Fe=new Pz(X,Ae,Ge,ze),Xe=new Bz(X,Ae,Ge,ze),Ge.programs=le.programs,v.capabilities=ze,v.extensions=Ae,v.properties=N,v.renderLists=ve,v.shadowMap=se,v.state=Ie,v.info=Ge}st();const nt=new y4(v,X);this.xr=nt,this.getContext=function(){return X},this.getContextAttributes=function(){return X.getContextAttributes()},this.forceContextLoss=function(){const Y=Ae.get("WEBGL_lose_context");Y&&Y.loseContext()},this.forceContextRestore=function(){const Y=Ae.get("WEBGL_lose_context");Y&&Y.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(Y){Y!==void 0&&(k=Y,this.setSize(R,L,!1))},this.getSize=function(Y){return Y.set(R,L)},this.setSize=function(Y,ge,Pe){if(nt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}R=Y,L=ge,e.width=Math.floor(Y*k),e.height=Math.floor(ge*k),Pe!==!1&&(e.style.width=Y+"px",e.style.height=ge+"px"),this.setViewport(0,0,Y,ge)},this.getDrawingBufferSize=function(Y){return Y.set(R*k,L*k).floor()},this.setDrawingBufferSize=function(Y,ge,Pe){R=Y,L=ge,k=Pe,e.width=Math.floor(Y*Pe),e.height=Math.floor(ge*Pe),this.setViewport(0,0,Y,ge)},this.getCurrentViewport=function(Y){return Y.copy(T)},this.getViewport=function(Y){return Y.copy(H)},this.setViewport=function(Y,ge,Pe,pe){Y.isVector4?H.set(Y.x,Y.y,Y.z,Y.w):H.set(Y,ge,Pe,pe),Ie.viewport(T.copy(H).multiplyScalar(k).floor())},this.getScissor=function(Y){return Y.copy(J)},this.setScissor=function(Y,ge,Pe,pe){Y.isVector4?J.set(Y.x,Y.y,Y.z,Y.w):J.set(Y,ge,Pe,pe),Ie.scissor(I.copy(J).multiplyScalar(k).floor())},this.getScissorTest=function(){return V},this.setScissorTest=function(Y){Ie.setScissorTest(V=Y)},this.setOpaqueSort=function(Y){F=Y},this.setTransparentSort=function(Y){G=Y},this.getClearColor=function(Y){return Y.copy(be.getClearColor())},this.setClearColor=function(){be.setClearColor.apply(be,arguments)},this.getClearAlpha=function(){return be.getClearAlpha()},this.setClearAlpha=function(){be.setClearAlpha.apply(be,arguments)},this.clear=function(Y=!0,ge=!0,Pe=!0){let pe=0;Y&&(pe|=X.COLOR_BUFFER_BIT),ge&&(pe|=X.DEPTH_BUFFER_BIT),Pe&&(pe|=X.STENCIL_BUFFER_BIT),X.clear(pe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",dt,!1),e.removeEventListener("webglcontextrestored",Ze,!1),e.removeEventListener("webglcontextcreationerror",mt,!1),ve.dispose(),U.dispose(),N.dispose(),te.dispose(),ue.dispose(),me.dispose(),we.dispose(),rt.dispose(),le.dispose(),nt.dispose(),nt.removeEventListener("sessionstart",et),nt.removeEventListener("sessionend",lt),z&&(z.dispose(),z=null),Pt.stop()};function dt(Y){Y.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function Ze(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const Y=Ge.autoReset,ge=se.enabled,Pe=se.autoUpdate,pe=se.needsUpdate,Oe=se.type;st(),Ge.autoReset=Y,se.enabled=ge,se.autoUpdate=Pe,se.needsUpdate=pe,se.type=Oe}function mt(Y){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Y.statusMessage)}function zt(Y){const ge=Y.target;ge.removeEventListener("dispose",zt),Ut(ge)}function Ut(Y){oe(Y),N.remove(Y)}function oe(Y){const ge=N.get(Y).programs;ge!==void 0&&(ge.forEach(function(Pe){le.releaseProgram(Pe)}),Y.isShaderMaterial&&le.releaseShaderCache(Y))}this.renderBufferDirect=function(Y,ge,Pe,pe,Oe,at){ge===null&&(ge=Ee);const ut=Oe.isMesh&&Oe.matrixWorld.determinant()<0,Tt=sd(Y,ge,Pe,pe,Oe);Ie.setMaterial(pe,ut);let _t=Pe.index;const Lt=Pe.attributes.position;if(_t===null){if(Lt===void 0||Lt.count===0)return}else if(_t.count===0)return;let Ct=1;pe.wireframe===!0&&(_t=ae.getWireframeAttribute(Pe),Ct=2),we.setup(Oe,pe,Tt,Pe,_t);let It,$t=Fe;_t!==null&&(It=ce.get(_t),$t=Xe,$t.setIndex(It));const Ri=_t!==null?_t.count:Lt.count,gi=Pe.drawRange.start*Ct,es=Pe.drawRange.count*Ct,ai=at!==null?at.start*Ct:0,kt=at!==null?at.count*Ct:1/0,ts=Math.max(gi,ai),Qt=Math.min(Ri,gi+es,ai+kt)-1,Qn=Math.max(0,Qt-ts+1);if(Qn!==0){if(Oe.isMesh)pe.wireframe===!0?(Ie.setLineWidth(pe.wireframeLinewidth*ne()),$t.setMode(X.LINES)):$t.setMode(X.TRIANGLES);else if(Oe.isLine){let $n=pe.linewidth;$n===void 0&&($n=1),Ie.setLineWidth($n*ne()),Oe.isLineSegments?$t.setMode(X.LINES):Oe.isLineLoop?$t.setMode(X.LINE_LOOP):$t.setMode(X.LINE_STRIP)}else Oe.isPoints?$t.setMode(X.POINTS):Oe.isSprite&&$t.setMode(X.TRIANGLES);if(Oe.isInstancedMesh)$t.renderInstances(ts,Qn,Oe.count);else if(Pe.isInstancedBufferGeometry){const $n=Math.min(Pe.instanceCount,Pe._maxInstanceCount);$t.renderInstances(ts,Qn,$n)}else $t.render(ts,Qn)}},this.compile=function(Y,ge){function Pe(pe,Oe,at){pe.transparent===!0&&pe.side===Hr?(pe.side=Ei,pe.needsUpdate=!0,sn(pe,Oe,at),pe.side=ro,pe.needsUpdate=!0,sn(pe,Oe,at),pe.side=Hr):sn(pe,Oe,at)}h=U.get(Y),h.init(),m.push(h),Y.traverseVisible(function(pe){pe.isLight&&pe.layers.test(ge.layers)&&(h.pushLight(pe),pe.castShadow&&h.pushShadow(pe))}),h.setupLights(v.physicallyCorrectLights),Y.traverse(function(pe){const Oe=pe.material;if(Oe)if(Array.isArray(Oe))for(let at=0;at<Oe.length;at++){const ut=Oe[at];Pe(ut,Y,pe)}else Pe(Oe,Y,pe)}),m.pop(),h=null};let xe=null;function He(Y){xe&&xe(Y)}function et(){Pt.stop()}function lt(){Pt.start()}const Pt=new bM;Pt.setAnimationLoop(He),typeof self!="undefined"&&Pt.setContext(self),this.setAnimationLoop=function(Y){xe=Y,nt.setAnimationLoop(Y),Y===null?Pt.stop():Pt.start()},nt.addEventListener("sessionstart",et),nt.addEventListener("sessionend",lt),this.render=function(Y,ge){if(ge!==void 0&&ge.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g===!0)return;Y.matrixWorldAutoUpdate===!0&&Y.updateMatrixWorld(),ge.parent===null&&ge.matrixWorldAutoUpdate===!0&&ge.updateMatrixWorld(),nt.enabled===!0&&nt.isPresenting===!0&&(nt.cameraAutoUpdate===!0&&nt.updateCamera(ge),ge=nt.getCamera()),Y.isScene===!0&&Y.onBeforeRender(v,Y,ge,b),h=U.get(Y,m.length),h.init(),m.push(h),ee.multiplyMatrices(ge.projectionMatrix,ge.matrixWorldInverse),re.setFromProjectionMatrix(ee),Z=this.localClippingEnabled,j=D.init(this.clippingPlanes,Z,ge),d=ve.get(Y,f.length),d.init(),f.push(d),pn(Y,ge,0,v.sortObjects),d.finish(),v.sortObjects===!0&&d.sort(F,G),j===!0&&D.beginShadows();const Pe=h.state.shadowsArray;if(se.render(Pe,Y,ge),j===!0&&D.endShadows(),this.info.autoReset===!0&&this.info.reset(),be.render(d,Y),h.setupLights(v.physicallyCorrectLights),ge.isArrayCamera){const pe=ge.cameras;for(let Oe=0,at=pe.length;Oe<at;Oe++){const ut=pe[Oe];Gt(d,Y,ut,ut.viewport)}}else Gt(d,Y,ge);b!==null&&(B.updateMultisampleRenderTarget(b),B.updateRenderTargetMipmap(b)),Y.isScene===!0&&Y.onAfterRender(v,Y,ge),we.resetDefaultState(),w=-1,E=null,m.pop(),m.length>0?h=m[m.length-1]:h=null,f.pop(),f.length>0?d=f[f.length-1]:d=null};function pn(Y,ge,Pe,pe){if(Y.visible===!1)return;if(Y.layers.test(ge.layers)){if(Y.isGroup)Pe=Y.renderOrder;else if(Y.isLOD)Y.autoUpdate===!0&&Y.update(ge);else if(Y.isLight)h.pushLight(Y),Y.castShadow&&h.pushShadow(Y);else if(Y.isSprite){if(!Y.frustumCulled||re.intersectsSprite(Y)){pe&&fe.setFromMatrixPosition(Y.matrixWorld).applyMatrix4(ee);const ut=me.update(Y),Tt=Y.material;Tt.visible&&d.push(Y,ut,Tt,Pe,fe.z,null)}}else if((Y.isMesh||Y.isLine||Y.isPoints)&&(Y.isSkinnedMesh&&Y.skeleton.frame!==Ge.render.frame&&(Y.skeleton.update(),Y.skeleton.frame=Ge.render.frame),!Y.frustumCulled||re.intersectsObject(Y))){pe&&fe.setFromMatrixPosition(Y.matrixWorld).applyMatrix4(ee);const ut=me.update(Y),Tt=Y.material;if(Array.isArray(Tt)){const _t=ut.groups;for(let Lt=0,Ct=_t.length;Lt<Ct;Lt++){const It=_t[Lt],$t=Tt[It.materialIndex];$t&&$t.visible&&d.push(Y,ut,$t,Pe,fe.z,It)}}else Tt.visible&&d.push(Y,ut,Tt,Pe,fe.z,null)}}const at=Y.children;for(let ut=0,Tt=at.length;ut<Tt;ut++)pn(at[ut],ge,Pe,pe)}function Gt(Y,ge,Pe,pe){const Oe=Y.opaque,at=Y.transmissive,ut=Y.transparent;h.setupLightsView(Pe),at.length>0&&dr(Oe,ge,Pe),pe&&Ie.viewport(T.copy(pe)),Oe.length>0&&Wt(Oe,ge,Pe),at.length>0&&Wt(at,ge,Pe),ut.length>0&&Wt(ut,ge,Pe),Ie.buffers.depth.setTest(!0),Ie.buffers.depth.setMask(!0),Ie.buffers.color.setMask(!0),Ie.setPolygonOffset(!1)}function dr(Y,ge,Pe){const pe=ze.isWebGL2;z===null&&(z=new Vi(1,1,{generateMipmaps:!0,type:Ae.has("EXT_color_buffer_half_float")?su:qs,minFilter:ho,samples:pe&&s===!0?4:0})),v.getDrawingBufferSize(Q),pe?z.setSize(Q.x,Q.y):z.setSize(Wh(Q.x),Wh(Q.y));const Oe=v.getRenderTarget();v.setRenderTarget(z),v.clear();const at=v.toneMapping;v.toneMapping=br,Wt(Y,ge,Pe),v.toneMapping=at,B.updateMultisampleRenderTarget(z),B.updateRenderTargetMipmap(z),v.setRenderTarget(Oe)}function Wt(Y,ge,Pe){const pe=ge.isScene===!0?ge.overrideMaterial:null;for(let Oe=0,at=Y.length;Oe<at;Oe++){const ut=Y[Oe],Tt=ut.object,_t=ut.geometry,Lt=pe===null?ut.material:pe,Ct=ut.group;Tt.layers.test(Pe.layers)&&vi(Tt,ge,Pe,_t,Lt,Ct)}}function vi(Y,ge,Pe,pe,Oe,at){Y.onBeforeRender(v,ge,Pe,pe,Oe,at),Y.modelViewMatrix.multiplyMatrices(Pe.matrixWorldInverse,Y.matrixWorld),Y.normalMatrix.getNormalMatrix(Y.modelViewMatrix),Oe.onBeforeRender(v,ge,Pe,pe,Y,at),Oe.transparent===!0&&Oe.side===Hr?(Oe.side=Ei,Oe.needsUpdate=!0,v.renderBufferDirect(Pe,ge,pe,Oe,Y,at),Oe.side=ro,Oe.needsUpdate=!0,v.renderBufferDirect(Pe,ge,pe,Oe,Y,at),Oe.side=Hr):v.renderBufferDirect(Pe,ge,pe,Oe,Y,at),Y.onAfterRender(v,ge,Pe,pe,Oe,at)}function sn(Y,ge,Pe){ge.isScene!==!0&&(ge=Ee);const pe=N.get(Y),Oe=h.state.lights,at=h.state.shadowsArray,ut=Oe.state.version,Tt=le.getParameters(Y,Oe.state,at,ge,Pe),_t=le.getProgramCacheKey(Tt);let Lt=pe.programs;pe.environment=Y.isMeshStandardMaterial?ge.environment:null,pe.fog=ge.fog,pe.envMap=(Y.isMeshStandardMaterial?ue:te).get(Y.envMap||pe.environment),Lt===void 0&&(Y.addEventListener("dispose",zt),Lt=new Map,pe.programs=Lt);let Ct=Lt.get(_t);if(Ct!==void 0){if(pe.currentProgram===Ct&&pe.lightsStateVersion===ut)return yo(Y,Tt),Ct}else Tt.uniforms=le.getUniforms(Y),Y.onBuild(Pe,Tt,v),Y.onBeforeCompile(Tt,v),Ct=le.acquireProgram(Tt,_t),Lt.set(_t,Ct),pe.uniforms=Tt.uniforms;const It=pe.uniforms;(!Y.isShaderMaterial&&!Y.isRawShaderMaterial||Y.clipping===!0)&&(It.clippingPlanes=D.uniform),yo(Y,Tt),pe.needsLights=ia(Y),pe.lightsStateVersion=ut,pe.needsLights&&(It.ambientLightColor.value=Oe.state.ambient,It.lightProbe.value=Oe.state.probe,It.directionalLights.value=Oe.state.directional,It.directionalLightShadows.value=Oe.state.directionalShadow,It.spotLights.value=Oe.state.spot,It.spotLightShadows.value=Oe.state.spotShadow,It.rectAreaLights.value=Oe.state.rectArea,It.ltc_1.value=Oe.state.rectAreaLTC1,It.ltc_2.value=Oe.state.rectAreaLTC2,It.pointLights.value=Oe.state.point,It.pointLightShadows.value=Oe.state.pointShadow,It.hemisphereLights.value=Oe.state.hemi,It.directionalShadowMap.value=Oe.state.directionalShadowMap,It.directionalShadowMatrix.value=Oe.state.directionalShadowMatrix,It.spotShadowMap.value=Oe.state.spotShadowMap,It.spotLightMatrix.value=Oe.state.spotLightMatrix,It.spotLightMap.value=Oe.state.spotLightMap,It.pointShadowMap.value=Oe.state.pointShadowMap,It.pointShadowMatrix.value=Oe.state.pointShadowMatrix);const $t=Ct.getUniforms(),Ri=Th.seqWithValue($t.seq,It);return pe.currentProgram=Ct,pe.uniformsList=Ri,Ct}function yo(Y,ge){const Pe=N.get(Y);Pe.outputEncoding=ge.outputEncoding,Pe.instancing=ge.instancing,Pe.skinning=ge.skinning,Pe.morphTargets=ge.morphTargets,Pe.morphNormals=ge.morphNormals,Pe.morphColors=ge.morphColors,Pe.morphTargetsCount=ge.morphTargetsCount,Pe.numClippingPlanes=ge.numClippingPlanes,Pe.numIntersection=ge.numClipIntersection,Pe.vertexAlphas=ge.vertexAlphas,Pe.vertexTangents=ge.vertexTangents,Pe.toneMapping=ge.toneMapping}function sd(Y,ge,Pe,pe,Oe){ge.isScene!==!0&&(ge=Ee),B.resetTextureUnits();const at=ge.fog,ut=pe.isMeshStandardMaterial?ge.environment:null,Tt=b===null?v.outputEncoding:b.isXRRenderTarget===!0?b.texture.encoding:Zs,_t=(pe.isMeshStandardMaterial?ue:te).get(pe.envMap||ut),Lt=pe.vertexColors===!0&&!!Pe.attributes.color&&Pe.attributes.color.itemSize===4,Ct=!!pe.normalMap&&!!Pe.attributes.tangent,It=!!Pe.morphAttributes.position,$t=!!Pe.morphAttributes.normal,Ri=!!Pe.morphAttributes.color,gi=pe.toneMapped?v.toneMapping:br,es=Pe.morphAttributes.position||Pe.morphAttributes.normal||Pe.morphAttributes.color,ai=es!==void 0?es.length:0,kt=N.get(pe),ts=h.state.lights;if(j===!0&&(Z===!0||Y!==E)){const Fn=Y===E&&pe.id===w;D.setState(pe,Y,Fn)}let Qt=!1;pe.version===kt.__version?(kt.needsLights&&kt.lightsStateVersion!==ts.state.version||kt.outputEncoding!==Tt||Oe.isInstancedMesh&&kt.instancing===!1||!Oe.isInstancedMesh&&kt.instancing===!0||Oe.isSkinnedMesh&&kt.skinning===!1||!Oe.isSkinnedMesh&&kt.skinning===!0||kt.envMap!==_t||pe.fog===!0&&kt.fog!==at||kt.numClippingPlanes!==void 0&&(kt.numClippingPlanes!==D.numPlanes||kt.numIntersection!==D.numIntersection)||kt.vertexAlphas!==Lt||kt.vertexTangents!==Ct||kt.morphTargets!==It||kt.morphNormals!==$t||kt.morphColors!==Ri||kt.toneMapping!==gi||ze.isWebGL2===!0&&kt.morphTargetsCount!==ai)&&(Qt=!0):(Qt=!0,kt.__version=pe.version);let Qn=kt.currentProgram;Qt===!0&&(Qn=sn(pe,ge,Oe));let $n=!1,ra=!1,sa=!1;const wn=Qn.getUniforms(),yi=kt.uniforms;if(Ie.useProgram(Qn.program)&&($n=!0,ra=!0,sa=!0),pe.id!==w&&(w=pe.id,ra=!0),$n||E!==Y){if(wn.setValue(X,"projectionMatrix",Y.projectionMatrix),ze.logarithmicDepthBuffer&&wn.setValue(X,"logDepthBufFC",2/(Math.log(Y.far+1)/Math.LN2)),E!==Y&&(E=Y,ra=!0,sa=!0),pe.isShaderMaterial||pe.isMeshPhongMaterial||pe.isMeshToonMaterial||pe.isMeshStandardMaterial||pe.envMap){const Fn=wn.map.cameraPosition;Fn!==void 0&&Fn.setValue(X,fe.setFromMatrixPosition(Y.matrixWorld))}(pe.isMeshPhongMaterial||pe.isMeshToonMaterial||pe.isMeshLambertMaterial||pe.isMeshBasicMaterial||pe.isMeshStandardMaterial||pe.isShaderMaterial)&&wn.setValue(X,"isOrthographic",Y.isOrthographicCamera===!0),(pe.isMeshPhongMaterial||pe.isMeshToonMaterial||pe.isMeshLambertMaterial||pe.isMeshBasicMaterial||pe.isMeshStandardMaterial||pe.isShaderMaterial||pe.isShadowMaterial||Oe.isSkinnedMesh)&&wn.setValue(X,"viewMatrix",Y.matrixWorldInverse)}if(Oe.isSkinnedMesh){wn.setOptional(X,Oe,"bindMatrix"),wn.setOptional(X,Oe,"bindMatrixInverse");const Fn=Oe.skeleton;Fn&&(ze.floatVertexTextures?(Fn.boneTexture===null&&Fn.computeBoneTexture(),wn.setValue(X,"boneTexture",Fn.boneTexture,B),wn.setValue(X,"boneTextureSize",Fn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const aa=Pe.morphAttributes;if((aa.position!==void 0||aa.normal!==void 0||aa.color!==void 0&&ze.isWebGL2===!0)&&Re.update(Oe,Pe,pe,Qn),(ra||kt.receiveShadow!==Oe.receiveShadow)&&(kt.receiveShadow=Oe.receiveShadow,wn.setValue(X,"receiveShadow",Oe.receiveShadow)),pe.isMeshGouraudMaterial&&pe.envMap!==null&&(yi.envMap.value=_t,yi.flipEnvMap.value=_t.isCubeTexture&&_t.isRenderTargetTexture===!1?-1:1),ra&&(wn.setValue(X,"toneMappingExposure",v.toneMappingExposure),kt.needsLights&&bu(yi,sa),at&&pe.fog===!0&&Se.refreshFogUniforms(yi,at),Se.refreshMaterialUniforms(yi,pe,k,L,z),Th.upload(X,kt.uniformsList,yi,B)),pe.isShaderMaterial&&pe.uniformsNeedUpdate===!0&&(Th.upload(X,kt.uniformsList,yi,B),pe.uniformsNeedUpdate=!1),pe.isSpriteMaterial&&wn.setValue(X,"center",Oe.center),wn.setValue(X,"modelViewMatrix",Oe.modelViewMatrix),wn.setValue(X,"normalMatrix",Oe.normalMatrix),wn.setValue(X,"modelMatrix",Oe.matrixWorld),pe.isShaderMaterial||pe.isRawShaderMaterial){const Fn=pe.uniformsGroups;for(let oa=0,wu=Fn.length;oa<wu;oa++)if(ze.isWebGL2){const bo=Fn[oa];rt.update(bo,Qn),rt.bind(bo,Qn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Qn}function bu(Y,ge){Y.ambientLightColor.needsUpdate=ge,Y.lightProbe.needsUpdate=ge,Y.directionalLights.needsUpdate=ge,Y.directionalLightShadows.needsUpdate=ge,Y.pointLights.needsUpdate=ge,Y.pointLightShadows.needsUpdate=ge,Y.spotLights.needsUpdate=ge,Y.spotLightShadows.needsUpdate=ge,Y.rectAreaLights.needsUpdate=ge,Y.hemisphereLights.needsUpdate=ge}function ia(Y){return Y.isMeshLambertMaterial||Y.isMeshToonMaterial||Y.isMeshPhongMaterial||Y.isMeshStandardMaterial||Y.isShadowMaterial||Y.isShaderMaterial&&Y.lights===!0}this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(Y,ge,Pe){N.get(Y.texture).__webglTexture=ge,N.get(Y.depthTexture).__webglTexture=Pe;const pe=N.get(Y);pe.__hasExternalTextures=!0,pe.__hasExternalTextures&&(pe.__autoAllocateDepthBuffer=Pe===void 0,pe.__autoAllocateDepthBuffer||Ae.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),pe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Y,ge){const Pe=N.get(Y);Pe.__webglFramebuffer=ge,Pe.__useDefaultFramebuffer=ge===void 0},this.setRenderTarget=function(Y,ge=0,Pe=0){b=Y,y=ge,S=Pe;let pe=!0,Oe=null,at=!1,ut=!1;if(Y){const _t=N.get(Y);_t.__useDefaultFramebuffer!==void 0?(Ie.bindFramebuffer(X.FRAMEBUFFER,null),pe=!1):_t.__webglFramebuffer===void 0?B.setupRenderTarget(Y):_t.__hasExternalTextures&&B.rebindTextures(Y,N.get(Y.texture).__webglTexture,N.get(Y.depthTexture).__webglTexture);const Lt=Y.texture;(Lt.isData3DTexture||Lt.isDataArrayTexture||Lt.isCompressedArrayTexture)&&(ut=!0);const Ct=N.get(Y).__webglFramebuffer;Y.isWebGLCubeRenderTarget?(Oe=Ct[ge],at=!0):ze.isWebGL2&&Y.samples>0&&B.useMultisampledRTT(Y)===!1?Oe=N.get(Y).__webglMultisampledFramebuffer:Oe=Ct,T.copy(Y.viewport),I.copy(Y.scissor),_=Y.scissorTest}else T.copy(H).multiplyScalar(k).floor(),I.copy(J).multiplyScalar(k).floor(),_=V;if(Ie.bindFramebuffer(X.FRAMEBUFFER,Oe)&&ze.drawBuffers&&pe&&Ie.drawBuffers(Y,Oe),Ie.viewport(T),Ie.scissor(I),Ie.setScissorTest(_),at){const _t=N.get(Y.texture);X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_CUBE_MAP_POSITIVE_X+ge,_t.__webglTexture,Pe)}else if(ut){const _t=N.get(Y.texture),Lt=ge||0;X.framebufferTextureLayer(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,_t.__webglTexture,Pe||0,Lt)}w=-1},this.readRenderTargetPixels=function(Y,ge,Pe,pe,Oe,at,ut){if(!(Y&&Y.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Tt=N.get(Y).__webglFramebuffer;if(Y.isWebGLCubeRenderTarget&&ut!==void 0&&(Tt=Tt[ut]),Tt){Ie.bindFramebuffer(X.FRAMEBUFFER,Tt);try{const _t=Y.texture,Lt=_t.format,Ct=_t.type;if(Lt!==Si&&Ve.convert(Lt)!==X.getParameter(X.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const It=Ct===su&&(Ae.has("EXT_color_buffer_half_float")||ze.isWebGL2&&Ae.has("EXT_color_buffer_float"));if(Ct!==qs&&Ve.convert(Ct)!==X.getParameter(X.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Ct===Gr&&(ze.isWebGL2||Ae.has("OES_texture_float")||Ae.has("WEBGL_color_buffer_float")))&&!It){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ge>=0&&ge<=Y.width-pe&&Pe>=0&&Pe<=Y.height-Oe&&X.readPixels(ge,Pe,pe,Oe,Ve.convert(Lt),Ve.convert(Ct),at)}finally{const _t=b!==null?N.get(b).__webglFramebuffer:null;Ie.bindFramebuffer(X.FRAMEBUFFER,_t)}}},this.copyFramebufferToTexture=function(Y,ge,Pe=0){const pe=Math.pow(2,-Pe),Oe=Math.floor(ge.image.width*pe),at=Math.floor(ge.image.height*pe);B.setTexture2D(ge,0),X.copyTexSubImage2D(X.TEXTURE_2D,Pe,0,0,Y.x,Y.y,Oe,at),Ie.unbindTexture()},this.copyTextureToTexture=function(Y,ge,Pe,pe=0){const Oe=ge.image.width,at=ge.image.height,ut=Ve.convert(Pe.format),Tt=Ve.convert(Pe.type);B.setTexture2D(Pe,0),X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,Pe.flipY),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Pe.premultiplyAlpha),X.pixelStorei(X.UNPACK_ALIGNMENT,Pe.unpackAlignment),ge.isDataTexture?X.texSubImage2D(X.TEXTURE_2D,pe,Y.x,Y.y,Oe,at,ut,Tt,ge.image.data):ge.isCompressedTexture?X.compressedTexSubImage2D(X.TEXTURE_2D,pe,Y.x,Y.y,ge.mipmaps[0].width,ge.mipmaps[0].height,ut,ge.mipmaps[0].data):X.texSubImage2D(X.TEXTURE_2D,pe,Y.x,Y.y,ut,Tt,ge.image),pe===0&&Pe.generateMipmaps&&X.generateMipmap(X.TEXTURE_2D),Ie.unbindTexture()},this.copyTextureToTexture3D=function(Y,ge,Pe,pe,Oe=0){if(v.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const at=Y.max.x-Y.min.x+1,ut=Y.max.y-Y.min.y+1,Tt=Y.max.z-Y.min.z+1,_t=Ve.convert(pe.format),Lt=Ve.convert(pe.type);let Ct;if(pe.isData3DTexture)B.setTexture3D(pe,0),Ct=X.TEXTURE_3D;else if(pe.isDataArrayTexture)B.setTexture2DArray(pe,0),Ct=X.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,pe.flipY),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pe.premultiplyAlpha),X.pixelStorei(X.UNPACK_ALIGNMENT,pe.unpackAlignment);const It=X.getParameter(X.UNPACK_ROW_LENGTH),$t=X.getParameter(X.UNPACK_IMAGE_HEIGHT),Ri=X.getParameter(X.UNPACK_SKIP_PIXELS),gi=X.getParameter(X.UNPACK_SKIP_ROWS),es=X.getParameter(X.UNPACK_SKIP_IMAGES),ai=Pe.isCompressedTexture?Pe.mipmaps[0]:Pe.image;X.pixelStorei(X.UNPACK_ROW_LENGTH,ai.width),X.pixelStorei(X.UNPACK_IMAGE_HEIGHT,ai.height),X.pixelStorei(X.UNPACK_SKIP_PIXELS,Y.min.x),X.pixelStorei(X.UNPACK_SKIP_ROWS,Y.min.y),X.pixelStorei(X.UNPACK_SKIP_IMAGES,Y.min.z),Pe.isDataTexture||Pe.isData3DTexture?X.texSubImage3D(Ct,Oe,ge.x,ge.y,ge.z,at,ut,Tt,_t,Lt,ai.data):Pe.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),X.compressedTexSubImage3D(Ct,Oe,ge.x,ge.y,ge.z,at,ut,Tt,_t,ai.data)):X.texSubImage3D(Ct,Oe,ge.x,ge.y,ge.z,at,ut,Tt,_t,Lt,ai),X.pixelStorei(X.UNPACK_ROW_LENGTH,It),X.pixelStorei(X.UNPACK_IMAGE_HEIGHT,$t),X.pixelStorei(X.UNPACK_SKIP_PIXELS,Ri),X.pixelStorei(X.UNPACK_SKIP_ROWS,gi),X.pixelStorei(X.UNPACK_SKIP_IMAGES,es),Oe===0&&pe.generateMipmaps&&X.generateMipmap(Ct),Ie.unbindTexture()},this.initTexture=function(Y){Y.isCubeTexture?B.setTextureCube(Y,0):Y.isData3DTexture?B.setTexture3D(Y,0):Y.isDataArrayTexture||Y.isCompressedArrayTexture?B.setTexture2DArray(Y,0):B.setTexture2D(Y,0),Ie.unbindTexture()},this.resetState=function(){y=0,S=0,b=null,Ie.reset(),we.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class AM extends CM{}AM.prototype.isWebGL1Renderer=!0;class Nf{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new it(e),this.density=n}clone(){return new Nf(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class kf{constructor(e,n=1,i=1e3){this.isFog=!0,this.name="",this.color=new it(e),this.near=n,this.far=i}clone(){return new kf(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class RM extends Ft{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.backgroundBlurriness=this.backgroundBlurriness),n}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Ff{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=Tc,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=xi()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=n.array[i+r];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=xi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=xi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ei=new q;class ao{constructor(e,n,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=r===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)ei.fromBufferAttribute(this,n),ei.applyMatrix4(e),this.setXYZ(n,ei.x,ei.y,ei.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)ei.fromBufferAttribute(this,n),ei.applyNormalMatrix(e),this.setXYZ(n,ei.x,ei.y,ei.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)ei.fromBufferAttribute(this,n),ei.transformDirection(e),this.setXYZ(n,ei.x,ei.y,ei.z);return this}setX(e,n){return this.normalized&&(n=Yt(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Yt(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Yt(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Yt(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=Wr(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=Wr(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=Wr(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=Wr(n,this.array)),n}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Yt(n,this.array),i=Yt(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Yt(n,this.array),i=Yt(i,this.array),r=Yt(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=Yt(n,this.array),i=Yt(i,this.array),r=Yt(r,this.array),s=Yt(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return new Jt(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ao(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Ng extends Jn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new it(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Uo;const ku=new q,Bo=new q,zo=new q,Vo=new ke,Fu=new ke,PM=new wt,Gd=new q,Uu=new q,Wd=new q,Hb=new ke,Up=new ke,Gb=new ke;class LM extends Ft{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Uo===void 0){Uo=new xt;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Ff(n,5);Uo.setIndex([0,1,2,0,2,3]),Uo.setAttribute("position",new ao(i,3,0,!1)),Uo.setAttribute("uv",new ao(i,2,3,!1))}this.geometry=Uo,this.material=e!==void 0?e:new Ng,this.center=new ke(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Bo.setFromMatrixScale(this.matrixWorld),PM.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),zo.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Bo.multiplyScalar(-zo.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const a=this.center;$d(Gd.set(-.5,-.5,0),zo,a,Bo,r,s),$d(Uu.set(.5,-.5,0),zo,a,Bo,r,s),$d(Wd.set(.5,.5,0),zo,a,Bo,r,s),Hb.set(0,0),Up.set(1,0),Gb.set(1,1);let o=e.ray.intersectTriangle(Gd,Uu,Wd,!1,ku);if(o===null&&($d(Uu.set(-.5,.5,0),zo,a,Bo,r,s),Up.set(0,1),o=e.ray.intersectTriangle(Gd,Wd,Uu,!1,ku),o===null))return;const l=e.ray.origin.distanceTo(ku);l<e.near||l>e.far||n.push({distance:l,point:ku.clone(),uv:ki.getUV(ku,Gd,Uu,Wd,Hb,Up,Gb,new ke),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function $d(t,e,n,i,r,s){Vo.subVectors(t,n).addScalar(.5).multiply(i),r!==void 0?(Fu.x=s*Vo.x-r*Vo.y,Fu.y=r*Vo.x+s*Vo.y):Fu.copy(Vo),t.copy(e),t.x+=Fu.x,t.y+=Fu.y,t.applyMatrix4(PM)}const Xd=new q,Wb=new q;class IM extends Ft{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let i=0,r=n.length;i<r;i++){const s=n[i];this.addLevel(s.object.clone(),s.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0){n=Math.abs(n);const i=this.levels;let r;for(r=0;r<i.length&&!(n<i[r].distance);r++);return i.splice(r,0,{distance:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let i,r;for(i=1,r=n.length;i<r&&!(e<n[i].distance);i++);return n[i-1].object}return null}raycast(e,n){if(this.levels.length>0){Xd.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Xd);this.getObjectForDistance(r).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){Xd.setFromMatrixPosition(e.matrixWorld),Wb.setFromMatrixPosition(this.matrixWorld);const i=Xd.distanceTo(Wb)/e.zoom;n[0].object.visible=!0;let r,s;for(r=1,s=n.length;r<s&&i>=n[r].distance;r++)n[r-1].object.visible=!1,n[r].object.visible=!0;for(this._currentLevel=r-1;r<s;r++)n[r].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const a=i[r];n.object.levels.push({object:a.object.uuid,distance:a.distance})}return n}}const $b=new q,Xb=new Ht,Yb=new Ht,S4=new q,qb=new wt;class OM extends Gn{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new wt,this.bindMatrixInverse=new wt}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ht,n=this.geometry.attributes.skinWeight;for(let i=0,r=n.count;i<r;i++){e.fromBufferAttribute(n,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,n){const i=this.skeleton,r=this.geometry;Xb.fromBufferAttribute(r.attributes.skinIndex,e),Yb.fromBufferAttribute(r.attributes.skinWeight,e),$b.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const a=Yb.getComponent(s);if(a!==0){const o=Xb.getComponent(s);qb.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),n.addScaledVector(S4.copy($b).applyMatrix4(qb),a)}}return n.applyMatrix4(this.bindMatrixInverse)}}class kg extends Ft{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ql extends Rn{constructor(e=null,n=1,i=1,r,s,a,o,l,u=Sn,c=Sn,d,h){super(null,a,o,l,u,c,r,s,d,h),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Zb=new wt,M4=new wt;class Uf{constructor(e=[],n=[]){this.uuid=xi(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new wt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const i=new wt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,n=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:M4;Zb.multiplyMatrices(o,n[s]),Zb.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Uf(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=fM(e),e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const i=new ql(n,e,e,Si,Gr);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){const r=this.bones[n];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let a=n[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new kg),this.bones.push(a),this.boneInverses.push(new wt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,i=this.boneInverses;for(let r=0,s=n.length;r<s;r++){const a=n[r];e.bones.push(a.uuid);const o=i[r];e.boneInverses.push(o.toArray())}return e}}class ou extends Jt{constructor(e,n,i,r=1){super(e,n,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const jb=new wt,Kb=new wt,Yd=[],T4=new wt,Bu=new Gn;class DM extends Gn{constructor(e,n,i){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new ou(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1;for(let r=0;r<i;r++)this.setMatrixAt(r,T4)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const i=this.matrixWorld,r=this.count;if(Bu.geometry=this.geometry,Bu.material=this.material,Bu.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,jb),Kb.multiplyMatrices(i,jb),Bu.matrixWorld=Kb,Bu.raycast(e,Yd);for(let a=0,o=Yd.length;a<o;a++){const l=Yd[a];l.instanceId=s,l.object=this,n.push(l)}Yd.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new ou(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class si extends Jn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new it(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Jb=new q,Qb=new q,ew=new wt,Bp=new Wc,qd=new po;class js extends Ft{constructor(e=new xt,n=new si){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let r=1,s=n.count;r<s;r++)Jb.fromBufferAttribute(n,r-1),Qb.fromBufferAttribute(n,r),i[r]=i[r-1],i[r]+=Jb.distanceTo(Qb);e.setAttribute("lineDistance",new ot(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),qd.copy(i.boundingSphere),qd.applyMatrix4(r),qd.radius+=s,e.ray.intersectsSphere(qd)===!1)return;ew.copy(r).invert(),Bp.copy(e.ray).applyMatrix4(ew);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=new q,c=new q,d=new q,h=new q,f=this.isLineSegments?2:1,m=i.index,g=i.attributes.position;if(m!==null){const y=Math.max(0,a.start),S=Math.min(m.count,a.start+a.count);for(let b=y,w=S-1;b<w;b+=f){const E=m.getX(b),T=m.getX(b+1);if(u.fromBufferAttribute(g,E),c.fromBufferAttribute(g,T),Bp.distanceSqToSegment(u,c,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const _=e.ray.origin.distanceTo(h);_<e.near||_>e.far||n.push({distance:_,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else{const y=Math.max(0,a.start),S=Math.min(g.count,a.start+a.count);for(let b=y,w=S-1;b<w;b+=f){if(u.fromBufferAttribute(g,b),c.fromBufferAttribute(g,b+1),Bp.distanceSqToSegment(u,c,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const T=e.ray.origin.distanceTo(h);T<e.near||T>e.far||n.push({distance:T,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}const tw=new q,nw=new q;class Ar extends js{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[];for(let r=0,s=n.count;r<s;r+=2)tw.fromBufferAttribute(n,r),nw.fromBufferAttribute(n,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+tw.distanceTo(nw);e.setAttribute("lineDistance",new ot(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class NM extends js{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class Fg extends Jn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new it(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const iw=new wt,Ev=new Wc,Zd=new po,jd=new q;class kM extends Ft{constructor(e=new xt,n=new Fg){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Zd.copy(i.boundingSphere),Zd.applyMatrix4(r),Zd.radius+=s,e.ray.intersectsSphere(Zd)===!1)return;iw.copy(r).invert(),Ev.copy(e.ray).applyMatrix4(iw);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=i.index,d=i.attributes.position;if(u!==null){const h=Math.max(0,a.start),f=Math.min(u.count,a.start+a.count);for(let m=h,v=f;m<v;m++){const g=u.getX(m);jd.fromBufferAttribute(d,g),rw(jd,g,l,r,e,n,this)}}else{const h=Math.max(0,a.start),f=Math.min(d.count,a.start+a.count);for(let m=h,v=f;m<v;m++)jd.fromBufferAttribute(d,m),rw(jd,m,l,r,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function rw(t,e,n,i,r,s,a){const o=Ev.distanceSqToPoint(t);if(o<n){const l=new q;Ev.closestPointToPoint(t,l),l.applyMatrix4(i);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,object:a})}}class E4 extends Rn{constructor(e,n,i,r,s,a,o,l,u){super(e,n,i,r,s,a,o,l,u),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:vn,this.magFilter=s!==void 0?s:vn,this.generateMipmaps=!1;const c=this;function d(){c.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class x4 extends Rn{constructor(e,n,i){super({width:e,height:n}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=Sn,this.minFilter=Sn,this.generateMipmaps=!1,this.needsUpdate=!0}}class Ug extends Rn{constructor(e,n,i,r,s,a,o,l,u,c,d,h){super(null,a,o,l,u,c,r,s,d,h),this.isCompressedTexture=!0,this.image={width:n,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class C4 extends Ug{constructor(e,n,i,r,s,a){super(e,n,i,s,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=qn}}class A4 extends Rn{constructor(e,n,i,r,s,a,o,l,u){super(e,n,i,r,s,a,o,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ur{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,r=this.getPoint(0),s=0;n.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),s+=i.distanceTo(r),n.push(s),r=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const i=this.getLengths();let r=0;const s=i.length;let a;n?a=n:a=e*i[s-1];let o=0,l=s-1,u;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),u=i[r]-a,u<0)o=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===a)return r/(s-1);const c=i[r],h=i[r+1]-c,f=(a-c)/h;return(r+f)/(s-1)}getTangent(e,n){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),o=this.getPoint(s),l=n||(a.isVector2?new ke:new q);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n){const i=new q,r=[],s=[],a=[],o=new q,l=new wt;for(let f=0;f<=e;f++){const m=f/e;r[f]=this.getTangentAt(m,new q)}s[0]=new q,a[0]=new q;let u=Number.MAX_VALUE;const c=Math.abs(r[0].x),d=Math.abs(r[0].y),h=Math.abs(r[0].z);c<=u&&(u=c,i.set(1,0,0)),d<=u&&(u=d,i.set(0,1,0)),h<=u&&i.set(0,0,1),o.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],o),a[0].crossVectors(r[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),a[f]=a[f-1].clone(),o.crossVectors(r[f-1],r[f]),o.length()>Number.EPSILON){o.normalize();const m=Math.acos(gn(r[f-1].dot(r[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(o,m))}a[f].crossVectors(r[f],s[f])}if(n===!0){let f=Math.acos(gn(s[0].dot(s[e]),-1,1));f/=e,r[0].dot(o.crossVectors(s[0],s[e]))>0&&(f=-f);for(let m=1;m<=e;m++)s[m].applyMatrix4(l.makeRotationAxis(r[m],f*m)),a[m].crossVectors(r[m],s[m])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Bf extends ur{constructor(e=0,n=0,i=1,r=1,s=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,n){const i=n||new ke,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const o=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const c=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,f=u-this.aY;l=h*c-f*d+this.aX,u=h*d+f*c+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class FM extends Bf{constructor(e,n,i,r,s,a){super(e,n,i,i,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function Bg(){let t=0,e=0,n=0,i=0;function r(s,a,o,l){t=s,e=o,n=-3*s+3*a-2*o-l,i=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,u){r(a,o,u*(o-s),u*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,u,c,d){let h=(a-s)/u-(o-s)/(u+c)+(o-a)/c,f=(o-a)/c-(l-a)/(c+d)+(l-o)/d;h*=c,f*=c,r(a,o,h,f)},calc:function(s){const a=s*s,o=a*s;return t+e*s+n*a+i*o}}}const Kd=new q,zp=new Bg,Vp=new Bg,Hp=new Bg;class UM extends ur{constructor(e=[],n=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=i,this.tension=r}getPoint(e,n=new q){const i=n,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:l===0&&o===s-1&&(o=s-2,l=1);let u,c;this.closed||o>0?u=r[(o-1)%s]:(Kd.subVectors(r[0],r[1]).add(r[0]),u=Kd);const d=r[o%s],h=r[(o+1)%s];if(this.closed||o+2<s?c=r[(o+2)%s]:(Kd.subVectors(r[s-1],r[s-2]).add(r[s-1]),c=Kd),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let m=Math.pow(u.distanceToSquared(d),f),v=Math.pow(d.distanceToSquared(h),f),g=Math.pow(h.distanceToSquared(c),f);v<1e-4&&(v=1),m<1e-4&&(m=v),g<1e-4&&(g=v),zp.initNonuniformCatmullRom(u.x,d.x,h.x,c.x,m,v,g),Vp.initNonuniformCatmullRom(u.y,d.y,h.y,c.y,m,v,g),Hp.initNonuniformCatmullRom(u.z,d.z,h.z,c.z,m,v,g)}else this.curveType==="catmullrom"&&(zp.initCatmullRom(u.x,d.x,h.x,c.x,this.tension),Vp.initCatmullRom(u.y,d.y,h.y,c.y,this.tension),Hp.initCatmullRom(u.z,d.z,h.z,c.z,this.tension));return i.set(zp.calc(l),Vp.calc(l),Hp.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new q().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function sw(t,e,n,i,r){const s=(i-e)*.5,a=(r-n)*.5,o=t*t,l=t*o;return(2*n-2*i+s+a)*l+(-3*n+3*i-2*s-a)*o+s*t+n}function R4(t,e){const n=1-t;return n*n*e}function P4(t,e){return 2*(1-t)*t*e}function L4(t,e){return t*t*e}function ec(t,e,n,i){return R4(t,e)+P4(t,n)+L4(t,i)}function I4(t,e){const n=1-t;return n*n*n*e}function O4(t,e){const n=1-t;return 3*n*n*t*e}function D4(t,e){return 3*(1-t)*t*t*e}function N4(t,e){return t*t*t*e}function tc(t,e,n,i,r){return I4(t,e)+O4(t,n)+D4(t,i)+N4(t,r)}class zg extends ur{constructor(e=new ke,n=new ke,i=new ke,r=new ke){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new ke){const i=n,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(tc(e,r.x,s.x,a.x,o.x),tc(e,r.y,s.y,a.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class BM extends ur{constructor(e=new q,n=new q,i=new q,r=new q){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new q){const i=n,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(tc(e,r.x,s.x,a.x,o.x),tc(e,r.y,s.y,a.y,o.y),tc(e,r.z,s.z,a.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class zf extends ur{constructor(e=new ke,n=new ke){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new ke){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n){const i=n||new ke;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class zM extends ur{constructor(e=new q,n=new q){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new q){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Vg extends ur{constructor(e=new ke,n=new ke,i=new ke){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new ke){const i=n,r=this.v0,s=this.v1,a=this.v2;return i.set(ec(e,r.x,s.x,a.x),ec(e,r.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Hg extends ur{constructor(e=new q,n=new q,i=new q){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new q){const i=n,r=this.v0,s=this.v1,a=this.v2;return i.set(ec(e,r.x,s.x,a.x),ec(e,r.y,s.y,a.y),ec(e,r.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Gg extends ur{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new ke){const i=n,r=this.points,s=(r.length-1)*e,a=Math.floor(s),o=s-a,l=r[a===0?a:a-1],u=r[a],c=r[a>r.length-2?r.length-1:a+1],d=r[a>r.length-3?r.length-1:a+2];return i.set(sw(o,l.x,u.x,c.x,d.x),sw(o,l.y,u.y,c.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new ke().fromArray(r))}return this}}var Wg=Object.freeze({__proto__:null,ArcCurve:FM,CatmullRomCurve3:UM,CubicBezierCurve:zg,CubicBezierCurve3:BM,EllipseCurve:Bf,LineCurve:zf,LineCurve3:zM,QuadraticBezierCurve:Vg,QuadraticBezierCurve3:Hg,SplineCurve:Gg});class VM extends ur{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);e.equals(n)||this.curves.push(new zf(n,e))}getPoint(e,n){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const a=r[s]-i,o=this.curves[s],l=o.getLength(),u=l===0?0:1-a/l;return o.getPointAt(u,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let i=0,r=this.curves.length;i<r;i++)n+=this.curves[i].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(o);for(let u=0;u<l.length;u++){const c=l[u];i&&i.equals(c)||(n.push(c),i=c)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,i=this.curves.length;n<i;n++){const r=this.curves[n];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(new Wg[r.type]().fromJSON(r))}return this}}class Cc extends VM{constructor(e){super(),this.type="Path",this.currentPoint=new ke,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,i=e.length;n<i;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const i=new zf(this.currentPoint.clone(),new ke(e,n));return this.curves.push(i),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,i,r){const s=new Vg(this.currentPoint.clone(),new ke(e,n),new ke(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,n,i,r,s,a){const o=new zg(this.currentPoint.clone(),new ke(e,n),new ke(i,r),new ke(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),i=new Gg(n);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,i,r,s,a){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,n+l,i,r,s,a),this}absarc(e,n,i,r,s,a){return this.absellipse(e,n,i,i,r,s,a),this}ellipse(e,n,i,r,s,a,o,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,n+c,i,r,s,a,o,l),this}absellipse(e,n,i,r,s,a,o,l){const u=new Bf(e,n,i,r,s,a,o,l);if(this.curves.length>0){const d=u.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class mu extends xt{constructor(e=[new ke(0,-.5),new ke(.5,0),new ke(0,.5)],n=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:r},n=Math.floor(n),r=gn(r,0,Math.PI*2);const s=[],a=[],o=[],l=[],u=[],c=1/n,d=new q,h=new ke,f=new q,m=new q,v=new q;let g=0,y=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:g=e[S+1].x-e[S].x,y=e[S+1].y-e[S].y,f.x=y*1,f.y=-g,f.z=y*0,v.copy(f),f.normalize(),l.push(f.x,f.y,f.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:g=e[S+1].x-e[S].x,y=e[S+1].y-e[S].y,f.x=y*1,f.y=-g,f.z=y*0,m.copy(f),f.x+=v.x,f.y+=v.y,f.z+=v.z,f.normalize(),l.push(f.x,f.y,f.z),v.copy(m)}for(let S=0;S<=n;S++){const b=i+S*c*r,w=Math.sin(b),E=Math.cos(b);for(let T=0;T<=e.length-1;T++){d.x=e[T].x*w,d.y=e[T].y,d.z=e[T].x*E,a.push(d.x,d.y,d.z),h.x=S/n,h.y=T/(e.length-1),o.push(h.x,h.y);const I=l[3*T+0]*w,_=l[3*T+1],R=l[3*T+0]*E;u.push(I,_,R)}}for(let S=0;S<n;S++)for(let b=0;b<e.length-1;b++){const w=b+S*e.length,E=w,T=w+e.length,I=w+e.length+1,_=w+1;s.push(E,T,_),s.push(I,_,T)}this.setIndex(s),this.setAttribute("position",new ot(a,3)),this.setAttribute("uv",new ot(o,2)),this.setAttribute("normal",new ot(u,3))}static fromJSON(e){return new mu(e.points,e.segments,e.phiStart,e.phiLength)}}class Xc extends mu{constructor(e=1,n=1,i=4,r=8){const s=new Cc;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:i,radialSegments:r}}static fromJSON(e){return new Xc(e.radius,e.length,e.capSegments,e.radialSegments)}}class Yc extends xt{constructor(e=1,n=8,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:r},n=Math.max(3,n);const s=[],a=[],o=[],l=[],u=new q,c=new ke;a.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let d=0,h=3;d<=n;d++,h+=3){const f=i+d/n*r;u.x=e*Math.cos(f),u.y=e*Math.sin(f),a.push(u.x,u.y,u.z),o.push(0,0,1),c.x=(a[h]/e+1)/2,c.y=(a[h+1]/e+1)/2,l.push(c.x,c.y)}for(let d=1;d<=n;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new ot(a,3)),this.setAttribute("normal",new ot(o,3)),this.setAttribute("uv",new ot(l,2))}static fromJSON(e){return new Yc(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class mo extends xt{constructor(e=1,n=1,i=1,r=8,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const u=this;r=Math.floor(r),s=Math.floor(s);const c=[],d=[],h=[],f=[];let m=0;const v=[],g=i/2;let y=0;S(),a===!1&&(e>0&&b(!0),n>0&&b(!1)),this.setIndex(c),this.setAttribute("position",new ot(d,3)),this.setAttribute("normal",new ot(h,3)),this.setAttribute("uv",new ot(f,2));function S(){const w=new q,E=new q;let T=0;const I=(n-e)/i;for(let _=0;_<=s;_++){const R=[],L=_/s,k=L*(n-e)+e;for(let F=0;F<=r;F++){const G=F/r,H=G*l+o,J=Math.sin(H),V=Math.cos(H);E.x=k*J,E.y=-L*i+g,E.z=k*V,d.push(E.x,E.y,E.z),w.set(J,I,V).normalize(),h.push(w.x,w.y,w.z),f.push(G,1-L),R.push(m++)}v.push(R)}for(let _=0;_<r;_++)for(let R=0;R<s;R++){const L=v[R][_],k=v[R+1][_],F=v[R+1][_+1],G=v[R][_+1];c.push(L,k,G),c.push(k,F,G),T+=6}u.addGroup(y,T,0),y+=T}function b(w){const E=m,T=new ke,I=new q;let _=0;const R=w===!0?e:n,L=w===!0?1:-1;for(let F=1;F<=r;F++)d.push(0,g*L,0),h.push(0,L,0),f.push(.5,.5),m++;const k=m;for(let F=0;F<=r;F++){const H=F/r*l+o,J=Math.cos(H),V=Math.sin(H);I.x=R*V,I.y=g*L,I.z=R*J,d.push(I.x,I.y,I.z),h.push(0,L,0),T.x=J*.5+.5,T.y=V*.5*L+.5,f.push(T.x,T.y),m++}for(let F=0;F<r;F++){const G=E+F,H=k+F;w===!0?c.push(H,H+1,G):c.push(H+1,H,G),_+=3}u.addGroup(y,_,w===!0?1:2),y+=_}}static fromJSON(e){return new mo(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class qc extends mo{constructor(e=1,n=1,i=8,r=1,s=!1,a=0,o=Math.PI*2){super(0,e,n,i,r,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new qc(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Qr extends xt{constructor(e=[],n=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:r};const s=[],a=[];o(r),u(i),c(),this.setAttribute("position",new ot(s,3)),this.setAttribute("normal",new ot(s.slice(),3)),this.setAttribute("uv",new ot(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(S){const b=new q,w=new q,E=new q;for(let T=0;T<n.length;T+=3)f(n[T+0],b),f(n[T+1],w),f(n[T+2],E),l(b,w,E,S)}function l(S,b,w,E){const T=E+1,I=[];for(let _=0;_<=T;_++){I[_]=[];const R=S.clone().lerp(w,_/T),L=b.clone().lerp(w,_/T),k=T-_;for(let F=0;F<=k;F++)F===0&&_===T?I[_][F]=R:I[_][F]=R.clone().lerp(L,F/k)}for(let _=0;_<T;_++)for(let R=0;R<2*(T-_)-1;R++){const L=Math.floor(R/2);R%2===0?(h(I[_][L+1]),h(I[_+1][L]),h(I[_][L])):(h(I[_][L+1]),h(I[_+1][L+1]),h(I[_+1][L]))}}function u(S){const b=new q;for(let w=0;w<s.length;w+=3)b.x=s[w+0],b.y=s[w+1],b.z=s[w+2],b.normalize().multiplyScalar(S),s[w+0]=b.x,s[w+1]=b.y,s[w+2]=b.z}function c(){const S=new q;for(let b=0;b<s.length;b+=3){S.x=s[b+0],S.y=s[b+1],S.z=s[b+2];const w=g(S)/2/Math.PI+.5,E=y(S)/Math.PI+.5;a.push(w,1-E)}m(),d()}function d(){for(let S=0;S<a.length;S+=6){const b=a[S+0],w=a[S+2],E=a[S+4],T=Math.max(b,w,E),I=Math.min(b,w,E);T>.9&&I<.1&&(b<.2&&(a[S+0]+=1),w<.2&&(a[S+2]+=1),E<.2&&(a[S+4]+=1))}}function h(S){s.push(S.x,S.y,S.z)}function f(S,b){const w=S*3;b.x=e[w+0],b.y=e[w+1],b.z=e[w+2]}function m(){const S=new q,b=new q,w=new q,E=new q,T=new ke,I=new ke,_=new ke;for(let R=0,L=0;R<s.length;R+=9,L+=6){S.set(s[R+0],s[R+1],s[R+2]),b.set(s[R+3],s[R+4],s[R+5]),w.set(s[R+6],s[R+7],s[R+8]),T.set(a[L+0],a[L+1]),I.set(a[L+2],a[L+3]),_.set(a[L+4],a[L+5]),E.copy(S).add(b).add(w).divideScalar(3);const k=g(E);v(T,L+0,S,k),v(I,L+2,b,k),v(_,L+4,w,k)}}function v(S,b,w,E){E<0&&S.x===1&&(a[b]=S.x-1),w.x===0&&w.z===0&&(a[b]=E/2/Math.PI+.5)}function g(S){return Math.atan2(S.z,-S.x)}function y(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}static fromJSON(e){return new Qr(e.vertices,e.indices,e.radius,e.details)}}class Zc extends Qr{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Zc(e.radius,e.detail)}}const Jd=new q,Qd=new q,Gp=new q,eh=new ki;class HM extends xt{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const r=Math.pow(10,4),s=Math.cos(Ya*n),a=e.getIndex(),o=e.getAttribute("position"),l=a?a.count:o.count,u=[0,0,0],c=["a","b","c"],d=new Array(3),h={},f=[];for(let m=0;m<l;m+=3){a?(u[0]=a.getX(m),u[1]=a.getX(m+1),u[2]=a.getX(m+2)):(u[0]=m,u[1]=m+1,u[2]=m+2);const{a:v,b:g,c:y}=eh;if(v.fromBufferAttribute(o,u[0]),g.fromBufferAttribute(o,u[1]),y.fromBufferAttribute(o,u[2]),eh.getNormal(Gp),d[0]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,d[1]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,d[2]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let S=0;S<3;S++){const b=(S+1)%3,w=d[S],E=d[b],T=eh[c[S]],I=eh[c[b]],_=`${w}_${E}`,R=`${E}_${w}`;R in h&&h[R]?(Gp.dot(h[R].normal)<=s&&(f.push(T.x,T.y,T.z),f.push(I.x,I.y,I.z)),h[R]=null):_ in h||(h[_]={index0:u[S],index1:u[b],normal:Gp.clone()})}}for(const m in h)if(h[m]){const{index0:v,index1:g}=h[m];Jd.fromBufferAttribute(o,v),Qd.fromBufferAttribute(o,g),f.push(Jd.x,Jd.y,Jd.z),f.push(Qd.x,Qd.y,Qd.z)}this.setAttribute("position",new ot(f,3))}}}class Za extends Cc{constructor(e){super(e),this.uuid=xi(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let i=0,r=this.holes.length;i<r;i++)n[i]=this.holes[i].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,i=this.holes.length;n<i;n++){const r=this.holes[n];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(new Cc().fromJSON(r))}return this}}const k4={triangulate:function(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let s=GM(t,0,r,n,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,u,c,d,h,f;if(i&&(s=V4(t,e,s,n)),t.length>80*n){o=u=t[0],l=c=t[1];for(let m=n;m<r;m+=n)d=t[m],h=t[m+1],d<o&&(o=d),h<l&&(l=h),d>u&&(u=d),h>c&&(c=h);f=Math.max(u-o,c-l),f=f!==0?32767/f:0}return Ac(s,a,n,o,l,f,0),a}};function GM(t,e,n,i,r){let s,a;if(r===J4(t,e,n,i)>0)for(s=e;s<n;s+=i)a=aw(s,t[s],t[s+1],a);else for(s=n-i;s>=e;s-=i)a=aw(s,t[s],t[s+1],a);return a&&Vf(a,a.next)&&(Pc(a),a=a.next),a}function oo(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(Vf(n,n.next)||on(n.prev,n,n.next)===0)){if(Pc(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function Ac(t,e,n,i,r,s,a){if(!t)return;!a&&s&&X4(t,i,r,s);let o=t,l,u;for(;t.prev!==t.next;){if(l=t.prev,u=t.next,s?U4(t,i,r,s):F4(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(u.i/n|0),Pc(t),t=u.next,o=u.next;continue}if(t=u,t===o){a?a===1?(t=B4(oo(t),e,n),Ac(t,e,n,i,r,s,2)):a===2&&z4(t,e,n,i,r,s):Ac(oo(t),e,n,i,r,s,1);break}}}function F4(t){const e=t.prev,n=t,i=t.next;if(on(e,n,i)>=0)return!1;const r=e.x,s=n.x,a=i.x,o=e.y,l=n.y,u=i.y,c=r<s?r<a?r:a:s<a?s:a,d=o<l?o<u?o:u:l<u?l:u,h=r>s?r>a?r:a:s>a?s:a,f=o>l?o>u?o:u:l>u?l:u;let m=i.next;for(;m!==e;){if(m.x>=c&&m.x<=h&&m.y>=d&&m.y<=f&&el(r,o,s,l,a,u,m.x,m.y)&&on(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function U4(t,e,n,i){const r=t.prev,s=t,a=t.next;if(on(r,s,a)>=0)return!1;const o=r.x,l=s.x,u=a.x,c=r.y,d=s.y,h=a.y,f=o<l?o<u?o:u:l<u?l:u,m=c<d?c<h?c:h:d<h?d:h,v=o>l?o>u?o:u:l>u?l:u,g=c>d?c>h?c:h:d>h?d:h,y=xv(f,m,e,n,i),S=xv(v,g,e,n,i);let b=t.prevZ,w=t.nextZ;for(;b&&b.z>=y&&w&&w.z<=S;){if(b.x>=f&&b.x<=v&&b.y>=m&&b.y<=g&&b!==r&&b!==a&&el(o,c,l,d,u,h,b.x,b.y)&&on(b.prev,b,b.next)>=0||(b=b.prevZ,w.x>=f&&w.x<=v&&w.y>=m&&w.y<=g&&w!==r&&w!==a&&el(o,c,l,d,u,h,w.x,w.y)&&on(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;b&&b.z>=y;){if(b.x>=f&&b.x<=v&&b.y>=m&&b.y<=g&&b!==r&&b!==a&&el(o,c,l,d,u,h,b.x,b.y)&&on(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;w&&w.z<=S;){if(w.x>=f&&w.x<=v&&w.y>=m&&w.y<=g&&w!==r&&w!==a&&el(o,c,l,d,u,h,w.x,w.y)&&on(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function B4(t,e,n){let i=t;do{const r=i.prev,s=i.next.next;!Vf(r,s)&&WM(r,i,i.next,s)&&Rc(r,s)&&Rc(s,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),Pc(i),Pc(i.next),i=t=s),i=i.next}while(i!==t);return oo(i)}function z4(t,e,n,i,r,s){let a=t;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&Z4(a,o)){let l=$M(a,o);a=oo(a,a.next),l=oo(l,l.next),Ac(a,e,n,i,r,s,0),Ac(l,e,n,i,r,s,0);return}o=o.next}a=a.next}while(a!==t)}function V4(t,e,n,i){const r=[];let s,a,o,l,u;for(s=0,a=e.length;s<a;s++)o=e[s]*i,l=s<a-1?e[s+1]*i:t.length,u=GM(t,o,l,i,!1),u===u.next&&(u.steiner=!0),r.push(q4(u));for(r.sort(H4),s=0;s<r.length;s++)n=G4(r[s],n);return n}function H4(t,e){return t.x-e.x}function G4(t,e){const n=W4(t,e);if(!n)return e;const i=$M(n,t);return oo(i,i.next),oo(n,n.next)}function W4(t,e){let n=e,i=-1/0,r;const s=t.x,a=t.y;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){const h=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(h<=s&&h>i&&(i=h,r=n.x<n.next.x?n:n.next,h===s))return r}n=n.next}while(n!==e);if(!r)return null;const o=r,l=r.x,u=r.y;let c=1/0,d;n=r;do s>=n.x&&n.x>=l&&s!==n.x&&el(a<u?s:i,a,l,u,a<u?i:s,a,n.x,n.y)&&(d=Math.abs(a-n.y)/(s-n.x),Rc(n,t)&&(d<c||d===c&&(n.x>r.x||n.x===r.x&&$4(r,n)))&&(r=n,c=d)),n=n.next;while(n!==o);return r}function $4(t,e){return on(t.prev,t,e.prev)<0&&on(e.next,t,t.next)<0}function X4(t,e,n,i){let r=t;do r.z===0&&(r.z=xv(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,Y4(r)}function Y4(t){let e,n,i,r,s,a,o,l,u=1;do{for(n=t,t=null,s=null,a=0;n;){for(a++,i=n,o=0,e=0;e<u&&(o++,i=i.nextZ,!!i);e++);for(l=u;o>0||l>0&&i;)o!==0&&(l===0||!i||n.z<=i.z)?(r=n,n=n.nextZ,o--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,u*=2}while(a>1);return t}function xv(t,e,n,i,r){return t=(t-n)*r|0,e=(e-i)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function q4(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function el(t,e,n,i,r,s,a,o){return(r-a)*(e-o)>=(t-a)*(s-o)&&(t-a)*(i-o)>=(n-a)*(e-o)&&(n-a)*(s-o)>=(r-a)*(i-o)}function Z4(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!j4(t,e)&&(Rc(t,e)&&Rc(e,t)&&K4(t,e)&&(on(t.prev,t,e.prev)||on(t,e.prev,e))||Vf(t,e)&&on(t.prev,t,t.next)>0&&on(e.prev,e,e.next)>0)}function on(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Vf(t,e){return t.x===e.x&&t.y===e.y}function WM(t,e,n,i){const r=nh(on(t,e,n)),s=nh(on(t,e,i)),a=nh(on(n,i,t)),o=nh(on(n,i,e));return!!(r!==s&&a!==o||r===0&&th(t,n,e)||s===0&&th(t,i,e)||a===0&&th(n,t,i)||o===0&&th(n,e,i))}function th(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function nh(t){return t>0?1:t<0?-1:0}function j4(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&WM(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Rc(t,e){return on(t.prev,t,t.next)<0?on(t,e,t.next)>=0&&on(t,t.prev,e)>=0:on(t,e,t.prev)<0||on(t,t.next,e)<0}function K4(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function $M(t,e){const n=new Cv(t.i,t.x,t.y),i=new Cv(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function aw(t,e,n,i){const r=new Cv(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Pc(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Cv(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function J4(t,e,n,i){let r=0;for(let s=e,a=n-i;s<n;s+=i)r+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return r}class wr{static area(e){const n=e.length;let i=0;for(let r=n-1,s=0;s<n;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return wr.area(e)<0}static triangulateShape(e,n){const i=[],r=[],s=[];ow(e),lw(i,e);let a=e.length;n.forEach(ow);for(let l=0;l<n.length;l++)r.push(a),a+=n[l].length,lw(i,n[l]);const o=k4.triangulate(i,r);for(let l=0;l<o.length;l+=3)s.push(o.slice(l,l+3));return s}}function ow(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function lw(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class jc extends xt{constructor(e=new Za([new ke(.5,.5),new ke(-.5,.5),new ke(-.5,-.5),new ke(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let o=0,l=e.length;o<l;o++){const u=e[o];a(u)}this.setAttribute("position",new ot(r,3)),this.setAttribute("uv",new ot(s,2)),this.computeVertexNormals();function a(o){const l=[],u=n.curveSegments!==void 0?n.curveSegments:12,c=n.steps!==void 0?n.steps:1,d=n.depth!==void 0?n.depth:1;let h=n.bevelEnabled!==void 0?n.bevelEnabled:!0,f=n.bevelThickness!==void 0?n.bevelThickness:.2,m=n.bevelSize!==void 0?n.bevelSize:f-.1,v=n.bevelOffset!==void 0?n.bevelOffset:0,g=n.bevelSegments!==void 0?n.bevelSegments:3;const y=n.extrudePath,S=n.UVGenerator!==void 0?n.UVGenerator:Q4;let b,w=!1,E,T,I,_;y&&(b=y.getSpacedPoints(c),w=!0,h=!1,E=y.computeFrenetFrames(c,!1),T=new q,I=new q,_=new q),h||(g=0,f=0,m=0,v=0);const R=o.extractPoints(u);let L=R.shape;const k=R.holes;if(!wr.isClockWise(L)){L=L.reverse();for(let N=0,B=k.length;N<B;N++){const te=k[N];wr.isClockWise(te)&&(k[N]=te.reverse())}}const G=wr.triangulateShape(L,k),H=L;for(let N=0,B=k.length;N<B;N++){const te=k[N];L=L.concat(te)}function J(N,B,te){return B||console.error("THREE.ExtrudeGeometry: vec does not exist"),B.clone().multiplyScalar(te).add(N)}const V=L.length,re=G.length;function j(N,B,te){let ue,ce,ae;const me=N.x-B.x,le=N.y-B.y,Se=te.x-N.x,ve=te.y-N.y,U=me*me+le*le,D=me*ve-le*Se;if(Math.abs(D)>Number.EPSILON){const se=Math.sqrt(U),be=Math.sqrt(Se*Se+ve*ve),Re=B.x-le/se,Fe=B.y+me/se,Xe=te.x-ve/be,Ve=te.y+Se/be,we=((Xe-Re)*ve-(Ve-Fe)*Se)/(me*ve-le*Se);ue=Re+me*we-N.x,ce=Fe+le*we-N.y;const rt=ue*ue+ce*ce;if(rt<=2)return new ke(ue,ce);ae=Math.sqrt(rt/2)}else{let se=!1;me>Number.EPSILON?Se>Number.EPSILON&&(se=!0):me<-Number.EPSILON?Se<-Number.EPSILON&&(se=!0):Math.sign(le)===Math.sign(ve)&&(se=!0),se?(ue=-le,ce=me,ae=Math.sqrt(U)):(ue=me,ce=le,ae=Math.sqrt(U/2))}return new ke(ue/ae,ce/ae)}const Z=[];for(let N=0,B=H.length,te=B-1,ue=N+1;N<B;N++,te++,ue++)te===B&&(te=0),ue===B&&(ue=0),Z[N]=j(H[N],H[te],H[ue]);const z=[];let ee,Q=Z.concat();for(let N=0,B=k.length;N<B;N++){const te=k[N];ee=[];for(let ue=0,ce=te.length,ae=ce-1,me=ue+1;ue<ce;ue++,ae++,me++)ae===ce&&(ae=0),me===ce&&(me=0),ee[ue]=j(te[ue],te[ae],te[me]);z.push(ee),Q=Q.concat(ee)}for(let N=0;N<g;N++){const B=N/g,te=f*Math.cos(B*Math.PI/2),ue=m*Math.sin(B*Math.PI/2)+v;for(let ce=0,ae=H.length;ce<ae;ce++){const me=J(H[ce],Z[ce],ue);_e(me.x,me.y,-te)}for(let ce=0,ae=k.length;ce<ae;ce++){const me=k[ce];ee=z[ce];for(let le=0,Se=me.length;le<Se;le++){const ve=J(me[le],ee[le],ue);_e(ve.x,ve.y,-te)}}}const fe=m+v;for(let N=0;N<V;N++){const B=h?J(L[N],Q[N],fe):L[N];w?(I.copy(E.normals[0]).multiplyScalar(B.x),T.copy(E.binormals[0]).multiplyScalar(B.y),_.copy(b[0]).add(I).add(T),_e(_.x,_.y,_.z)):_e(B.x,B.y,0)}for(let N=1;N<=c;N++)for(let B=0;B<V;B++){const te=h?J(L[B],Q[B],fe):L[B];w?(I.copy(E.normals[N]).multiplyScalar(te.x),T.copy(E.binormals[N]).multiplyScalar(te.y),_.copy(b[N]).add(I).add(T),_e(_.x,_.y,_.z)):_e(te.x,te.y,d/c*N)}for(let N=g-1;N>=0;N--){const B=N/g,te=f*Math.cos(B*Math.PI/2),ue=m*Math.sin(B*Math.PI/2)+v;for(let ce=0,ae=H.length;ce<ae;ce++){const me=J(H[ce],Z[ce],ue);_e(me.x,me.y,d+te)}for(let ce=0,ae=k.length;ce<ae;ce++){const me=k[ce];ee=z[ce];for(let le=0,Se=me.length;le<Se;le++){const ve=J(me[le],ee[le],ue);w?_e(ve.x,ve.y+b[c-1].y,b[c-1].x+te):_e(ve.x,ve.y,d+te)}}}Ee(),ne();function Ee(){const N=r.length/3;if(h){let B=0,te=V*B;for(let ue=0;ue<re;ue++){const ce=G[ue];Ae(ce[2]+te,ce[1]+te,ce[0]+te)}B=c+g*2,te=V*B;for(let ue=0;ue<re;ue++){const ce=G[ue];Ae(ce[0]+te,ce[1]+te,ce[2]+te)}}else{for(let B=0;B<re;B++){const te=G[B];Ae(te[2],te[1],te[0])}for(let B=0;B<re;B++){const te=G[B];Ae(te[0]+V*c,te[1]+V*c,te[2]+V*c)}}i.addGroup(N,r.length/3-N,0)}function ne(){const N=r.length/3;let B=0;X(H,B),B+=H.length;for(let te=0,ue=k.length;te<ue;te++){const ce=k[te];X(ce,B),B+=ce.length}i.addGroup(N,r.length/3-N,1)}function X(N,B){let te=N.length;for(;--te>=0;){const ue=te;let ce=te-1;ce<0&&(ce=N.length-1);for(let ae=0,me=c+g*2;ae<me;ae++){const le=V*ae,Se=V*(ae+1),ve=B+ue+le,U=B+ce+le,D=B+ce+Se,se=B+ue+Se;ze(ve,U,D,se)}}}function _e(N,B,te){l.push(N),l.push(B),l.push(te)}function Ae(N,B,te){Ie(N),Ie(B),Ie(te);const ue=r.length/3,ce=S.generateTopUV(i,r,ue-3,ue-2,ue-1);Ge(ce[0]),Ge(ce[1]),Ge(ce[2])}function ze(N,B,te,ue){Ie(N),Ie(B),Ie(ue),Ie(B),Ie(te),Ie(ue);const ce=r.length/3,ae=S.generateSideWallUV(i,r,ce-6,ce-3,ce-2,ce-1);Ge(ae[0]),Ge(ae[1]),Ge(ae[3]),Ge(ae[1]),Ge(ae[2]),Ge(ae[3])}function Ie(N){r.push(l[N*3+0]),r.push(l[N*3+1]),r.push(l[N*3+2])}function Ge(N){s.push(N.x),s.push(N.y)}}}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return e5(n,i,e)}static fromJSON(e,n){const i=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=n[e.shapes[s]];i.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Wg[r.type]().fromJSON(r)),new jc(i,e.options)}}const Q4={generateTopUV:function(t,e,n,i,r){const s=e[n*3],a=e[n*3+1],o=e[i*3],l=e[i*3+1],u=e[r*3],c=e[r*3+1];return[new ke(s,a),new ke(o,l),new ke(u,c)]},generateSideWallUV:function(t,e,n,i,r,s){const a=e[n*3],o=e[n*3+1],l=e[n*3+2],u=e[i*3],c=e[i*3+1],d=e[i*3+2],h=e[r*3],f=e[r*3+1],m=e[r*3+2],v=e[s*3],g=e[s*3+1],y=e[s*3+2];return Math.abs(o-c)<Math.abs(a-u)?[new ke(a,1-l),new ke(u,1-d),new ke(h,1-m),new ke(v,1-y)]:[new ke(o,1-l),new ke(c,1-d),new ke(f,1-m),new ke(g,1-y)]}};function e5(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const s=t[i];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class Kc extends Qr{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Kc(e.radius,e.detail)}}class vu extends Qr{constructor(e=1,n=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new vu(e.radius,e.detail)}}class Jc extends xt{constructor(e=.5,n=1,i=8,r=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:a},i=Math.max(3,i),r=Math.max(1,r);const o=[],l=[],u=[],c=[];let d=e;const h=(n-e)/r,f=new q,m=new ke;for(let v=0;v<=r;v++){for(let g=0;g<=i;g++){const y=s+g/i*a;f.x=d*Math.cos(y),f.y=d*Math.sin(y),l.push(f.x,f.y,f.z),u.push(0,0,1),m.x=(f.x/n+1)/2,m.y=(f.y/n+1)/2,c.push(m.x,m.y)}d+=h}for(let v=0;v<r;v++){const g=v*(i+1);for(let y=0;y<i;y++){const S=y+g,b=S,w=S+i+1,E=S+i+2,T=S+1;o.push(b,w,T),o.push(w,E,T)}}this.setIndex(o),this.setAttribute("position",new ot(l,3)),this.setAttribute("normal",new ot(u,3)),this.setAttribute("uv",new ot(c,2))}static fromJSON(e){return new Jc(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Qc extends xt{constructor(e=new Za([new ke(0,.5),new ke(-.5,-.5),new ke(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const i=[],r=[],s=[],a=[];let o=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(o,l,c),o+=l,l=0;this.setIndex(i),this.setAttribute("position",new ot(r,3)),this.setAttribute("normal",new ot(s,3)),this.setAttribute("uv",new ot(a,2));function u(c){const d=r.length/3,h=c.extractPoints(n);let f=h.shape;const m=h.holes;wr.isClockWise(f)===!1&&(f=f.reverse());for(let g=0,y=m.length;g<y;g++){const S=m[g];wr.isClockWise(S)===!0&&(m[g]=S.reverse())}const v=wr.triangulateShape(f,m);for(let g=0,y=m.length;g<y;g++){const S=m[g];f=f.concat(S)}for(let g=0,y=f.length;g<y;g++){const S=f[g];r.push(S.x,S.y,0),s.push(0,0,1),a.push(S.x,S.y)}for(let g=0,y=v.length;g<y;g++){const S=v[g],b=S[0]+d,w=S[1]+d,E=S[2]+d;i.push(b,w,E),l+=3}}}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return t5(n,e)}static fromJSON(e,n){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const a=n[e.shapes[r]];i.push(a)}return new Qc(i,e.curveSegments)}}function t5(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}class gu extends xt{constructor(e=1,n=32,i=16,r=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:r,phiLength:s,thetaStart:a,thetaLength:o},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const l=Math.min(a+o,Math.PI);let u=0;const c=[],d=new q,h=new q,f=[],m=[],v=[],g=[];for(let y=0;y<=i;y++){const S=[],b=y/i;let w=0;y==0&&a==0?w=.5/n:y==i&&l==Math.PI&&(w=-.5/n);for(let E=0;E<=n;E++){const T=E/n;d.x=-e*Math.cos(r+T*s)*Math.sin(a+b*o),d.y=e*Math.cos(a+b*o),d.z=e*Math.sin(r+T*s)*Math.sin(a+b*o),m.push(d.x,d.y,d.z),h.copy(d).normalize(),v.push(h.x,h.y,h.z),g.push(T+w,1-b),S.push(u++)}c.push(S)}for(let y=0;y<i;y++)for(let S=0;S<n;S++){const b=c[y][S+1],w=c[y][S],E=c[y+1][S],T=c[y+1][S+1];(y!==0||a>0)&&f.push(b,w,T),(y!==i-1||l<Math.PI)&&f.push(w,E,T)}this.setIndex(f),this.setAttribute("position",new ot(m,3)),this.setAttribute("normal",new ot(v,3)),this.setAttribute("uv",new ot(g,2))}static fromJSON(e){return new gu(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class ed extends Qr{constructor(e=1,n=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new ed(e.radius,e.detail)}}class td extends xt{constructor(e=1,n=.4,i=8,r=6,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const a=[],o=[],l=[],u=[],c=new q,d=new q,h=new q;for(let f=0;f<=i;f++)for(let m=0;m<=r;m++){const v=m/r*s,g=f/i*Math.PI*2;d.x=(e+n*Math.cos(g))*Math.cos(v),d.y=(e+n*Math.cos(g))*Math.sin(v),d.z=n*Math.sin(g),o.push(d.x,d.y,d.z),c.x=e*Math.cos(v),c.y=e*Math.sin(v),h.subVectors(d,c).normalize(),l.push(h.x,h.y,h.z),u.push(m/r),u.push(f/i)}for(let f=1;f<=i;f++)for(let m=1;m<=r;m++){const v=(r+1)*f+m-1,g=(r+1)*(f-1)+m-1,y=(r+1)*(f-1)+m,S=(r+1)*f+m;a.push(v,g,S),a.push(g,y,S)}this.setIndex(a),this.setAttribute("position",new ot(o,3)),this.setAttribute("normal",new ot(l,3)),this.setAttribute("uv",new ot(u,2))}static fromJSON(e){return new td(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class nd extends xt{constructor(e=1,n=.4,i=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:r,p:s,q:a},i=Math.floor(i),r=Math.floor(r);const o=[],l=[],u=[],c=[],d=new q,h=new q,f=new q,m=new q,v=new q,g=new q,y=new q;for(let b=0;b<=i;++b){const w=b/i*s*Math.PI*2;S(w,s,a,e,f),S(w+.01,s,a,e,m),g.subVectors(m,f),y.addVectors(m,f),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize();for(let E=0;E<=r;++E){const T=E/r*Math.PI*2,I=-n*Math.cos(T),_=n*Math.sin(T);d.x=f.x+(I*y.x+_*v.x),d.y=f.y+(I*y.y+_*v.y),d.z=f.z+(I*y.z+_*v.z),l.push(d.x,d.y,d.z),h.subVectors(d,f).normalize(),u.push(h.x,h.y,h.z),c.push(b/i),c.push(E/r)}}for(let b=1;b<=i;b++)for(let w=1;w<=r;w++){const E=(r+1)*(b-1)+(w-1),T=(r+1)*b+(w-1),I=(r+1)*b+w,_=(r+1)*(b-1)+w;o.push(E,T,_),o.push(T,I,_)}this.setIndex(o),this.setAttribute("position",new ot(l,3)),this.setAttribute("normal",new ot(u,3)),this.setAttribute("uv",new ot(c,2));function S(b,w,E,T,I){const _=Math.cos(b),R=Math.sin(b),L=E/w*b,k=Math.cos(L);I.x=T*(2+k)*.5*_,I.y=T*(2+k)*R*.5,I.z=T*Math.sin(L)*.5}}static fromJSON(e){return new nd(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class id extends xt{constructor(e=new Hg(new q(-1,-1,0),new q(-1,1,0),new q(1,1,0)),n=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:r,closed:s};const a=e.computeFrenetFrames(n,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new q,l=new q,u=new ke;let c=new q;const d=[],h=[],f=[],m=[];v(),this.setIndex(m),this.setAttribute("position",new ot(d,3)),this.setAttribute("normal",new ot(h,3)),this.setAttribute("uv",new ot(f,2));function v(){for(let b=0;b<n;b++)g(b);g(s===!1?n:0),S(),y()}function g(b){c=e.getPointAt(b/n,c);const w=a.normals[b],E=a.binormals[b];for(let T=0;T<=r;T++){const I=T/r*Math.PI*2,_=Math.sin(I),R=-Math.cos(I);l.x=R*w.x+_*E.x,l.y=R*w.y+_*E.y,l.z=R*w.z+_*E.z,l.normalize(),h.push(l.x,l.y,l.z),o.x=c.x+i*l.x,o.y=c.y+i*l.y,o.z=c.z+i*l.z,d.push(o.x,o.y,o.z)}}function y(){for(let b=1;b<=n;b++)for(let w=1;w<=r;w++){const E=(r+1)*(b-1)+(w-1),T=(r+1)*b+(w-1),I=(r+1)*b+w,_=(r+1)*(b-1)+w;m.push(E,T,_),m.push(T,I,_)}}function S(){for(let b=0;b<=n;b++)for(let w=0;w<=r;w++)u.x=b/n,u.y=w/r,f.push(u.x,u.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new id(new Wg[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class XM extends xt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],i=new Set,r=new q,s=new q;if(e.index!==null){const a=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const d=l[u],h=d.start,f=d.count;for(let m=h,v=h+f;m<v;m+=3)for(let g=0;g<3;g++){const y=o.getX(m+g),S=o.getX(m+(g+1)%3);r.fromBufferAttribute(a,y),s.fromBufferAttribute(a,S),uw(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let o=0,l=a.count/3;o<l;o++)for(let u=0;u<3;u++){const c=3*o+u,d=3*o+(u+1)%3;r.fromBufferAttribute(a,c),s.fromBufferAttribute(a,d),uw(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new ot(n,3))}}}function uw(t,e,n){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(i)===!0||n.has(r)===!0?!1:(n.add(i),n.add(r),!0)}var cw=Object.freeze({__proto__:null,BoxGeometry:ta,CapsuleGeometry:Xc,CircleGeometry:Yc,ConeGeometry:qc,CylinderGeometry:mo,DodecahedronGeometry:Zc,EdgesGeometry:HM,ExtrudeGeometry:jc,IcosahedronGeometry:Kc,LatheGeometry:mu,OctahedronGeometry:vu,PlaneGeometry:fu,PolyhedronGeometry:Qr,RingGeometry:Jc,ShapeGeometry:Qc,SphereGeometry:gu,TetrahedronGeometry:ed,TorusGeometry:td,TorusKnotGeometry:nd,TubeGeometry:id,WireframeGeometry:XM});class YM extends Jn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new it(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class qM extends xr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class $g extends Jn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new it(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new it(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qs,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ZM extends $g{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ke(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return gn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new it(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new it(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new it(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class jM extends Jn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new it(16777215),this.specular=new it(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new it(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qs,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Hc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class KM extends Jn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new it(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new it(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qs,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class JM extends Jn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qs,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class QM extends Jn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new it(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new it(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qs,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Hc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class eT extends Jn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new it(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qs,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class tT extends si{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Di(t,e,n){return Xg(t)?new t.constructor(t.subarray(e,n!==void 0?n:t.length)):t.slice(e,n)}function Ia(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function Xg(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function nT(t){function e(r,s){return t[r]-t[s]}const n=t.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(e),i}function Av(t,e,n){const i=t.length,r=new t.constructor(i);for(let s=0,a=0;a!==i;++s){const o=n[s]*e;for(let l=0;l!==e;++l)r[a++]=t[o+l]}return r}function Yg(t,e,n,i){let r=1,s=t[0];for(;s!==void 0&&s[i]===void 0;)s=t[r++];if(s===void 0)return;let a=s[i];if(a!==void 0)if(Array.isArray(a))do a=s[i],a!==void 0&&(e.push(s.time),n.push.apply(n,a)),s=t[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[i],a!==void 0&&(e.push(s.time),a.toArray(n,n.length)),s=t[r++];while(s!==void 0);else do a=s[i],a!==void 0&&(e.push(s.time),n.push(a)),s=t[r++];while(s!==void 0)}function n5(t,e,n,i,r=30){const s=t.clone();s.name=e;const a=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],c=u.getValueSize(),d=[],h=[];for(let f=0;f<u.times.length;++f){const m=u.times[f]*r;if(!(m<n||m>=i)){d.push(u.times[f]);for(let v=0;v<c;++v)h.push(u.values[f*c+v])}}d.length!==0&&(u.times=Ia(d,u.times.constructor),u.values=Ia(h,u.values.constructor),a.push(u))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s}function i5(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,s=e/i;for(let a=0;a<r;++a){const o=n.tracks[a],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const u=t.tracks.find(function(y){return y.name===o.name&&y.ValueTypeName===l});if(u===void 0)continue;let c=0;const d=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=d/3);let h=0;const f=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);const m=o.times.length-1;let v;if(s<=o.times[0]){const y=c,S=d-c;v=Di(o.values,y,S)}else if(s>=o.times[m]){const y=m*d+c,S=y+d-c;v=Di(o.values,y,S)}else{const y=o.createInterpolant(),S=c,b=d-c;y.evaluate(s),v=Di(y.resultBuffer,S,b)}l==="quaternion"&&new fi().fromArray(v).normalize().conjugate().toArray(v);const g=u.times.length;for(let y=0;y<g;++y){const S=y*f+h;if(l==="quaternion")fi.multiplyQuaternionsFlat(u.values,S,v,0,u.values,S);else{const b=f-h*2;for(let w=0;w<b;++w)u.values[S+w]-=v[w]}}}return t.blendMode=Cg,t}var r5=Object.freeze({__proto__:null,arraySlice:Di,convertArray:Ia,isTypedArray:Xg,getKeyframeOrder:nT,sortedArray:Av,flattenJSON:Yg,subclip:n5,makeClipAdditive:i5});class rd{constructor(e,n,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let i=this._cachedIndex,r=n[i],s=n[i-1];e:{t:{let a;n:{i:if(!(e<r)){for(let o=i+2;;){if(r===void 0){if(e<s)break i;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(s=r,r=n[++i],e<r)break t}a=n.length;break n}if(!(e>=s)){const o=n[1];e<o&&(i=2,s=o);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=n[--i-1],e>=s)break t}a=i,i=0;break n}break e}for(;i<a;){const o=i+a>>>1;e<n[o]?a=o:i=o+1}if(r=n[i],s=n[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)n[a]=i[s+a];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class iT extends rd{constructor(e,n,i,r){super(e,n,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ra,endingEnd:Ra}}intervalChanged_(e,n,i){const r=this.parameterPositions;let s=e-2,a=e+1,o=r[s],l=r[a];if(o===void 0)switch(this.getSettings_().endingStart){case Pa:s=e,o=2*n-i;break;case Mc:s=r.length-2,o=n+r[s]-r[s+1];break;default:s=e,o=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Pa:a=e,l=2*i-n;break;case Mc:a=1,l=i+r[1]-r[0];break;default:a=e-1,l=n}const u=(i-n)*.5,c=this.valueSize;this._weightPrev=u/(n-o),this._weightNext=u/(l-i),this._offsetPrev=s*c,this._offsetNext=a*c}interpolate_(e,n,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,c=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,m=(i-n)/(r-n),v=m*m,g=v*m,y=-h*g+2*h*v-h*m,S=(1+h)*g+(-1.5-2*h)*v+(-.5+h)*m+1,b=(-1-f)*g+(1.5+f)*v+.5*m,w=f*g-f*v;for(let E=0;E!==o;++E)s[E]=y*a[c+E]+S*a[u+E]+b*a[l+E]+w*a[d+E];return s}}class qg extends rd{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,c=(i-n)/(r-n),d=1-c;for(let h=0;h!==o;++h)s[h]=a[u+h]*d+a[l+h]*c;return s}}class rT extends rd{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class cr{constructor(e,n,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ia(n,this.TimeBufferType),this.values=Ia(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:Ia(e.times,Array),values:Ia(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new rT(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new qg(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new iT(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case _c:n=this.InterpolantFactoryMethodDiscrete;break;case Sc:n=this.InterpolantFactoryMethodLinear;break;case _h:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return _c;case this.InterpolantFactoryMethodLinear:return Sc;case this.InterpolantFactoryMethodSmooth:return _h}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]*=e}return this}trim(e,n){const i=this.times,r=i.length;let s=0,a=r-1;for(;s!==r&&i[s]<e;)++s;for(;a!==-1&&i[a]>n;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=Di(i,s,a),this.values=Di(this.values,s*o,a*o)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const l=i[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(r!==void 0&&Xg(r))for(let o=0,l=r.length;o!==l;++o){const u=r[o];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,u),e=!1;break}}return e}optimize(){const e=Di(this.times),n=Di(this.values),i=this.getValueSize(),r=this.getInterpolation()===_h,s=e.length-1;let a=1;for(let o=1;o<s;++o){let l=!1;const u=e[o],c=e[o+1];if(u!==c&&(o!==1||u!==e[0]))if(r)l=!0;else{const d=o*i,h=d-i,f=d+i;for(let m=0;m!==i;++m){const v=n[d+m];if(v!==n[h+m]||v!==n[f+m]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const d=o*i,h=a*i;for(let f=0;f!==i;++f)n[h+f]=n[d+f]}++a}}if(s>0){e[a]=e[s];for(let o=s*i,l=a*i,u=0;u!==i;++u)n[l+u]=n[o+u];++a}return a!==e.length?(this.times=Di(e,0,a),this.values=Di(n,0,a*i)):(this.times=e,this.values=n),this}clone(){const e=Di(this.times,0),n=Di(this.values,0),i=this.constructor,r=new i(this.name,e,n);return r.createInterpolant=this.createInterpolant,r}}cr.prototype.TimeBufferType=Float32Array;cr.prototype.ValueBufferType=Float32Array;cr.prototype.DefaultInterpolation=Sc;class vo extends cr{}vo.prototype.ValueTypeName="bool";vo.prototype.ValueBufferType=Array;vo.prototype.DefaultInterpolation=_c;vo.prototype.InterpolantFactoryMethodLinear=void 0;vo.prototype.InterpolantFactoryMethodSmooth=void 0;class Zg extends cr{}Zg.prototype.ValueTypeName="color";class Lc extends cr{}Lc.prototype.ValueTypeName="number";class sT extends rd{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(i-n)/(r-n);let u=e*o;for(let c=u+o;u!==c;u+=4)fi.slerpFlat(s,0,a,u-o,a,u,l);return s}}class yu extends cr{InterpolantFactoryMethodLinear(e){return new sT(this.times,this.values,this.getValueSize(),e)}}yu.prototype.ValueTypeName="quaternion";yu.prototype.DefaultInterpolation=Sc;yu.prototype.InterpolantFactoryMethodSmooth=void 0;class go extends cr{}go.prototype.ValueTypeName="string";go.prototype.ValueBufferType=Array;go.prototype.DefaultInterpolation=_c;go.prototype.InterpolantFactoryMethodLinear=void 0;go.prototype.InterpolantFactoryMethodSmooth=void 0;class Ic extends cr{}Ic.prototype.ValueTypeName="vector";class Oc{constructor(e,n=-1,i,r=Af){this.name=e,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=xi(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],i=e.tracks,r=1/(e.fps||1);for(let a=0,o=i.length;a!==o;++a)n.push(a5(i[a]).scale(r));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=i.length;s!==a;++s)n.push(cr.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,n,i,r){const s=n.length,a=[];for(let o=0;o<s;o++){let l=[],u=[];l.push((o+s-1)%s,o,(o+1)%s),u.push(0,1,0);const c=nT(l);l=Av(l,1,c),u=Av(u,1,c),!r&&l[0]===0&&(l.push(s),u.push(u[0])),a.push(new Lc(".morphTargetInfluences["+n[o].name+"]",l,u).scale(1/i))}return new this(e,-1,a)}static findByName(e,n){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===n)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,n,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const u=e[o],c=u.name.match(s);if(c&&c.length>1){const d=c[1];let h=r[d];h||(r[d]=h=[]),h.push(u)}}const a=[];for(const o in r)a.push(this.CreateFromMorphTargetSequence(o,r[o],n,i));return a}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,h,f,m,v){if(f.length!==0){const g=[],y=[];Yg(f,g,y,m),g.length!==0&&v.push(new d(h,g,y))}},r=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let d=0;d<u.length;d++){const h=u[d].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const f={};let m;for(m=0;m<h.length;m++)if(h[m].morphTargets)for(let v=0;v<h[m].morphTargets.length;v++)f[h[m].morphTargets[v]]=-1;for(const v in f){const g=[],y=[];for(let S=0;S!==h[m].morphTargets.length;++S){const b=h[m];g.push(b.time),y.push(b.morphTarget===v?1:0)}r.push(new Lc(".morphTargetInfluence["+v+"]",g,y))}l=f.length*a}else{const f=".bones["+n[d].name+"]";i(Ic,f+".position",h,"pos",r),i(yu,f+".quaternion",h,"rot",r),i(Ic,f+".scale",h,"scl",r)}}return r.length===0?null:new this(s,l,r,o)}resetDuration(){const e=this.tracks;let n=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function s5(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Lc;case"vector":case"vector2":case"vector3":case"vector4":return Ic;case"color":return Zg;case"quaternion":return yu;case"bool":case"boolean":return vo;case"string":return go}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function a5(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=s5(t.type);if(t.times===void 0){const n=[],i=[];Yg(t.keys,n,i,"value"),t.times=n,t.values=i}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const lo={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class jg{constructor(e,n,i){const r=this;let s=!1,a=0,o=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(c){o++,s===!1&&r.onStart!==void 0&&r.onStart(c,a,o),s=!0},this.itemEnd=function(c){a++,r.onProgress!==void 0&&r.onProgress(c,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(c){r.onError!==void 0&&r.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,d){return u.push(c,d),this},this.removeHandler=function(c){const d=u.indexOf(c);return d!==-1&&u.splice(d,2),this},this.getHandler=function(c){for(let d=0,h=u.length;d<h;d+=2){const f=u[d],m=u[d+1];if(f.global&&(f.lastIndex=0),f.test(c))return m}return null}}}const aT=new jg;class Ai{constructor(e){this.manager=e!==void 0?e:aT,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(r,s){i.load(e,r,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Fr={};class o5 extends Error{constructor(e,n){super(e),this.response=n}}class jr extends Ai{constructor(e){super(e)}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=lo.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(Fr[e]!==void 0){Fr[e].push({onLoad:n,onProgress:i,onError:r});return}Fr[e]=[],Fr[e].push({onLoad:n,onProgress:i,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(a).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream=="undefined"||u.body===void 0||u.body.getReader===void 0)return u;const c=Fr[e],d=u.body.getReader(),h=u.headers.get("Content-Length"),f=h?parseInt(h):0,m=f!==0;let v=0;const g=new ReadableStream({start(y){S();function S(){d.read().then(({done:b,value:w})=>{if(b)y.close();else{v+=w.byteLength;const E=new ProgressEvent("progress",{lengthComputable:m,loaded:v,total:f});for(let T=0,I=c.length;T<I;T++){const _=c[T];_.onProgress&&_.onProgress(E)}y.enqueue(w),S()}})}}});return new Response(g)}else throw new o5(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,o));case"json":return u.json();default:if(o===void 0)return u.text();{const d=/charset="?([^;"\s]*)"?/i.exec(o),h=d&&d[1]?d[1].toLowerCase():void 0,f=new TextDecoder(h);return u.arrayBuffer().then(m=>f.decode(m))}}}).then(u=>{lo.add(e,u);const c=Fr[e];delete Fr[e];for(let d=0,h=c.length;d<h;d++){const f=c[d];f.onLoad&&f.onLoad(u)}}).catch(u=>{const c=Fr[e];if(c===void 0)throw this.manager.itemError(e),u;delete Fr[e];for(let d=0,h=c.length;d<h;d++){const f=c[d];f.onError&&f.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class l5 extends Ai{constructor(e){super(e)}load(e,n,i,r){const s=this,a=new jr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{n(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=[];for(let i=0;i<e.length;i++){const r=Oc.parse(e[i]);n.push(r)}return n}}class u5 extends Ai{constructor(e){super(e)}load(e,n,i,r){const s=this,a=[],o=new Ug,l=new jr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function c(d){l.load(e[d],function(h){const f=s.parse(h,!0);a[d]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},u+=1,u===6&&(f.mipmapCount===1&&(o.minFilter=vn),o.image=a,o.format=f.format,o.needsUpdate=!0,n&&n(o))},i,r)}if(Array.isArray(e))for(let d=0,h=e.length;d<h;++d)c(d);else l.load(e,function(d){const h=s.parse(d,!0);if(h.isCubemap){const f=h.mipmaps.length/h.mipmapCount;for(let m=0;m<f;m++){a[m]={mipmaps:[]};for(let v=0;v<h.mipmapCount;v++)a[m].mipmaps.push(h.mipmaps[m*h.mipmapCount+v]),a[m].format=h.format,a[m].width=h.width,a[m].height=h.height}o.image=a}else o.image.width=h.width,o.image.height=h.height,o.mipmaps=h.mipmaps;h.mipmapCount===1&&(o.minFilter=vn),o.format=h.format,o.needsUpdate=!0,n&&n(o)},i,r);return o}}class Dc extends Ai{constructor(e){super(e)}load(e,n,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=lo.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(a),s.manager.itemEnd(e)},0),a;const o=xc("img");function l(){c(),lo.add(e,this),n&&n(this),s.manager.itemEnd(e)}function u(d){c(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){o.removeEventListener("load",l,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class c5 extends Ai{constructor(e){super(e)}load(e,n,i,r){const s=new $c,a=new Dc(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function l(u){a.load(e[u],function(c){s.images[u]=c,o++,o===6&&(s.needsUpdate=!0,n&&n(s))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return s}}class d5 extends Ai{constructor(e){super(e)}load(e,n,i,r){const s=this,a=new ql,o=new jr(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(l){const u=s.parse(l);!u||(u.image!==void 0?a.image=u.image:u.data!==void 0&&(a.image.width=u.width,a.image.height=u.height,a.image.data=u.data),a.wrapS=u.wrapS!==void 0?u.wrapS:qn,a.wrapT=u.wrapT!==void 0?u.wrapT:qn,a.magFilter=u.magFilter!==void 0?u.magFilter:vn,a.minFilter=u.minFilter!==void 0?u.minFilter:vn,a.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.encoding!==void 0&&(a.encoding=u.encoding),u.flipY!==void 0&&(a.flipY=u.flipY),u.format!==void 0&&(a.format=u.format),u.type!==void 0&&(a.type=u.type),u.mipmaps!==void 0&&(a.mipmaps=u.mipmaps,a.minFilter=ho),u.mipmapCount===1&&(a.minFilter=vn),u.generateMipmaps!==void 0&&(a.generateMipmaps=u.generateMipmaps),a.needsUpdate=!0,n&&n(a,u))},i,r),a}}class h5 extends Ai{constructor(e){super(e)}load(e,n,i,r){const s=new Rn,a=new Dc(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,n!==void 0&&n(s)},i,r),s}}class na extends Ft{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new it(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class oT extends na{constructor(e,n,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ft.DefaultUp),this.updateMatrix(),this.groundColor=new it(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const Wp=new wt,dw=new q,hw=new q;class Kg{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ke(512,512),this.map=null,this.mapPass=null,this.matrix=new wt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new If,this._frameExtents=new ke(1,1),this._viewportCount=1,this._viewports=[new Ht(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;dw.setFromMatrixPosition(e.matrixWorld),n.position.copy(dw),hw.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(hw),n.updateMatrixWorld(),Wp.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Wp),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Wp)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class f5 extends Kg{constructor(){super(new Bn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,i=Ec*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(i!==n.fov||r!==n.aspect||s!==n.far)&&(n.fov=i,n.aspect=r,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class lT extends na{constructor(e,n,i=0,r=Math.PI/3,s=0,a=1){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ft.DefaultUp),this.updateMatrix(),this.target=new Ft,this.distance=i,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new f5}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const fw=new wt,zu=new q,$p=new q;class p5 extends Kg{constructor(){super(new Bn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ke(4,2),this._viewportCount=6,this._viewports=[new Ht(2,1,1,1),new Ht(0,1,1,1),new Ht(3,1,1,1),new Ht(1,1,1,1),new Ht(3,0,1,1),new Ht(1,0,1,1)],this._cubeDirections=[new q(1,0,0),new q(-1,0,0),new q(0,0,1),new q(0,0,-1),new q(0,1,0),new q(0,-1,0)],this._cubeUps=[new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,0,1),new q(0,0,-1)]}updateMatrices(e,n=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),zu.setFromMatrixPosition(e.matrixWorld),i.position.copy(zu),$p.copy(i.position),$p.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt($p),i.updateMatrixWorld(),r.makeTranslation(-zu.x,-zu.y,-zu.z),fw.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(fw)}}class uT extends na{constructor(e,n,i=0,r=1){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new p5}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class m5 extends Kg{constructor(){super(new Of(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class cT extends na{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ft.DefaultUp),this.updateMatrix(),this.target=new Ft,this.shadow=new m5}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class dT extends na{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class hT extends na{constructor(e,n,i=10,r=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class fT{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new q)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return n.copy(a[0]).multiplyScalar(.282095),n.addScaledVector(a[1],.488603*r),n.addScaledVector(a[2],.488603*s),n.addScaledVector(a[3],.488603*i),n.addScaledVector(a[4],1.092548*(i*r)),n.addScaledVector(a[5],1.092548*(r*s)),n.addScaledVector(a[6],.315392*(3*s*s-1)),n.addScaledVector(a[7],1.092548*(i*s)),n.addScaledVector(a[8],.546274*(i*i-r*r)),n}getIrradianceAt(e,n){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return n.copy(a[0]).multiplyScalar(.886227),n.addScaledVector(a[1],2*.511664*r),n.addScaledVector(a[2],2*.511664*s),n.addScaledVector(a[3],2*.511664*i),n.addScaledVector(a[4],2*.429043*i*r),n.addScaledVector(a[5],2*.429043*r*s),n.addScaledVector(a[6],.743125*s*s-.247708),n.addScaledVector(a[7],2*.429043*i*s),n.addScaledVector(a[8],.429043*(i*i-r*r)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,n+r*3);return this}toArray(e=[],n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,n+r*3);return e}static getBasisAt(e,n){const i=e.x,r=e.y,s=e.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*s,n[3]=.488603*i,n[4]=1.092548*i*r,n[5]=1.092548*r*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*i*s,n[8]=.546274*(i*i-r*r)}}class Hf extends na{constructor(e=new fT,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class Gf extends Ai{constructor(e){super(e),this.textures={}}load(e,n,i,r){const s=this,a=new jr(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{n(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=this.textures;function i(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const r=Gf.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new it().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(r.uniforms[s]={},a.type){case"t":r.uniforms[s].value=i(a.value);break;case"c":r.uniforms[s].value=new it().setHex(a.value);break;case"v2":r.uniforms[s].value=new ke().fromArray(a.value);break;case"v3":r.uniforms[s].value=new q().fromArray(a.value);break;case"v4":r.uniforms[s].value=new Ht().fromArray(a.value);break;case"m3":r.uniforms[s].value=new di().fromArray(a.value);break;case"m4":r.uniforms[s].value=new wt().fromArray(a.value);break;default:r.uniforms[s].value=a.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new ke().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new ke().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:YM,SpriteMaterial:Ng,RawShaderMaterial:qM,ShaderMaterial:xr,PointsMaterial:Fg,MeshPhysicalMaterial:ZM,MeshStandardMaterial:$g,MeshPhongMaterial:jM,MeshToonMaterial:KM,MeshNormalMaterial:JM,MeshLambertMaterial:QM,MeshDepthMaterial:Og,MeshDistanceMaterial:Dg,MeshBasicMaterial:ea,MeshMatcapMaterial:eT,LineDashedMaterial:tT,LineBasicMaterial:si,Material:Jn};return new n[e]}}class Rv{static decodeText(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);let n="";for(let i=0,r=e.length;i<r;i++)n+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class pT extends xt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class mT extends Ai{constructor(e){super(e)}load(e,n,i,r){const s=this,a=new jr(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{n(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n={},i={};function r(f,m){if(n[m]!==void 0)return n[m];const g=f.interleavedBuffers[m],y=s(f,g.buffer),S=Ko(g.type,y),b=new Ff(S,g.stride);return b.uuid=g.uuid,n[m]=b,b}function s(f,m){if(i[m]!==void 0)return i[m];const g=f.arrayBuffers[m],y=new Uint32Array(g).buffer;return i[m]=y,y}const a=e.isInstancedBufferGeometry?new pT:new xt,o=e.data.index;if(o!==void 0){const f=Ko(o.type,o.array);a.setIndex(new Jt(f,1))}const l=e.data.attributes;for(const f in l){const m=l[f];let v;if(m.isInterleavedBufferAttribute){const g=r(e.data,m.data);v=new ao(g,m.itemSize,m.offset,m.normalized)}else{const g=Ko(m.type,m.array),y=m.isInstancedBufferAttribute?ou:Jt;v=new y(g,m.itemSize,m.normalized)}m.name!==void 0&&(v.name=m.name),m.usage!==void 0&&v.setUsage(m.usage),m.updateRange!==void 0&&(v.updateRange.offset=m.updateRange.offset,v.updateRange.count=m.updateRange.count),a.setAttribute(f,v)}const u=e.data.morphAttributes;if(u)for(const f in u){const m=u[f],v=[];for(let g=0,y=m.length;g<y;g++){const S=m[g];let b;if(S.isInterleavedBufferAttribute){const w=r(e.data,S.data);b=new ao(w,S.itemSize,S.offset,S.normalized)}else{const w=Ko(S.type,S.array);b=new Jt(w,S.itemSize,S.normalized)}S.name!==void 0&&(b.name=S.name),v.push(b)}a.morphAttributes[f]=v}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let f=0,m=d.length;f!==m;++f){const v=d[f];a.addGroup(v.start,v.count,v.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const f=new q;h.center!==void 0&&f.fromArray(h.center),a.boundingSphere=new po(f,h.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class v5 extends Ai{constructor(e){super(e)}load(e,n,i,r){const s=this,a=this.path===""?Rv.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new jr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,n)},i,r)}async loadAsync(e,n){const i=this,r=this.path===""?Rv.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new jr(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,n),o=JSON.parse(a),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(o)}parse(e,n){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){n!==void 0&&n(u)}),o=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,s,l,o,i),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),n!==void 0){let d=!1;for(const h in a)if(a[h].data instanceof HTMLImageElement){d=!0;break}d===!1&&n(u)}return u}async parseAsync(e){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,r,o,a,n),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const n={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Za().fromJSON(e[i]);n[s.uuid]=s}return n}parseSkeletons(e,n){const i={},r={};if(n.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=new Uf().fromJSON(e[s],r);i[o.uuid]=o}return i}parseGeometries(e,n){const i={};if(e!==void 0){const r=new mT;for(let s=0,a=e.length;s<a;s++){let o;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(l);break;default:l.type in cw?o=cw[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),o.isBufferGeometry===!0&&l.userData!==void 0&&(o.userData=l.userData),i[l.uuid]=o}}return i}parseMaterials(e,n){const i={},r={};if(e!==void 0){const s=new Gf;s.setTextures(n);for(let a=0,o=e.length;a<o;a++){const l=e[a];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const n={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Oc.parse(r);n[s.uuid]=s}return n}parseImages(e,n){const i=this,r={};let s;function a(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:i.resourcePath+u;return a(c)}else return l.data?{data:Ko(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new jg(n);s=new Dc(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const d=e[u],h=d.url;if(Array.isArray(h)){const f=[];for(let m=0,v=h.length;m<v;m++){const g=h[m],y=o(g);y!==null&&(y instanceof HTMLImageElement?f.push(y):f.push(new ql(y.data,y.width,y.height)))}r[d.uuid]=new La(f)}else{const f=o(d.url);r[d.uuid]=new La(f)}}}return r}async parseImagesAsync(e){const n=this,i={};let r;async function s(a){if(typeof a=="string"){const o=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:n.resourcePath+o;return await r.loadAsync(l)}else return a.data?{data:Ko(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){r=new Dc(this.manager),r.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const l=e[a],u=l.url;if(Array.isArray(u)){const c=[];for(let d=0,h=u.length;d<h;d++){const f=u[d],m=await s(f);m!==null&&(m instanceof HTMLImageElement?c.push(m):c.push(new ql(m.data,m.width,m.height)))}i[l.uuid]=new La(c)}else{const c=await s(l.url);i[l.uuid]=new La(c)}}}return i}parseTextures(e,n){function i(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const r={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=e[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),n[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=n[o.image],u=l.data;let c;Array.isArray(u)?(c=new $c,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new ql:c=new Rn,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=o.uuid,o.name!==void 0&&(c.name=o.name),o.mapping!==void 0&&(c.mapping=i(o.mapping,g5)),o.offset!==void 0&&c.offset.fromArray(o.offset),o.repeat!==void 0&&c.repeat.fromArray(o.repeat),o.center!==void 0&&c.center.fromArray(o.center),o.rotation!==void 0&&(c.rotation=o.rotation),o.wrap!==void 0&&(c.wrapS=i(o.wrap[0],pw),c.wrapT=i(o.wrap[1],pw)),o.format!==void 0&&(c.format=o.format),o.type!==void 0&&(c.type=o.type),o.encoding!==void 0&&(c.encoding=o.encoding),o.minFilter!==void 0&&(c.minFilter=i(o.minFilter,mw)),o.magFilter!==void 0&&(c.magFilter=i(o.magFilter,mw)),o.anisotropy!==void 0&&(c.anisotropy=o.anisotropy),o.flipY!==void 0&&(c.flipY=o.flipY),o.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(c.unpackAlignment=o.unpackAlignment),o.userData!==void 0&&(c.userData=o.userData),r[o.uuid]=c}return r}parseObject(e,n,i,r,s){let a;function o(h){return n[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),n[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const f=[];for(let m=0,v=h.length;m<v;m++){const g=h[m];i[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),f.push(i[g])}return f}return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),i[h]}}function u(h){return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),r[h]}let c,d;switch(e.type){case"Scene":a=new RM,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new it(e.background):a.background=u(e.background)),e.environment!==void 0&&(a.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new kf(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new Nf(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness);break;case"PerspectiveCamera":a=new Bn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Of(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new dT(e.color,e.intensity);break;case"DirectionalLight":a=new cT(e.color,e.intensity);break;case"PointLight":a=new uT(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new hT(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new lT(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new oT(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new Hf().fromJSON(e);break;case"SkinnedMesh":c=o(e.geometry),d=l(e.material),a=new OM(c,d),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":c=o(e.geometry),d=l(e.material),a=new Gn(c,d);break;case"InstancedMesh":c=o(e.geometry),d=l(e.material);const h=e.count,f=e.instanceMatrix,m=e.instanceColor;a=new DM(c,d,h),a.instanceMatrix=new ou(new Float32Array(f.array),16),m!==void 0&&(a.instanceColor=new ou(new Float32Array(m.array),m.itemSize));break;case"LOD":a=new IM;break;case"Line":a=new js(o(e.geometry),l(e.material));break;case"LineLoop":a=new NM(o(e.geometry),l(e.material));break;case"LineSegments":a=new Ar(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new kM(o(e.geometry),l(e.material));break;case"Sprite":a=new LM(l(e.material));break;case"Group":a=new Qo;break;case"Bone":a=new kg;break;default:a=new Ft}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let f=0;f<h.length;f++)a.add(this.parseObject(h[f],n,i,r,s))}if(e.animations!==void 0){const h=e.animations;for(let f=0;f<h.length;f++){const m=h[f];a.animations.push(s[m])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const h=e.levels;for(let f=0;f<h.length;f++){const m=h[f],v=a.getObjectByProperty("uuid",m.object);v!==void 0&&a.addLevel(v,m.distance)}}return a}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=n[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const g5={UVMapping:Cf,CubeReflectionMapping:Xs,CubeRefractionMapping:Ys,EquirectangularReflectionMapping:gc,EquirectangularRefractionMapping:yc,CubeUVReflectionMapping:du},pw={RepeatWrapping:bc,ClampToEdgeWrapping:qn,MirroredRepeatWrapping:wc},mw={NearestFilter:Sn,NearestMipmapNearestFilter:Vh,NearestMipmapLinearFilter:Hh,LinearFilter:vn,LinearMipmapNearestFilter:Eg,LinearMipmapLinearFilter:ho};class y5 extends Ai{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=lo.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(a),s.manager.itemEnd(e)},0),a;const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){lo.add(e,l),n&&n(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let ih;class Jg{static getContext(){return ih===void 0&&(ih=new(window.AudioContext||window.webkitAudioContext)),ih}static setContext(e){ih=e}}class b5 extends Ai{constructor(e){super(e)}load(e,n,i,r){const s=this,a=new jr(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{const l=o.slice(0);Jg.getContext().decodeAudioData(l,function(c){n(c)})}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}}class w5 extends Hf{constructor(e,n,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new it().set(e),s=new it().set(n),a=new q(r.r,r.g,r.b),o=new q(s.r,s.g,s.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(l),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(u)}}class _5 extends Hf{constructor(e,n=1){super(void 0,n),this.isAmbientLightProbe=!0;const i=new it().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const vw=new wt,gw=new wt,va=new wt;class S5{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Bn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Bn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,va.copy(e.projectionMatrix);const r=n.eyeSep/2,s=r*n.near/n.focus,a=n.near*Math.tan(Ya*n.fov*.5)/n.zoom;let o,l;gw.elements[12]=-r,vw.elements[12]=r,o=-a*n.aspect+s,l=a*n.aspect+s,va.elements[0]=2*n.near/(l-o),va.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(va),o=-a*n.aspect-s,l=a*n.aspect-s,va.elements[0]=2*n.near/(l-o),va.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(va)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(gw),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(vw)}}class vT{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=yw(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=yw();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function yw(){return(typeof performance=="undefined"?Date:performance).now()}const ga=new q,bw=new fi,M5=new q,ya=new q;class T5 extends Ft{constructor(){super(),this.type="AudioListener",this.context=Jg.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new vT}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ga,bw,M5),ya.set(0,0,-1).applyQuaternion(bw),n.positionX){const r=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(ga.x,r),n.positionY.linearRampToValueAtTime(ga.y,r),n.positionZ.linearRampToValueAtTime(ga.z,r),n.forwardX.linearRampToValueAtTime(ya.x,r),n.forwardY.linearRampToValueAtTime(ya.y,r),n.forwardZ.linearRampToValueAtTime(ya.z,r),n.upX.linearRampToValueAtTime(i.x,r),n.upY.linearRampToValueAtTime(i.y,r),n.upZ.linearRampToValueAtTime(i.z,r)}else n.setPosition(ga.x,ga.y,ga.z),n.setOrientation(ya.x,ya.y,ya.z,i.x,i.y,i.z)}}class gT extends Ft{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const ba=new q,ww=new fi,E5=new q,wa=new q;class x5 extends gT{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(ba,ww,E5),wa.set(0,0,1).applyQuaternion(ww);const n=this.panner;if(n.positionX){const i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(ba.x,i),n.positionY.linearRampToValueAtTime(ba.y,i),n.positionZ.linearRampToValueAtTime(ba.z,i),n.orientationX.linearRampToValueAtTime(wa.x,i),n.orientationY.linearRampToValueAtTime(wa.y,i),n.orientationZ.linearRampToValueAtTime(wa.z,i)}else n.setPosition(ba.x,ba.y,ba.z),n.setOrientation(wa.x,wa.y,wa.z)}}class C5{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let i=0;i<n.length;i++)e+=n[i];return e/n.length}}class yT{constructor(e,n,i){this.binding=e,this.valueSize=i;let r,s,a;switch(n){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const i=this.buffer,r=this.valueSize,s=e*r+r;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==r;++o)i[s+o]=i[o];a=n}else{a+=n;const o=n/a;this._mixBufferRegion(i,s,0,o,r)}this.cumulativeWeight=a}accumulateAdditive(e){const n=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,i=this.buffer,r=e*n+n,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(i,r,l,1-s,n)}a>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*n,1,n);for(let l=n,u=n+n;l!==u;++l)if(i[l]!==i[l+n]){o.setValue(i,r);break}}saveOriginalState(){const e=this.binding,n=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(n,r);for(let s=i,a=r;s!==a;++s)n[s]=n[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let i=e;i<n;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[n+i]=this.buffer[e+i]}_select(e,n,i,r,s){if(r>=.5)for(let a=0;a!==s;++a)e[n+a]=e[i+a]}_slerp(e,n,i,r){fi.slerpFlat(e,n,e,n,e,i,r)}_slerpAdditive(e,n,i,r,s){const a=this._workIndex*s;fi.multiplyQuaternionsFlat(e,a,e,n,e,i),fi.slerpFlat(e,n,e,n,e,a,r)}_lerp(e,n,i,r,s){const a=1-r;for(let o=0;o!==s;++o){const l=n+o;e[l]=e[l]*a+e[i+o]*r}}_lerpAdditive(e,n,i,r,s){for(let a=0;a!==s;++a){const o=n+a;e[o]=e[o]+e[i+a]*r}}}const Qg="\\[\\]\\.:\\/",A5=new RegExp("["+Qg+"]","g"),e0="[^"+Qg+"]",R5="[^"+Qg.replace("\\.","")+"]",P5=/((?:WC+[\/:])*)/.source.replace("WC",e0),L5=/(WCOD+)?/.source.replace("WCOD",R5),I5=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",e0),O5=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",e0),D5=new RegExp("^"+P5+L5+I5+O5+"$"),N5=["material","materials","bones","map"];class k5{constructor(e,n,i){const r=i||Nt.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}getValue(e,n){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,n)}setValue(e,n){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}}class Nt{constructor(e,n,i){this.path=n,this.parsedPath=i||Nt.parseTrackName(n),this.node=Nt.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,i){return e&&e.isAnimationObjectGroup?new Nt.Composite(e,n,i):new Nt(e,n,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(A5,"")}static parseTrackName(e){const n=D5.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);N5.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(n);if(i!==void 0)return i}if(e.children){const i=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===n||o.uuid===n)return o;const l=i(o.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[n++]=i[r]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,i=n.objectName,r=n.propertyName;let s=n.propertyIndex;if(e||(e=Nt.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let u=n.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const a=e[r];if(a===void 0){const u=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Nt.Composite=k5;Nt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Nt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Nt.prototype.GetterByBindingType=[Nt.prototype._getValue_direct,Nt.prototype._getValue_array,Nt.prototype._getValue_arrayElement,Nt.prototype._getValue_toArray];Nt.prototype.SetterByBindingTypeAndVersioning=[[Nt.prototype._setValue_direct,Nt.prototype._setValue_direct_setNeedsUpdate,Nt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Nt.prototype._setValue_array,Nt.prototype._setValue_array_setNeedsUpdate,Nt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Nt.prototype._setValue_arrayElement,Nt.prototype._setValue_arrayElement_setNeedsUpdate,Nt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Nt.prototype._setValue_fromArray,Nt.prototype._setValue_fromArray_setNeedsUpdate,Nt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class F5{constructor(){this.isAnimationObjectGroup=!0,this.uuid=xi(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length;let o,l=e.length,u=this.nCachedObjects_;for(let c=0,d=arguments.length;c!==d;++c){const h=arguments[c],f=h.uuid;let m=n[f];if(m===void 0){m=l++,n[f]=m,e.push(h);for(let v=0,g=a;v!==g;++v)s[v].push(new Nt(h,i[v],r[v]))}else if(m<u){o=e[m];const v=--u,g=e[v];n[g.uuid]=m,e[m]=g,n[f]=v,e[v]=h;for(let y=0,S=a;y!==S;++y){const b=s[y],w=b[v];let E=b[m];b[m]=w,E===void 0&&(E=new Nt(h,i[y],r[y])),b[v]=E}}else e[m]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const l=arguments[a],u=l.uuid,c=n[u];if(c!==void 0&&c>=s){const d=s++,h=e[d];n[h.uuid]=c,e[c]=h,n[u]=d,e[d]=l;for(let f=0,m=r;f!==m;++f){const v=i[f],g=v[d],y=v[c];v[c]=g,v[d]=y}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,a=e.length;for(let o=0,l=arguments.length;o!==l;++o){const u=arguments[o],c=u.uuid,d=n[c];if(d!==void 0)if(delete n[c],d<s){const h=--s,f=e[h],m=--a,v=e[m];n[f.uuid]=d,e[d]=f,n[v.uuid]=h,e[h]=v,e.pop();for(let g=0,y=r;g!==y;++g){const S=i[g],b=S[h],w=S[m];S[d]=b,S[h]=w,S.pop()}}else{const h=--a,f=e[h];h>0&&(n[f.uuid]=d),e[d]=f,e.pop();for(let m=0,v=r;m!==v;++m){const g=i[m];g[d]=g[h],g.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const a=this._paths,o=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,d=new Array(u);r=s.length,i[e]=r,a.push(e),o.push(n),s.push(d);for(let h=c,f=l.length;h!==f;++h){const m=l[h];d[h]=new Nt(m,e,n)}return d}unsubscribe_(e){const n=this._bindingsIndicesByPath,i=n[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,a=this._bindings,o=a.length-1,l=a[o],u=e[o];n[u]=i,a[i]=l,a.pop(),s[i]=s[o],s.pop(),r[i]=r[o],r.pop()}}}class U5{constructor(e,n,i=null,r=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=r;const s=n.tracks,a=s.length,o=new Array(a),l={endingStart:Ra,endingEnd:Ra};for(let u=0;u!==a;++u){const c=s[u].createInterpolant(null);o[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=oM,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i){if(e.fadeOut(n),this.fadeIn(n),i){const r=this._clip.duration,s=e._clip.duration,a=s/r,o=r/s;e.warp(1,a,n),this.warp(o,1,n)}return this}crossFadeTo(e,n,i){return e.crossFadeFrom(this,n,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){const r=this._mixer,s=r.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,u=o.sampleValues;return l[0]=s,l[1]=s+i,u[0]=e/a,u[1]=n/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?n=0:(this._startTime=null,n=i*l)}n*=this._updateTimeScale(e);const a=this._updateTime(n),o=this._updateWeight(e);if(o>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case Cg:for(let c=0,d=l.length;c!==d;++c)l[c].evaluate(a),u[c].accumulateAdditive(o);break;case Af:default:for(let c=0,d=l.length;c!==d;++c)l[c].evaluate(a),u[c].accumulate(r,o)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;i!==null&&(n*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n))}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const a=i===lM;if(e===0)return s===-1?r:a&&(s&1)===1?n-r:r;if(i===aM){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=n||r<0){const o=Math.floor(r/n);r-=n*o,s+=Math.abs(o);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&(s&1)===1)return n-r}return r}_setEndings(e,n,i){const r=this._interpolantSettings;i?(r.endingStart=Pa,r.endingEnd=Pa):(e?r.endingStart=this.zeroSlopeAtStart?Pa:Ra:r.endingStart=Mc,n?r.endingEnd=this.zeroSlopeAtEnd?Pa:Ra:r.endingEnd=Mc)}_scheduleFading(e,n,i){const r=this._mixer,s=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,l[0]=n,o[1]=s+e,l[1]=i,this}}const B5=new Float32Array(1);class z5 extends Jr{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,a=e._propertyBindings,o=e._interpolants,l=i.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let d=0;d!==s;++d){const h=r[d],f=h.name;let m=c[f];if(m!==void 0)++m.referenceCount,a[d]=m;else{if(m=a[d],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,l,f));continue}const v=n&&n._propertyBindings[d].binding.parsedPath;m=new yT(Nt.create(i,f,v),h.ValueTypeName,h.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,f),a[d]=m}o[d].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,i){const r=this._actions,s=this._actionsByClip;let a=s[n];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const n=this._actions,i=n[n.length-1],r=e._cacheIndex;i._cacheIndex=r,n[r]=i,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],l=o.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const d=o.actionByRoot,h=(e._localRoot||this._root).uuid;delete d[h],l.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackAction(e){const n=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_addInactiveBinding(e,n,i){const r=this._bindingsByRootAndName,s=this._bindings;let a=r[n];a===void 0&&(a={},r[n]=a),a[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,a=this._bindingsByRootAndName,o=a[r],l=n[n.length-1],u=e._cacheIndex;l._cacheIndex=u,n[u]=l,n.pop(),delete o[s],Object.keys(o).length===0&&delete a[r]}_lendBinding(e){const n=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackBinding(e){const n=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let i=e[n];return i===void 0&&(i=new qg(new Float32Array(2),new Float32Array(2),1,B5),i.__cacheIndex=n,e[n]=i),i}_takeBackControlInterpolant(e){const n=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=n[r];e.__cacheIndex=r,n[r]=e,s.__cacheIndex=i,n[i]=s}clipAction(e,n,i){const r=n||this._root,s=r.uuid;let a=typeof e=="string"?Oc.findByName(r,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let u=null;if(i===void 0&&(a!==null?i=a.blendMode:i=Af),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===i)return d;u=l.knownActions[0],a===null&&(a=u._clip)}if(a===null)return null;const c=new U5(this,a,n,i);return this._bindAction(c,u),this._addInactiveAction(c,o,s),c}existingAction(e,n){const i=n||this._root,r=i.uuid,s=typeof e=="string"?Oc.findByName(i,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let i=n-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const n=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let u=0;u!==i;++u)n[u]._update(r,e,s,a);const o=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)o[u].apply(a);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const a=s.knownActions;for(let o=0,l=a.length;o!==l;++o){const u=a[o];this._deactivateAction(u);const c=u._cacheIndex,d=n[n.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,d._cacheIndex=c,n[c]=d,n.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(e){const n=e.uuid,i=this._actionsByClip;for(const a in i){const o=i[a].actionByRoot,l=o[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[n];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,n){const i=this.existingAction(e,n);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class t0{constructor(e){this.value=e}clone(){return new t0(this.value.clone===void 0?this.value:this.value.clone())}}let V5=0;class H5 extends Jr{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:V5++}),this.name="",this.usage=Tc,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let i=0,r=n.length;i<r;i++)this.uniforms.push(n[i].clone());return this}clone(){return new this.constructor().copy(this)}}class G5 extends Ff{constructor(e,n,i=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class W5{constructor(e,n,i,r,s){this.isGLBufferAttribute=!0,this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class $5{constructor(e,n,i=0,r=1/0){this.ray=new Wc(e,n),this.near=i,this.far=r,this.camera=null,this.layers=new Pf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,i=[]){return Pv(e,this,i,n),i.sort(_w),i}intersectObjects(e,n=!0,i=[]){for(let r=0,s=e.length;r<s;r++)Pv(e[r],this,i,n);return i.sort(_w),i}}function _w(t,e){return t.distance-e.distance}function Pv(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),i===!0){const r=t.children;for(let s=0,a=r.length;s<a;s++)Pv(r[s],e,n,!0)}}class X5{constructor(e=1,n=0,i=0){return this.radius=e,this.phi=n,this.theta=i,this}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(gn(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Y5{constructor(e=1,n=0,i=0){return this.radius=e,this.theta=n,this.y=i,this}set(e,n,i){return this.radius=e,this.theta=n,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=n,this}clone(){return new this.constructor().copy(this)}}const Sw=new ke;class q5{constructor(e=new ke(1/0,1/0),n=new ke(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=Sw.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Sw.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Mw=new q,rh=new q;class Z5{constructor(e=new q,n=new q){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){Mw.subVectors(e,this.start),rh.subVectors(this.end,this.start);const i=rh.dot(rh);let s=rh.dot(Mw)/i;return n&&(s=gn(s,0,1)),s}closestPointToPoint(e,n,i){const r=this.closestPointToPointParameter(e,n);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Tw=new q;class j5 extends Ft{constructor(e,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const i=new xt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,l=32;a<l;a++,o++){const u=a/l*Math.PI*2,c=o/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}i.setAttribute("position",new ot(r,3));const s=new si({fog:!1,toneMapped:!1});this.cone=new Ar(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),Tw.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Tw),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ps=new q,sh=new wt,Xp=new wt;class K5 extends Ar{constructor(e){const n=bT(e),i=new xt,r=[],s=[],a=new it(0,0,1),o=new it(0,1,0);for(let u=0;u<n.length;u++){const c=n[u];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(a.r,a.g,a.b),s.push(o.r,o.g,o.b))}i.setAttribute("position",new ot(r,3)),i.setAttribute("color",new ot(s,3));const l=new si({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,i=this.geometry,r=i.getAttribute("position");Xp.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<n.length;s++){const o=n[s];o.parent&&o.parent.isBone&&(sh.multiplyMatrices(Xp,o.matrixWorld),ps.setFromMatrixPosition(sh),r.setXYZ(a,ps.x,ps.y,ps.z),sh.multiplyMatrices(Xp,o.parent.matrixWorld),ps.setFromMatrixPosition(sh),r.setXYZ(a+1,ps.x,ps.y,ps.z),a+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function bT(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,bT(t.children[n]));return e}class J5 extends Gn{constructor(e,n,i){const r=new gu(n,4,2),s=new ea({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.light.updateMatrixWorld(),this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Q5=new q,Ew=new it,xw=new it;class eH extends Ft{constructor(e,n,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;const r=new vu(n);r.rotateY(Math.PI*.5),this.material=new ea({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),a=new Float32Array(s.count*3);r.setAttribute("color",new Jt(a,3)),this.add(new Gn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");Ew.copy(this.light.color),xw.copy(this.light.groundColor);for(let i=0,r=n.count;i<r;i++){const s=i<r/2?Ew:xw;n.setXYZ(i,s.r,s.g,s.b)}n.needsUpdate=!0}e.lookAt(Q5.setFromMatrixPosition(this.light.matrixWorld).negate())}}class tH extends Ar{constructor(e=10,n=10,i=4473924,r=8947848){i=new it(i),r=new it(r);const s=n/2,a=e/n,o=e/2,l=[],u=[];for(let h=0,f=0,m=-o;h<=n;h++,m+=a){l.push(-o,0,m,o,0,m),l.push(m,0,-o,m,0,o);const v=h===s?i:r;v.toArray(u,f),f+=3,v.toArray(u,f),f+=3,v.toArray(u,f),f+=3,v.toArray(u,f),f+=3}const c=new xt;c.setAttribute("position",new ot(l,3)),c.setAttribute("color",new ot(u,3));const d=new si({vertexColors:!0,toneMapped:!1});super(c,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class nH extends Ar{constructor(e=10,n=16,i=8,r=64,s=4473924,a=8947848){s=new it(s),a=new it(a);const o=[],l=[];if(n>1)for(let d=0;d<n;d++){const h=d/n*(Math.PI*2),f=Math.sin(h)*e,m=Math.cos(h)*e;o.push(0,0,0),o.push(f,0,m);const v=d&1?s:a;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let d=0;d<i;d++){const h=d&1?s:a,f=e-e/i*d;for(let m=0;m<r;m++){let v=m/r*(Math.PI*2),g=Math.sin(v)*f,y=Math.cos(v)*f;o.push(g,0,y),l.push(h.r,h.g,h.b),v=(m+1)/r*(Math.PI*2),g=Math.sin(v)*f,y=Math.cos(v)*f,o.push(g,0,y),l.push(h.r,h.g,h.b)}}const u=new xt;u.setAttribute("position",new ot(o,3)),u.setAttribute("color",new ot(l,3));const c=new si({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Cw=new q,ah=new q,Aw=new q;class iH extends Ft{constructor(e,n,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,n===void 0&&(n=1);let r=new xt;r.setAttribute("position",new ot([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new si({fog:!1,toneMapped:!1});this.lightPlane=new js(r,s),this.add(this.lightPlane),r=new xt,r.setAttribute("position",new ot([0,0,0,0,0,1],3)),this.targetLine=new js(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Cw.setFromMatrixPosition(this.light.matrixWorld),ah.setFromMatrixPosition(this.light.target.matrixWorld),Aw.subVectors(ah,Cw),this.lightPlane.lookAt(ah),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ah),this.targetLine.scale.z=Aw.length()}}const oh=new q,un=new Lf;class rH extends Ar{constructor(e){const n=new xt,i=new si({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(m,v){l(m),l(v)}function l(m){r.push(0,0,0),s.push(0,0,0),a[m]===void 0&&(a[m]=[]),a[m].push(r.length/3-1)}n.setAttribute("position",new ot(r,3)),n.setAttribute("color",new ot(s,3)),super(n,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const u=new it(16755200),c=new it(16711680),d=new it(43775),h=new it(16777215),f=new it(3355443);this.setColors(u,c,d,h,f)}setColors(e,n,i,r,s){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,n.r,n.g,n.b),o.setXYZ(25,n.r,n.g,n.b),o.setXYZ(26,n.r,n.g,n.b),o.setXYZ(27,n.r,n.g,n.b),o.setXYZ(28,n.r,n.g,n.b),o.setXYZ(29,n.r,n.g,n.b),o.setXYZ(30,n.r,n.g,n.b),o.setXYZ(31,n.r,n.g,n.b),o.setXYZ(32,i.r,i.g,i.b),o.setXYZ(33,i.r,i.g,i.b),o.setXYZ(34,i.r,i.g,i.b),o.setXYZ(35,i.r,i.g,i.b),o.setXYZ(36,i.r,i.g,i.b),o.setXYZ(37,i.r,i.g,i.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,s.r,s.g,s.b),o.setXYZ(41,s.r,s.g,s.b),o.setXYZ(42,s.r,s.g,s.b),o.setXYZ(43,s.r,s.g,s.b),o.setXYZ(44,s.r,s.g,s.b),o.setXYZ(45,s.r,s.g,s.b),o.setXYZ(46,s.r,s.g,s.b),o.setXYZ(47,s.r,s.g,s.b),o.setXYZ(48,s.r,s.g,s.b),o.setXYZ(49,s.r,s.g,s.b),o.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,i=1,r=1;un.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),mn("c",n,e,un,0,0,-1),mn("t",n,e,un,0,0,1),mn("n1",n,e,un,-i,-r,-1),mn("n2",n,e,un,i,-r,-1),mn("n3",n,e,un,-i,r,-1),mn("n4",n,e,un,i,r,-1),mn("f1",n,e,un,-i,-r,1),mn("f2",n,e,un,i,-r,1),mn("f3",n,e,un,-i,r,1),mn("f4",n,e,un,i,r,1),mn("u1",n,e,un,i*.7,r*1.1,-1),mn("u2",n,e,un,-i*.7,r*1.1,-1),mn("u3",n,e,un,0,r*2,-1),mn("cf1",n,e,un,-i,0,1),mn("cf2",n,e,un,i,0,1),mn("cf3",n,e,un,0,-r,1),mn("cf4",n,e,un,0,r,1),mn("cn1",n,e,un,-i,0,-1),mn("cn2",n,e,un,i,0,-1),mn("cn3",n,e,un,0,-r,-1),mn("cn4",n,e,un,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function mn(t,e,n,i,r,s,a){oh.set(r,s,a).unproject(i);const o=e[t];if(o!==void 0){const l=n.getAttribute("position");for(let u=0,c=o.length;u<c;u++)l.setXYZ(o[u],oh.x,oh.y,oh.z)}}const lh=new fo;class sH extends Ar{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new xt;s.setIndex(new Jt(i,1)),s.setAttribute("position",new Jt(r,3)),super(s,new si({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&lh.setFromObject(this.object),lh.isEmpty())return;const n=lh.min,i=lh.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=n.x,s[4]=i.y,s[5]=i.z,s[6]=n.x,s[7]=n.y,s[8]=i.z,s[9]=i.x,s[10]=n.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=n.z,s[15]=n.x,s[16]=i.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=i.x,s[22]=n.y,s[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class aH extends Ar{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new xt;s.setIndex(new Jt(i,1)),s.setAttribute("position",new ot(r,3)),super(s,new si({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class oH extends js{constructor(e,n=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new xt;a.setAttribute("position",new ot(s,3)),a.computeBoundingSphere(),super(a,new si({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new xt;l.setAttribute("position",new ot(o,3)),l.computeBoundingSphere(),this.add(new Gn(l,new ea({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Rw=new q;let uh,Yp;class lH extends Ft{constructor(e=new q(0,0,1),n=new q(0,0,0),i=1,r=16776960,s=i*.2,a=s*.2){super(),this.type="ArrowHelper",uh===void 0&&(uh=new xt,uh.setAttribute("position",new ot([0,0,0,0,1,0],3)),Yp=new mo(0,.5,1,5,1),Yp.translate(0,-.5,0)),this.position.copy(n),this.line=new js(uh,new si({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Gn(Yp,new ea({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Rw.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(Rw,n)}}setLength(e,n=e*.2,i=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(i,n,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class uH extends Ar{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new xt;r.setAttribute("position",new ot(n,3)),r.setAttribute("color",new ot(i,3));const s=new si({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,n,i){const r=new it,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(n),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class cH{constructor(){this.type="ShapePath",this.color=new it,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new Cc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,i,r){return this.currentPath.quadraticCurveTo(e,n,i,r),this}bezierCurveTo(e,n,i,r,s,a){return this.currentPath.bezierCurveTo(e,n,i,r,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(y){const S=[];for(let b=0,w=y.length;b<w;b++){const E=y[b],T=new Za;T.curves=E.curves,S.push(T)}return S}function i(y,S){const b=S.length;let w=!1;for(let E=b-1,T=0;T<b;E=T++){let I=S[E],_=S[T],R=_.x-I.x,L=_.y-I.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(I=S[T],R=-R,_=S[E],L=-L),y.y<I.y||y.y>_.y)continue;if(y.y===I.y){if(y.x===I.x)return!0}else{const k=L*(y.x-I.x)-R*(y.y-I.y);if(k===0)return!0;if(k<0)continue;w=!w}}else{if(y.y!==I.y)continue;if(_.x<=y.x&&y.x<=I.x||I.x<=y.x&&y.x<=_.x)return!0}}return w}const r=wr.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,o,l;const u=[];if(s.length===1)return o=s[0],l=new Za,l.curves=o.curves,u.push(l),u;let c=!r(s[0].getPoints());c=e?!c:c;const d=[],h=[];let f=[],m=0,v;h[m]=void 0,f[m]=[];for(let y=0,S=s.length;y<S;y++)o=s[y],v=o.getPoints(),a=r(v),a=e?!a:a,a?(!c&&h[m]&&m++,h[m]={s:new Za,p:v},h[m].s.curves=o.curves,c&&m++,f[m]=[]):f[m].push({h:o,p:v[0]});if(!h[0])return n(s);if(h.length>1){let y=!1,S=0;for(let b=0,w=h.length;b<w;b++)d[b]=[];for(let b=0,w=h.length;b<w;b++){const E=f[b];for(let T=0;T<E.length;T++){const I=E[T];let _=!0;for(let R=0;R<h.length;R++)i(I.p,h[R].p)&&(b!==R&&S++,_?(_=!1,d[R].push(I)):y=!0);_&&d[b].push(I)}}S>0&&y===!1&&(f=d)}let g;for(let y=0,S=h.length;y<S;y++){l=h[y].s,u.push(l),g=f[y];for(let b=0,w=g.length;b<w;b++)l.holes.push(g[b].h)}return u}}const zr=dH();function dH(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(i[l]=1024>>-u-14,i[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(i[l]=u+15<<10,i[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;(u&8388608)===0;)u<<=1,c-=8388608;u&=-8388609,c+=947912704,s[l]=u|c}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}function hH(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=gn(t,-65504,65504),zr.floatView[0]=t;const e=zr.uint32View[0],n=e>>23&511;return zr.baseTable[n]+((e&8388607)>>zr.shiftTable[n])}function fH(t){const e=t>>10;return zr.uint32View[0]=zr.mantissaTable[zr.offsetTable[e]+(t&1023)]+zr.exponentTable[e],zr.floatView[0]}var pH=Object.freeze({__proto__:null,toHalfFloat:hH,fromHalfFloat:fH});function mH(){console.error("THREE.ImmediateRenderObject has been removed.")}class vH extends Vi{constructor(e,n,i){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,n,i),this.samples=4}}class gH extends Gc{constructor(e,n,i,r){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,n,i,r)}}class yH extends Rf{constructor(e,n,i,r){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,n,i,r)}}class bH extends ta{constructor(e,n,i,r,s,a){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,n,i,r,s,a)}}class wH extends Xc{constructor(e,n,i,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,n,i,r)}}class _H extends Yc{constructor(e,n,i,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,n,i,r)}}class SH extends qc{constructor(e,n,i,r,s,a,o){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,n,i,r,s,a,o)}}class MH extends mo{constructor(e,n,i,r,s,a,o,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,n,i,r,s,a,o,l)}}class TH extends Zc{constructor(e,n){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,n)}}class EH extends jc{constructor(e,n){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,n)}}class xH extends Kc{constructor(e,n){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,n)}}class CH extends mu{constructor(e,n,i,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,n,i,r)}}class AH extends vu{constructor(e,n){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,n)}}class RH extends fu{constructor(e,n,i,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,n,i,r)}}class PH extends Qr{constructor(e,n,i,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,n,i,r)}}class LH extends Jc{constructor(e,n,i,r,s,a){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,n,i,r,s,a)}}class IH extends Qc{constructor(e,n){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,n)}}class OH extends gu{constructor(e,n,i,r,s,a,o){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,n,i,r,s,a,o)}}class DH extends ed{constructor(e,n){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,n)}}class NH extends td{constructor(e,n,i,r,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,n,i,r,s)}}class kH extends nd{constructor(e,n,i,r,s,a){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,n,i,r,s,a)}}class FH extends id{constructor(e,n,i,r,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,n,i,r,s)}}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:xf}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=xf);O.ACESFilmicToneMapping=GS;O.AddEquation=xa;O.AddOperation=BS;O.AdditiveAnimationBlendMode=Cg;O.AdditiveBlending=Zm;O.AlphaFormat=jS;O.AlwaysDepth=IS;O.AlwaysStencilFunc=hM;O.AmbientLight=dT;O.AmbientLightProbe=_5;O.AnimationClip=Oc;O.AnimationLoader=l5;O.AnimationMixer=z5;O.AnimationObjectGroup=F5;O.AnimationUtils=r5;O.ArcCurve=FM;O.ArrayCamera=EM;O.ArrowHelper=lH;O.Audio=gT;O.AudioAnalyser=C5;O.AudioContext=Jg;O.AudioListener=T5;O.AudioLoader=b5;O.AxesHelper=uH;O.BackSide=Ei;O.BasicDepthPacking=uM;O.BasicShadowMap=Pk;O.Bone=kg;O.BooleanKeyframeTrack=vo;O.Box2=q5;O.Box3=fo;O.Box3Helper=aH;O.BoxBufferGeometry=bH;O.BoxGeometry=ta;O.BoxHelper=sH;O.BufferAttribute=Jt;O.BufferGeometry=xt;O.BufferGeometryLoader=mT;O.ByteType=$S;O.Cache=lo;O.Camera=Lf;O.CameraHelper=rH;O.CanvasTexture=A4;O.CapsuleBufferGeometry=wH;O.CapsuleGeometry=Xc;O.CatmullRomCurve3=UM;O.CineonToneMapping=HS;O.CircleBufferGeometry=_H;O.CircleGeometry=Yc;O.ClampToEdgeWrapping=qn;O.Clock=vT;O.Color=it;O.ColorKeyframeTrack=Zg;O.ColorManagement=Oi;O.CompressedArrayTexture=C4;O.CompressedTexture=Ug;O.CompressedTextureLoader=u5;O.ConeBufferGeometry=SH;O.ConeGeometry=qc;O.CubeCamera=gM;O.CubeReflectionMapping=Xs;O.CubeRefractionMapping=Ys;O.CubeTexture=$c;O.CubeTextureLoader=c5;O.CubeUVReflectionMapping=du;O.CubicBezierCurve=zg;O.CubicBezierCurve3=BM;O.CubicInterpolant=iT;O.CullFaceBack=qm;O.CullFaceFront=gS;O.CullFaceFrontBack=Rk;O.CullFaceNone=vS;O.Curve=ur;O.CurvePath=VM;O.CustomBlending=bS;O.CustomToneMapping=WS;O.CylinderBufferGeometry=MH;O.CylinderGeometry=mo;O.Cylindrical=Y5;O.Data3DTexture=Rf;O.DataArrayTexture=Gc;O.DataTexture=ql;O.DataTexture2DArray=gH;O.DataTexture3D=yH;O.DataTextureLoader=d5;O.DataUtils=pH;O.DecrementStencilOp=Hk;O.DecrementWrapStencilOp=Wk;O.DefaultLoadingManager=aT;O.DepthFormat=zs;O.DepthStencilFormat=so;O.DepthTexture=xM;O.DirectionalLight=cT;O.DirectionalLightHelper=iH;O.DiscreteInterpolant=rT;O.DodecahedronBufferGeometry=TH;O.DodecahedronGeometry=Zc;O.DoubleSide=Hr;O.DstAlphaFactor=xS;O.DstColorFactor=AS;O.DynamicCopyUsage=sF;O.DynamicDrawUsage=Qk;O.DynamicReadUsage=nF;O.EdgesGeometry=HM;O.EllipseCurve=Bf;O.EqualDepth=DS;O.EqualStencilFunc=qk;O.EquirectangularReflectionMapping=gc;O.EquirectangularRefractionMapping=yc;O.Euler=hu;O.EventDispatcher=Jr;O.ExtrudeBufferGeometry=EH;O.ExtrudeGeometry=jc;O.FileLoader=jr;O.Float16BufferAttribute=zF;O.Float32BufferAttribute=ot;O.Float64BufferAttribute=VF;O.FloatType=Gr;O.Fog=kf;O.FogExp2=Nf;O.FramebufferTexture=x4;O.FrontSide=ro;O.Frustum=If;O.GLBufferAttribute=W5;O.GLSL1=oF;O.GLSL3=_v;O.GreaterDepth=kS;O.GreaterEqualDepth=NS;O.GreaterEqualStencilFunc=Jk;O.GreaterStencilFunc=jk;O.GridHelper=tH;O.Group=Qo;O.HalfFloatType=su;O.HemisphereLight=oT;O.HemisphereLightHelper=eH;O.HemisphereLightProbe=w5;O.IcosahedronBufferGeometry=xH;O.IcosahedronGeometry=Kc;O.ImageBitmapLoader=y5;O.ImageLoader=Dc;O.ImageUtils=Rg;O.ImmediateRenderObject=mH;O.IncrementStencilOp=Vk;O.IncrementWrapStencilOp=Gk;O.InstancedBufferAttribute=ou;O.InstancedBufferGeometry=pT;O.InstancedInterleavedBuffer=G5;O.InstancedMesh=DM;O.Int16BufferAttribute=UF;O.Int32BufferAttribute=BF;O.Int8BufferAttribute=NF;O.IntType=YS;O.InterleavedBuffer=Ff;O.InterleavedBufferAttribute=ao;O.Interpolant=rd;O.InterpolateDiscrete=_c;O.InterpolateLinear=Sc;O.InterpolateSmooth=_h;O.InvertStencilOp=$k;O.KeepStencilOp=Sh;O.KeyframeTrack=cr;O.LOD=IM;O.LatheBufferGeometry=CH;O.LatheGeometry=mu;O.Layers=Pf;O.LessDepth=OS;O.LessEqualDepth=zh;O.LessEqualStencilFunc=Zk;O.LessStencilFunc=Yk;O.Light=na;O.LightProbe=Hf;O.Line=js;O.Line3=Z5;O.LineBasicMaterial=si;O.LineCurve=zf;O.LineCurve3=zM;O.LineDashedMaterial=tT;O.LineLoop=NM;O.LineSegments=Ar;O.LinearEncoding=Zs;O.LinearFilter=vn;O.LinearInterpolant=qg;O.LinearMipMapLinearFilter=Dk;O.LinearMipMapNearestFilter=Ok;O.LinearMipmapLinearFilter=ho;O.LinearMipmapNearestFilter=Eg;O.LinearSRGBColorSpace=Ps;O.LinearToneMapping=zS;O.Loader=Ai;O.LoaderUtils=Rv;O.LoadingManager=jg;O.LoopOnce=aM;O.LoopPingPong=lM;O.LoopRepeat=oM;O.LuminanceAlphaFormat=QS;O.LuminanceFormat=JS;O.MOUSE=Ck;O.Material=Jn;O.MaterialLoader=Gf;O.MathUtils=_F;O.Matrix3=di;O.Matrix4=wt;O.MaxEquation=Qm;O.Mesh=Gn;O.MeshBasicMaterial=ea;O.MeshDepthMaterial=Og;O.MeshDistanceMaterial=Dg;O.MeshLambertMaterial=QM;O.MeshMatcapMaterial=eT;O.MeshNormalMaterial=JM;O.MeshPhongMaterial=jM;O.MeshPhysicalMaterial=ZM;O.MeshStandardMaterial=$g;O.MeshToonMaterial=KM;O.MinEquation=Jm;O.MirroredRepeatWrapping=wc;O.MixOperation=US;O.MultiplyBlending=Km;O.MultiplyOperation=Hc;O.NearestFilter=Sn;O.NearestMipMapLinearFilter=Ik;O.NearestMipMapNearestFilter=Lk;O.NearestMipmapLinearFilter=Hh;O.NearestMipmapNearestFilter=Vh;O.NeverDepth=LS;O.NeverStencilFunc=Xk;O.NoBlending=Xr;O.NoColorSpace=Uk;O.NoToneMapping=br;O.NormalAnimationBlendMode=Af;O.NormalBlending=$a;O.NotEqualDepth=FS;O.NotEqualStencilFunc=Kk;O.NumberKeyframeTrack=Lc;O.Object3D=Ft;O.ObjectLoader=v5;O.ObjectSpaceNormalMap=dM;O.OctahedronBufferGeometry=AH;O.OctahedronGeometry=vu;O.OneFactor=MS;O.OneMinusDstAlphaFactor=CS;O.OneMinusDstColorFactor=RS;O.OneMinusSrcAlphaFactor=Tg;O.OneMinusSrcColorFactor=ES;O.OrthographicCamera=Of;O.PCFShadowMap=Sg;O.PCFSoftShadowMap=yS;O.PMREMGenerator=Mv;O.Path=Cc;O.PerspectiveCamera=Bn;O.Plane=_s;O.PlaneBufferGeometry=RH;O.PlaneGeometry=fu;O.PlaneHelper=oH;O.PointLight=uT;O.PointLightHelper=J5;O.Points=kM;O.PointsMaterial=Fg;O.PolarGridHelper=nH;O.PolyhedronBufferGeometry=PH;O.PolyhedronGeometry=Qr;O.PositionalAudio=x5;O.PropertyBinding=Nt;O.PropertyMixer=yT;O.QuadraticBezierCurve=Vg;O.QuadraticBezierCurve3=Hg;O.Quaternion=fi;O.QuaternionKeyframeTrack=yu;O.QuaternionLinearInterpolant=sT;O.REVISION=xf;O.RGBADepthPacking=cM;O.RGBAFormat=Si;O.RGBAIntegerFormat=rM;O.RGBA_ASTC_10x10_Format=gv;O.RGBA_ASTC_10x5_Format=pv;O.RGBA_ASTC_10x6_Format=mv;O.RGBA_ASTC_10x8_Format=vv;O.RGBA_ASTC_12x10_Format=yv;O.RGBA_ASTC_12x12_Format=bv;O.RGBA_ASTC_4x4_Format=av;O.RGBA_ASTC_5x4_Format=ov;O.RGBA_ASTC_5x5_Format=lv;O.RGBA_ASTC_6x5_Format=uv;O.RGBA_ASTC_6x6_Format=cv;O.RGBA_ASTC_8x5_Format=dv;O.RGBA_ASTC_8x6_Format=hv;O.RGBA_ASTC_8x8_Format=fv;O.RGBA_BPTC_Format=wv;O.RGBA_ETC2_EAC_Format=sv;O.RGBA_PVRTC_2BPPV1_Format=iv;O.RGBA_PVRTC_4BPPV1_Format=nv;O.RGBA_S3TC_DXT1_Format=yh;O.RGBA_S3TC_DXT3_Format=bh;O.RGBA_S3TC_DXT5_Format=wh;O.RGBFormat=KS;O.RGB_ETC1_Format=sM;O.RGB_ETC2_Format=rv;O.RGB_PVRTC_2BPPV1_Format=tv;O.RGB_PVRTC_4BPPV1_Format=ev;O.RGB_S3TC_DXT1_Format=gh;O.RGFormat=nM;O.RGIntegerFormat=iM;O.RawShaderMaterial=qM;O.Ray=Wc;O.Raycaster=$5;O.RectAreaLight=hT;O.RedFormat=eM;O.RedIntegerFormat=tM;O.ReinhardToneMapping=VS;O.RepeatWrapping=bc;O.ReplaceStencilOp=zk;O.ReverseSubtractEquation=_S;O.RingBufferGeometry=LH;O.RingGeometry=Jc;O.SRGBColorSpace=mr;O.Scene=RM;O.ShaderChunk=Et;O.ShaderLib=Qi;O.ShaderMaterial=xr;O.ShadowMaterial=YM;O.Shape=Za;O.ShapeBufferGeometry=IH;O.ShapeGeometry=Qc;O.ShapePath=cH;O.ShapeUtils=wr;O.ShortType=XS;O.Skeleton=Uf;O.SkeletonHelper=K5;O.SkinnedMesh=OM;O.Source=La;O.Sphere=po;O.SphereBufferGeometry=OH;O.SphereGeometry=gu;O.Spherical=X5;O.SphericalHarmonics3=fT;O.SplineCurve=Gg;O.SpotLight=lT;O.SpotLightHelper=j5;O.Sprite=LM;O.SpriteMaterial=Ng;O.SrcAlphaFactor=Mg;O.SrcAlphaSaturateFactor=PS;O.SrcColorFactor=TS;O.StaticCopyUsage=rF;O.StaticDrawUsage=Tc;O.StaticReadUsage=tF;O.StereoCamera=S5;O.StreamCopyUsage=aF;O.StreamDrawUsage=eF;O.StreamReadUsage=iF;O.StringKeyframeTrack=go;O.SubtractEquation=wS;O.SubtractiveBlending=jm;O.TOUCH=Ak;O.TangentSpaceNormalMap=Qs;O.TetrahedronBufferGeometry=DH;O.TetrahedronGeometry=ed;O.Texture=Rn;O.TextureLoader=h5;O.TorusBufferGeometry=NH;O.TorusGeometry=td;O.TorusKnotBufferGeometry=kH;O.TorusKnotGeometry=nd;O.Triangle=ki;O.TriangleFanDrawMode=Fk;O.TriangleStripDrawMode=kk;O.TrianglesDrawMode=Nk;O.TubeBufferGeometry=FH;O.TubeGeometry=id;O.UVMapping=Cf;O.Uint16BufferAttribute=Pg;O.Uint32BufferAttribute=Lg;O.Uint8BufferAttribute=kF;O.Uint8ClampedBufferAttribute=FF;O.Uniform=t0;O.UniformsGroup=H5;O.UniformsLib=Ye;O.UniformsUtils=vM;O.UnsignedByteType=qs;O.UnsignedInt248Type=Xa;O.UnsignedIntType=Rs;O.UnsignedShort4444Type=qS;O.UnsignedShort5551Type=ZS;O.UnsignedShortType=xg;O.VSMShadowMap=jo;O.Vector2=ke;O.Vector3=q;O.Vector4=Ht;O.VectorKeyframeTrack=Ic;O.VideoTexture=E4;O.WebGL1Renderer=AM;O.WebGL3DRenderTarget=EF;O.WebGLArrayRenderTarget=TF;O.WebGLCubeRenderTarget=yM;O.WebGLMultipleRenderTargets=xF;O.WebGLMultisampleRenderTarget=vH;O.WebGLRenderTarget=Vi;O.WebGLRenderer=CM;O.WebGLUtils=TM;O.WireframeGeometry=XM;O.WrapAroundEnding=Mc;O.ZeroCurvatureEnding=Ra;O.ZeroFactor=SS;O.ZeroSlopeEnding=Pa;O.ZeroStencilOp=Bk;O._SRGBAFormat=Gh;O.sRGBEncoding=an;var Lv={exports:{}};/*!
 * uevent (v2.2.0)
 * @copyright 2015-2022 Damien "Mistic" Sorel <contact@git.strangeplanet.fr>
 * @licence MIT
 */(function(t,e){(function(n,i){i(e)})(mS,function(n){var i=function(){return!0},r=function(){return!1},s=function(){function m(g,y,S){Object.defineProperties(this,{target:{get:function(){return g},set:function(){},enumerable:!0},type:{get:function(){return y},set:function(){},enumerable:!0},args:{get:function(){return S},set:function(){},enumerable:!0}}),this.isDefaultPrevented=r,this.isPropagationStopped=r}var v=m.prototype;return v.preventDefault=function(){this.isDefaultPrevented=i},v.stopPropagation=function(){this.isPropagationStopped=i},m}(),a=s,o=function(){function m(){}var v=m.prototype;return v.on=function(y,S){var b=this;if(this.__events=this.__events||{},typeof y=="object")for(var w in y)y.hasOwnProperty(w)&&(this.__events[w]=this.__events[w]||[],this.__events[w].push(y[w]));else y.split(" ").forEach(function(E){b.__events[E]=b.__events[E]||[],b.__events[E].push(S)});return this},v.off=function(y,S){var b=this;if(typeof y=="object"){for(var w in y)if(y.hasOwnProperty(w)){if(this.__events&&w in this.__events){var E=this.__events[w].indexOf(y[w]);E!==-1&&this.__events[w].splice(E,1)}if(this.__once&&w in this.__once){var T=this.__once[w].indexOf(y[w]);T!==-1&&this.__once[w].splice(T,1)}}}else y?y.split(" ").forEach(function(I){if(b.__events&&I in b.__events)if(S){var _=b.__events[I].indexOf(S);_!==-1&&b.__events[I].splice(_,1)}else b.__events[I].length=0;if(b.__once&&I in b.__once)if(S){var R=b.__once[I].indexOf(S);R!==-1&&b.__once[I].splice(R,1)}else b.__once[I].length=0}):(this.__events={},this.__once={});return this},v.once=function(y,S){var b=this;if(this.__once=this.__once||{},typeof y=="object")for(var w in y)y.hasOwnProperty(w)&&(this.__once[w]=this.__once[w]||[],this.__once[w].push(y[w]));else y.split(" ").forEach(function(E){b.__once[E]=b.__once[E]||[],b.__once[E].push(S)});return this},v.trigger=function(y){var S=Array.prototype.slice.call(arguments,1),b=new a(this,y,S);if(this.__events&&y in this.__events)for(var w=0,E=this.__events[y].length;w<E;w++){var T=this.__events[y][w];if(typeof T=="object"?T.handleEvent(b):T.call.apply(T,[this,b].concat(S)),b.isPropagationStopped())break}if(this.__once&&y in this.__once){for(var I=0,_=this.__once[y].length;I<_;I++){var R=this.__once[y][I];if(typeof R=="object"?R.handleEvent(b):R.call.apply(R,[this,b].concat(S)),b.isPropagationStopped())break}delete this.__once[y]}return b},v.change=function(y,S){var b=Array.prototype.slice.call(arguments,2),w=new a(this,y,b);if(w.value=S,this.__events&&y in this.__events)for(var E=0,T=this.__events[y].length;E<T;E++){var I=this.__events[y][E];if(typeof I=="object"?w.value=I.handleEvent(w):w.value=I.call.apply(I,[this,w,w.value].concat(b)),w.isPropagationStopped())break}return w.value},m}(),l=o;function u(m){return m=typeof m=="function"?m.prototype:m,["on","off","once","trigger","change"].forEach(function(v){m[v]=l.prototype[v]}),m}var c={EventEmitter:l,Event:a,mixin:u},d=c.EventEmitter,h=c.Event,f=c.mixin;n.Event=h,n.EventEmitter=d,n.default=c,n.mixin=f,Object.defineProperty(n,"__esModule",{value:!0})})})(Lv,Lv.exports);/*!
* Photo Sphere Viewer 4.8.0
* @copyright 2014-2015 Jrmy Heleine
* @copyright 2015-2022 Damien "Mistic" Sorel
* @licence MIT (https://opensource.org/licenses/MIT)
*/(function(t,e){(function(n,i){i(e,O,Lv.exports)})(mS,function(n,i,r){function s(P,x){for(var C=0;C<x.length;C++){var A=x[C];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(P,A.key,A)}}function a(P,x,C){return x&&s(P.prototype,x),C&&s(P,C),Object.defineProperty(P,"prototype",{writable:!1}),P}function o(){return o=Object.assign?Object.assign.bind():function(P){for(var x=1;x<arguments.length;x++){var C=arguments[x];for(var A in C)Object.prototype.hasOwnProperty.call(C,A)&&(P[A]=C[A])}return P},o.apply(this,arguments)}function l(P,x){P.prototype=Object.create(x.prototype),P.prototype.constructor=P,u(P,x)}function u(P,x){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,p){return A.__proto__=p,A},u(P,x)}function c(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}function d(P){this.message=P,"captureStackTrace"in Error?Error.captureStackTrace(this,d):this.stack=new Error().stack}d.prototype=Object.create(Error.prototype),d.prototype.name="PSVError",d.prototype.constructor=d;var h=function(){function P(C){this.psv=C}var x=P.prototype;return x.destroy=function(){delete this.psv},x.supportsTransition=function(A){return!1},x.supportsPreload=function(A){return!1},x.loadTexture=function(A,p,M){throw new d("loadTexture not implemented")},x.createMesh=function(A){throw new d("createMesh not implemented")},x.setTexture=function(A,p,M){throw new d("setTexture not implemented")},x.setTextureOpacity=function(A,p){throw new d("setTextureOpacity not implemented")},x.disposeTexture=function(A){throw new d("disposeTexture not implemented")},x.setOverlay=function(A,p,M){throw new d("setOverlay not implemented")},P.createOverlayMaterial=function(A){var p,M=A===void 0?{}:A,W=M.additionalUniforms,K=M.overrideVertexShader;return new i.ShaderMaterial({uniforms:o({},W,(p={},p[P.OVERLAY_UNIFORMS.panorama]={value:new i.Texture},p[P.OVERLAY_UNIFORMS.overlay]={value:new i.Texture},p[P.OVERLAY_UNIFORMS.globalOpacity]={value:1},p[P.OVERLAY_UNIFORMS.overlayOpacity]={value:1},p)),vertexShader:K||`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix *  modelViewMatrix * vec4( position, 1.0 );
}`,fragmentShader:`
uniform sampler2D `+P.OVERLAY_UNIFORMS.panorama+`;
uniform sampler2D `+P.OVERLAY_UNIFORMS.overlay+`;
uniform float `+P.OVERLAY_UNIFORMS.globalOpacity+`;
uniform float `+P.OVERLAY_UNIFORMS.overlayOpacity+`;

varying vec2 vUv;

void main() {
  vec4 tColor1 = texture2D( `+P.OVERLAY_UNIFORMS.panorama+`, vUv );
  vec4 tColor2 = texture2D( `+P.OVERLAY_UNIFORMS.overlay+`, vUv );
  gl_FragColor = vec4(
    mix( tColor1.rgb, tColor2.rgb, tColor2.a * `+P.OVERLAY_UNIFORMS.overlayOpacity+` ),
    `+P.OVERLAY_UNIFORMS.globalOpacity+`
  );
}`})},P}();h.id=null,h.supportsDownload=!1,h.supportsOverlay=!1,h.OVERLAY_UNIFORMS={panorama:"panorama",overlay:"overlay",globalOpacity:"globalOpacity",overlayOpacity:"overlayOpacity"};var f=1500,m=4,v=300,g=500,y=100,S=2e3,b=300,w=10,E="photoSphereViewer",T="psvSphere",I={ROTATE_LAT_UP:"rotateLatitudeUp",ROTATE_LAT_DOWN:"rotateLatitudeDown",ROTATE_LONG_RIGHT:"rotateLongitudeRight",ROTATE_LONG_LEFT:"rotateLongitudeLeft",ZOOM_IN:"zoomIn",ZOOM_OUT:"zoomOut",TOGGLE_AUTOROTATE:"toggleAutorotate"},_={AUTOROTATE:"autorotate",BEFORE_RENDER:"before-render",BEFORE_ROTATE:"before-rotate",CLICK:"click",CLOSE_PANEL:"close-panel",CONFIG_CHANGED:"config-changed",DOUBLE_CLICK:"dblclick",FULLSCREEN_UPDATED:"fullscreen-updated",HIDE_NOTIFICATION:"hide-notification",HIDE_OVERLAY:"hide-overlay",HIDE_TOOLTIP:"hide-tooltip",KEY_PRESS:"key-press",LOAD_PROGRESS:"load-progress",OPEN_PANEL:"open-panel",PANORAMA_LOADED:"panorama-loaded",POSITION_UPDATED:"position-updated",READY:"ready",RENDER:"render",SHOW_NOTIFICATION:"show-notification",SHOW_OVERLAY:"show-overlay",SHOW_TOOLTIP:"show-tooltip",SIZE_UPDATED:"size-updated",STOP_ALL:"stop-all",ZOOM_UPDATED:"zoom-updated"},R={GET_ANIMATE_POSITION:"get-animate-position",GET_ROTATE_POSITION:"get-rotate-position"},L={ENTER_OBJECT:"enter-object",HOVER_OBJECT:"hover-object",LEAVE_OBJECT:"leave-object"},k={MENU:"menu",TWO_FINGERS:"twoFingers",CTRL_ZOOM:"ctrlZoom",ERROR:"error",DESCRIPTION:"description"},F={linear:function(x){return x},inQuad:function(x){return x*x},outQuad:function(x){return x*(2-x)},inOutQuad:function(x){return x<.5?2*x*x:-1+(4-2*x)*x},inCubic:function(x){return x*x*x},outCubic:function(x){return--x*x*x+1},inOutCubic:function(x){return x<.5?4*x*x*x:(x-1)*(2*x-2)*(2*x-2)+1},inQuart:function(x){return x*x*x*x},outQuart:function(x){return 1- --x*x*x*x},inOutQuart:function(x){return x<.5?8*x*x*x*x:1-8*--x*x*x*x},inQuint:function(x){return x*x*x*x*x},outQuint:function(x){return 1+--x*x*x*x*x},inOutQuint:function(x){return x<.5?16*x*x*x*x*x:1+16*--x*x*x*x*x},inSine:function(x){return 1-Math.cos(x*(Math.PI/2))},outSine:function(x){return Math.sin(x*(Math.PI/2))},inOutSine:function(x){return .5-.5*Math.cos(Math.PI*x)},inExpo:function(x){return Math.pow(2,10*(x-1))},outExpo:function(x){return 1-Math.pow(2,-10*x)},inOutExpo:function(x){return(x=x*2-1)<0?.5*Math.pow(2,10*x):1-.5*Math.pow(2,-10*x)},inCirc:function(x){return 1-Math.sqrt(1-x*x)},outCirc:function(x){return Math.sqrt(1-(x-1)*(x-1))},inOutCirc:function(x){return(x*=2)<1?.5-.5*Math.sqrt(1-x*x):.5+.5*Math.sqrt(1-(x-=2)*x)}},G={Enter:"Enter",Control:"Control",Escape:"Escape",Space:" ",PageUp:"PageUp",PageDown:"PageDown",ArrowLeft:"ArrowLeft",ArrowUp:"ArrowUp",ArrowRight:"ArrowRight",ArrowDown:"ArrowDown",Delete:"Delete",Plus:"+",Minus:"-"},H=Object.freeze({__proto__:null,DEFAULT_TRANSITION:f,MOVE_THRESHOLD:m,DBLCLICK_DELAY:v,LONGTOUCH_DELAY:g,TWOFINGERSOVERLAY_DELAY:y,CTRLZOOM_TIMEOUT:S,INERTIA_WINDOW:b,SPHERE_RADIUS:w,VIEWER_DATA:E,MESH_USER_DATA:T,ACTIONS:I,EVENTS:_,CHANGE_EVENTS:R,OBJECT_EVENTS:L,IDS:k,EASINGS:F,KEY_CODES:G}),J=E+"_touchSupport",V={loaded:!1,pixelRatio:1,isWebGLSupported:!1,isTouchEnabled:null,maxTextureWidth:0,mouseWheelEvent:null,fullscreenEvent:null};V.load=function(){if(!V.loaded){var P=j();V.loaded=!0,V.pixelRatio=window.devicePixelRatio||1,V.isWebGLSupported=P!=null,V.isTouchEnabled=Z(),V.maxTextureWidth=z(P),V.mouseWheelEvent=Q(),V.fullscreenEvent=Ee()}};var re=null;V.getMaxCanvasWidth=function(){return re===null&&(re=ee(V.maxTextureWidth)),re};function j(){var P=document.createElement("canvas"),x=["webgl","experimental-webgl","moz-webgl","webkit-3d"],C=null;return P.getContext&&x.some(function(A){try{return C=P.getContext(A),C!==null}catch{return!1}})?C:null}function Z(){var P="ontouchstart"in window||navigator.maxTouchPoints>0;J in localStorage&&(P=localStorage[J]==="true");var x=new Promise(function(C){var A,p=function(){A(),localStorage[J]=!1,C(!1)},M=function(){A(),localStorage[J]=!0,C(!0)},W=function(){A(),localStorage[J]=P,C(P)};window.addEventListener("mousedown",p,!1),window.addEventListener("touchstart",M,!1);var K=setTimeout(W,1e4);A=function(){window.removeEventListener("mousedown",p),window.removeEventListener("touchstart",M),clearTimeout(K)}});return{initial:P,promise:x}}function z(P){return P!==null?P.getParameter(P.MAX_TEXTURE_SIZE):0}function ee(P){var x=document.createElement("canvas"),C=x.getContext("2d");for(x.width=P,x.height=P/2;x.width>1024;){C.fillStyle="white",C.fillRect(0,0,1,1);try{if(C.getImageData(0,0,1,1).data[0]>0)return x.width}catch{}x.width/=2,x.height/=2}throw new d("Unable to detect system capabilities")}function Q(){return"onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll"}var fe={exitFullscreen:"fullscreenchange",webkitExitFullscreen:"webkitfullscreenchange",mozCancelFullScreen:"mozfullscreenchange",msExitFullscreen:"MSFullscreenChange"};function Ee(){var P=Object.keys(fe).filter(function(x){return x in document});return P.length?fe[P[0]]:null}function ne(P,x,C){C===void 0?P.classList.toggle(x):C?P.classList.add(x):C||P.classList.remove(x)}function X(P,x){var C;(C=P.classList).add.apply(C,x.split(" "))}function _e(P,x){var C;(C=P.classList).remove.apply(C,x.split(" "))}function Ae(P,x){var C=P;do{if(C===x)return!0;C=C.parentNode}while(C);return!1}function ze(P,x){if(!(P!=null&&P.matches))return null;var C=P;do{if(C.matches(x))return C;C=C instanceof SVGElement?C.parentNode:C.parentElement}while(C);return null}function Ie(P){for(var x=0,C=0,A=P;A;)x+=A.offsetLeft-A.scrollLeft+A.clientLeft,C+=A.offsetTop-A.scrollTop+A.clientTop,A=A.offsetParent;return{left:x,top:C}}function Ge(P){return(document.fullscreenElement||document.webkitFullscreenElement)===P}function N(P){(P.requestFullscreen||P.webkitRequestFullscreen).call(P)}function B(){(document.exitFullscreen||document.webkitExitFullscreen).call(document)}function te(P,x){return window.getComputedStyle(P,null)[x]}function ue(P){var x=10,C=40,A=800,p=0,M=0,W=0,K=0;return"detail"in P&&(M=P.detail),"wheelDelta"in P&&(M=-P.wheelDelta/120),"wheelDeltaY"in P&&(M=-P.wheelDeltaY/120),"wheelDeltaX"in P&&(p=-P.wheelDeltaX/120),"axis"in P&&P.axis===P.HORIZONTAL_AXIS&&(p=M,M=0),W=p*x,K=M*x,"deltaY"in P&&(K=P.deltaY),"deltaX"in P&&(W=P.deltaX),(W||K)&&P.deltaMode&&(P.deltaMode===1?(W*=C,K*=C):(W*=A,K*=A)),W&&!p&&(p=W<1?-1:1),K&&!M&&(M=K<1?-1:1),{spinX:p,spinY:M,pixelX:W,pixelY:K}}function ce(P,x,C){return i.MathUtils.clamp(P,x,C)}function ae(P,x){var C=P%x;return C<0&&(C+=x),C}function me(P){return i.MathUtils.isPowerOfTwo(P)}function le(P){return P.reduce(function(x,C){return x+C},0)}function Se(P,x){return Math.sqrt(Math.pow(P.x-x.x,2)+Math.pow(P.y-x.y,2))}function ve(P,x){var C=[0,Math.PI*2,-Math.PI*2];return C.reduce(function(A,p){var M=x-P+p;return Math.abs(M)<Math.abs(A)?M:A},1/0)}function U(P,x){return Math.acos(Math.cos(P.latitude)*Math.cos(x.latitude)*Math.cos(P.longitude-x.longitude)+Math.sin(P.latitude)*Math.sin(x.latitude))}function D(P,x){var C=P[0],A=P[1],p=x[0],M=x[1],W=(p-C)*Math.cos((A+M)/2),K=M-A;return Math.sqrt(W*W+K*K)}function se(P){return P.replace(/[A-Z](?:(?=[^A-Z])|[A-Z]*(?=[A-Z][^A-Z]|$))/g,function(x,C){return(C>0?"-":"")+x.toLowerCase()})}function be(P,x){var C,A,p,M,W=0,K=function(){W=Date.now(),M=void 0,p=P.apply(C,A),M||(C=A=null)};return function(){var Ce=Date.now();W||(W=Ce);var De=x-(Ce-W);return C=this,A=arguments,De<=0||De>x?(M&&(clearTimeout(M),M=void 0),W=Ce,p=P.apply(C,A),M||(C=A=null)):M||(M=setTimeout(K,De)),p}}function Re(P){if(typeof P=="object"&&P!==null){if(typeof Object.getPrototypeOf=="function"){var x=Object.getPrototypeOf(P);return x===Object.prototype||x===null}return Object.prototype.toString.call(P)==="[object Object]"}return!1}function Fe(P,x){var C=x;return function A(p,M){return Array.isArray(M)?(!p||!Array.isArray(p)?p=[]:p.length=0,M.forEach(function(W,K){p[K]=A(null,W)})):typeof M=="object"?((!p||Array.isArray(p))&&(p={}),Object.keys(M).forEach(function(W){typeof M[W]!="object"||!M[W]||!Re(M[W])?p[W]=M[W]:M[W]!=C&&(p[W]?A(p[W],M[W]):p[W]=A(null,M[W]))})):p=M,p}(P,x)}function Xe(P){return Fe(null,P)}function Ve(P){return!P||Object.keys(P).length===0&&P.constructor===Object}function we(P,x){Object.keys(P).forEach(function(C){x(P[C],C)})}function rt(P){return P==null}function st(){for(var P=arguments.length,x=new Array(P),C=0;C<P;C++)x[C]=arguments[C];for(var A=0,p=x;A<p.length;A++){var M=p[A];if(!rt(M))return M}}function nt(P,x){if(P===x)return!0;if(dt(P)&&dt(x)){if(Object.keys(P).length!==Object.keys(x).length)return!1;for(var C=0,A=Object.keys(P);C<A.length;C++){var p=A[C];if(!nt(P[p],x[p]))return!1}return!0}else return!1}function dt(P){return typeof P=="object"&&P!=null}function Ze(P,x){if(P)for(var C=0,A=[["_",P]].concat(Object.entries(P));C<A.length;C++){var p=A[C],M=p[1];if(M.prototype instanceof x)return M}return null}function mt(){var P=new Error("Loading was aborted.");return P.name="AbortError",P}function zt(P){return(P==null?void 0:P.name)==="AbortError"}function Ut(P){console.warn("PhotoSphereViewer: "+P)}function oe(P){return[["x","y"],["longitude","latitude"]].some(function(x){var C=x[0],A=x[1];return P[C]!==void 0&&P[A]!==void 0})}function xe(P,x){var C=P.match("<GPano:"+x+">(.*)</GPano:"+x+">");if(C!==null){var A=parseInt(C[1],10);return isNaN(A)?null:A}if(C=P.match("GPano:"+x+'="(.*?)"'),C!==null){var p=parseInt(C[1],10);return isNaN(p)?null:p}return null}var He={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"};function et(P){if(!P)return{x:.5,y:.5};if(typeof P=="object")return P;var x=P.toLocaleLowerCase().split(" ").slice(0,2);x.length===1&&(He[x[0]]!==void 0?x=[x[0],"center"]:x=[x[0],x[0]]);var C=x[1]!=="left"&&x[1]!=="right"&&x[0]!=="top"&&x[0]!=="bottom";x=x.map(function(p){return He[p]||p}),C||x.reverse();var A=x.join(" ").match(/^([0-9.]+)% ([0-9.]+)%$/);return A?{x:parseFloat(A[1])/100,y:parseFloat(A[2])/100}:{x:.5,y:.5}}var lt=["left","center","right"],Pt=["top","center","bottom"],pn=[].concat(lt,Pt),Gt="center";function dr(P,x){var C=x===void 0?{allowCenter:!0,cssOrder:!0}:x,A=C.allowCenter,p=C.cssOrder;return P?(typeof P=="string"&&(P=P.split(" ")),P.length===1&&(P[0]===Gt?P=[Gt,Gt]:lt.indexOf(P[0])!==-1?P=[Gt,P[0]]:Pt.indexOf(P[0])!==-1&&(P=[P[0],Gt])),P.length!==2||pn.indexOf(P[0])===-1||pn.indexOf(P[1])===-1?(Ut("Unparsable position "+P),null):!A&&P[0]===Gt&&P[1]===Gt?(Ut("Invalid position center center"),null):(p&&!Wt(P)&&(P=[P[1],P[0]]),P[1]===Gt&&lt.indexOf(P[0])!==-1&&(P=[Gt,P[0]]),P[0]===Gt&&Pt.indexOf(P[1])!==-1&&(P=[P[1],Gt]),P)):null}function Wt(P){return Pt.indexOf(P[0])!==-1&&lt.indexOf(P[1])!==-1}function vi(P){var x;if(typeof P=="string"){var C=P.toString().trim(),A=parseFloat(C.replace(/^(-?[0-9]+(?:\.[0-9]*)?).*$/,"$1")),p=C.replace(/^-?[0-9]+(?:\.[0-9]*)?(.*)$/,"$1").trim();switch(p.match(/(pm|per minute)$/)&&(A/=60),p){case"dpm":case"degrees per minute":case"dps":case"degrees per second":x=i.MathUtils.degToRad(A);break;case"rdpm":case"radians per minute":case"rdps":case"radians per second":x=A;break;case"rpm":case"revolutions per minute":case"rps":case"revolutions per second":x=A*Math.PI*2;break;default:throw new d('Unknown speed unit "'+p+'"')}}else x=P;return x}function sn(P,x,C){x===void 0&&(x=!1),C===void 0&&(C=x);var A;if(typeof P=="string"){var p=P.toLowerCase().trim().match(/^(-?[0-9]+(?:\.[0-9]*)?)(.*)$/);if(!p)throw new d('Unknown angle "'+P+'"');var M=parseFloat(p[1]),W=p[2];if(W)switch(W){case"deg":case"degs":A=i.MathUtils.degToRad(M);break;case"rad":case"rads":A=M;break;default:throw new d('Unknown angle unit "'+W+'"')}else A=M}else if(typeof P=="number"&&!isNaN(P))A=P;else throw new d('Unknown angle "'+P+'"');return A=ae(x?A+Math.PI:A,Math.PI*2),x?i.MathUtils.clamp(A-Math.PI,-Math.PI/(C?2:1),Math.PI/(C?2:1)):A}function yo(P){var x=new i.Texture(P);return x.needsUpdate=!0,x.minFilter=i.LinearFilter,x.generateMipmaps=!1,x}var sd=new i.Quaternion;function bu(P,x){sd.setFromEuler(x).invert(),P.applyQuaternion(sd)}var ia=function(){function P(C){var A=this;this.__callbacks=[],C?((!C.easing||typeof C.easing=="string")&&(C.easing=F[C.easing||"linear"]),this.__start=null,this.options=C,C.delay?this.__delayTimeout=setTimeout(function(){A.__delayTimeout=null,A.__animationFrame=window.requestAnimationFrame(function(p){return A.__run(p)})},C.delay):this.__animationFrame=window.requestAnimationFrame(function(p){return A.__run(p)})):this.__resolved=!0}var x=P.prototype;return x.__run=function(A){var p=this;if(!this.__cancelled){this.__start===null&&(this.__start=A);var M=(A-this.__start)/this.options.duration,W={};M<1?(we(this.options.properties,function(K,Ce){K&&(W[Ce]=K.start+(K.end-K.start)*p.options.easing(M))}),this.options.onTick(W,M),this.__animationFrame=window.requestAnimationFrame(function(K){return p.__run(K)})):(we(this.options.properties,function(K,Ce){K&&(W[Ce]=K.end)}),this.options.onTick(W,1),this.__animationFrame=window.requestAnimationFrame(function(){p.__resolved=!0,p.__resolve(!0)}))}},x.__resolve=function(A){this.__callbacks.forEach(function(p){return p(A)}),this.__callbacks.length=0},x.then=function(A){var p=this;return this.__resolved||this.__cancelled?Promise.resolve(this.__resolved).then(A):new Promise(function(M){p.__callbacks.push(M)}).then(A)},x.cancel=function(){!this.__cancelled&&!this.__resolved&&(this.__cancelled=!0,this.__resolve(!1),this.__delayTimeout&&(window.clearTimeout(this.__delayTimeout),this.__delayTimeout=null),this.__animationFrame&&(window.cancelAnimationFrame(this.__animationFrame),this.__animationFrame=null))},P}(),Y=function(){function P(C,A,p,M,W){if(A===void 0&&(A=0),p===void 0&&(p=-1/0),M===void 0&&(M=1/0),W===void 0&&(W=!1),this.fn=C,this.mode=P.STOP,this.speed=0,this.speedMult=1,this.currentSpeed=0,this.target=0,this.current=A,this.min=p,this.max=M,this.loopValue=W,W&&p!==0)throw new d("invalid config");this.fn&&this.fn(A)}var x=P.prototype;return x.setSpeed=function(A){this.speed=A},x.goto=function(A,p){p===void 0&&(p=1),this.mode=P.POSITION,this.target=this.loopValue?ae(A,this.max):i.MathUtils.clamp(A,this.min,this.max),this.speedMult=p},x.step=function(A,p){p===void 0&&(p=1),this.mode!==P.POSITION&&(this.target=this.current),this.goto(this.target+A,p)},x.roll=function(A,p){A===void 0&&(A=!1),p===void 0&&(p=1),this.mode=P.INFINITE,this.target=A?-1/0:1/0,this.speedMult=p},x.stop=function(){this.mode=P.STOP},x.setValue=function(A){return this.target=this.loopValue?ae(A,this.max):i.MathUtils.clamp(A,this.min,this.max),this.mode=P.STOP,this.target!==this.current?(this.current=this.target,this.fn&&this.fn(this.current),!0):!1},x.update=function(A){if(this.mode===P.POSITION){this.loopValue&&Math.abs(this.target-this.current)>this.max/2&&(this.current=this.current<this.target?this.current+this.max:this.current-this.max);var p=this.currentSpeed*this.currentSpeed/(this.speed*this.speedMult*4);Math.abs(this.target-this.current)<=p&&(this.mode=P.STOP)}var M=this.mode===P.STOP?0:this.speed*this.speedMult;this.target<this.current&&(M=-M),this.currentSpeed<M?this.currentSpeed=Math.min(M,this.currentSpeed+A/1e3*this.speed*this.speedMult*2):this.currentSpeed>M&&(this.currentSpeed=Math.max(M,this.currentSpeed-A/1e3*this.speed*this.speedMult*2));var W=null;return this.current>this.target&&this.currentSpeed?W=Math.max(this.target,this.current+this.currentSpeed*A/1e3):this.current<this.target&&this.currentSpeed&&(W=Math.min(this.target,this.current+this.currentSpeed*A/1e3)),W!==null&&(W=this.loopValue?ae(W,this.max):i.MathUtils.clamp(W,this.min,this.max),W!==this.current)?(this.current=W,this.fn&&this.fn(this.current),!0):!1},P}();Y.STOP=0,Y.INFINITE=1,Y.POSITION=2;var ge=function(){function P(C,A){this.fn=A,this.dynamics=C,this.fn&&this.fn(this.current)}var x=P.prototype;return x.setSpeed=function(A){we(this.dynamics,function(p){p.setSpeed(A)})},x.goto=function(A,p){var M=this;p===void 0&&(p=1),we(A,function(W,K){M.dynamics[K].goto(W,p)})},x.step=function(A,p){var M=this;p===void 0&&(p=1),we(A,function(W,K){M.dynamics[K].step(W,p)})},x.roll=function(A,p){var M=this;p===void 0&&(p=1),we(A,function(W,K){M.dynamics[K].roll(W,p)})},x.stop=function(){we(this.dynamics,function(A){return A.stop()})},x.setValue=function(A){var p=this,M=!1;return we(A,function(W,K){M|=p.dynamics[K].setValue(W)}),M&&this.fn&&this.fn(this.current),M},x.update=function(A){var p=!1;return we(this.dynamics,function(M){p|=M.update(A)}),p&&this.fn&&this.fn(this.current),p},a(P,[{key:"current",get:function(){var A={};return we(this.dynamics,function(p,M){A[M]=p.current}),A}}]),P}(),Pe=function(P){l(x,P);function x(A){var p,M=A.psv,W=A.container,K=A.direction,Ce=A.onUpdate;return p=P.call(this)||this,p.psv=M,p.container=W,p.prop={onUpdate:Ce,direction:K,mousedown:!1,mouseover:!1},p.container.addEventListener("click",c(p)),p.container.addEventListener("mousedown",c(p)),p.container.addEventListener("mouseenter",c(p)),p.container.addEventListener("mouseleave",c(p)),p.container.addEventListener("touchstart",c(p)),p.container.addEventListener("mousemove",c(p),!0),p.container.addEventListener("touchmove",c(p),!0),window.addEventListener("mouseup",c(p)),window.addEventListener("touchend",c(p)),p}var C=x.prototype;return C.destroy=function(){window.removeEventListener("mouseup",this),window.removeEventListener("touchend",this)},C.handleEvent=function(p){switch(p.type){case"click":p.stopPropagation();break;case"mousedown":this.__onMouseDown(p);break;case"mouseenter":this.__onMouseEnter(p);break;case"mouseleave":this.__onMouseLeave(p);break;case"touchstart":this.__onTouchStart(p);break;case"mousemove":this.__onMouseMove(p);break;case"touchmove":this.__onTouchMove(p);break;case"mouseup":this.__onMouseUp(p);break;case"touchend":this.__onTouchEnd(p);break}},C.__onMouseDown=function(p){this.prop.mousedown=!0,this.__update(p,!0)},C.__onMouseEnter=function(p){this.prop.mouseover=!0,this.__update(p,!0)},C.__onTouchStart=function(p){this.prop.mouseover=!0,this.prop.mousedown=!0,this.__update(p.changedTouches[0],!0)},C.__onMouseMove=function(p){(this.prop.mousedown||this.prop.mouseover)&&(p.stopPropagation(),this.__update(p,!0))},C.__onTouchMove=function(p){(this.prop.mousedown||this.prop.mouseover)&&(p.stopPropagation(),this.__update(p.changedTouches[0],!0))},C.__onMouseUp=function(p){this.prop.mousedown&&(this.prop.mousedown=!1,this.__update(p,!1))},C.__onMouseLeave=function(p){this.prop.mouseover&&(this.prop.mouseover=!1,this.__update(p,!0))},C.__onTouchEnd=function(p){this.prop.mousedown&&(this.prop.mouseover=!1,this.prop.mousedown=!1,this.__update(p.changedTouches[0],!1))},C.__update=function(p,M){var W=this.container.getBoundingClientRect(),K=p[this.vertical?"clientY":"clientX"],Ce=W[this.vertical?"bottom":"left"],De=W[this.vertical?"height":"width"],$e=Math.abs((Ce-K)/De);this.prop.onUpdate({value:$e,click:!M,mousedown:this.prop.mousedown,mouseover:this.prop.mouseover,cursor:p})},a(x,[{key:"vertical",get:function(){return this.prop.direction===x.VERTICAL}}]),x}(r.EventEmitter);Pe.VERTICAL=1,Pe.HORIZONTAL=2;var pe=Object.freeze({__proto__:null,toggleClass:ne,addClasses:X,removeClasses:_e,hasParent:Ae,getClosest:ze,getPosition:Ie,isFullscreenEnabled:Ge,requestFullscreen:N,exitFullscreen:B,getStyle:te,normalizeWheel:ue,bound:ce,loop:ae,isPowerOfTwo:me,sum:le,distance:Se,getShortestArc:ve,getAngle:U,greatArcDistance:D,dasherize:se,throttle:be,isPlainObject:Re,deepmerge:Fe,clone:Xe,isEmpty:Ve,each:we,isNil:rt,firstNonNull:st,deepEqual:nt,pluginInterop:Ze,getAbortError:mt,isAbortError:zt,logWarn:Ut,isExtendedPosition:oe,getXMPValue:xe,parsePosition:et,cleanPosition:dr,positionIsOrdered:Wt,parseSpeed:vi,parseAngle:sn,createTexture:yo,applyEulerInverse:bu,Animation:ia,Dynamic:Y,MultiDynamic:ge,Slider:Pe}),Oe=function(P){l(x,P);function x(A,p){var M;if(M=P.call(this,A)||this,M.config=o({resolution:64},p),!i.MathUtils.isPowerOfTwo(M.config.resolution))throw new d("EquirectangularAdapter resolution must be power of two");return M.SPHERE_SEGMENTS=M.config.resolution,M.SPHERE_HORIZONTAL_SEGMENTS=M.SPHERE_SEGMENTS/2,M}var C=x.prototype;return C.supportsTransition=function(){return!0},C.supportsPreload=function(){return!0},C.loadTexture=function(p,M,W){var K=this;return W===void 0&&(W=this.psv.config.useXmpData),typeof p!="string"?((Array.isArray(p)||typeof p=="object"&&!!p.left)&&Ut("Cubemap support now requires an additional adapter, see https://photo-sphere-viewer.js.org/guide/adapters"),Promise.reject(new d("Invalid panorama url, are you using the right adapter?"))):(W?this.__loadXMP(p,function(Ce){return K.psv.loader.setProgress(Ce)}).then(function(Ce){return K.psv.textureLoader.loadImage(p).then(function(De){return{img:De,xmpPanoData:Ce}})}):this.psv.textureLoader.loadImage(p,function(Ce){return K.psv.loader.setProgress(Ce)}).then(function(Ce){return{img:Ce,xmpPanoData:null}})).then(function(Ce){var De,$e,bt,gt,Bt,Pi,Tn,Tu,wo,hr=Ce.img,En=Ce.xmpPanoData;typeof M=="function"&&(M=M(hr));var ns={fullWidth:st((De=M)==null?void 0:De.fullWidth,En==null?void 0:En.fullWidth,hr.width),fullHeight:st(($e=M)==null?void 0:$e.fullHeight,En==null?void 0:En.fullHeight,hr.height),croppedWidth:st((bt=M)==null?void 0:bt.croppedWidth,En==null?void 0:En.croppedWidth,hr.width),croppedHeight:st((gt=M)==null?void 0:gt.croppedHeight,En==null?void 0:En.croppedHeight,hr.height),croppedX:st((Bt=M)==null?void 0:Bt.croppedX,En==null?void 0:En.croppedX,0),croppedY:st((Pi=M)==null?void 0:Pi.croppedY,En==null?void 0:En.croppedY,0),poseHeading:st((Tn=M)==null?void 0:Tn.poseHeading,En==null?void 0:En.poseHeading,0),posePitch:st((Tu=M)==null?void 0:Tu.posePitch,En==null?void 0:En.posePitch,0),poseRoll:st((wo=M)==null?void 0:wo.poseRoll,En==null?void 0:En.poseRoll,0)};(ns.croppedWidth!==hr.width||ns.croppedHeight!==hr.height)&&Ut(`Invalid panoData, croppedWidth and/or croppedHeight is not coherent with loaded image.
    panoData: `+ns.croppedWidth+"x"+ns.croppedHeight+", image: "+hr.width+"x"+hr.height),(M||En)&&ns.fullWidth!==ns.fullHeight*2&&Ut("Invalid panoData, fullWidth should be twice fullHeight");var BT=K.__createEquirectangularTexture(hr,ns);return{panorama:p,texture:BT,panoData:ns}})},C.__loadXMP=function(p,M){var W=this;return this.psv.textureLoader.loadFile(p,M).then(function(K){return W.__loadBlobAsString(K)}).then(function(K){var Ce=K.indexOf("<x:xmpmeta"),De=K.indexOf("</x:xmpmeta>"),$e=K.substring(Ce,De);return Ce!==-1&&De!==-1&&$e.includes("GPano:")?{fullWidth:xe($e,"FullPanoWidthPixels"),fullHeight:xe($e,"FullPanoHeightPixels"),croppedWidth:xe($e,"CroppedAreaImageWidthPixels"),croppedHeight:xe($e,"CroppedAreaImageHeightPixels"),croppedX:xe($e,"CroppedAreaLeftPixels"),croppedY:xe($e,"CroppedAreaTopPixels"),poseHeading:xe($e,"PoseHeadingDegrees"),posePitch:xe($e,"PosePitchDegrees"),poseRoll:xe($e,"PoseRollDegrees")}:null})},C.__loadBlobAsString=function(p){return new Promise(function(M,W){var K=new FileReader;K.onload=function(){return M(K.result)},K.onerror=W,K.readAsText(p)})},C.__createEquirectangularTexture=function(p,M){if(M.fullWidth>V.maxTextureWidth||M.croppedWidth!==M.fullWidth||M.croppedHeight!==M.fullHeight){var W=V.getMaxCanvasWidth()/M.fullWidth,K=o({},M);W<1&&(K.fullWidth*=W,K.fullHeight*=W,K.croppedWidth*=W,K.croppedHeight*=W,K.croppedX*=W,K.croppedY*=W);var Ce=document.createElement("canvas");Ce.width=K.fullWidth,Ce.height=K.fullHeight;var De=Ce.getContext("2d");return De.drawImage(p,K.croppedX,K.croppedY,K.croppedWidth,K.croppedHeight),yo(Ce)}return yo(p)},C.createMesh=function(p){p===void 0&&(p=1);var M=new i.SphereGeometry(w*p,this.SPHERE_SEGMENTS,this.SPHERE_HORIZONTAL_SEGMENTS,-Math.PI/2).scale(-1,1,1),W=h.createOverlayMaterial();return new i.Mesh(M,W)},C.setTexture=function(p,M){this.__setUniform(p,h.OVERLAY_UNIFORMS.panorama,M.texture),this.setOverlay(p,null)},C.setOverlay=function(p,M,W){this.__setUniform(p,h.OVERLAY_UNIFORMS.overlayOpacity,W),M?this.__setUniform(p,h.OVERLAY_UNIFORMS.overlay,M.texture):this.__setUniform(p,h.OVERLAY_UNIFORMS.overlay,new i.Texture)},C.setTextureOpacity=function(p,M){this.__setUniform(p,h.OVERLAY_UNIFORMS.globalOpacity,M),p.material.transparent=M<1},C.disposeTexture=function(p){var M;(M=p.texture)==null||M.dispose()},C.__setUniform=function(p,M,W){p.material.uniforms[M].value instanceof i.Texture&&p.material.uniforms[M].value.dispose(),p.material.uniforms[M].value=W},x}(h);Oe.id="equirectangular",Oe.supportsDownload=!0,Oe.supportsOverlay=!0;var at=function(){function P(C,A){this.psv=C.psv||C,this.parent=C,this.parent.children.push(this),this.children=[],this.prop={visible:!0},this.container=document.createElement("div"),this.container.className=A,this.parent.container.appendChild(this.container)}var x=P.prototype;return x.destroy=function(){this.parent.container.removeChild(this.container);var A=this.parent.children.indexOf(this);A!==-1&&this.parent.children.splice(A,1),this.children.slice().forEach(function(p){return p.destroy()}),this.children.length=0,delete this.container,delete this.parent,delete this.psv,delete this.prop},x.refreshUi=function(){var A=this;this.children.every(function(p){return p.refreshUi(),A.psv.prop.uiRefresh===!0})},x.toggle=function(A){A===!1||A===void 0&&this.isVisible()?this.hide():(A===!0||A===void 0&&!this.isVisible())&&this.show()},x.hide=function(){this.container.style.display="none",this.prop.visible=!1},x.show=function(){this.container.style.display="",this.prop.visible=!0},x.isVisible=function(){return this.prop.visible},P}(),ut=function(P){l(x,P);function x(A,p,M,W){var K;return p===void 0&&(p=""),M===void 0&&(M=!1),W===void 0&&(W=!0),K=P.call(this,A,"psv-button "+p)||this,K.prop=o({},K.prop,{id:K.constructor.id,collapsable:M,enabled:!0,supported:!0,collapsed:!1,active:!1,width:K.container.offsetWidth}),K.constructor.icon&&K.__setIcon(K.constructor.icon),K.prop.id&&K.psv.config.lang[K.prop.id]&&(K.container.title=K.psv.config.lang[K.prop.id]),W&&(K.container.tabIndex=0),K.container.addEventListener("click",function(Ce){K.prop.enabled&&K.onClick(),Ce.stopPropagation()}),K.container.addEventListener("keydown",function(Ce){Ce.key===G.Enter&&K.prop.enabled&&(K.onClick(),Ce.stopPropagation())}),K}var C=x.prototype;return C.checkSupported=function(){var p=this,M=this.isSupported();Re(M)?(M.initial===!1&&(this.hide(),this.prop.supported=!1),M.promise.then(function(W){!p.prop||(p.prop.supported=W,p.toggle(W))})):(this.prop.supported=M,M||this.hide())},C.isSupported=function(){return!0},C.toggleActive=function(p){this.prop.active=p!==void 0?p:!this.prop.active,ne(this.container,"psv-button--active",this.prop.active),this.constructor.iconActive&&this.__setIcon(this.prop.active?this.constructor.iconActive:this.constructor.icon)},C.show=function(p){p===void 0&&(p=!0),this.isVisible()||(this.prop.visible=!0,this.prop.collapsed||(this.container.style.display=""),p&&this.psv.refreshUi("show button "+this.prop.id))},C.hide=function(p){p===void 0&&(p=!0),this.isVisible()&&(this.prop.visible=!1,this.container.style.display="none",p&&this.psv.refreshUi("hide button "+this.prop.id))},C.disable=function(){this.container.classList.add("psv-button--disabled"),this.prop.enabled=!1},C.enable=function(){this.container.classList.remove("psv-button--disabled"),this.prop.enabled=!0},C.collapse=function(){this.prop.collapsed=!0,this.container.style.display="none"},C.uncollapse=function(){this.prop.collapsed=!1,this.prop.visible&&(this.container.style.display="")},C.__setIcon=function(p,M){M===void 0&&(M=this.container),p?(M.innerHTML=p,M.querySelector("svg").classList.add("psv-button-svg")):M.innerHTML=""},C.onClick=function(){throw new d('onClick not implemented for button "'+this.prop.id+'".')},x}(at);ut.id=null,ut.groupId=null,ut.icon=null,ut.iconActive=null;var Tt=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 41 41"><path fill="currentColor" d="M40.5 14.1c-.1-.1-1.2-.5-2.898-1-.102 0-.202-.1-.202-.2C34.5 6.5 28 2 20.5 2S6.6 6.5 3.7 12.9c0 .1-.1.1-.2.2-1.7.6-2.8 1-2.9 1l-.6.3v12.1l.6.2c.1 0 1.1.399 2.7.899.1 0 .2.101.2.199C6.3 34.4 12.9 39 20.5 39c7.602 0 14.102-4.6 16.9-11.1 0-.102.1-.102.199-.2 1.699-.601 2.699-1 2.801-1l.6-.3V14.3l-.5-.2zM6.701 11.5C9.7 7 14.8 4 20.5 4c5.8 0 10.9 3 13.8 7.5.2.3-.1.6-.399.5-3.799-1-8.799-2-13.6-2-4.7 0-9.5 1-13.2 2-.3.1-.5-.2-.4-.5zM25.1 20.3L18.7 24c-.3.2-.7 0-.7-.5v-7.4c0-.4.4-.6.7-.4l6.399 3.8c.301.1.301.6.001.8zm9.4 8.901A16.421 16.421 0 0 1 20.5 37c-5.9 0-11.1-3.1-14-7.898-.2-.302.1-.602.4-.5 3.9 1 8.9 2.1 13.6 2.1 5 0 9.9-1 13.602-2 .298-.1.5.198.398.499z"/><!--Created by Nick Bluth from the Noun Project--></svg>
`,_t=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 41 41"><path fill="currentColor" d="M40.5 14.1c-.1-.1-1.2-.5-2.899-1-.101 0-.2-.1-.2-.2C34.5 6.5 28 2 20.5 2S6.6 6.5 3.7 12.9c0 .1-.1.1-.2.2-1.7.6-2.8 1-2.9 1l-.6.3v12.1l.6.2c.1 0 1.1.4 2.7.9.1 0 .2.1.2.199C6.3 34.4 12.9 39 20.5 39c7.601 0 14.101-4.6 16.9-11.1 0-.101.1-.101.2-.2 1.699-.6 2.699-1 2.8-1l.6-.3V14.3l-.5-.2zM20.5 4c5.8 0 10.9 3 13.8 7.5.2.3-.1.6-.399.5-3.8-1-8.8-2-13.6-2-4.7 0-9.5 1-13.2 2-.3.1-.5-.2-.4-.5C9.7 7 14.8 4 20.5 4zm0 33c-5.9 0-11.1-3.1-14-7.899-.2-.301.1-.601.4-.5 3.9 1 8.9 2.1 13.6 2.1 5 0 9.9-1 13.601-2 .3-.1.5.2.399.5A16.422 16.422 0 0 1 20.5 37zm18.601-12.1c0 .1-.101.3-.2.3-2.5.9-10.4 3.6-18.4 3.6-7.1 0-15.6-2.699-18.3-3.6C2.1 25.2 2 25 2 24.9V16c0-.1.1-.3.2-.3 2.6-.9 10.6-3.6 18.2-3.6 7.5 0 15.899 2.7 18.5 3.6.1 0 .2.2.2.3v8.9z"/><path fill="currentColor" d="M18.7 24l6.4-3.7c.3-.2.3-.7 0-.8l-6.4-3.8c-.3-.2-.7 0-.7.4v7.4c0 .5.4.7.7.5z"/><!--Created by Nick Bluth from the Noun Project--></svg>
`,Lt=function(P){l(x,P);function x(A){var p;return p=P.call(this,A,"psv-button--hover-scale psv-autorotate-button",!0)||this,p.psv.on(_.AUTOROTATE,c(p)),p}var C=x.prototype;return C.destroy=function(){this.psv.off(_.AUTOROTATE,this),P.prototype.destroy.call(this)},C.handleEvent=function(p){switch(p.type){case _.AUTOROTATE:this.toggleActive(p.args[0]);break}},C.onClick=function(){this.psv.isAutorotateEnabled()&&(this.psv.config.autorotateIdle=!1,this.psv.resetIdleTimer()),this.psv.toggleAutorotate()},x}(ut);Lt.id="autorotate",Lt.icon=_t,Lt.iconActive=Tt;var Ct=function(P){l(x,P);function x(A,p){var M;return M=P.call(this,A,"psv-custom-button",p.collapsable!==!1,p.tabbable!==!1)||this,M.config=p,M.config.id?M.prop.id=M.config.id:M.prop.id="psvButton-"+Math.random().toString(36).substr(2,9),M.config.className&&X(M.container,M.config.className),M.config.title&&(M.container.title=M.config.title),M.config.content&&(M.container.innerHTML=M.config.content),M.prop.width=M.container.offsetWidth,M.config.enabled===!1&&M.disable(),M.config.visible===!1&&M.hide(),M}var C=x.prototype;return C.destroy=function(){delete this.config,P.prototype.destroy.call(this)},C.onClick=function(){this.config.onClick&&this.config.onClick.call(this.psv,this.psv)},x}(ut),It=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><path fill="currentColor" d="M28.3 26.1c-1 2.6-1.9 4.8-2.6 7-2.5 7.4-5 14.7-7.2 22-1.3 4.4.5 7.2 4.3 7.8 1.3.2 2.8.2 4.2-.1 8.2-2 11.9-8.6 15.7-15.2l-2.2 2a18.8 18.8 0 0 1-7.4 5.2 2 2 0 0 1-1.6-.2c-.2-.1 0-1 0-1.4l.8-1.8L41.9 28c.5-1.4.9-3 .7-4.4-.2-2.6-3-4.4-6.3-4.4-8.8.2-15 4.5-19.5 11.8-.2.3-.2.6-.3 1.3 3.7-2.8 6.8-6.1 11.8-6.2z"/><circle fill="currentColor" cx="39.3" cy="9.2" r="8.2"/><!--Created by Arafat Uddin from the Noun Project--></svg>
`,$t=1,Ri=2,gi=function(P){l(x,P);function x(A){var p;return p=P.call(this,A,"psv-button--hover-scale psv-description-button")||this,p.prop=o({},p.prop,{mode:null}),p.psv.on(_.HIDE_NOTIFICATION,c(p)),p.psv.on(_.SHOW_NOTIFICATION,c(p)),p.psv.on(_.CLOSE_PANEL,c(p)),p.psv.on(_.OPEN_PANEL,c(p)),p}var C=x.prototype;return C.destroy=function(){this.psv.off(_.HIDE_NOTIFICATION,this),this.psv.off(_.SHOW_NOTIFICATION,this),this.psv.off(_.CLOSE_PANEL,this),this.psv.off(_.OPEN_PANEL,this),P.prototype.destroy.call(this)},C.handleEvent=function(p){if(!!this.prop.mode){var M=!1;switch(p.type){case _.HIDE_NOTIFICATION:M=this.prop.mode===$t;break;case _.SHOW_NOTIFICATION:M=this.prop.mode===$t&&p.args[0]!==k.DESCRIPTION;break;case _.CLOSE_PANEL:M=this.prop.mode===Ri;break;case _.OPEN_PANEL:M=this.prop.mode===Ri&&p.args[0]!==k.DESCRIPTION;break}M&&(this.toggleActive(!1),this.prop.mode=null)}},C.hide=function(p){P.prototype.hide.call(this,p),this.prop.mode&&this.__close()},C.refreshUi=function(p){if(p===void 0&&(p=!1),p){var M=this.psv.navbar.getButton("caption",!1),W=M&&!M.isVisible(),K=!!this.psv.config.description;W||K?this.show(!1):this.hide(!1)}},C.onClick=function(){this.prop.mode?this.__close():this.__open()},C.__close=function(){switch(this.prop.mode){case $t:this.psv.notification.hide(k.DESCRIPTION);break;case Ri:this.psv.panel.hide(k.DESCRIPTION);break}},C.__open=function(){this.toggleActive(!0),this.psv.config.description?(this.prop.mode=Ri,this.psv.panel.show({id:k.DESCRIPTION,content:(this.psv.config.caption?"<p>"+this.psv.config.caption+"</p>":"")+this.psv.config.description})):(this.prop.mode=$t,this.psv.notification.show({id:k.DESCRIPTION,content:this.psv.config.caption}))},x}(ut);gi.id="description",gi.icon=It;var es=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M83.3 35.6h-17V3H32.2v32.6H16.6l33.6 32.7 33-32.7z"/><path fill="currentColor" d="M83.3 64.2v16.3H16.6V64.2H-.1v32.6H100V64.2H83.3z"/><!--Created by Michael Zenaty from the Noun Project--></svg>
`,ai=function(P){l(x,P);function x(A){return P.call(this,A,"psv-button--hover-scale psv-download-button",!0)||this}var C=x.prototype;return C.onClick=function(){var p=this,M=document.createElement("a");M.href=this.psv.config.downloadUrl||this.psv.config.panorama,M.download=M.href.split("/").pop(),this.psv.container.appendChild(M),M.click(),setTimeout(function(){p.psv.container.removeChild(M)},100)},C.refreshUi=function(){var p=this.psv.adapter.constructor.supportsDownload||this.psv.config.downloadUrl;p&&!this.prop.visible?this.show():!p&&this.prop.visible&&this.hide()},x}(ut);ai.id="download",ai.icon=es;var kt=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M100 40H87.1V18.8h-21V6H100zM100 93.2H66V80.3h21.1v-21H100zM34 93.2H0v-34h12.9v21.1h21zM12.9 40H0V6h34v12.9H12.8z"/><!--Created by Garrett Knoll from the Noun Project--></svg>
`,ts=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M66 7h13v21h21v13H66zM66 60.3h34v12.9H79v21H66zM0 60.3h34v34H21V73.1H0zM21 7h13v34H0V28h21z"/><!--Created by Garrett Knoll from the Noun Project--></svg>
`,Qt=function(P){l(x,P);function x(A){var p;return p=P.call(this,A,"psv-button--hover-scale psv-fullscreen-button")||this,p.psv.on(_.FULLSCREEN_UPDATED,c(p)),p}var C=x.prototype;return C.destroy=function(){this.psv.off(_.FULLSCREEN_UPDATED,this),P.prototype.destroy.call(this)},C.handleEvent=function(p){switch(p.type){case _.FULLSCREEN_UPDATED:this.toggleActive(p.args[0]);break}},C.onClick=function(){this.psv.toggleFullscreen()},x}(ut);Qt.id="fullscreen",Qt.icon=kt,Qt.iconActive=ts;var Qn=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 10 80 80"><g fill="currentColor"><circle r="10" cx="20" cy="20"/><circle r="10" cx="50" cy="20"/><circle r="10" cx="80" cy="20"/><circle r="10" cx="20" cy="50"/><circle r="10" cx="50" cy="50"/><circle r="10" cx="80" cy="50"/><circle r="10" cx="20" cy="80"/><circle r="10" cx="50" cy="80"/><circle r="10" cx="80" cy="80"/></g><!-- Created by Richard Kun\xE1k from the Noun Project--></svg>
`,$n=function(P){l(x,P);function x(A){var p;return p=P.call(this,A,"psv-button--hover-scale psv-menu-button")||this,p.psv.on(_.OPEN_PANEL,c(p)),p.psv.on(_.CLOSE_PANEL,c(p)),P.prototype.hide.call(c(p)),p}var C=x.prototype;return C.destroy=function(){this.psv.off(_.OPEN_PANEL,this),this.psv.off(_.CLOSE_PANEL,this),P.prototype.destroy.call(this)},C.handleEvent=function(p){switch(p.type){case _.OPEN_PANEL:this.toggleActive(p.args[0]===k.MENU);break;case _.CLOSE_PANEL:this.toggleActive(!1);break}},C.hide=function(p){P.prototype.hide.call(this,p),this.__hideMenu()},C.show=function(p){P.prototype.show.call(this,p),this.prop.active&&this.__showMenu()},C.onClick=function(){this.prop.active?this.__hideMenu():this.__showMenu()},C.__showMenu=function(){var p=this;this.psv.panel.show({id:k.MENU,content:x.MENU_TEMPLATE(this.parent.collapsed,this.psv,se(x.BUTTON_DATA)),noMargin:!0,clickHandler:function(W){var K=W.target?ze(W.target,"li"):void 0,Ce=K?K.dataset[x.BUTTON_DATA]:void 0;Ce&&(p.parent.getButton(Ce).onClick(),p.__hideMenu())}})},C.__hideMenu=function(){this.psv.panel.hide(k.MENU)},x}(ut);$n.id="menu",$n.icon=Qn,$n.BUTTON_DATA="psvButton",$n.MENU_TEMPLATE=function(P,x,C){return`
<div class="psv-panel-menu psv-panel-menu--stripped">
  <h1 class="psv-panel-menu-title">`+Qn+" "+x.config.lang.menu+`</h1>
  <ul class="psv-panel-menu-list">
    `+P.map(function(A){return`
    <li data-`+C+'="'+A.prop.id+`" class="psv-panel-menu-item" tabindex="0">
      <span class="psv-panel-menu-item-icon">`+A.container.innerHTML+`</span>
      <span class="psv-panel-menu-item-label">`+A.container.title+`</span>
    </li>
    `}).join("")+`
  </ul>
</div>
`};var ra=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="40 40 432 432"><g transform="rotate(0, 256, 256)"><path fill="currentColor" d="M425.23 210.55H227.39a5 5 0 01-3.53-8.53l56.56-56.57a45.5 45.5 0 000-64.28 45.15 45.15 0 00-32.13-13.3 45.15 45.15 0 00-32.14 13.3L41.32 256l174.83 174.83a45.15 45.15 0 0032.14 13.3 45.15 45.15 0 0032.13-13.3 45.5 45.5 0 000-64.28l-56.57-56.57a5 5 0 013.54-8.53h197.84c25.06 0 45.45-20.39 45.45-45.45s-20.4-45.45-45.45-45.45z"/></g><!-- Created by Flatart from the Noun Project --></svg>
`,sa=function(){function P(C){C===void 0&&(C=200),this.delay=C,this.time=0,this.timeout=null}var x=P.prototype;return x.down=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.time=new Date().getTime()},x.up=function(A){var p=this;if(!!this.time){var M=new Date().getTime()-this.time;M<this.delay?this.timeout=setTimeout(function(){A(),p.timeout=null,p.time=0},this.delay):(A(),this.time=0)}},P}();function wn(P){var x=0;switch(P){case"up":x=90;break;case"right":x=180;break;case"down":x=-90;break;default:x=0;break}return ra.replace("rotate(0","rotate("+x)}var yi=function(P){l(x,P);function x(A,p){var M;return M=P.call(this,A,"psv-button--hover-scale psv-move-button")||this,M.container.title=M.psv.config.lang.move,M.prop=o({},M.prop,{value:p,handler:new sa}),M.container.addEventListener("mousedown",c(M)),M.container.addEventListener("keydown",c(M)),M.container.addEventListener("keyup",c(M)),M.psv.container.addEventListener("mouseup",c(M)),M.psv.container.addEventListener("touchend",c(M)),M}var C=x.prototype;return C.destroy=function(){this.__onMouseUp(),this.psv.container.removeEventListener("mouseup",this),this.psv.container.removeEventListener("touchend",this),P.prototype.destroy.call(this)},C.handleEvent=function(p){switch(p.type){case"mousedown":this.__onMouseDown();break;case"mouseup":this.__onMouseUp();break;case"touchend":this.__onMouseUp();break;case"keydown":p.key===G.Enter&&this.__onMouseDown();break;case"keyup":p.key===G.Enter&&this.__onMouseUp();break}},C.isSupported=function(){return{initial:!V.isTouchEnabled.initial,promise:V.isTouchEnabled.promise.then(function(p){return!p})}},C.onClick=function(){},C.__onMouseDown=function(){!this.prop.enabled||(this.psv.__stopAll(),this.psv.dynamics.position.roll(this.prop.value),this.prop.handler.down())},C.__onMouseUp=function(){var p=this;!this.prop.enabled||this.prop.handler.up(function(){p.psv.dynamics.position.stop(),p.psv.resetIdleTimer()})},x}(ut);yi.groupId="move";var aa=function(P){l(x,P);function x(C){return P.call(this,C,{latitude:!0})||this}return x}(yi);aa.id="moveDown",aa.icon=wn("down");var Fn=function(P){l(x,P);function x(C){return P.call(this,C,{longitude:!0})||this}return x}(yi);Fn.id="moveLeft",Fn.icon=wn("left");var oa=function(P){l(x,P);function x(C){return P.call(this,C,{longitude:!1})||this}return x}(yi);oa.id="moveRight",oa.icon=wn("right");var wu=function(P){l(x,P);function x(C){return P.call(this,C,{latitude:!1})||this}return x}(yi);wu.id="moveUp",wu.icon=wn("up");var bo=function(P){l(x,P);function x(A,p){var M;return M=P.call(this,A,"psv-button--hover-scale psv-zoom-button")||this,M.prop=o({},M.prop,{value:p,handler:new sa}),M.container.addEventListener("mousedown",c(M)),M.container.addEventListener("keydown",c(M)),M.container.addEventListener("keyup",c(M)),M.psv.container.addEventListener("mouseup",c(M)),M.psv.container.addEventListener("touchend",c(M)),M}var C=x.prototype;return C.destroy=function(){this.__onMouseUp(),this.psv.container.removeEventListener("mouseup",this),this.psv.container.removeEventListener("touchend",this),P.prototype.destroy.call(this)},C.handleEvent=function(p){switch(p.type){case"mousedown":this.__onMouseDown();break;case"mouseup":this.__onMouseUp();break;case"touchend":this.__onMouseUp();break;case"keydown":p.key===G.Enter&&this.__onMouseDown();break;case"keyup":p.key===G.Enter&&this.__onMouseUp();break}},C.isSupported=function(){return{initial:!V.isTouchEnabled.initial,promise:V.isTouchEnabled.promise.then(function(p){return!p})}},C.onClick=function(){},C.__onMouseDown=function(){!this.prop.enabled||(this.psv.dynamics.zoom.roll(this.prop.value),this.prop.handler.down())},C.__onMouseUp=function(){var p=this;!this.prop.enabled||this.prop.handler.up(function(){return p.psv.dynamics.zoom.stop()})},x}(ut);bo.groupId="zoom";var wT=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M14.043 12.22a7.738 7.738 0 1 0-1.823 1.822l4.985 4.985c.503.504 1.32.504 1.822 0a1.285 1.285 0 0 0 0-1.822l-4.984-4.985zm-6.305 1.043a5.527 5.527 0 1 1 0-11.053 5.527 5.527 0 0 1 0 11.053z"/><path fill="currentColor" d="M8.728 4.009H6.744v2.737H4.006V8.73h2.738v2.736h1.984V8.73h2.737V6.746H8.728z"/><!--Created by Ryan Canning from the Noun Project--></svg>
`,Wf=function(P){l(x,P);function x(C){return P.call(this,C,!1)||this}return x}(bo);Wf.id="zoomIn",Wf.icon=wT;var _T=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M14.043 12.22a7.738 7.738 0 1 0-1.823 1.822l4.985 4.985c.503.504 1.32.504 1.822 0a1.285 1.285 0 0 0 0-1.822l-4.984-4.985zm-6.305 1.043a5.527 5.527 0 1 1 0-11.053 5.527 5.527 0 0 1 0 11.053z"/><path fill="currentColor" d="M4.006 6.746h7.459V8.73H4.006z"/><!--Created by Ryan Canning from the Noun Project--></svg>
`,$f=function(P){l(x,P);function x(C){return P.call(this,C,!0)||this}return x}(bo);$f.id="zoomOut",$f.icon=_T;var Xf=function(P){l(x,P);function x(A){var p;return p=P.call(this,A,"psv-zoom-range",!1,!1)||this,p.prop=o({},p.prop,{mediaMinWidth:0}),p.zoomRange=document.createElement("div"),p.zoomRange.className="psv-zoom-range-line",p.container.appendChild(p.zoomRange),p.zoomValue=document.createElement("div"),p.zoomValue.className="psv-zoom-range-handle",p.zoomRange.appendChild(p.zoomValue),p.slider=new Pe({container:p.container,direction:Pe.HORIZONTAL,onUpdate:function(W){return p.__onSliderUpdate(W)}}),p.prop.mediaMinWidth=parseInt(te(p.container,"maxWidth"),10),p.psv.on(_.ZOOM_UPDATED,c(p)),p.psv.prop.ready?p.__moveZoomValue(p.psv.getZoomLevel()):p.psv.once(_.READY,c(p)),p.refreshUi(),p}var C=x.prototype;return C.destroy=function(){this.slider.destroy(),delete this.zoomRange,delete this.zoomValue,this.psv.off(_.ZOOM_UPDATED,this),this.psv.off(_.READY,this),P.prototype.destroy.call(this)},C.handleEvent=function(p){switch(p.type){case _.ZOOM_UPDATED:this.__moveZoomValue(p.args[0]);break;case _.READY:this.__moveZoomValue(this.psv.getZoomLevel());break}},C.isSupported=function(){return{initial:!V.isTouchEnabled.initial,promise:V.isTouchEnabled.promise.then(function(p){return!p})}},C.refreshUi=function(){this.prop.supported&&(this.psv.prop.size.width<=this.prop.mediaMinWidth&&this.prop.visible?this.hide():this.psv.prop.size.width>this.prop.mediaMinWidth&&!this.prop.visible&&this.show())},C.onClick=function(){},C.__moveZoomValue=function(p){this.zoomValue.style.left=p/100*this.zoomRange.offsetWidth-this.zoomValue.offsetWidth/2+"px"},C.__onSliderUpdate=function(p){p.mousedown&&this.psv.zoom(p.value*100)},x}(ut);Xf.id="zoomRange",Xf.groupId="zoom";var _u=function(P){l(x,P);function x(A){var p;return p=P.call(this)||this,p.psv=A,p}var C=x.prototype;return C.init=function(){},C.destroy=function(){delete this.psv},x}(r.EventEmitter);_u.id=null;var Yi,qi={panorama:null,overlay:null,overlayOpacity:1,container:null,adapter:null,plugins:[],caption:null,description:null,downloadUrl:null,loadingImg:null,loadingTxt:"Loading...",size:null,fisheye:!1,minFov:30,maxFov:90,defaultZoomLvl:50,defaultLong:0,defaultLat:0,sphereCorrection:null,moveSpeed:1,zoomSpeed:1,autorotateDelay:null,autorotateIdle:!1,autorotateSpeed:"2rpm",autorotateLat:null,autorotateZoomLvl:null,moveInertia:!0,mousewheel:!0,mousemove:!0,mousewheelCtrlKey:!1,touchmoveTwoFingers:!1,useXmpData:!0,panoData:null,requestHeaders:null,canvasBackground:"#000",withCredentials:!1,navbar:["autorotate","zoom","move","download","description","caption","fullscreen"],lang:{autorotate:"Automatic rotation",zoom:"Zoom",zoomOut:"Zoom out",zoomIn:"Zoom in",move:"Move",download:"Download",fullscreen:"Fullscreen",menu:"Menu",twoFingers:"Use two fingers to navigate",ctrlZoom:"Use ctrl + scroll to zoom the image",loadError:"The panorama can't be loaded"},keyboard:(Yi={},Yi[G.ArrowUp]=I.ROTATE_LAT_UP,Yi[G.ArrowDown]=I.ROTATE_LAT_DOWN,Yi[G.ArrowRight]=I.ROTATE_LONG_RIGHT,Yi[G.ArrowLeft]=I.ROTATE_LONG_LEFT,Yi[G.PageUp]=I.ZOOM_IN,Yi[G.PageDown]=I.ZOOM_OUT,Yi[G.Plus]=I.ZOOM_IN,Yi[G.Minus]=I.ZOOM_OUT,Yi[G.Space]=I.TOGGLE_AUTOROTATE,Yi)},r0={panorama:"Use setPanorama method to change the panorama",panoData:"Use setPanorama method to change the panorama",container:"Cannot change viewer container",adapter:"Cannot change adapter",plugins:"Cannot change plugins"},ad={captureCursor:"captureCursor is deprecated"},od={container:function(x){if(!x)throw new d("No value given for container.");return x},adapter:function(x){if(x?Array.isArray(x)?x=[Ze(x[0],h),x[1]]:x=[Ze(x,h)]:x=[Oe],!x[0])throw new d("Un undefined value with given for adapter.");return x},overlayOpacity:function(x){return i.MathUtils.clamp(x,0,1)},defaultLong:function(x){return sn(x)},defaultLat:function(x){return sn(x,!0)},defaultZoomLvl:function(x){return i.MathUtils.clamp(x,0,100)},minFov:function(x,C){return C.maxFov<x&&(Ut("maxFov cannot be lower than minFov"),x=C.maxFov),i.MathUtils.clamp(x,1,179)},maxFov:function(x,C){return x<C.minFov&&(x=C.minFov),i.MathUtils.clamp(x,1,179)},lang:function(x){return Array.isArray(x.twoFingers)&&(Ut("lang.twoFingers must not be an array"),x.twoFingers=x.twoFingers[0]),o({},qi.lang,x)},keyboard:function(x){return x===!0?Xe(qi.keyboard):x},autorotateLat:function(x,C){return sn(x===null?C.defaultLat:x,!0)},autorotateZoomLvl:function(x){return rt(x)?null:i.MathUtils.clamp(x,0,100)},autorotateSpeed:function(x){return vi(x)},autorotateIdle:function(x,C){return x&&rt(C.autorotateDelay)?(Ut("autorotateIdle requires a non null autorotateDelay"),!1):x},fisheye:function(x){return x===!0?1:x===!1?0:x},plugins:function(x){return x.map(function(C){if(Array.isArray(C)?C=[Ze(C[0],_u),C[1]]:C=[Ze(C,_u)],!C[0])throw new d("Un undefined value was given for plugins.");return C})}};function ST(P){var x=Xe(qi);Fe(x,P);var C={};return we(x,function(A,p){if(ad[p]){Ut(ad[p]);return}if(!Object.prototype.hasOwnProperty.call(qi,p))throw new d("Unknown option "+p);od[p]?C[p]=od[p](A,x):C[p]=A}),C}var la=function(P){l(x,P);function x(A,p){var M;return M=P.call(this,A,"psv-caption")||this,M.prop=o({},M.prop,{id:M.constructor.id,collapsable:!1,width:0,contentWidth:0}),M.content=document.createElement("div"),M.content.className="psv-caption-content",M.container.appendChild(M.content),M.setCaption(p),M}var C=x.prototype;return C.destroy=function(){delete this.content,P.prototype.destroy.call(this)},C.setCaption=function(p){this.show(),this.content.innerHTML=p,this.prop.contentWidth=p?this.content.offsetWidth:0,this.refreshUi()},C.refreshUi=function(){this.toggle(this.container.offsetWidth>=this.prop.contentWidth),this.__refreshButton()},C.hide=function(){this.content.style.display="none",this.prop.visible=!1},C.show=function(){this.content.style.display="",this.prop.visible=!0},C.__refreshButton=function(){var p;(p=this.psv.navbar.getButton(gi.id,!1))==null||p.refreshUi(!0)},x}(at);la.id="caption";var Yf={},Su={};function s0(P,x){if(!P.id)throw new d("Button ID is required");if(Yf[P.id]=P,P.groupId&&(Su[P.groupId]=Su[P.groupId]||[],Su[P.groupId].push(P)),typeof x=="string")switch(x){case"start":qi.navbar.unshift(P.id);break;case"end":qi.navbar.push(P.id);break;default:var C=x.split(":"),A=C[0],p=C[1];qi.navbar.splice(qi.navbar.indexOf(A)+(p==="right"?1:0),0,P.id)}}[Lt,$f,Xf,Wf,gi,ai,Qt,Fn,oa,wu,aa].forEach(s0);var MT=function(P){l(x,P);function x(A){var p;return p=P.call(this,A,"psv-navbar psv--capture-event")||this,p.children=[],p.collapsed=[],p}var C=x.prototype;return C.setButtons=function(p){var M=this;this.children.slice().forEach(function(K){return K.destroy()}),this.children.length=0;var W=this.__cleanButtons(p);W.indexOf(la.id)!==-1&&W.indexOf(gi.id)===-1&&W.splice(W.indexOf(la.id),0,gi.id),W.forEach(function(K){if(typeof K=="object")new Ct(M,K);else if(Yf[K])new Yf[K](M);else if(Su[K])Su[K].forEach(function(Ce){return new Ce(M)});else if(K===la.id)new la(M,M.psv.config.caption);else throw new d("Unknown button "+K)}),new $n(this),this.children.forEach(function(K){typeof K.checkSupported=="function"&&K.checkSupported()})},C.setCaption=function(p){var M=this.getButton(la.id,!1);M==null||M.setCaption(p)},C.getButton=function(p,M){M===void 0&&(M=!0);var W=null;return this.children.some(function(K){return K.prop.id===p?(W=K,!0):!1}),!W&&M&&Ut('button "'+p+'" not found in the navbar'),W},C.show=function(){this.container.classList.add("psv-navbar--open"),this.prop.visible=!0},C.hide=function(){this.container.classList.remove("psv-navbar--open"),this.prop.visible=!1},C.refreshUi=function(){if(P.prototype.refreshUi.call(this),this.psv.prop.uiRefresh===!0){var p=this.container.offsetWidth,M=0,W=[],K=[];if(this.children.forEach(function(De){De.prop.visible&&(M+=De.prop.width,W.push(De),De.prop.collapsable&&K.push(De))}),!W.length)return;p<M&&K.length>0?(K.forEach(function(De){return De.collapse()}),this.collapsed=K,this.getButton($n.id).show(!1)):p>=M&&this.collapsed.length>0&&(this.collapsed.forEach(function(De){return De.uncollapse()}),this.collapsed=[],this.getButton($n.id).hide(!1));var Ce=this.getButton(la.id,!1);Ce&&Ce.refreshUi()}},C.__cleanButtons=function(p){return p===!0?Xe(qi.navbar):typeof p=="string"?p.split(/[ ,]/):p||[]},x}(at),TT=function(P){l(x,P);function x(A){var p;return p=P.call(this,A,"psv-loader-container")||this,p.loader=document.createElement("div"),p.loader.className="psv-loader",p.container.appendChild(p.loader),p.canvas=document.createElement("canvas"),p.canvas.className="psv-loader-canvas",p.canvas.width=p.loader.clientWidth*V.pixelRatio,p.canvas.height=p.loader.clientWidth*V.pixelRatio,p.loader.appendChild(p.canvas),p.prop=o({},p.prop,{tickness:(p.loader.offsetWidth-p.loader.clientWidth)/2*V.pixelRatio,current:null}),p.refreshUi(),p.hide(),p}var C=x.prototype;return C.destroy=function(){delete this.loader,delete this.canvas,P.prototype.destroy.call(this)},C.refreshUi=function(){if(this.prop.current!==(this.psv.config.loadingImg||this.psv.config.loadingTxt)){this.prop.current&&this.loader.removeChild(this.loader.lastChild);var p;if(this.psv.config.loadingImg?(p=document.createElement("img"),p.className="psv-loader-image",p.src=this.psv.config.loadingImg):this.psv.config.loadingTxt&&(p=document.createElement("div"),p.className="psv-loader-text",p.innerHTML=this.psv.config.loadingTxt),p){var M=Math.round(Math.sqrt(2*Math.pow((this.canvas.width/2-this.prop.tickness/2)/V.pixelRatio,2)));p.style.maxWidth=M+"px",p.style.maxHeight=M+"px",this.loader.appendChild(p)}this.prop.current=this.psv.config.loadingImg||this.psv.config.loadingTxt}},C.setProgress=function(p){var M=this.canvas.getContext("2d");M.clearRect(0,0,this.canvas.width,this.canvas.height),M.lineWidth=this.prop.tickness,M.strokeStyle=te(this.loader,"color"),M.beginPath(),M.arc(this.canvas.width/2,this.canvas.height/2,this.canvas.width/2-this.prop.tickness/2,-Math.PI/2,i.MathUtils.clamp(p,0,100)/100*2*Math.PI-Math.PI/2),M.stroke(),this.psv.trigger(_.LOAD_PROGRESS,Math.round(p))},x}(at),ET=function(P){l(x,P);function x(A){var p;return p=P.call(this,A,"psv-notification")||this,p.prop=o({},p.prop,{visible:!1,contentId:void 0,timeout:null}),p.content=document.createElement("div"),p.content.className="psv-notification-content",p.container.appendChild(p.content),p.content.addEventListener("click",function(){return p.hide()}),p}var C=x.prototype;return C.destroy=function(){delete this.content,P.prototype.destroy.call(this)},C.isVisible=function(p){return this.prop.visible&&(!p||!this.prop.contentId||this.prop.contentId===p)},C.toggle=function(){throw new d("Notification cannot be toggled")},C.show=function(p){var M=this;this.prop.timeout&&(clearTimeout(this.prop.timeout),this.prop.timeout=null),typeof p=="string"&&(p={content:p}),this.prop.contentId=p.id,this.content.innerHTML=p.content,this.container.classList.add("psv-notification--visible"),this.prop.visible=!0,this.psv.trigger(_.SHOW_NOTIFICATION,p.id),p.timeout&&(this.prop.timeout=setTimeout(function(){return M.hide(p.id)},p.timeout))},C.hide=function(p){if(this.isVisible(p)){var M=this.prop.contentId;this.container.classList.remove("psv-notification--visible"),this.prop.visible=!1,this.prop.contentId=void 0,this.psv.trigger(_.HIDE_NOTIFICATION,M)}},x}(at),xT=function(P){l(x,P);function x(A){var p;return p=P.call(this,A,"psv-overlay")||this,p.prop=o({},p.prop,{contentId:void 0,dissmisable:!0}),p.image=document.createElement("div"),p.image.className="psv-overlay-image",p.container.appendChild(p.image),p.text=document.createElement("div"),p.text.className="psv-overlay-text",p.container.appendChild(p.text),p.subtext=document.createElement("div"),p.subtext.className="psv-overlay-subtext",p.container.appendChild(p.subtext),p.psv.on(_.CLICK,c(p)),p.psv.on(_.KEY_PRESS,c(p)),P.prototype.hide.call(c(p)),p}var C=x.prototype;return C.destroy=function(){this.psv.off(_.CLICK,this),this.psv.off(_.KEY_PRESS,this),delete this.image,delete this.text,delete this.subtext,P.prototype.destroy.call(this)},C.handleEvent=function(p){switch(p.type){case _.CLICK:this.isVisible()&&this.prop.dissmisable&&(this.hide(),p.stopPropagation());break;case _.KEY_PRESS:this.isVisible()&&this.prop.dissmisable&&p.args[0]===G.Escape&&(this.hide(),p.preventDefault());break}},C.isVisible=function(p){return this.prop.visible&&(!p||!this.prop.contentId||this.prop.contentId===p)},C.toggle=function(){throw new d("Overlay cannot be toggled")},C.show=function(p){typeof p=="string"&&(p={text:p}),this.prop.contentId=p.id,this.prop.dissmisable=p.dissmisable!==!1,this.image.innerHTML=p.image||"",this.text.innerHTML=p.text||"",this.subtext.innerHTML=p.subtext||"",P.prototype.show.call(this),this.psv.trigger(_.SHOW_OVERLAY,p.id)},C.hide=function(p){if(this.isVisible(p)){var M=this.prop.contentId;P.prototype.hide.call(this),this.prop.contentId=void 0,this.psv.trigger(_.HIDE_OVERLAY,M)}},x}(at),CT=200,AT=function(P){l(x,P);function x(A){var p;p=P.call(this,A,"psv-panel psv--capture-event")||this,p.prop=o({},p.prop,{visible:!1,contentId:void 0,mouseX:0,mouseY:0,mousedown:!1,clickHandler:null,keyHandler:null,width:{}});var M=document.createElement("div");M.className="psv-panel-resizer",p.container.appendChild(M);var W=document.createElement("div");return W.className="psv-panel-close-button",p.container.appendChild(W),p.content=document.createElement("div"),p.content.className="psv-panel-content",p.container.appendChild(p.content),p.container.addEventListener(V.mouseWheelEvent,function(K){return K.stopPropagation()}),W.addEventListener("click",function(){return p.hide()}),M.addEventListener("mousedown",c(p)),M.addEventListener("touchstart",c(p)),p.psv.container.addEventListener("mouseup",c(p)),p.psv.container.addEventListener("touchend",c(p)),p.psv.container.addEventListener("mousemove",c(p)),p.psv.container.addEventListener("touchmove",c(p)),p.psv.on(_.KEY_PRESS,c(p)),p}var C=x.prototype;return C.destroy=function(){this.psv.off(_.KEY_PRESS,this),this.psv.container.removeEventListener("mousemove",this),this.psv.container.removeEventListener("touchmove",this),this.psv.container.removeEventListener("mouseup",this),this.psv.container.removeEventListener("touchend",this),delete this.prop,delete this.content,P.prototype.destroy.call(this)},C.handleEvent=function(p){switch(p.type){case"mousedown":this.__onMouseDown(p);break;case"touchstart":this.__onTouchStart(p);break;case"mousemove":this.__onMouseMove(p);break;case"touchmove":this.__onTouchMove(p);break;case"mouseup":this.__onMouseUp(p);break;case"touchend":this.__onMouseUp(p);break;case _.KEY_PRESS:this.isVisible()&&p.args[0]===G.Escape&&(this.hide(),p.preventDefault());break}},C.isVisible=function(p){return this.prop.visible&&(!p||!this.prop.contentId||this.prop.contentId===p)},C.toggle=function(){throw new d("Panel cannot be toggled")},C.show=function(p){var M=this,W=this.isVisible(p.id);typeof p=="string"&&(p={content:p}),this.prop.contentId=p.id,this.prop.visible=!0,this.prop.clickHandler&&(this.content.removeEventListener("click",this.prop.clickHandler),this.content.removeEventListener("keydown",this.prop.keyHandler),this.prop.clickHandler=null,this.prop.keyHandler=null),p.id&&this.prop.width[p.id]?this.container.style.width=this.prop.width[p.id]:p.width?this.container.style.width=p.width:this.container.style.width=null,this.content.innerHTML=p.content,this.content.scrollTop=0,this.container.classList.add("psv-panel--open"),ne(this.content,"psv-panel-content--no-margin",p.noMargin===!0),p.clickHandler&&(this.prop.clickHandler=p.clickHandler,this.prop.keyHandler=function(K){K.key===G.Enter&&p.clickHandler(K)},this.content.addEventListener("click",this.prop.clickHandler),this.content.addEventListener("keydown",this.prop.keyHandler),W||setTimeout(function(){var K;(K=M.content.querySelector("a,button,[tabindex]"))==null||K.focus()},300)),this.psv.trigger(_.OPEN_PANEL,p.id)},C.hide=function(p){if(this.isVisible(p)){var M=this.prop.contentId;this.prop.visible=!1,this.prop.contentId=void 0,this.content.innerHTML=null,this.container.classList.remove("psv-panel--open"),this.prop.clickHandler&&(this.content.removeEventListener("click",this.prop.clickHandler),this.prop.clickHandler=null),this.psv.trigger(_.CLOSE_PANEL,M)}},C.__onMouseDown=function(p){p.stopPropagation(),this.__startResize(p)},C.__onTouchStart=function(p){p.stopPropagation(),this.__startResize(p.changedTouches[0])},C.__onMouseUp=function(p){this.prop.mousedown&&(p.stopPropagation(),this.prop.mousedown=!1,this.content.classList.remove("psv-panel-content--no-interaction"))},C.__onMouseMove=function(p){this.prop.mousedown&&(p.stopPropagation(),this.__resize(p))},C.__onTouchMove=function(p){this.prop.mousedown&&this.__resize(p.touches[0])},C.__startResize=function(p){this.prop.mouseX=p.clientX,this.prop.mouseY=p.clientY,this.prop.mousedown=!0,this.content.classList.add("psv-panel-content--no-interaction")},C.__resize=function(p){var M=p.clientX,W=p.clientY,K=Math.max(CT,this.container.offsetWidth-(M-this.prop.mouseX))+"px";this.prop.contentId&&(this.prop.width[this.prop.contentId]=K),this.container.style.width=K,this.prop.mouseX=M,this.prop.mouseY=W},x}(at),RT=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="15 15 70 70"><path fill="currentColor" d="M50,16.2c-18.6,0-33.8,15.1-33.8,33.8S31.4,83.7,50,83.7S83.8,68.6,83.8,50S68.6,16.2,50,16.2z M50,80.2c-16.7,0-30.2-13.6-30.2-30.2S33.3,19.7,50,19.7S80.3,33.3,80.3,50S66.7,80.2,50,80.2z"/><rect fill="currentColor" x="48" y="31.7" width="4" height="28"/><rect fill="currentColor" x="48" y="63.2" width="4" height="5"/><!--Created by Shastry from the Noun Project--></svg>
`,Mu=function(){function P(C){this.psv=C,this.config=C.config,this.prop=C.prop}var x=P.prototype;return x.destroy=function(){delete this.psv,delete this.config,delete this.prop},P}(),qf=new i.Vector2,Rr=new i.Vector3,ld=new i.Euler(0,0,0,"ZXY"),PT=function(P){l(x,P);function x(A){return P.call(this,A)||this}var C=x.prototype;return C.fovToZoomLevel=function(p){var M=Math.round((p-this.config.minFov)/(this.config.maxFov-this.config.minFov)*100);return M-2*(M-50)},C.zoomLevelToFov=function(p){return this.config.maxFov+p/100*(this.config.minFov-this.config.maxFov)},C.vFovToHFov=function(p){return i.MathUtils.radToDeg(2*Math.atan(Math.tan(i.MathUtils.degToRad(p)/2)*this.prop.aspect))},C.speedToDuration=function(p,M){if(!p||typeof p!="number"){var W=p?vi(p):this.config.autorotateSpeed;return M/Math.abs(W)*1e3}else return Math.abs(p)},C.textureCoordsToSphericalCoords=function(p){var M=this.prop.panoData;if(!M)throw new d("Current adapter does not support texture coordinates.");var W=(p.x+M.croppedX)/M.fullWidth*Math.PI*2,K=(p.y+M.croppedY)/M.fullHeight*Math.PI,Ce={longitude:W>=Math.PI?W-Math.PI:W+Math.PI,latitude:Math.PI/2-K};return!ld.equals(this.psv.renderer.mesh.rotation)||!ld.equals(this.psv.renderer.meshContainer.rotation)?(this.sphericalCoordsToVector3(Ce,Rr),Rr.applyEuler(this.psv.renderer.mesh.rotation),Rr.applyEuler(this.psv.renderer.meshContainer.rotation),this.vector3ToSphericalCoords(Rr)):Ce},C.sphericalCoordsToTextureCoords=function(p){var M=this.prop.panoData;if(!M)throw new d("Current adapter does not support texture coordinates.");(!ld.equals(this.psv.renderer.mesh.rotation)||!ld.equals(this.psv.renderer.meshContainer.rotation))&&(this.sphericalCoordsToVector3(p,Rr),bu(Rr,this.psv.renderer.meshContainer.rotation),bu(Rr,this.psv.renderer.mesh.rotation),p=this.vector3ToSphericalCoords(Rr));var W=p.longitude/Math.PI/2*M.fullWidth,K=p.latitude/Math.PI*M.fullHeight;return{x:Math.round(p.longitude<Math.PI?W+M.fullWidth/2:W-M.fullWidth/2)-M.croppedX,y:Math.round(M.fullHeight/2-K)-M.croppedY}},C.sphericalCoordsToVector3=function(p,M){return M||(M=new i.Vector3),M.x=w*-Math.cos(p.latitude)*Math.sin(p.longitude),M.y=w*Math.sin(p.latitude),M.z=w*Math.cos(p.latitude)*Math.cos(p.longitude),M},C.vector3ToSphericalCoords=function(p){var M=Math.acos(p.y/Math.sqrt(p.x*p.x+p.y*p.y+p.z*p.z)),W=Math.atan2(p.x,p.z);return{longitude:W<0?-W:Math.PI*2-W,latitude:Math.PI/2-M}},C.viewerCoordsToVector3=function(p){var M=this.getIntersections(p).filter(function(W){return W.object.userData[T]});return M.length?M[0].point:null},C.vector3ToViewerCoords=function(p){var M=p.clone();return M.project(this.psv.renderer.camera),{x:Math.round((M.x+1)/2*this.prop.size.width),y:Math.round((1-M.y)/2*this.prop.size.height)}},C.sphericalCoordsToViewerCoords=function(p){return this.vector3ToViewerCoords(this.sphericalCoordsToVector3(p,Rr))},C.getIntersections=function(p){return qf.x=2*p.x/this.prop.size.width-1,qf.y=-2*p.y/this.prop.size.height+1,this.psv.renderer.raycaster.setFromCamera(qf,this.psv.renderer.camera),this.psv.renderer.raycaster.intersectObjects(this.psv.renderer.scene.children,!0).filter(function(M){return!!M.object.userData})},C.cleanPosition=function(p){return p.x!==void 0&&p.y!==void 0?this.textureCoordsToSphericalCoords(p):{longitude:sn(p.longitude),latitude:sn(p.latitude,!this.prop.littlePlanet)}},C.cleanSphereCorrection=function(p){return{pan:sn((p==null?void 0:p.pan)||0),tilt:sn((p==null?void 0:p.tilt)||0,!0),roll:sn((p==null?void 0:p.roll)||0,!0,!1)}},C.cleanPanoramaPose=function(p){return{pan:i.MathUtils.degToRad((p==null?void 0:p.poseHeading)||0),tilt:i.MathUtils.degToRad((p==null?void 0:p.posePitch)||0),roll:i.MathUtils.degToRad((p==null?void 0:p.poseRoll)||0)}},x}(Mu),LT=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M33.38 33.2a1.96 1.96 0 0 0 1.5-3.23 10.61 10.61 0 0 1 7.18-17.51c.7-.06 1.31-.49 1.61-1.12a13.02 13.02 0 0 1 11.74-7.43c7.14 0 12.96 5.8 12.96 12.9 0 3.07-1.1 6.05-3.1 8.38-.7.82-.61 2.05.21 2.76.83.7 2.07.6 2.78-.22a16.77 16.77 0 0 0 4.04-10.91C72.3 7.54 64.72 0 55.4 0a16.98 16.98 0 0 0-14.79 8.7 14.6 14.6 0 0 0-12.23 14.36c0 3.46 1.25 6.82 3.5 9.45.4.45.94.69 1.5.69m45.74 43.55a22.13 22.13 0 0 1-5.23 12.4c-4 4.55-9.53 6.86-16.42 6.86-12.6 0-20.1-10.8-20.17-10.91a1.82 1.82 0 0 0-.08-.1c-5.3-6.83-14.55-23.82-17.27-28.87-.05-.1 0-.21.02-.23a6.3 6.3 0 0 1 8.24 1.85l9.38 12.59a1.97 1.97 0 0 0 3.54-1.17V25.34a4 4 0 0 1 1.19-2.87 3.32 3.32 0 0 1 2.4-.95c1.88.05 3.4 1.82 3.4 3.94v24.32a1.96 1.96 0 0 0 3.93 0v-33.1a3.5 3.5 0 0 1 7 0v35.39a1.96 1.96 0 0 0 3.93 0v-.44c.05-2.05 1.6-3.7 3.49-3.7 1.93 0 3.5 1.7 3.5 3.82v5.63c0 .24.04.48.13.71l.1.26a1.97 1.97 0 0 0 3.76-.37c.33-1.78 1.77-3.07 3.43-3.07 1.9 0 3.45 1.67 3.5 3.74l-1.77 18.1zM77.39 51c-1.25 0-2.45.32-3.5.9v-.15c0-4.27-3.33-7.74-7.42-7.74-1.26 0-2.45.33-3.5.9V16.69a7.42 7.42 0 0 0-14.85 0v1.86a7 7 0 0 0-3.28-.94 7.21 7.21 0 0 0-5.26 2.07 7.92 7.92 0 0 0-2.38 5.67v37.9l-5.83-7.82a10.2 10.2 0 0 0-13.35-2.92 4.1 4.1 0 0 0-1.53 5.48C20 64.52 28.74 80.45 34.07 87.34c.72 1.04 9.02 12.59 23.4 12.59 7.96 0 14.66-2.84 19.38-8.2a26.06 26.06 0 0 0 6.18-14.6l1.78-18.2v-.2c0-4.26-3.32-7.73-7.42-7.73z"/><!--Created by AomAm from the Noun Project--></svg>
`,IT=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 17 79 79"><path fill="currentColor" d="M38.1 29.27c-.24 0-.44.2-.44.45v10.7a.45.45 0 00.9 0v-10.7c0-.25-.2-.45-.45-.45zm10.2 26.66a11.54 11.54 0 01-8.48-6.14.45.45 0 10-.8.41 12.45 12.45 0 009.22 6.62.45.45 0 00.07-.9zm24.55-13.08a23.04 23.04 0 00-22.56-23v7.07l-.01.05a2.83 2.83 0 012.39 2.78v14.03l.09-.02h8.84v-9.22a.45.45 0 11.9 0v9.22h10.35v-.9zm0 27.33V44.66H62.5c-.02 2.01-.52 4-1.47 5.76a.45.45 0 01-.61.18.45.45 0 01-.19-.61 11.54 11.54 0 001.36-5.33h-8.83l-.1-.01a2.83 2.83 0 01-2.83 2.84h-.04-.04a2.83 2.83 0 01-2.83-2.83v-14.9a2.82 2.82 0 012.47-2.8v-7.11a23.04 23.04 0 00-22.57 23v.91h14.72V29.88a8.2 8.2 0 015.02-7.57c.22-.1.5.01.59.24.1.23-.01.5-.24.6a7.3 7.3 0 00-4.47 6.73v13.88h3.9a.45.45 0 110 .9h-3.9v.15a7.32 7.32 0 0011.23 6.17.45.45 0 01.49.76 8.22 8.22 0 01-12.62-6.93v-.15H26.82v25.52a23.04 23.04 0 0023.01 23.01 23.04 23.04 0 0023.02-23.01zm1.8-27.33v27.33A24.85 24.85 0 0149.84 95a24.85 24.85 0 01-24.82-24.82V42.85a24.85 24.85 0 0124.82-24.82 24.85 24.85 0 0124.83 24.82zM57.98 29.88v9.36a.45.45 0 11-.9 0v-9.36a7.28 7.28 0 00-3.4-6.17.45.45 0 01.49-.76 8.18 8.18 0 013.8 6.93z"/><!-- Created by Icon Island from the Noun Project --></svg>
`,a0=0,Pr=1,OT=2,DT=function(P){l(x,P);function x(A){var p;return p=P.call(this,A)||this,p.state={moveThreshold:m*V.pixelRatio,keyboardEnabled:!1,step:a0,mousedown:!1,startMouseX:0,startMouseY:0,mouseX:0,mouseY:0,mouseHistory:[],pinchDist:0,keyHandler:new sa,ctrlKeyDown:!1,dblclickData:null,dblclickTimeout:null,longtouchTimeout:null,twofingersTimeout:null,ctrlZoomTimeout:null},p.__onResize=be(function(){return p.psv.autoSize()},50),p}var C=x.prototype;return C.init=function(){window.addEventListener("resize",this),window.addEventListener("keydown",this,{passive:!1}),window.addEventListener("keyup",this),this.psv.container.addEventListener("mousedown",this),window.addEventListener("mousemove",this,{passive:!1}),window.addEventListener("mouseup",this),this.psv.container.addEventListener("touchstart",this,{passive:!1}),window.addEventListener("touchmove",this,{passive:!1}),window.addEventListener("touchend",this,{passive:!1}),this.psv.container.addEventListener(V.mouseWheelEvent,this,{passive:!1}),V.fullscreenEvent&&document.addEventListener(V.fullscreenEvent,this)},C.destroy=function(){window.removeEventListener("resize",this),window.removeEventListener("keydown",this),window.removeEventListener("keyup",this),this.psv.container.removeEventListener("mousedown",this),window.removeEventListener("mousemove",this),window.removeEventListener("mouseup",this),this.psv.container.removeEventListener("touchstart",this),window.removeEventListener("touchmove",this),window.removeEventListener("touchend",this),this.psv.container.removeEventListener(V.mouseWheelEvent,this),V.fullscreenEvent&&document.removeEventListener(V.fullscreenEvent,this),clearTimeout(this.state.dblclickTimeout),clearTimeout(this.state.longtouchTimeout),clearTimeout(this.state.twofingersTimeout),clearTimeout(this.state.ctrlZoomTimeout),delete this.state,P.prototype.destroy.call(this)},C.handleEvent=function(p){switch(p.type){case"resize":this.__onResize();break;case"keydown":this.__onKeyDown(p);break;case"keyup":this.__onKeyUp();break;case"mousemove":this.__onMouseMove(p);break;case"mouseup":this.__onMouseUp(p);break;case"touchmove":this.__onTouchMove(p);break;case"touchend":this.__onTouchEnd(p);break;case V.fullscreenEvent:this.__fullscreenToggled();break}if(!ze(p.target,".psv--capture-event"))switch(p.type){case"mousedown":this.__onMouseDown(p);break;case"touchstart":this.__onTouchStart(p);break;case V.mouseWheelEvent:this.__onMouseWheel(p);break}},C.enableKeyboard=function(){this.state.keyboardEnabled=!0},C.disableKeyboard=function(){this.state.keyboardEnabled=!1},C.__onKeyDown=function(p){this.config.mousewheelCtrlKey&&(this.state.ctrlKeyDown=p.key===G.Control,this.state.ctrlKeyDown&&(clearTimeout(this.state.ctrlZoomTimeout),this.psv.overlay.hide(k.CTRL_ZOOM)));var M=this.psv.trigger(_.KEY_PRESS,p.key);if(!M.isDefaultPrevented()&&!!this.state.keyboardEnabled){var W=this.config.keyboard[p.key];if(W===I.TOGGLE_AUTOROTATE)this.psv.toggleAutorotate(),p.preventDefault();else if(W&&!this.state.keyHandler.time){switch(W!==I.ZOOM_IN&&W!==I.ZOOM_OUT&&this.psv.__stopAll(),W){case I.ROTATE_LAT_UP:this.psv.dynamics.position.roll({latitude:!1});break;case I.ROTATE_LAT_DOWN:this.psv.dynamics.position.roll({latitude:!0});break;case I.ROTATE_LONG_RIGHT:this.psv.dynamics.position.roll({longitude:!1});break;case I.ROTATE_LONG_LEFT:this.psv.dynamics.position.roll({longitude:!0});break;case I.ZOOM_IN:this.psv.dynamics.zoom.roll(!1);break;case I.ZOOM_OUT:this.psv.dynamics.zoom.roll(!0);break}this.state.keyHandler.down(),p.preventDefault()}}},C.__onKeyUp=function(){var p=this;this.state.ctrlKeyDown=!1,this.state.keyboardEnabled&&this.state.keyHandler.up(function(){p.psv.dynamics.position.stop(),p.psv.dynamics.zoom.stop(),p.psv.resetIdleTimer()})},C.__onMouseDown=function(p){this.state.mousedown=!0,this.state.startMouseX=p.clientX,this.state.startMouseY=p.clientY},C.__onMouseUp=function(p){(this.state.mousedown||this.state.step===Pr)&&this.__stopMove(p.clientX,p.clientY,p.target,p.button===2)},C.__onMouseMove=function(p){if(this.config.mousemove&&(this.state.mousedown||this.state.step===Pr)&&(p.preventDefault(),this.__move(p.clientX,p.clientY)),!Ve(this.prop.objectsObservers)&&Ae(p.target,this.psv.container)){var M=Ie(this.psv.container),W={x:p.clientX-M.left,y:p.clientY-M.top},K=this.psv.dataHelper.getIntersections(W),Ce=function($e,bt,gt){$e.listener.handleEvent(new CustomEvent(gt,{detail:{originalEvent:p,object:$e.object,data:$e.object.userData[bt],viewerPoint:W}}))};we(this.prop.objectsObservers,function(De,$e){var bt=K.find(function(gt){return gt.object.userData[$e]});bt?(De.object&&bt.object!==De.object&&(Ce(De,$e,L.LEAVE_OBJECT),delete De.object),De.object?Ce(De,$e,L.HOVER_OBJECT):(De.object=bt.object,Ce(De,$e,L.ENTER_OBJECT))):De.object&&(Ce(De,$e,L.LEAVE_OBJECT),delete De.object)})}},C.__onTouchStart=function(p){var M=this;p.touches.length===1?(this.state.mousedown=!0,this.state.startMouseX=p.touches[0].clientX,this.state.startMouseY=p.touches[0].clientY,this.prop.longtouchTimeout||(this.prop.longtouchTimeout=setTimeout(function(){var W=p.touches[0];M.__stopMove(W.clientX,W.clientY,W.target,!0),M.prop.longtouchTimeout=null},g))):p.touches.length===2&&(this.state.mousedown=!1,this.__cancelLongTouch(),this.config.mousemove&&(this.__cancelTwoFingersOverlay(),this.__startMoveZoom(p),p.preventDefault()))},C.__onTouchEnd=function(p){if(this.__cancelLongTouch(),this.state.mousedown||this.state.step===Pr){if(p.preventDefault(),this.__cancelTwoFingersOverlay(),p.touches.length===1)this.__stopMove(this.state.mouseX,this.state.mouseY);else if(p.touches.length===0){var M=p.changedTouches[0];this.__stopMove(M.clientX,M.clientY,M.target)}}},C.__onTouchMove=function(p){var M=this;if(this.__cancelLongTouch(),!!this.config.mousemove)if(p.touches.length===1){if(this.config.touchmoveTwoFingers)this.state.mousedown&&!this.prop.twofingersTimeout&&(this.prop.twofingersTimeout=setTimeout(function(){M.psv.overlay.show({id:k.TWO_FINGERS,image:LT,text:M.config.lang.twoFingers})},y));else if(this.state.mousedown||this.state.step===Pr){p.preventDefault();var W=p.touches[0];this.__move(W.clientX,W.clientY)}}else this.__moveZoom(p),this.__cancelTwoFingersOverlay()},C.__cancelLongTouch=function(){this.prop.longtouchTimeout&&(clearTimeout(this.prop.longtouchTimeout),this.prop.longtouchTimeout=null)},C.__cancelTwoFingersOverlay=function(){this.config.touchmoveTwoFingers&&(this.prop.twofingersTimeout&&(clearTimeout(this.prop.twofingersTimeout),this.prop.twofingersTimeout=null),this.psv.overlay.hide(k.TWO_FINGERS))},C.__onMouseWheel=function(p){var M=this;if(!!this.config.mousewheel){if(this.config.mousewheelCtrlKey&&!this.state.ctrlKeyDown){this.psv.overlay.show({id:k.CTRL_ZOOM,image:IT,text:this.config.lang.ctrlZoom}),clearTimeout(this.state.ctrlZoomTimeout),this.state.ctrlZoomTimeout=setTimeout(function(){return M.psv.overlay.hide(k.CTRL_ZOOM)},S);return}p.preventDefault(),p.stopPropagation();var W=ue(p).spinY*5*this.config.zoomSpeed;W!==0&&this.psv.dynamics.zoom.step(-W,5)}},C.__fullscreenToggled=function(p){this.prop.fullscreen=p!==void 0?p:Ge(this.psv.container),this.config.keyboard&&(this.prop.fullscreen?this.psv.startKeyboardControl():this.psv.stopKeyboardControl()),this.psv.trigger(_.FULLSCREEN_UPDATED,this.prop.fullscreen)},C.__resetMove=function(){this.state.step=a0,this.state.mousedown=!1,this.state.mouseX=0,this.state.mouseY=0,this.state.startMouseX=0,this.state.startMouseY=0,this.state.mouseHistory.length=0},C.__startMoveZoom=function(p){this.psv.__stopAll(),this.__resetMove();var M={x:p.touches[0].clientX,y:p.touches[0].clientY},W={x:p.touches[1].clientX,y:p.touches[1].clientY};this.state.step=Pr,this.state.pinchDist=Se(M,W),this.state.mouseX=(M.x+W.x)/2,this.state.mouseY=(M.y+W.y)/2,this.__logMouseMove(this.state.mouseX,this.state.mouseY)},C.__stopMove=function(p,M,W,K){W===void 0&&(W=null),K===void 0&&(K=!1),this.state.step===Pr?this.config.moveInertia?(this.__logMouseMove(p,M),this.__stopMoveInertia(p,M)):(this.__resetMove(),this.psv.resetIdleTimer()):this.state.mousedown&&(this.psv.stopAnimation(),this.__click(p,M,W,K),this.__resetMove(),this.psv.resetIdleTimer())},C.__stopMoveInertia=function(p,M){var W=this,K=new i.SplineCurve(this.state.mouseHistory.map(function(gt){var Bt=gt[1],Pi=gt[2];return new i.Vector2(Bt,Pi)})),Ce=K.getTangent(1),De=this.state.mouseHistory.slice(1).reduce(function(gt,Bt){var Pi=gt.total,Tn=gt.prev;return{total:Pi+Se({x:Tn[1],y:Tn[2]},{x:Bt[1],y:Bt[2]})/(Bt[0]-Tn[0]),prev:Bt}},{total:0,prev:this.state.mouseHistory[0]}).total/this.state.mouseHistory.length;if(!De){this.__resetMove(),this.psv.resetIdleTimer();return}this.state.step=OT;var $e=p,bt=M;this.prop.animationPromise=new ia({properties:{speed:{start:De,end:0}},duration:1e3,easing:"outQuad",onTick:function(Bt){$e+=Bt.speed*Ce.x*3*V.pixelRatio,bt+=Bt.speed*Ce.y*3*V.pixelRatio,W.__applyMove($e,bt)}}),this.prop.animationPromise.then(function(gt){W.prop.animationPromise=null,gt&&(W.__resetMove(),W.psv.resetIdleTimer())})},C.__click=function(p,M,W,K){var Ce=this;K===void 0&&(K=!1);var De=this.psv.container.getBoundingClientRect(),$e={rightclick:K,target:W,clientX:p,clientY:M,viewerX:p-De.left,viewerY:M-De.top},bt=this.psv.dataHelper.getIntersections({x:$e.viewerX,y:$e.viewerY}),gt=bt.find(function(Tn){return Tn.object.userData[T]});if(gt){var Bt=this.psv.dataHelper.vector3ToSphericalCoords(gt.point);$e.longitude=Bt.longitude,$e.latitude=Bt.latitude,$e.objects=bt.map(function(Tn){return Tn.object}).filter(function(Tn){return!Tn.userData[T]});try{var Pi=this.psv.dataHelper.sphericalCoordsToTextureCoords($e);$e.textureX=Pi.x,$e.textureY=Pi.y}catch{$e.textureX=NaN,$e.textureY=NaN}this.state.dblclickTimeout?(Math.abs(this.state.dblclickData.clientX-$e.clientX)<this.state.moveThreshold&&Math.abs(this.state.dblclickData.clientY-$e.clientY)<this.state.moveThreshold&&this.psv.trigger(_.DOUBLE_CLICK,this.state.dblclickData),clearTimeout(this.state.dblclickTimeout),this.state.dblclickTimeout=null,this.state.dblclickData=null):(this.psv.trigger(_.CLICK,$e),this.state.dblclickData=Xe($e),this.state.dblclickTimeout=setTimeout(function(){Ce.state.dblclickTimeout=null,Ce.state.dblclickData=null},v))}},C.__move=function(p,M){this.state.mousedown&&(Math.abs(p-this.state.startMouseX)>=this.state.moveThreshold||Math.abs(M-this.state.startMouseY)>=this.state.moveThreshold)?(this.psv.__stopAll(),this.__resetMove(),this.state.step=Pr,this.state.mouseX=p,this.state.mouseY=M,this.__logMouseMove(p,M)):this.state.step===Pr&&(this.__applyMove(p,M),this.__logMouseMove(p,M))},C.__applyMove=function(p,M){var W={longitude:(p-this.state.mouseX)/this.prop.size.width*this.config.moveSpeed*i.MathUtils.degToRad(this.prop.littlePlanet?90:this.prop.hFov),latitude:(M-this.state.mouseY)/this.prop.size.height*this.config.moveSpeed*i.MathUtils.degToRad(this.prop.littlePlanet?90:this.prop.vFov)},K=this.psv.getPosition();this.psv.rotate({longitude:K.longitude-W.longitude,latitude:K.latitude+W.latitude}),this.state.mouseX=p,this.state.mouseY=M},C.__moveZoom=function(p){if(this.state.step===Pr){p.preventDefault();var M={x:p.touches[0].clientX,y:p.touches[0].clientY},W={x:p.touches[1].clientX,y:p.touches[1].clientY},K=Se(M,W),Ce=(K-this.state.pinchDist)/V.pixelRatio*this.config.zoomSpeed;this.psv.zoom(this.psv.getZoomLevel()+Ce),this.__move((M.x+W.x)/2,(M.y+W.y)/2),this.state.pinchDist=K}},C.__logMouseMove=function(p,M){var W=Date.now(),K=this.state.mouseHistory.length?this.state.mouseHistory[this.state.mouseHistory.length-1]:[0,-1,-1];K[1]===p&&K[2]===M?K[0]=W:W===K[0]?(K[1]=p,K[2]=M):this.state.mouseHistory.push([W,p,M]);for(var Ce=null,De=0;De<this.state.mouseHistory.length;)this.state.mouseHistory[De][0]<W-b?this.state.mouseHistory.splice(De,1):Ce&&this.state.mouseHistory[De][0]-Ce>b/10?(this.state.mouseHistory.splice(0,De),De=0,Ce=this.state.mouseHistory[De][0]):(Ce=this.state.mouseHistory[De][0],De++)},x}(Mu),NT=function(P){l(x,P);function x(A){var p,M;return M=P.call(this,A)||this,M.renderer=new i.WebGLRenderer({alpha:!0,antialias:!0}),M.renderer.setPixelRatio(V.pixelRatio),M.renderer.domElement.className="psv-canvas",M.scene=new i.Scene,M.camera=new i.PerspectiveCamera(50,16/9,.1,2*w),M.mesh=M.psv.adapter.createMesh(),M.mesh.userData=(p={},p[T]=!0,p),M.meshContainer=new i.Group,M.meshContainer.add(M.mesh),M.scene.add(M.meshContainer),M.raycaster=new i.Raycaster,M.timestamp=null,M.ready=!1,M.canvasContainer=document.createElement("div"),M.canvasContainer.className="psv-canvas-container",M.canvasContainer.style.background=M.psv.config.canvasBackground,M.canvasContainer.style.cursor=M.psv.config.mousemove?"move":"default",M.canvasContainer.appendChild(M.renderer.domElement),M.psv.container.appendChild(M.canvasContainer),A.on(_.SIZE_UPDATED,c(M)),A.on(_.ZOOM_UPDATED,c(M)),A.on(_.POSITION_UPDATED,c(M)),A.on(_.CONFIG_CHANGED,c(M)),M.hide(),M}var C=x.prototype;return C.destroy=function(){this.renderer.setAnimationLoop(null),this.__cleanTHREEScene(this.scene),this.psv.container.removeChild(this.canvasContainer),delete this.canvasContainer,delete this.renderer,delete this.scene,delete this.camera,delete this.mesh,delete this.meshContainer,delete this.raycaster,P.prototype.destroy.call(this)},C.handleEvent=function(p){switch(p.type){case _.SIZE_UPDATED:this.__onSizeUpdated();break;case _.ZOOM_UPDATED:this.__onZoomUpdated();break;case _.POSITION_UPDATED:this.__onPositionUpdated();break;case _.CONFIG_CHANGED:p.args[0].includes("fisheye")&&this.__onPositionUpdated(),p.args[0].includes("mousemove")&&(this.canvasContainer.style.cursor=this.psv.config.mousemove?"move":"default");break}},C.hide=function(){this.canvasContainer.style.opacity=0},C.show=function(){this.canvasContainer.style.opacity=1},C.__onSizeUpdated=function(){this.renderer.setSize(this.prop.size.width,this.prop.size.height),this.camera.aspect=this.prop.aspect,this.camera.updateProjectionMatrix(),this.prop.needsUpdate=!0},C.__onZoomUpdated=function(){this.camera.fov=this.prop.vFov,this.camera.updateProjectionMatrix(),this.prop.needsUpdate=!0},C.__onPositionUpdated=function(){this.camera.position.set(0,0,0),this.camera.lookAt(this.prop.direction),this.config.fisheye&&this.camera.position.copy(this.prop.direction).multiplyScalar(this.config.fisheye/2).negate(),this.prop.needsUpdate=!0},C.__renderLoop=function(p){var M=this.timestamp!==null?p-this.timestamp:0;this.timestamp=p,this.psv.trigger(_.BEFORE_RENDER,p,M),we(this.psv.dynamics,function(W){return W.update(M)}),this.prop.idleTime>0&&p-this.prop.idleTime>this.config.autorotateDelay&&this.psv.startAutorotate(),this.prop.needsUpdate&&(this.render(),this.prop.needsUpdate=!1)},C.render=function(){this.renderer.render(this.scene,this.camera),this.psv.trigger(_.RENDER)},C.setTexture=function(p){var M=this;this.prop.panoData=p.panoData,this.psv.adapter.setTexture(this.mesh,p),this.ready||(this.renderer.setAnimationLoop(function(W){return M.__renderLoop(W)}),this.ready=!0),this.psv.needsUpdate(),this.psv.trigger(_.PANORAMA_LOADED,p)},C.setOverlay=function(p,M){this.psv.adapter.setOverlay(this.mesh,p,M),this.psv.needsUpdate()},C.setPanoramaPose=function(p,M){M===void 0&&(M=this.mesh);var W=this.psv.dataHelper.cleanPanoramaPose(p);M.rotation.set(-W.tilt,-W.pan,-W.roll,"ZXY")},C.setSphereCorrection=function(p,M){M===void 0&&(M=this.meshContainer);var W=this.psv.dataHelper.cleanSphereCorrection(p);M.rotation.set(W.tilt,W.pan,W.roll,"ZXY")},C.transition=function(p,M){var W=this,K=oe(M),Ce="zoom"in M,De=new i.Group,$e=this.psv.adapter.createMesh(.5);if(this.psv.adapter.setTexture($e,p,!0),this.psv.adapter.setTextureOpacity($e,0),this.setPanoramaPose(p.panoData,$e),this.setSphereCorrection(M.sphereCorrection,De),K){var bt=this.psv.dataHelper.cleanPosition(M),gt=this.psv.getPosition(),Bt=new i.Vector3(0,1,0);De.rotateOnWorldAxis(Bt,bt.longitude-gt.longitude);var Pi=new i.Vector3(0,1,0).cross(this.camera.getWorldDirection(new i.Vector3)).normalize();De.rotateOnWorldAxis(Pi,bt.latitude-gt.latitude)}De.add($e),this.scene.add(De);var Tn=new ia({properties:{opacity:{start:0,end:1},zoom:Ce?{start:this.psv.getZoomLevel(),end:M.zoom}:void 0},duration:M.transition,easing:"outCubic",onTick:function(wo){W.psv.adapter.setTextureOpacity($e,wo.opacity),W.psv.adapter.setTextureOpacity(W.mesh,1-wo.opacity),Ce&&W.psv.zoom(wo.zoom),W.psv.needsUpdate()}});return Tn.then(function(Tu){Tu?(W.setTexture(p),W.psv.adapter.setTextureOpacity(W.mesh,1),W.setPanoramaPose(p.panoData),W.setSphereCorrection(M.sphereCorrection),K&&W.psv.rotate(M)):W.psv.adapter.disposeTexture(p),W.scene.remove(De),$e.geometry.dispose(),$e.geometry=null}),Tn},C.__cleanTHREEScene=function(p){var M=this;p.traverse(function(W){W.geometry&&W.geometry.dispose(),W.material&&(Array.isArray(W.material)?W.material.forEach(function(K){K.map&&K.map.dispose(),K.dispose()}):(W.material.map&&W.material.map.dispose(),W.material.dispose())),W.dispose&&!(W instanceof i.Scene)&&W.dispose(),W!==p&&M.__cleanTHREEScene(W)})},x}(Mu),kT=function(P){l(x,P);function x(A){var p;return p=P.call(this,A)||this,p.loader=new i.FileLoader,p.loader.setResponseType("blob"),p.config.withCredentials&&p.loader.setWithCredentials(!0),p.config.requestHeaders&&typeof p.config.requestHeaders=="object"&&p.loader.setRequestHeader(p.config.requestHeaders),p}var C=x.prototype;return C.destroy=function(){this.abortLoading(),P.prototype.destroy.call(this)},C.abortLoading=function(){},C.loadFile=function(p,M){var W=this;return this.config.requestHeaders&&typeof this.config.requestHeaders=="function"&&this.loader.setRequestHeader(this.config.requestHeaders(p)),new Promise(function(K,Ce){var De=0;M==null||M(De),W.loader.load(p,function($e){De=100,M==null||M(De),K($e)},function($e){if($e.lengthComputable){var bt=$e.loaded/$e.total*100;bt>De&&(De=bt,M==null||M(De))}},function($e){Ce($e)})})},C.loadImage=function(p,M){return this.loadFile(p,M).then(function(W){return new Promise(function(K,Ce){var De=document.createElementNS("http://www.w3.org/1999/xhtml","img");De.onload=function(){URL.revokeObjectURL(De.src),K(De)},De.onerror=Ce,De.src=URL.createObjectURL(W)})})},C.preloadPanorama=function(p){return this.psv.adapter.supportsPreload(p)?this.psv.adapter.loadTexture(p):Promise.resolve()},x}(Mu),bi={NONE:0,SHOWING:1,HIDING:2,READY:3},o0=function(P){l(x,P);function x(A,p){var M;return M=P.call(this,A,"psv-tooltip")||this,M.prop=o({},M.prop,p,{state:bi.NONE,width:0,height:0,pos:"",config:null,data:null}),M.content=document.createElement("div"),M.content.className="psv-tooltip-content",M.container.appendChild(M.content),M.arrow=document.createElement("div"),M.arrow.className="psv-tooltip-arrow",M.container.appendChild(M.arrow),M.container.addEventListener("transitionend",c(M)),M.container.style.top="-1000px",M.container.style.left="-1000px",M}var C=x.prototype;return C.destroy=function(){delete this.arrow,delete this.content,P.prototype.destroy.call(this)},C.handleEvent=function(p){switch(p.type){case"transitionend":this.__onTransitionEnd(p);break}},C.toggle=function(){throw new d("Tooltip cannot be toggled")},C.show=function(p){if(this.prop.state!==bi.NONE)throw new d("Initialized tooltip cannot be re-initialized");p.className&&X(this.container,p.className),this.content.innerHTML=p.content;var M=this.container.getBoundingClientRect();this.prop.width=M.right-M.left,this.prop.height=M.bottom-M.top,this.prop.state=bi.READY,this.move(p),this.prop.data=p.data,this.prop.state=bi.SHOWING,this.psv.trigger(_.SHOW_TOOLTIP,this.prop.data,this),this.__waitImages()},C.move=function(p){if(this.prop.state!==bi.SHOWING&&this.prop.state!==bi.READY)throw new d("Uninitialized tooltip cannot be moved");p.box||(p.box={width:0,height:0}),this.config=p;var M=this.container,W=this.arrow,K={posClass:dr(p.position,{allowCenter:!1,cssOrder:!1})||["top","center"],width:this.prop.width,height:this.prop.height,top:0,left:0,arrowTop:0,arrowLeft:0};this.__computeTooltipPosition(K,p);var Ce=null,De=null;if(K.top<0?Ce="bottom":K.top+K.height>this.psv.prop.size.height&&(Ce="top"),K.left<0?De="right":K.left+K.width>this.psv.prop.size.width&&(De="left"),De||Ce){var $e=Wt(K.posClass);Ce&&(K.posClass[$e?0:1]=Ce),De&&(K.posClass[$e?1:0]=De),this.__computeTooltipPosition(K,p)}M.style.top=K.top+"px",M.style.left=K.left+"px",W.style.top=K.arrowTop+"px",W.style.left=K.arrowLeft+"px";var bt=K.posClass.join("-");bt!==this.prop.pos&&(M.classList.remove("psv-tooltip--"+this.prop.pos),this.prop.pos=bt,M.classList.add("psv-tooltip--"+this.prop.pos))},C.hide=function(){this.container.classList.remove("psv-tooltip--visible"),this.prop.state=bi.HIDING,this.psv.trigger(_.HIDE_TOOLTIP,this.prop.data)},C.__onTransitionEnd=function(p){if(p.propertyName==="transform")switch(this.prop.state){case bi.SHOWING:this.container.classList.add("psv-tooltip--visible"),this.prop.state=bi.READY;break;case bi.HIDING:this.prop.state=bi.NONE,this.destroy();break}},C.__computeTooltipPosition=function(p,M){var W=this.prop.arrow,K=M.top,Ce=p.height,De=M.left,$e=p.width,bt=W+this.prop.border,gt=M.box.width/2+W*2,Bt=M.box.height/2+W*2;switch(p.posClass.join("-")){case"top-left":p.top=K-Bt-Ce,p.left=De+bt-$e,p.arrowTop=Ce,p.arrowLeft=$e-bt-W;break;case"top-center":p.top=K-Bt-Ce,p.left=De-$e/2,p.arrowTop=Ce,p.arrowLeft=$e/2-W;break;case"top-right":p.top=K-Bt-Ce,p.left=De-bt,p.arrowTop=Ce,p.arrowLeft=W;break;case"bottom-left":p.top=K+Bt,p.left=De+bt-$e,p.arrowTop=-W*2,p.arrowLeft=$e-bt-W;break;case"bottom-center":p.top=K+Bt,p.left=De-$e/2,p.arrowTop=-W*2,p.arrowLeft=$e/2-W;break;case"bottom-right":p.top=K+Bt,p.left=De-bt,p.arrowTop=-W*2,p.arrowLeft=W;break;case"left-top":p.top=K+bt-Ce,p.left=De-gt-$e,p.arrowTop=Ce-bt-W,p.arrowLeft=$e;break;case"center-left":p.top=K-Ce/2,p.left=De-gt-$e,p.arrowTop=Ce/2-W,p.arrowLeft=$e;break;case"left-bottom":p.top=K-bt,p.left=De-gt-$e,p.arrowTop=W,p.arrowLeft=$e;break;case"right-top":p.top=K+bt-Ce,p.left=De+gt,p.arrowTop=Ce-bt-W,p.arrowLeft=-W*2;break;case"center-right":p.top=K-Ce/2,p.left=De+gt,p.arrowTop=Ce/2-W,p.arrowLeft=-W*2;break;case"right-bottom":p.top=K-bt,p.left=De+gt,p.arrowTop=W,p.arrowLeft=-W*2;break}},C.__waitImages=function(){var p=this,M=this.content.querySelectorAll("img");if(M.length>0){var W=[];M.forEach(function(K){W.push(new Promise(function(Ce){K.onload=Ce,K.onerror=Ce}))}),Promise.all(W).then(function(){if(p.prop.state===bi.SHOWING||p.prop.state===bi.READY){var K=p.container.getBoundingClientRect();p.prop.width=K.right-K.left,p.prop.height=K.bottom-K.top,p.move(p.config)}})}},x}(at),FT=function(P){l(x,P);function x(A){var p;p=P.call(this,A)||this;var M=new o0(p.psv,{arrow:0,border:0});return p.size={arrow:parseInt(te(M.arrow,"borderTopWidth"),10),border:parseInt(te(M.container,"borderTopLeftRadius"),10)},M.destroy(),p}var C=x.prototype;return C.destroy=function(){delete this.size,P.prototype.destroy.call(this)},C.create=function(p){var M=new o0(this.psv,this.size);return M.show(p),M},x}(Mu);i.Cache.enabled=!0;var UT=function(P){l(x,P);function x(A){var p;if(p=P.call(this)||this,V.load(),!V.isWebGLSupported)throw new d("WebGL is not supported.");if(V.maxTextureWidth===0)throw new d("Unable to detect system capabilities");return p.prop={ready:!1,uiRefresh:!1,needsUpdate:!1,fullscreen:!1,direction:new i.Vector3(0,0,w),vFov:null,hFov:null,aspect:null,autorotateEnabled:!1,animationPromise:null,loadingPromise:null,littlePlanet:!1,idleTime:-1,objectsObservers:{},size:{width:0,height:0},panoData:{fullWidth:0,fullHeight:0,croppedWidth:0,croppedHeight:0,croppedX:0,croppedY:0,poseHeading:0,posePitch:0,poseRoll:0}},p.config=ST(A),p.parent=typeof A.container=="string"?document.getElementById(A.container):A.container,p.parent[E]=c(p),p.container=document.createElement("div"),p.container.classList.add("psv-container"),p.parent.appendChild(p.container),p.adapter=new p.config.adapter[0](c(p),p.config.adapter[1]),p.children=[],p.plugins={},p.renderer=new NT(c(p)),p.textureLoader=new kT(c(p)),p.eventsHandler=new DT(c(p)),p.dataHelper=new PT(c(p)),p.loader=new TT(c(p)),p.navbar=new MT(c(p)),p.panel=new AT(c(p)),p.tooltip=new FT(c(p)),p.notification=new ET(c(p)),p.overlay=new xT(c(p)),p.dynamics={zoom:new Y(function(M){p.prop.vFov=p.dataHelper.zoomLevelToFov(M),p.prop.hFov=p.dataHelper.vFovToHFov(p.prop.vFov),p.trigger(_.ZOOM_UPDATED,M)},p.config.defaultZoomLvl,0,100),position:new ge({longitude:new Y(null,p.config.defaultLong,0,2*Math.PI,!0),latitude:p.prop.littlePlanet?new Y(null,p.config.defaultLat,0,Math.PI*2,!0):new Y(null,p.config.defaultLat,-Math.PI/2,Math.PI/2)},function(M){p.dataHelper.sphericalCoordsToVector3(M,p.prop.direction),p.trigger(_.POSITION_UPDATED,M)})},p.__updateSpeeds(),p.eventsHandler.init(),p.__resizeRefresh=be(function(){return p.refreshUi("resize")},500),p.resize(p.config.size),p.config.plugins.forEach(function(M){var W=M[0],K=M[1];p.plugins[W.id]=new W(c(p),K)}),we(p.plugins,function(M){return M.init==null?void 0:M.init()}),p.navbar.setButtons(p.config.navbar),p.config.panorama&&p.setPanorama(p.config.panorama),ne(p.container,"psv--is-touch",V.isTouchEnabled.initial),V.isTouchEnabled.promise.then(function(M){return ne(p.container,"psv--is-touch",M)}),p.once(_.RENDER,function(){p.config.navbar&&(p.container.classList.add("psv--has-navbar"),p.navbar.show()),rt(p.config.autorotateDelay)||(p.prop.idleTime=performance.now()),p.prop.ready=!0,setTimeout(function(){p.refreshUi("init"),p.trigger(_.READY)},0)}),p}var C=x.prototype;return C.destroy=function(){this.__stopAll(),this.stopKeyboardControl(),this.exitFullscreen(),we(this.plugins,function(p){return p.destroy()}),delete this.plugins,this.children.slice().forEach(function(p){return p.destroy()}),this.children.length=0,this.eventsHandler.destroy(),this.renderer.destroy(),this.textureLoader.destroy(),this.dataHelper.destroy(),this.adapter.destroy(),this.parent.removeChild(this.container),delete this.parent[E],delete this.parent,delete this.container,delete this.loader,delete this.navbar,delete this.panel,delete this.tooltip,delete this.notification,delete this.overlay,delete this.dynamics,delete this.config},C.refreshUi=function(p){var M=this;!this.prop.ready||(this.prop.uiRefresh?this.prop.uiRefresh!=="new"&&(this.prop.uiRefresh="new",setTimeout(function(){M.prop.uiRefresh=!1,M.refreshUi(p)})):(this.prop.uiRefresh=!0,this.children.every(function(W){return W.refreshUi(),M.prop.uiRefresh===!0}),this.prop.uiRefresh=!1))},C.getPlugin=function(p){if(typeof p=="string")return this.plugins[p];var M=Ze(p,_u);return M?this.plugins[M.id]:void 0},C.getPosition=function(){return this.dataHelper.cleanPosition(this.dynamics.position.current)},C.getZoomLevel=function(){return this.dynamics.zoom.current},C.getSize=function(){return o({},this.prop.size)},C.isAutorotateEnabled=function(){return this.prop.autorotateEnabled},C.isFullscreenEnabled=function(){return V.fullscreenEvent?Ge(this.container):this.prop.fullscreen},C.needsUpdate=function(){this.prop.needsUpdate=!0},C.autoSize=function(){(this.container.clientWidth!==this.prop.size.width||this.container.clientHeight!==this.prop.size.height)&&(this.prop.size.width=Math.round(this.container.clientWidth),this.prop.size.height=Math.round(this.container.clientHeight),this.prop.aspect=this.prop.size.width/this.prop.size.height,this.prop.hFov=this.dataHelper.vFovToHFov(this.prop.vFov),this.trigger(_.SIZE_UPDATED,this.getSize()),this.__resizeRefresh())},C.setPanorama=function(p,M){var W,K=this;M===void 0&&(M={}),this.textureLoader.abortLoading(),(W=this.prop.transitionAnimation)==null||W.cancel(),this.prop.ready||["sphereCorrection","panoData","overlay","overlayOpacity"].forEach(function(gt){gt in M||(M[gt]=K.config[gt])}),(M.transition===void 0||M.transition===!0)&&(M.transition=f),M.showLoader===void 0&&(M.showLoader=!0),M.caption===void 0&&(M.caption=this.config.caption),M.description===void 0&&(M.description=this.config.description),!M.panoData&&typeof this.config.panoData=="function"&&(M.panoData=this.config.panoData);var Ce=oe(M),De="zoom"in M;(Ce||De)&&this.__stopAll(),this.hideError(),this.config.panorama=p,this.config.caption=M.caption,this.config.description=M.description;var $e=function(Bt){if(K.loader.hide(),K.prop.loadingPromise=null,zt(Bt))return!1;if(Bt)throw K.navbar.setCaption(""),K.showError(K.config.lang.loadError),console.error(Bt),Bt;return K.resetIdleTimer(),K.setOverlay(M.overlay,M.overlayOpacity),K.navbar.setCaption(K.config.caption),!0};this.navbar.setCaption("<em>"+(this.config.loadingTxt||"")+"</em>"),(M.showLoader||!this.prop.ready)&&this.loader.show();var bt=this.adapter.loadTexture(this.config.panorama,M.panoData).then(function(gt){if(gt.panorama!==K.config.panorama)throw K.adapter.disposeTexture(gt),mt();return gt});return!M.transition||!this.prop.ready||!this.adapter.supportsTransition(this.config.panorama)?this.prop.loadingPromise=bt.then(function(gt){K.renderer.show(),K.renderer.setTexture(gt),K.renderer.setPanoramaPose(gt.panoData),K.renderer.setSphereCorrection(M.sphereCorrection),De&&K.zoom(M.zoom),Ce&&K.rotate(M)}).then($e,$e):this.prop.loadingPromise=bt.then(function(gt){return K.loader.hide(),K.prop.transitionAnimation=K.renderer.transition(gt,M),K.prop.transitionAnimation}).then(function(gt){if(K.prop.transitionAnimation=null,!gt)throw mt()}).then($e,$e),this.prop.loadingPromise},C.setOverlay=function(p,M){var W=this;return M===void 0&&(M=1),p?this.adapter.constructor.supportsOverlay?this.adapter.loadTexture(p,function(K){var Ce=W.prop.panoData,De=K.width/Ce.croppedWidth;return{fullWidth:De*Ce.fullWidth,fullHeight:De*Ce.fullHeight,croppedWidth:De*Ce.croppedWidth,croppedHeight:De*Ce.croppedHeight,croppedX:De*Ce.croppedX,croppedY:De*Ce.croppedY}},!1).then(function(K){W.renderer.setOverlay(K,M)}):Promise.reject(new d(this.adapter.constructor.id+" adapter does not supports overlay")):(this.adapter.constructor.supportsOverlay&&this.renderer.setOverlay(null,0),Promise.resolve())},C.setOptions=function(p){var M=this,W=o({},this.config,p);we(p,function(K,Ce){if(ad[Ce]){Ut(ad[Ce]);return}if(!Object.prototype.hasOwnProperty.call(qi,Ce))throw new d("Unknown option "+Ce);if(r0[Ce])throw new d(r0[Ce]);switch(od[Ce]?M.config[Ce]=od[Ce](K,W):M.config[Ce]=K,Ce){case"overlay":case"overlayOpacity":M.setOverlay(M.config.overlay,M.config.overlayOpacity);break;case"caption":case"description":M.navbar.setCaption(M.config.caption);break;case"size":M.resize(K);break;case"sphereCorrection":M.renderer.setSphereCorrection(K);break;case"navbar":case"lang":M.navbar.setButtons(M.config.navbar);break;case"moveSpeed":case"zoomSpeed":M.__updateSpeeds();break;case"minFov":case"maxFov":M.dynamics.zoom.setValue(M.dataHelper.fovToZoomLevel(M.prop.vFov)),M.trigger(_.ZOOM_UPDATED,M.getZoomLevel());break;case"canvasBackground":M.renderer.canvasContainer.style.background=M.config.canvasBackground;break;case"autorotateIdle":M.resetIdleTimer();break}}),this.needsUpdate(),this.refreshUi("set options"),this.trigger(_.CONFIG_CHANGED,Object.keys(p))},C.setOption=function(p,M){var W;this.setOptions((W={},W[p]=M,W))},C.resetIdleTimer=function(){this.prop.idleTime=this.config.autorotateIdle?performance.now():-1},C.disableIdleTimer=function(){this.prop.idleTime=-1},C.startAutorotate=function(p){p===void 0&&(p=!1),!(p&&!this.isAutorotateEnabled())&&(!p&&this.isAutorotateEnabled()||(p||this.__stopAll(),this.dynamics.position.roll({longitude:this.config.autorotateSpeed<0},Math.abs(this.config.autorotateSpeed/this.config.moveSpeed)),this.dynamics.position.goto({latitude:this.config.autorotateLat},Math.abs(this.config.autorotateSpeed/this.config.moveSpeed)),this.config.autorotateZoomLvl!==null&&this.dynamics.zoom.goto(this.config.autorotateZoomLvl),this.prop.autorotateEnabled=!0,p||this.trigger(_.AUTOROTATE,!0)))},C.stopAutorotate=function(){this.isAutorotateEnabled()&&(this.dynamics.position.stop(),this.dynamics.zoom.stop(),this.prop.autorotateEnabled=!1,this.trigger(_.AUTOROTATE,!1))},C.toggleAutorotate=function(){this.isAutorotateEnabled()?this.stopAutorotate():this.startAutorotate()},C.showError=function(p){this.overlay.show({id:k.ERROR,image:RT,text:p,dissmisable:!1})},C.hideError=function(){this.overlay.hide(k.ERROR)},C.rotate=function(p){var M=this.trigger(_.BEFORE_ROTATE,p);if(!M.isDefaultPrevented()){var W=this.change(R.GET_ROTATE_POSITION,this.dataHelper.cleanPosition(p));this.dynamics.position.setValue(W)}},C.animate=function(p){var M=this;this.__stopAll();var W=oe(p),K=p.zoom!==void 0,Ce={},De;if(W){var $e=this.change(R.GET_ANIMATE_POSITION,this.dataHelper.cleanPosition(p)),bt=this.getPosition(),gt=ve(bt.longitude,$e.longitude);Ce.longitude={start:bt.longitude,end:bt.longitude+gt},Ce.latitude={start:bt.latitude,end:$e.latitude},De=this.dataHelper.speedToDuration(p.speed,U(bt,$e))}if(K){var Bt=Math.abs(p.zoom-this.getZoomLevel());Ce.zoom={start:this.getZoomLevel(),end:p.zoom},De||(De=this.dataHelper.speedToDuration(p.speed,Math.PI/4*Bt/100))}return De?(this.prop.animationPromise=new ia({properties:Ce,duration:De,easing:"inOutSine",onTick:function(Tn){W&&M.rotate(Tn),K&&M.zoom(Tn.zoom)}}),this.prop.animationPromise.then(function(){M.prop.animationPromise=null,M.resetIdleTimer()}),this.prop.animationPromise):(W&&this.rotate(p),K&&this.zoom(p.zoom),new ia)},C.stopAnimation=function(){return this.prop.animationPromise?(this.prop.animationPromise.cancel(),this.prop.animationPromise):Promise.resolve()},C.zoom=function(p){this.dynamics.zoom.setValue(p)},C.zoomIn=function(p){p===void 0&&(p=1),this.dynamics.zoom.step(p)},C.zoomOut=function(p){p===void 0&&(p=1),this.dynamics.zoom.step(-p)},C.resize=function(p){var M=this;["width","height"].forEach(function(W){p&&p[W]&&(/^[0-9.]+$/.test(p[W])&&(p[W]+="px"),M.parent.style[W]=p[W])}),this.autoSize()},C.enterFullscreen=function(){V.fullscreenEvent?N(this.container):(this.container.classList.add("psv-container--fullscreen"),this.autoSize(),this.eventsHandler.__fullscreenToggled(!0))},C.exitFullscreen=function(){this.isFullscreenEnabled()&&(V.fullscreenEvent?B():(this.container.classList.remove("psv-container--fullscreen"),this.autoSize(),this.eventsHandler.__fullscreenToggled(!1)))},C.toggleFullscreen=function(){this.isFullscreenEnabled()?this.exitFullscreen():this.enterFullscreen()},C.startKeyboardControl=function(){this.eventsHandler.enableKeyboard()},C.stopKeyboardControl=function(){this.eventsHandler.disableKeyboard()},C.observeObjects=function(p,M){var W=this;return this.prop.objectsObservers[p]={listener:M},function(){delete W.prop.objectsObservers[p]}},C.__stopAll=function(){return this.trigger(_.STOP_ALL),this.disableIdleTimer(),this.stopAutorotate(),this.stopAnimation()},C.__updateSpeeds=function(){this.dynamics.zoom.setSpeed(this.config.zoomSpeed*50),this.dynamics.position.setSpeed(i.MathUtils.degToRad(this.config.moveSpeed*50))},x}(r.EventEmitter);n.AbstractAdapter=h,n.AbstractButton=ut,n.AbstractComponent=at,n.AbstractPlugin=_u,n.CONSTANTS=H,n.DEFAULTS=qi,n.EquirectangularAdapter=Oe,n.PSVError=d,n.SYSTEM=V,n.Viewer=UT,n.registerButton=s0,n.utils=pe,Object.defineProperty(n,"__esModule",{value:!0})})})(Ym,Ym.exports);const UH={id:"viewer",style:{width:"100vw",height:"100vh"}},BH={__name:"Vr",setup(t){return fn(()=>{new Ym.exports.Viewer({container:document.querySelector("#viewer"),panorama:"http://localhost:3003/gh/flysme/images_service@master/20221122/youning_imgYN0068.7jxemfjk6t00.jpg",navbar:[]})}),(e,n)=>(ie(),he("div",UH))}},zH=[{path:"/",component:()=>ha(()=>import("./HomePage.18f41921.js"),["assets/HomePage.18f41921.js","assets/HomePage.5d299e15.css","assets/ScrollTrigger.00c83cd0.js"]),meta:{title:"\u9996\u9875"}},{path:"/case",component:()=>ha(()=>import("./CasePage.91e17690.js"),["assets/CasePage.91e17690.js","assets/CasePage.6bff5c8b.css","assets/ScrollTrigger.00c83cd0.js"]),meta:{title:"\u9996\u9875"}},{path:"/case_detail/:id",component:()=>ha(()=>import("./index.cd7dfad3.js"),[]),meta:{title:"\u6848\u4F8B\u8BE6\u60C5"}},{path:"/service_flow",component:()=>ha(()=>import("./ServiceFlowPage.e343a544.js"),["assets/ServiceFlowPage.e343a544.js","assets/ServiceFlowPage.66965ff9.css"]),meta:{title:"\u670D\u52A1\u6D41\u7A0B"}},{path:"/team",component:()=>ha(()=>import("./TeamPage.dfb2b920.js"),[]),meta:{title:"\u56E2\u961F\u4ECB\u7ECD"}},{path:"/vr",component:BH,meta:{title:"\u5168\u666F\u9884\u89C8"}},{path:"/about",component:()=>ha(()=>import("./AboutPage.03060381.js"),[]),meta:{title:"\u5173\u4E8E\u6211\u4EEC"}},{path:"/service_flow",component:()=>ha(()=>import("./ServiceFlowPage.e343a544.js"),["assets/ServiceFlowPage.e343a544.js","assets/ServiceFlowPage.66965ff9.css"]),meta:{title:"\u670D\u52A1\u6D41\u7A0B"}}],n0=Mk({history:BN(),routes:zH});n0.beforeEach((t,e)=>{document.title=t.meta.title});n0.afterEach(()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0});const i0=D_(wC);i0.use(wN);i0.use(n0);i0.mount("#app");export{Rt as A,Xv as B,Yv as C,HH as D,Ym as E,At as F,mC as _,fn as a,kc as b,KE as c,Le as d,tn as e,he as f,We as g,Fc as h,pt as i,Me as j,bn as k,VH as l,Je as m,rn as n,Nc as o,al as p,jn as q,de as r,ie as s,je as t,rl as u,Mt as v,Ke as w,Zt as x,$ as y,qe as z};
